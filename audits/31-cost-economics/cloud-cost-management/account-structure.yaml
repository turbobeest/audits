audit:
  id: cost-economics.cloud-cost-management.account-structure
  name: Account Structure Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: cost-economics
  category_number: 31
  subcategory: cloud-cost-management
  tier: expert
  estimated_duration: 3-4 hours  # median: 3h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: organizational
  default_profiles:
  - full
  - finops
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit examines cloud account/subscription/project structure
    and its effectiveness for cost management. It evaluates hierarchy
    design, account strategy, billing consolidation, and alignment
    with organizational and cost allocation needs.
  why_it_matters: |
    Account structure is foundational to cost management. A well-designed
    structure enables clear cost attribution, appropriate governance,
    and efficient billing. Poor structure creates confusion, hinders
    visibility, and complicates chargeback.
  when_to_run:
  - Annual structure review
  - During cloud migrations
  - After organizational changes
  - When implementing FinOps
prerequisites:
  required_artifacts:
  - type: org-structure
    description: Cloud organization hierarchy
  - type: account-inventory
    description: List of all accounts/subscriptions
  - type: business-structure
    description: Organizational hierarchy
  access_requirements:
  - Access to AWS Organizations or equivalent
  - Access to account inventory
  - Access to organizational charts
discovery:
  structure_patterns:
  - pattern: Workload-based
    description: Accounts per application/workload
  - pattern: Environment-based
    description: Accounts per environment (dev/staging/prod)
  - pattern: Team-based
    description: Accounts per team or business unit
  - pattern: Hybrid
    description: Combination of patterns
  file_patterns:
  - glob: '**/*.tf'
    purpose: Terraform files
  - glob: '**/cloudformation/**/*.yaml'
    purpose: CloudFormation templates
  - glob: '**/*cost*.yaml'
    purpose: Cost configuration files
  - glob: '**/*budget*.yaml'
    purpose: Budget configuration files
  - glob: '**/*tag*.yaml'
    purpose: Tagging policy files
  code_patterns:
  - pattern: tags\s*[=:]|cost_center|billing|budget
    type: regex
    scope: config
    purpose: Cost/billing references
  - pattern: reserved_instance|spot_instance|savings_plan
    type: regex
    scope: config
    purpose: Cost optimization patterns
knowledge_sources:
  specifications:
  - id: aws-organizations
    name: AWS Organizations Best Practices
    url: https://docs.aws.amazon.com/organizations/latest/userguide/orgs_best-practices.html
    offline_cache: true
    priority: required
  guides:
  - id: multi-account-strategy
    name: AWS Multi-Account Strategy
    url: https://aws.amazon.com/blogs/industries/best-practices-for-aws-multi-account-strategy/
    offline_cache: true
tooling:
  aws_tools:
  - tool: AWS Organizations
    purpose: Organization hierarchy management
    command: aws organizations describe-organization
  - tool: AWS Control Tower
    purpose: Account governance
signals:
  critical:
  - id: ACCT-CRIT-001
    signal: All resources in single account
    evidence_pattern: No multi-account structure
    explanation: |
      A single account for all workloads provides no natural
      cost boundaries, makes attribution difficult, and limits
      governance options.
    remediation: Implement multi-account strategy
  high:
  - id: ACCT-HIGH-001
    signal: Account structure not aligned with cost attribution needs
    evidence_pattern: Cannot attribute costs to business units
    explanation: |
      When account structure does not match how costs need to
      be attributed, complex tagging or manual allocation is
      required, introducing errors and effort.
    remediation: Align account structure with attribution needs
  - id: ACCT-HIGH-002
    signal: Billing not consolidated appropriately
    evidence_pattern: Separate payers losing volume discounts
    explanation: |
      Consolidated billing enables volume discounts and RI/SP
      sharing. Non-consolidated billing fragments spend and
      reduces discount potential.
    remediation: Consolidate billing where appropriate
  medium:
  - id: ACCT-MED-001
    signal: Account proliferation without governance
    evidence_pattern: Excessive accounts without clear purpose
    remediation: Implement account governance and lifecycle
  - id: ACCT-MED-002
    signal: Inconsistent account naming conventions
    evidence_pattern: No standardized naming
    remediation: Implement naming conventions
  low:
  - id: ACCT-LOW-001
    signal: Account structure not documented
    evidence_pattern: No documentation of structure rationale
    remediation: Document account structure and strategy
  positive:
  - id: ACCT-POS-001
    signal: Account structure aligned with business and cost needs
  - id: ACCT-POS-002
    signal: Consolidated billing maximizing discounts
  - id: ACCT-POS-003
    signal: Account lifecycle governance in place
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Map current structure
    description: |
      Document the current account/subscription hierarchy
      and organization.
    duration_estimate: 30 min
    commands:
    - purpose: List organization structure
      command: aws organizations list-roots
    - purpose: List accounts
      command: aws organizations list-accounts
    expected_findings:
    - Organization hierarchy
    - Account inventory
  - id: '2'
    name: Analyze structure pattern
    description: |
      Identify the pattern (or lack thereof) in the account
      structure.
    duration_estimate: 30 min
    expected_findings:
    - Structure pattern identified
    - Consistency assessment
  - id: '3'
    name: Assess business alignment
    description: |
      Evaluate alignment between account structure and
      organizational/cost attribution needs.
    duration_estimate: 45 min
    expected_findings:
    - Alignment assessment
    - Gap identification
  - id: '4'
    name: Review billing consolidation
    description: |
      Assess billing consolidation and its impact on
      discounts and reporting.
    duration_estimate: 30 min
    expected_findings:
    - Billing structure
    - Discount optimization
  - id: '5'
    name: Evaluate governance
    description: |
      Review account creation, lifecycle, and governance
      processes.
    duration_estimate: 30 min
    expected_findings:
    - Governance assessment
    - Process maturity
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Structure Analysis
    - Alignment Assessment
    - Governance Review
    - Recommendations
  - type: org_diagram
    format: visual
    description: Account hierarchy diagram
  confidence_guidance:
    high: Complete organization access
    medium: Partial visibility
    low: Documentation only
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: aws-organizations
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Requires comprehensive review
    full:
      included: true
      priority: 3
    finops:
      included: true
      priority: 2
closeout_checklist:
- id: acct-001
  item: Account structure documented
  level: CRITICAL
  verification: manual
  expected: Structure documented
- id: acct-002
  item: Alignment with business assessed
  level: BLOCKING
  verification: manual
  expected: Assessment complete
- id: acct-003
  item: Recommendations provided
  level: WARNING
  verification: manual
  expected: Recommendations documented
governance:
  applicable_to:
    archetypes:
    - cloud-native
    - hybrid
    - enterprise
  compliance_frameworks:
  - framework: FinOps Foundation
    controls:
    - Cloud Policy and Governance
  - framework: AWS Well-Architected
    controls:
    - COST-01
relationships:
  commonly_combined:
  - cost-economics.cost-allocation.chargeback
  - cost-economics.cost-visibility.cost-attribution
  - cost-economics.cloud-cost-management.cost-governance-policies
