audit:
  id: signal-processing-data-acquisition.data-integrity.timestamp-accuracy
  name: Timestamp Accuracy Audit
  version: 1.0.0
  last_updated: '2026-01-22'
  status: active
  category: signal-processing-data-acquisition
  category_number: 40
  subcategory: data-integrity
  tier: expert
  estimated_duration: 1-2 hours  # median: 1h
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: hardware-software
  default_profiles:
  - full
  - signal-processing
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit evaluates timestamp accuracy for signal data
    time correlation. It examines:
    - Timestamp resolution and precision
    - Timestamp source and synchronization
    - Latency between event and timestamp
    - Timestamp drift and correction
    - Time format and epoch conventions
    - Multi-source time alignment
  why_it_matters: |
    Timestamp accuracy enables data correlation:
    - Precise timestamps allow multi-channel correlation
    - Insufficient resolution limits timing analysis
    - Latency between event and timestamp adds error
    - Clock drift causes time alignment degradation
    - IEEE 1588 PTP enables sub-microsecond precision

    Inaccurate timestamps make time-based analysis unreliable
    and prevent correlation of data from different sources.
  when_to_run:
  - Data acquisition system design
  - Distributed system integration
  - Time correlation applications
  - Timing accuracy verification
prerequisites:
  required_artifacts:
  - type: source_code
    description: Timestamp capture code
  - type: timing_requirements
    description: Timestamp accuracy requirements
  - type: clock_documentation
    description: Time source documentation
  access_requirements:
  - Access to timestamp code
  - Clock source documentation
  - Timing measurement capability
discovery:
  code_patterns:
  - pattern: (timestamp|time_stamp|ts|epoch)
    type: regex
    scope: source
    purpose: Detect timestamp handling
  - pattern: (clock_gettime|gettimeofday|QueryPerformanceCounter)
    type: regex
    scope: source
    purpose: Detect time source
  - pattern: (ptp|ntp|gps).*time
    type: regex
    scope: source
    purpose: Detect time synchronization
  file_patterns:
  - glob: '**/time*.{c,h,cpp,py}'
    purpose: Time handling files
  - glob: '**/timestamp*.{c,h,cpp,py}'
    purpose: Timestamp files
  - glob: '**/sync*.{c,h,cpp,py}'
    purpose: Synchronization files
knowledge_sources:
  specifications:
  - id: ieee-1588
    name: IEEE 1588 Precision Time Protocol
    url: https://standards.ieee.org/standard/1588-2019.html
    offline_cache: true
    priority: recommended
signals:
  critical:
  - id: TS-CRIT-001
    signal: Timestamp resolution insufficient for application
    evidence_indicators:
    - Resolution > required timing accuracy
    - Events closer than resolution indistinguishable
    - Course timestamp for fine timing application
    explanation: |
      Timestamp resolution limits the ability to distinguish
      event timing. If events can occur closer than resolution,
      their order becomes ambiguous.
    remediation: |
      - Use higher resolution time source
      - Consider hardware timestamping
      - Match resolution to application needs
      - Document resolution limitations
    cwe: CWE-682
  - id: TS-CRIT-002
    signal: Significant latency between event and timestamp
    evidence_indicators:
    - Software timestamp after hardware event
    - Variable latency due to interrupts
    - Timestamp doesn't reflect actual event time
    explanation: |
      Latency between event and timestamp adds systematic
      error. Variable latency adds jitter that cannot be
      compensated.
    remediation: |
      - Use hardware timestamp capture
      - Minimize software latency
      - Characterize and compensate latency
      - Document timestamp latency
  high:
  - id: TS-HIGH-001
    signal: Clock drift affecting long-term accuracy
    evidence_indicators:
    - Timestamp error grows with time
    - No synchronization to reference
    - Correlation degrades over recording
    explanation: |
      Clock drift causes timestamp accuracy to degrade
      over time. Without synchronization, errors accumulate
      and correlation becomes impossible.
    remediation: |
      - Synchronize to external reference
      - Implement PTP or NTP
      - Characterize and compensate drift
      - Limit acquisition duration for accuracy
  - id: TS-HIGH-002
    signal: Timestamps not synchronized across sources
    evidence_indicators:
    - Different time bases for different channels
    - No common time reference
    - Cross-channel timing ambiguous
    explanation: |
      Data from different sources cannot be correlated
      without a common time reference. Independent clocks
      drift relative to each other.
    remediation: |
      - Use common time reference
      - Implement PTP for distributed systems
      - Synchronize before acquisition
      - Verify synchronization accuracy
  medium:
  - id: TS-MED-001
    signal: Time format ambiguous or undocumented
    evidence_indicators:
    - Epoch reference not specified
    - Time zone handling unclear
    - Format not standardized
    explanation: |
      Ambiguous time format leads to interpretation errors.
      Epoch, time zone, and format must be explicit for
      correct timestamp interpretation.
    remediation: |
      - Use standard format (ISO 8601, Unix epoch)
      - Document epoch reference
      - Specify time zone handling
      - Include format in data specification
  low:
  - id: TS-LOW-001
    signal: Timestamp accuracy not verified
    evidence_indicators:
    - Accuracy assumed but not measured
    - No calibration or verification
    - Actual accuracy unknown
    explanation: |
      Without verification, actual timestamp accuracy is
      unknown. Nominal specifications may not reflect
      system performance.
    remediation: |
      - Measure actual timestamp accuracy
      - Verify against reference
      - Document measured accuracy
      - Add to calibration procedure
  positive:
  - id: TS-POS-001
    signal: Well-synchronized timestamps
    evidence_indicators:
    - Hardware timestamping
    - Synchronized to reference
    - Accuracy verified
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: timing-engineer
  steps:
  - id: '1'
    name: Timestamp Implementation Review
    description: |
      Review timestamp capture and handling.
    duration_estimate: 30 min
    commands:
    - purpose: Find timestamp code
      command: |
        grep -rniE "(timestamp|clock_gettime|time_stamp)" \
          --include="*.c" --include="*.h" --include="*.py" . 2>/dev/null | head -30
    expected_findings:
    - Time source
    - Resolution
    - Synchronization
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Timestamp Analysis
    - Accuracy Assessment
    - Recommendations
profiles:
  membership:
    quick:
      included: false
    full:
      included: true
      priority: 2
    signal-processing:
      included: true
      priority: 2
closeout_checklist:
- id: ts-001
  item: Timestamp resolution meets requirements
  level: CRITICAL
  verification: manual
  verification_notes: Verify resolution sufficient for timing needs
  expected: Confirmed by reviewer
- id: ts-002
  item: Timestamps synchronized to reference
  level: BLOCKING
  verification: manual
  verification_notes: Verify synchronization for distributed systems
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - data-acquisition
    - distributed-systems
    - scientific-instruments
relationships:
  commonly_combined:
  - signal-processing.sampling.sampling-synchronization
  - signal-processing.sampling.clock-accuracy
  - signal-processing.data-integrity.data-loss-detection

# Glossary of domain-specific terms:
glossary:
  "mu (step size)": "Learning rate parameter in adaptive filters, controls convergence speed vs stability"
  "LMS": "Least Mean Squares - adaptive filter algorithm that minimizes mean squared error"
  "FFT": "Fast Fourier Transform - efficient algorithm to compute discrete Fourier transform"
