audit:
  id: signal-processing-data-acquisition.algorithm-verification.numerical-precision
  name: Numerical Precision Audit
  version: 1.0.0
  last_updated: '2026-01-22'
  status: active
  category: signal-processing-data-acquisition
  category_number: 40
  subcategory: algorithm-verification
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: software
  default_profiles:
  - full
  - signal-processing
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit evaluates numerical precision in signal processing
    algorithms. It examines:
    - Data type selection (float, double, fixed-point)
    - Accumulator precision for summations
    - Roundoff error accumulation
    - Numerical stability of algorithms
    - Fixed-point scaling strategies
    - Precision vs. performance trade-offs
  why_it_matters: |
    Numerical precision affects algorithm accuracy:
    - Single precision may accumulate significant error
    - Fixed-point requires careful scaling
    - Long summations accumulate roundoff error
    - Numerically unstable algorithms amplify errors
    - Precision errors can dominate measurement error

    Understanding and managing numerical precision is essential
    for accurate signal processing results.
  when_to_run:
  - Algorithm implementation
  - Fixed-point conversion
  - Precision troubleshooting
  - High-accuracy applications
prerequisites:
  required_artifacts:
  - type: source_code
    description: Algorithm implementation
  - type: requirements
    description: Precision requirements
  access_requirements:
  - Access to algorithm source
  - Data type specifications
  - Accuracy requirements
discovery:
  code_patterns:
  - pattern: (float|double|int32|int64|q15|q31)
    type: regex
    scope: source
    purpose: Detect data types
  - pattern: (accumulate|sum|mean).*+=?
    type: regex
    scope: source
    purpose: Detect accumulation operations
  - pattern: (scale|shift|round)
    type: regex
    scope: source
    purpose: Detect scaling operations
  file_patterns:
  - glob: '**/algorithm*.{c,h,cpp,py}'
    purpose: Algorithm files
  - glob: '**/fixed*.{c,h,cpp}'
    purpose: Fixed-point files
  - glob: '**/math*.{c,h,cpp}'
    purpose: Math implementation files
knowledge_sources:
  specifications:
  - id: ieee-754
    name: IEEE 754 Floating-Point Standard
    url: https://standards.ieee.org/standard/754-2019.html
    offline_cache: true
    priority: required
  guides:
  - id: goldberg-floating
    name: What Every Computer Scientist Should Know About Floating-Point
    url: https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html
    offline_cache: true
signals:
  critical:
  - id: PREC-CRIT-001
    signal: Precision errors exceed measurement requirements
    evidence_indicators:
    - Numerical error > measurement accuracy requirement
    - Results vary beyond acceptable tolerance
    - Accumulated error dominates result
    explanation: |
      When numerical precision error exceeds measurement accuracy
      requirements, the algorithm limits system accuracy regardless
      of input data quality.
    remediation: |
      - Use higher precision data types
      - Implement Kahan summation for long sums
      - Use double precision for accumulators
      - Reduce intermediate precision loss
    cwe: CWE-682
  - id: PREC-CRIT-002
    signal: Numerically unstable algorithm
    evidence_indicators:
    - Small input changes cause large output changes
    - Results vary dramatically with input perturbation
    - Algorithm amplifies roundoff error
    explanation: |
      Numerically unstable algorithms amplify roundoff error,
      producing unreliable results. Stability should be
      analyzed for critical algorithms.
    remediation: |
      - Use numerically stable algorithm variant
      - Implement compensated summation
      - Use higher precision for sensitive operations
      - Consider algorithm reformulation
  high:
  - id: PREC-HIGH-001
    signal: Accumulator precision insufficient
    evidence_indicators:
    - Single precision accumulator for many samples
    - Error grows with sample count
    - Sum precision < element precision
    explanation: |
      Long summations in single precision accumulate roundoff
      error. Accumulator should have higher precision than
      individual elements to maintain accuracy.
    remediation: |
      - Use double precision accumulator
      - Implement Kahan compensated summation
      - Break long sums into smaller blocks
      - Verify accumulated error is acceptable
  - id: PREC-HIGH-002
    signal: Fixed-point overflow/precision loss
    evidence_indicators:
    - Scaling causes precision loss
    - Intermediate results overflow
    - Fixed-point range insufficient
    explanation: |
      Fixed-point arithmetic requires careful scaling to avoid
      overflow while maintaining precision. Poor scaling wastes
      precision or causes overflow.
    remediation: |
      - Analyze value ranges for proper scaling
      - Use wider intermediate types
      - Implement saturating arithmetic
      - Document scaling strategy
  medium:
  - id: PREC-MED-001
    signal: Data type not optimized for application
    evidence_indicators:
    - Double precision where single adequate
    - Single precision where double needed
    - No precision analysis performed
    explanation: |
      Data type should match precision requirements. Over-specifying
      wastes resources; under-specifying causes errors.
    remediation: |
      - Analyze precision requirements
      - Select appropriate data type
      - Document precision trade-offs
      - Verify adequate but not excessive
  low:
  - id: PREC-LOW-001
    signal: Precision considerations not documented
    evidence_indicators:
    - Data type selection not justified
    - Precision analysis not recorded
    - Error bounds not specified
    explanation: |
      Undocumented precision decisions make it difficult to
      verify adequacy or troubleshoot errors.
    remediation: |
      - Document precision requirements
      - Record data type rationale
      - Specify error bounds
      - Include in algorithm documentation
  positive:
  - id: PREC-POS-001
    signal: Well-analyzed numerical precision
    evidence_indicators:
    - Precision appropriate for requirements
    - Stability analyzed
    - Documentation complete
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: numerical-analyst
  steps:
  - id: '1'
    name: Precision Analysis
    description: |
      Analyze numerical precision in algorithm.
    duration_estimate: 45 min
    commands:
    - purpose: Find data types used
      command: |
        grep -rniE "(float|double|int32|q15|q31)" \
          --include="*.c" --include="*.h" --include="*.py" . 2>/dev/null | head -30
    - purpose: Find accumulation operations
      command: |
        grep -rniE "(sum|accumulate|+=)" \
          --include="*.c" --include="*.h" --include="*.py" . 2>/dev/null | head -20
    expected_findings:
    - Data types
    - Accumulation patterns
    - Scaling operations
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Precision Analysis
    - Stability Assessment
    - Recommendations
profiles:
  membership:
    quick:
      included: false
    full:
      included: true
      priority: 2
    signal-processing:
      included: true
      priority: 2
closeout_checklist:
- id: prec-001
  item: Precision meets requirements
  level: CRITICAL
  verification: manual
  verification_notes: Verify numerical error within requirements
  expected: Confirmed by reviewer
- id: prec-002
  item: Algorithm numerically stable
  level: BLOCKING
  verification: manual
  verification_notes: Verify stability with perturbed inputs
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - signal-processing
    - scientific-computing
    - embedded-systems
relationships:
  commonly_combined:
  - signal-processing.algorithm-verification.algorithm-correctness
  - signal-processing.algorithm-verification.overflow-underflow-handling
  - signal-processing.filtering.filter-coefficient-precision

# Glossary of domain-specific terms:
glossary:
  "mu (step size)": "Learning rate parameter in adaptive filters, controls convergence speed vs stability"
  "LMS": "Least Mean Squares - adaptive filter algorithm that minimizes mean squared error"
  "FFT": "Fast Fourier Transform - efficient algorithm to compute discrete Fourier transform"
