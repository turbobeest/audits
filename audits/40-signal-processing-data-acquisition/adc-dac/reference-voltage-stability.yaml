audit:
  id: signal-processing-data-acquisition.adc-dac.reference-voltage-stability
  name: Reference Voltage Stability Audit
  version: 1.0.0
  last_updated: '2026-01-22'
  status: active
  category: signal-processing-data-acquisition
  category_number: 40
  subcategory: adc-dac
  tier: expert
  estimated_duration: 1-2 hours  # median: 1h
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: hardware
  default_profiles:
  - full
  - signal-processing
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit evaluates voltage reference stability that directly
    affects ADC and DAC accuracy. It examines:
    - Reference voltage accuracy and initial tolerance
    - Temperature coefficient and stability
    - Long-term drift and aging
    - Load regulation and noise
    - Reference architecture selection
    - Calibration requirements
  why_it_matters: |
    Reference voltage directly affects conversion accuracy:
    - 1% reference error causes 1% full-scale measurement error
    - Temperature drift causes measurement variation
    - Reference noise limits effective resolution
    - Load changes cause transient errors
    - Long-term drift requires recalibration

    For precision measurement systems, reference quality often
    determines achievable accuracy rather than ADC specifications.
  when_to_run:
  - Precision measurement system design
  - Reference selection and evaluation
  - Temperature characterization
  - Calibration interval planning
  - Accuracy budgeting
prerequisites:
  required_artifacts:
  - type: reference_datasheet
    description: Voltage reference specifications
  - type: requirements
    description: Reference accuracy requirements
  - type: schematic
    description: Reference circuit design
  access_requirements:
  - Access to reference specifications
  - Temperature chamber for characterization
  - Precision measurement equipment
discovery:
  code_patterns:
  - pattern: (vref|VREF|reference)_(voltage|value|config)
    type: regex
    scope: source
    purpose: Detect reference configuration
  - pattern: (temp|temperature)_(coeff|drift|correct)
    type: regex
    scope: source
    purpose: Detect temperature compensation
  - pattern: (reference|vref)_(cal|calibrat)
    type: regex
    scope: source
    purpose: Detect reference calibration
  file_patterns:
  - glob: '**/reference*.{c,h,cpp,py}'
    purpose: Reference configuration files
  - glob: '**/vref*.{c,h,cpp}'
    purpose: Voltage reference files
  - glob: '**/calibrat*.{c,h,py,json}'
    purpose: Calibration files
knowledge_sources:
  specifications:
  - id: ti-vref-guide
    name: Texas Instruments Voltage Reference Guide
    url: https://www.ti.com/lit/ml/slyb165/slyb165.pdf
    offline_cache: true
    priority: required
  guides:
  - id: analog-vref-selection
    name: Analog Devices Reference Selection Guide
    url: https://www.analog.com/media/en/training-seminars/tutorials/MT-087.pdf
    offline_cache: true
  - id: maxim-vref-app
    name: Maxim Voltage Reference Application Notes
    url: https://www.maximintegrated.com/en/design/technical-documents/app-notes/4/4003.html
    offline_cache: true
signals:
  critical:
  - id: REF-CRIT-001
    signal: Reference accuracy exceeds measurement tolerance
    evidence_indicators:
    - Reference tolerance > measurement accuracy budget
    - No calibration to correct initial error
    - Full-scale errors exceed requirements
    explanation: |
      Reference accuracy directly limits measurement accuracy.
      A 0.5% reference error causes 0.5% full-scale error that
      cannot be removed without calibration.
    remediation: |
      - Select more accurate reference
      - Implement gain calibration
      - Use ratio-metric measurement if applicable
      - Document reference contribution to error budget
    cwe: CWE-682
  - id: REF-CRIT-002
    signal: Temperature drift exceeds operating range tolerance
    evidence_indicators:
    - Reference TC * temperature range > accuracy budget
    - No temperature compensation implemented
    - Measurements vary with ambient temperature
    explanation: |
      Temperature coefficient (TC) causes drift over operating range.
      A 10ppm/C reference drifts 1000ppm (0.1%) over 100C range.
      For precision systems, TC dominates the error budget.
    remediation: |
      - Select low-TC reference (< 5 ppm/C for precision)
      - Implement temperature compensation
      - Control reference temperature
      - Limit operating temperature range
    cwe: CWE-682
  high:
  - id: REF-HIGH-001
    signal: Reference noise limits effective resolution
    evidence_indicators:
    - Reference noise > LSB/4
    - ADC noise floor elevated
    - Effective resolution reduced by reference
    explanation: |
      Reference noise directly adds to ADC output noise. If
      reference noise exceeds quantization noise, it limits
      effective resolution regardless of ADC quality.
    remediation: |
      - Select low-noise reference for high resolution
      - Add filtering to reference output
      - Use integrated reference if noise is acceptable
      - Specify reference noise in noise budget
  - id: REF-HIGH-002
    signal: Load regulation affecting reference stability
    evidence_indicators:
    - Reference loaded beyond specification
    - Output varies with ADC conversion
    - Insufficient bypass capacitance
    explanation: |
      ADC sampling causes transient loads that can disturb
      the reference. Poor load regulation causes measurement
      errors correlated with conversion timing.
    remediation: |
      - Add adequate bypass capacitance
      - Buffer reference for heavy loads
      - Verify load regulation specification
      - Allow settling time after load changes
  medium:
  - id: REF-MED-001
    signal: Long-term drift not accounted for
    evidence_indicators:
    - No specification for aging drift
    - Calibration interval not defined
    - Accumulated drift over time
    explanation: |
      References drift over time due to aging. Buried zener types
      drift less than bandgap. Without recalibration, accuracy
      degrades over the system lifetime.
    remediation: |
      - Select reference with specified long-term drift
      - Define calibration interval based on drift
      - Use buried zener for long-term stability
      - Track reference drift over time
  - id: REF-MED-002
    signal: Reference not included in error budget
    evidence_indicators:
    - Error analysis ignores reference
    - Only ADC specifications considered
    - Total error underestimated
    explanation: |
      Reference error contributions must be included in the
      total system error budget. Ignoring reference errors
      leads to unrealistic accuracy expectations.
    remediation: |
      - Include reference in error budget
      - Add initial accuracy, TC, and drift
      - Combine reference and ADC errors properly
      - Document all error sources
  low:
  - id: REF-LOW-001
    signal: Reference selection not documented
    evidence_indicators:
    - Reference choice rationale not recorded
    - Specifications not in design documents
    - Substitution risks unknown
    explanation: |
      Without documentation, reference selection cannot be
      verified as appropriate. Component substitutions may
      use inferior parts without detection.
    remediation: |
      - Document reference selection rationale
      - Record key specifications
      - List acceptable substitutes
      - Include in bill of materials with specs
  positive:
  - id: REF-POS-001
    signal: Well-specified reference with adequate margin
    evidence_indicators:
    - Reference meets requirements with margin
    - Temperature compensation if needed
    - Calibration interval defined
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: precision-engineer
  steps:
  - id: '1'
    name: Reference Specification Review
    description: |
      Review reference specifications against requirements.
    duration_estimate: 30 min
    commands:
    - purpose: Find reference configuration
      command: |
        grep -rniE "(vref|reference)" \
          --include="*.c" --include="*.h" --include="*.py" . 2>/dev/null | head -20
    expected_findings:
    - Reference configuration
    - Voltage values
    - Temperature compensation
  - id: '2'
    name: Error Budget Analysis
    description: |
      Analyze reference contribution to error budget.
    duration_estimate: 30 min
    manual_verification: true
    expected_findings:
    - Reference error contribution
    - Temperature drift calculation
    - Total error budget
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Reference Analysis
    - Error Budget Assessment
    - Recommendations
profiles:
  membership:
    quick:
      included: false
    full:
      included: true
      priority: 3
    signal-processing:
      included: true
      priority: 2
closeout_checklist:
- id: ref-001
  item: Reference accuracy within error budget
  level: CRITICAL
  verification: manual
  verification_notes: Verify reference tolerance within accuracy budget
  expected: Confirmed by reviewer
- id: ref-002
  item: Temperature drift acceptable over operating range
  level: BLOCKING
  verification: manual
  verification_notes: Verify TC * temp range within requirements
  expected: Confirmed by reviewer
- id: ref-003
  item: Reference included in error budget
  level: WARNING
  verification: manual
  verification_notes: Verify error budget includes reference
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - precision-measurement
    - scientific-instruments
    - industrial-control
relationships:
  commonly_combined:
  - signal-processing.adc-dac.adc-resolution-adequacy
  - signal-processing.adc-dac.adc-linearity
  - signal-processing.adc-dac.dac-accuracy

# Glossary of domain-specific terms:
glossary:
  "mu (step size)": "Learning rate parameter in adaptive filters, controls convergence speed vs stability"
  "LMS": "Least Mean Squares - adaptive filter algorithm that minimizes mean squared error"
  "FFT": "Fast Fourier Transform - efficient algorithm to compute discrete Fourier transform"
