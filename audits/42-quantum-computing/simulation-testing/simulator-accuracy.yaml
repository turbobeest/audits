# ============================================================
# AUDIT: Simulator Accuracy
# Category: 42 - Quantum Computing
# Subcategory: simulation-testing
# ============================================================

audit:
  id: "quantum-computing.simulation-testing.simulator-accuracy"
  name: "Quantum Simulator Accuracy Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "quantum-computing"
  category_number: 42
  subcategory: "simulation-testing"

  tier: "expert"
  estimated_duration: "3-5 hours"  # median: 4h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "quantum-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates the accuracy and limitations of quantum simulators used for
    algorithm development and testing. Assesses numerical precision,
    noise modeling fidelity, scalability limits, and validation against
    known results or hardware.

  why_it_matters: |
    Simulators are essential for quantum algorithm development but have
    limitations. Inaccurate simulators give false confidence or miss bugs.
    Understanding simulator accuracy is essential for trusting development
    results and transitioning to hardware.

  when_to_run:
    - "Before trusting simulation results"
    - "When validating algorithms"
    - "When comparing simulators"
    - "During development process setup"

prerequisites:
  required_artifacts:
    - type: "simulator_config"
      description: "Simulator configuration"
    - type: "test_circuits"
      description: "Circuits with known results"
    - type: "benchmark_data"
      description: "Reference results for comparison"

  access_requirements:
    - "Access to simulator"
    - "Benchmark circuits"
    - "Hardware results for validation (optional)"

discovery:
  file_patterns:
    - glob: "**/simulator/**/*.py"
      purpose: "Find simulator code"
    - glob: "**/tests/**/*.py"
      purpose: "Find test cases"

  code_patterns:
    - pattern: "Aer|simulator|statevector"
      type: "keyword"
      scope: "source"
      purpose: "Find simulator usage"

knowledge_sources:
  guides:
    - id: "qiskit-aer"
      name: "Qiskit Aer Simulator"
      url: "https://qiskit.org/documentation/apidoc/aer.html"
      offline_cache: true
      priority: "required"

    - id: "cirq-simulator"
      name: "Cirq Simulator"
      url: "https://quantumai.google/cirq/simulate"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "qiskit-aer"
      purpose: "Quantum simulation"

    - tool: "cirq"
      purpose: "Google quantum simulation"

    - tool: "pennylane"
      purpose: "Differentiable simulation"

signals:
  critical:
    - id: "SA-CRIT-001"
      signal: "Simulator produces incorrect results"
      evidence_indicators:
        - "Known circuits give wrong answers"
        - "Statevector doesn't match theory"
        - "Benchmark failures"
      explanation: |
        Incorrect simulation undermines all development work.
        Bugs or configuration issues must be identified and fixed.
      remediation: |
        Validate against analytically known results.
        Check simulator configuration.
        Try alternative simulator.

    - id: "SA-CRIT-002"
      signal: "Simulator cannot handle circuit size"
      evidence_indicators:
        - "Memory errors on target circuits"
        - "Exponential time growth"
        - "Crashes on larger circuits"
      explanation: |
        Classical simulation scales exponentially with qubit count.
        If target circuits cannot be simulated, development is blocked.
      remediation: "Use tensor network or approximate methods for larger circuits"

  high:
    - id: "SA-HIGH-001"
      signal: "Noise model not validated"
      evidence_indicators:
        - "Noisy simulation diverges from hardware"
        - "Noise model not calibrated"
      remediation: "Validate noise model against hardware results"

    - id: "SA-HIGH-002"
      signal: "Numerical precision issues"
      evidence_indicators:
        - "Small probability differences lost"
        - "Phase precision insufficient"
      remediation: "Increase numerical precision or use symbolic computation"

  medium:
    - id: "SA-MED-001"
      signal: "Simulator limitations not documented"
      remediation: "Document simulator capabilities and limits"

    - id: "SA-MED-002"
      signal: "No validation test suite"
      remediation: "Create benchmark test suite"

  low:
    - id: "SA-LOW-001"
      signal: "Single simulator used"
      remediation: "Validate with multiple simulators"

  positive:
    - id: "SA-POS-001"
      signal: "Simulator validated against benchmarks"
    - id: "SA-POS-002"
      signal: "Noise model matches hardware"
    - id: "SA-POS-003"
      signal: "Limitations documented"

procedure:
  context:
    cognitive_mode: "critical"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Run Benchmark Circuits"
      description: "Test simulator on known circuits"
      duration_estimate: "1 hour"

    - id: "2"
      name: "Validate Against Theory"
      description: "Compare to analytical results"
      duration_estimate: "45 min"

    - id: "3"
      name: "Test Noise Model"
      description: "Validate noisy simulation"
      duration_estimate: "1 hour"

    - id: "4"
      name: "Assess Scalability"
      description: "Test scaling limits"
      duration_estimate: "45 min"

    - id: "5"
      name: "Check Precision"
      description: "Verify numerical accuracy"
      duration_estimate: "30 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "validation_report"
      format: "json"
      description: "Simulator validation results"

closeout_checklist:
  - id: "sa-001"
    item: "Benchmark circuits pass"
    level: "CRITICAL"
    verification: "automated"

  - id: "sa-002"
    item: "Noise model validated"
    level: "BLOCKING"
    verification: "manual"

  - id: "sa-003"
    item: "Limitations documented"
    level: "WARNING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["quantum-systems"]

relationships:
  commonly_combined:
    - "quantum-computing.error-handling.noise-model-accuracy"
    - "quantum-computing.simulation-testing.test-coverage"
  feeds_into:
    - "quantum-computing.simulation-testing.benchmark-comparison"
