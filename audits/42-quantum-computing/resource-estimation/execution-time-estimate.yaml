# ============================================================
# AUDIT: Execution Time Estimate
# Category: 42 - Quantum Computing
# Subcategory: resource-estimation
# ============================================================

audit:
  id: "quantum-computing.resource-estimation.execution-time-estimate"
  name: "Quantum Execution Time Estimate Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "quantum-computing"
  category_number: 42
  subcategory: "resource-estimation"

  tier: "expert"
  estimated_duration: "2-4 hours"  # median: 3h

  completeness: "requires_discovery"
  requires_runtime: false
  destructive: false

execution:
  automatable: "yes"
  severity: "medium"
  scope: "quantum-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Estimates total execution time for quantum algorithms including circuit
    execution, shot repetition, classical processing, queue wait times, and
    job overhead. Assesses feasibility for target applications and optimizes
    for time constraints.

  why_it_matters: |
    Quantum hardware is expensive and often queued. Accurate time estimates
    enable planning, cost estimation, and decision-making about algorithm
    feasibility. Time estimates must include all components, not just
    circuit execution.

  when_to_run:
    - "During project planning"
    - "Before hardware allocation"
    - "When optimizing for speed"
    - "For cost estimation"

prerequisites:
  required_artifacts:
    - type: "quantum_circuits"
      description: "Circuits to estimate"
    - type: "hardware_timing"
      description: "Hardware timing specifications"
    - type: "shot_requirements"
      description: "Required number of shots"

  access_requirements:
    - "Access to circuit code"
    - "Hardware timing data"
    - "Queue information"

discovery:
  file_patterns:
    - glob: "**/circuits/**/*.py"
      purpose: "Find circuit definitions"

  metrics_queries:
    - system: "hardware"
      query: "gate_times, readout_time, reset_time"
      purpose: "Gather timing data"

knowledge_sources:
  guides:
    - id: "ibm-queue"
      name: "IBM Quantum Queue Management"
      url: "https://quantum-computing.ibm.com/docs/manage/"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "time-estimation"
      purpose: "Execution time calculation"

signals:
  critical:
    - id: "ETE-CRIT-001"
      signal: "Execution time exceeds application deadline"
      evidence_threshold: "estimated_time > deadline"
      explanation: |
        Algorithm cannot complete within required timeframe. Must
        optimize for speed or relax deadline requirements.
      remediation: |
        Reduce circuit complexity.
        Use faster hardware.
        Parallelize across multiple QPUs.
        Reduce shot count if acceptable.

    - id: "ETE-CRIT-002"
      signal: "Execution time not estimated"
      evidence_indicators:
        - "No time estimate documented"
        - "Components not analyzed"
      remediation: "Perform comprehensive time estimation"

  high:
    - id: "ETE-HIGH-001"
      signal: "Queue time dominates total time"
      evidence_threshold: "queue_time > 0.8 * total_time"
      remediation: "Consider dedicated access or alternative backend"

    - id: "ETE-HIGH-002"
      signal: "Shot repetition time excessive"
      evidence_indicators:
        - "High shot count"
        - "Slow reset times"
      remediation: "Optimize shot count or use fast-reset hardware"

  medium:
    - id: "ETE-MED-001"
      signal: "Classical processing time significant"
      remediation: "Optimize classical components"

    - id: "ETE-MED-002"
      signal: "Job overhead not minimized"
      remediation: "Batch circuits to reduce overhead"

  low:
    - id: "ETE-LOW-001"
      signal: "Time estimate not documented"
      remediation: "Document time breakdown"

  positive:
    - id: "ETE-POS-001"
      signal: "Execution time within requirements"
    - id: "ETE-POS-002"
      signal: "Comprehensive time breakdown"
    - id: "ETE-POS-003"
      signal: "Optimized for speed"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Calculate Circuit Execution Time"
      description: "Estimate time for single circuit execution"
      duration_estimate: "30 min"

    - id: "2"
      name: "Factor in Shot Repetition"
      description: "Multiply by required shots"
      duration_estimate: "20 min"

    - id: "3"
      name: "Add Classical Processing"
      description: "Include post-processing time"
      duration_estimate: "30 min"

    - id: "4"
      name: "Estimate Queue Time"
      description: "Factor in expected queue wait"
      duration_estimate: "30 min"

    - id: "5"
      name: "Sum Total Time"
      description: "Calculate complete time estimate"
      duration_estimate: "20 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "time_estimate"
      format: "json"
      description: "Detailed time breakdown"

closeout_checklist:
  - id: "ete-001"
    item: "Time within requirements"
    level: "CRITICAL"
    verification: "automated"

  - id: "ete-002"
    item: "All components included"
    level: "BLOCKING"
    verification: "manual"

  - id: "ete-003"
    item: "Optimization opportunities identified"
    level: "WARNING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["quantum-systems"]

relationships:
  commonly_combined:
    - "quantum-computing.resource-estimation.gate-count"
    - "quantum-computing.resource-estimation.circuit-width-depth"
  feeds_into:
    - "quantum-computing.resource-estimation.hardware-compatibility"
