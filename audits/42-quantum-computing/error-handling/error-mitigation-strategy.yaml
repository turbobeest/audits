# ============================================================
# AUDIT: Error Mitigation Strategy
# Category: 42 - Quantum Computing
# Subcategory: error-handling
# ============================================================

audit:
  id: "quantum-computing.error-handling.error-mitigation-strategy"
  name: "Quantum Error Mitigation Strategy Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "quantum-computing"
  category_number: 42
  subcategory: "error-handling"

  tier: "expert"
  estimated_duration: "4-6 hours"  # median: 5h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "quantum-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates error mitigation techniques used in NISQ-era quantum algorithms
    including zero-noise extrapolation, probabilistic error cancellation,
    dynamical decoupling, and measurement error mitigation. Assesses
    effectiveness, overhead, and appropriateness for the application.

  why_it_matters: |
    NISQ devices cannot implement full error correction. Error mitigation
    provides partial noise reduction at lower overhead. Choosing and
    implementing the right mitigation strategy can mean the difference
    between useful results and noise-dominated output.

  when_to_run:
    - "When running on NISQ hardware"
    - "When results show high noise"
    - "During algorithm optimization"
    - "After hardware calibration changes"

prerequisites:
  required_artifacts:
    - type: "quantum_circuits"
      description: "Circuits to mitigate"
    - type: "noise_characterization"
      description: "Hardware noise profile"
    - type: "mitigation_implementation"
      description: "Error mitigation code"

  access_requirements:
    - "Access to circuit code"
    - "Hardware noise data"
    - "Mitigation library access"

discovery:
  file_patterns:
    - glob: "**/mitigation/**/*.py"
      purpose: "Find mitigation implementations"
    - glob: "**/noise/**/*.py"
      purpose: "Find noise modeling code"

  code_patterns:
    - pattern: "ZNE|PEC|dynamical_decoupling"
      type: "keyword"
      scope: "source"
      purpose: "Find mitigation techniques"
    - pattern: "mitiq|qiskit_experiments"
      type: "keyword"
      scope: "source"
      purpose: "Find mitigation libraries"

knowledge_sources:
  specifications:
    - id: "mitiq-docs"
      name: "Mitiq Error Mitigation Documentation"
      url: "https://mitiq.readthedocs.io/"
      offline_cache: true
      priority: "required"

  papers:
    - id: "zne-paper"
      title: "Zero-noise extrapolation for quantum-gate error mitigation"
      url: "https://arxiv.org/abs/1612.02058"

    - id: "pec-paper"
      title: "Probabilistic error cancellation with sparse Pauli-Lindblad models"
      url: "https://arxiv.org/abs/2201.09866"

tooling:
  analysis_tools:
    - tool: "mitiq"
      purpose: "Error mitigation library"
      install: "pip install mitiq"

    - tool: "qiskit-experiments"
      purpose: "Noise characterization and mitigation"
      install: "pip install qiskit-experiments"

signals:
  critical:
    - id: "EMS-CRIT-001"
      signal: "Mitigation increases bias"
      evidence_indicators:
        - "Mitigated results further from ideal than raw results"
        - "Systematic bias introduced by mitigation"
      explanation: |
        Error mitigation should reduce, not increase, distance from ideal.
        If mitigation makes results worse, the technique is inappropriate
        for the noise model or incorrectly implemented.
      remediation: |
        Verify noise model accuracy.
        Check mitigation implementation.
        Consider alternative mitigation techniques.

    - id: "EMS-CRIT-002"
      signal: "No error mitigation on high-noise circuits"
      evidence_indicators:
        - "Circuit error rates > 10% without mitigation"
        - "Results dominated by noise"
      explanation: |
        High-noise circuits without mitigation produce unreliable results.
        Some form of error mitigation is necessary for useful output.
      remediation: "Implement appropriate error mitigation strategy"

  high:
    - id: "EMS-HIGH-001"
      signal: "Mitigation overhead too high"
      evidence_indicators:
        - "Sampling overhead > 100x"
        - "Mitigation cost exceeds benefit"
      remediation: "Consider lower-overhead mitigation techniques"

    - id: "EMS-HIGH-002"
      signal: "Mitigation not calibrated for current noise"
      evidence_indicators:
        - "Using stale noise model"
        - "Mitigation parameters not updated"
      remediation: "Recalibrate mitigation for current hardware state"

  medium:
    - id: "EMS-MED-001"
      signal: "Single mitigation technique used"
      remediation: "Consider combining complementary techniques"

    - id: "EMS-MED-002"
      signal: "Measurement error mitigation missing"
      remediation: "Add measurement error mitigation"

  low:
    - id: "EMS-LOW-001"
      signal: "Mitigation strategy not documented"
      remediation: "Document mitigation choices and parameters"

  positive:
    - id: "EMS-POS-001"
      signal: "Effective mitigation demonstrated"
    - id: "EMS-POS-002"
      signal: "Mitigation calibrated for current noise"
    - id: "EMS-POS-003"
      signal: "Multiple complementary techniques combined"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Identify Mitigation Techniques"
      description: "Document which mitigation methods are used"
      duration_estimate: "30 min"

    - id: "2"
      name: "Verify Implementation"
      description: "Check mitigation is correctly implemented"
      duration_estimate: "1 hour"

    - id: "3"
      name: "Measure Effectiveness"
      description: "Compare mitigated vs unmitigated results"
      duration_estimate: "1.5 hours"

    - id: "4"
      name: "Assess Overhead"
      description: "Measure sampling and computational overhead"
      duration_estimate: "1 hour"

    - id: "5"
      name: "Check Calibration"
      description: "Verify mitigation parameters match current noise"
      duration_estimate: "1 hour"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "mitigation_analysis"
      format: "json"
      description: "Mitigation effectiveness analysis"

closeout_checklist:
  - id: "ems-001"
    item: "Mitigation reduces error"
    level: "CRITICAL"
    verification: "automated"

  - id: "ems-002"
    item: "Overhead acceptable"
    level: "BLOCKING"
    verification: "manual"

  - id: "ems-003"
    item: "Calibration current"
    level: "WARNING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["quantum-systems", "nisq-applications"]

relationships:
  commonly_combined:
    - "quantum-computing.error-handling.noise-model-accuracy"
    - "quantum-computing.error-handling.error-budget"
  depends_on:
    - "quantum-computing.quantum-algorithm.algorithm-correctness"
