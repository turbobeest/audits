# ============================================================
# AUDIT: Error Correction Code
# Category: 42 - Quantum Computing
# Subcategory: error-handling
# ============================================================

audit:
  id: "quantum-computing.error-handling.error-correction-code"
  name: "Quantum Error Correction Code Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "quantum-computing"
  category_number: 42
  subcategory: "error-handling"

  tier: "phd"
  estimated_duration: "8-12 hours"  # median: 10h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "critical"
  scope: "quantum-systems"

  default_profiles:
    - "full"

  blocks_phase: true
  parallelizable: false

description:
  what: |
    Evaluates quantum error correction (QEC) implementations including code
    selection, syndrome measurement, decoder performance, and logical error
    rates. Assesses whether error correction provides meaningful protection
    for the target application and hardware noise profile.

  why_it_matters: |
    Quantum error correction is essential for fault-tolerant quantum computing.
    Incorrect or insufficient QEC leads to logical errors that corrupt
    computation. Proper QEC implementation is the difference between
    useful quantum computation and expensive random number generation.

  when_to_run:
    - "When implementing fault-tolerant algorithms"
    - "During QEC code selection"
    - "When targeting new hardware"
    - "After hardware noise characterization"

prerequisites:
  required_artifacts:
    - type: "qec_implementation"
      description: "Error correction code implementation"
    - type: "noise_model"
      description: "Hardware noise characterization"
    - type: "code_parameters"
      description: "QEC code parameters (distance, rate)"

  access_requirements:
    - "Access to QEC code implementation"
    - "Hardware noise data"
    - "Syndrome decoder access"

discovery:
  file_patterns:
    - glob: "**/qec/**/*.py"
      purpose: "Find QEC implementations"
    - glob: "**/error_correction/**/*.py"
      purpose: "Find error correction code"
    - glob: "**/decoder/**/*.py"
      purpose: "Find decoder implementations"

  code_patterns:
    - pattern: "stabilizer|syndrome|logical"
      type: "keyword"
      scope: "source"
      purpose: "Find QEC components"

knowledge_sources:
  specifications:
    - id: "surface-code"
      name: "Surface Code Theory"
      url: "https://arxiv.org/abs/1208.0928"
      offline_cache: true
      priority: "required"

    - id: "qec-textbook"
      name: "Quantum Error Correction"
      url: "https://www.cambridge.org/core/books/quantum-error-correction/6F0B4FFEA3E2B55C8DDE6E1CA7ADB1AA"
      offline_cache: false
      priority: "required"

  guides:
    - id: "stim-docs"
      name: "Stim QEC Simulator Documentation"
      url: "https://github.com/quantumlib/Stim"
      offline_cache: true

    - id: "pymatching-docs"
      name: "PyMatching Decoder Documentation"
      url: "https://github.com/oscarhiggott/PyMatching"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "stim"
      purpose: "QEC circuit simulation"
      install: "pip install stim"

    - tool: "pymatching"
      purpose: "MWPM decoder"
      install: "pip install pymatching"

    - tool: "ldpc"
      purpose: "LDPC decoder"
      install: "pip install ldpc"

signals:
  critical:
    - id: "QEC-CRIT-001"
      signal: "Logical error rate above threshold"
      evidence_threshold: "Logical error rate > physical error rate"
      explanation: |
        If error correction increases error rate, it provides negative value.
        This indicates code distance is insufficient for the noise level
        or decoder is malfunctioning.
      remediation: |
        Increase code distance.
        Verify decoder implementation.
        Consider different QEC code for noise profile.

    - id: "QEC-CRIT-002"
      signal: "Syndrome measurement errors not handled"
      evidence_indicators:
        - "Single-round syndrome measurement"
        - "No syndrome repetition"
        - "Faulty syndrome not modeled"
      explanation: |
        Syndrome measurements are also noisy. Without redundancy,
        syndrome errors lead to incorrect corrections and logical errors.
      remediation: "Implement repeated syndrome measurement with proper decoding"

  high:
    - id: "QEC-HIGH-001"
      signal: "Decoder not matched to noise model"
      evidence_indicators:
        - "Using generic decoder for biased noise"
        - "Decoder assumes wrong error model"
      remediation: "Use noise-aware decoder or retrain for actual noise"

    - id: "QEC-HIGH-002"
      signal: "Code distance insufficient for target fidelity"
      remediation: "Increase code distance based on fidelity requirements"

    - id: "QEC-HIGH-003"
      signal: "Decoder latency exceeds cycle time"
      evidence_indicators:
        - "Real-time decoding cannot keep up"
        - "Syndrome backlog accumulating"
      remediation: "Optimize decoder or use faster algorithm"

  medium:
    - id: "QEC-MED-001"
      signal: "Suboptimal code choice for hardware"
      remediation: "Evaluate alternative codes for hardware connectivity"

    - id: "QEC-MED-002"
      signal: "No logical error rate monitoring"
      remediation: "Implement logical error rate tracking"

  low:
    - id: "QEC-LOW-001"
      signal: "QEC implementation not documented"
      remediation: "Document code parameters and expected performance"

  positive:
    - id: "QEC-POS-001"
      signal: "Logical error rate well below threshold"
    - id: "QEC-POS-002"
      signal: "Decoder matched to hardware noise"
    - id: "QEC-POS-003"
      signal: "Real-time decoding demonstrated"

procedure:
  context:
    cognitive_mode: "critical"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Review Code Selection"
      description: "Evaluate QEC code choice for application and hardware"
      duration_estimate: "2 hours"

    - id: "2"
      name: "Verify Stabilizer Implementation"
      description: "Check stabilizer and syndrome measurement correctness"
      duration_estimate: "2 hours"

    - id: "3"
      name: "Test Decoder"
      description: "Evaluate decoder accuracy and performance"
      duration_estimate: "2 hours"

    - id: "4"
      name: "Measure Logical Error Rate"
      description: "Run simulations to determine logical error rate"
      duration_estimate: "2 hours"

    - id: "5"
      name: "Assess Threshold Behavior"
      description: "Verify error correction provides benefit"
      duration_estimate: "2 hours"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "qec_analysis"
      format: "json"
      description: "Detailed QEC performance analysis"

closeout_checklist:
  - id: "qec-001"
    item: "Logical error rate below physical error rate"
    level: "CRITICAL"
    verification: "automated"

  - id: "qec-002"
    item: "Decoder performance verified"
    level: "CRITICAL"
    verification: "automated"

  - id: "qec-003"
    item: "Code distance appropriate for target"
    level: "BLOCKING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["quantum-systems", "fault-tolerant-systems"]

  compliance_mappings:
    - framework: "IEEE P7130"
      control: "Quantum Error Correction"
      description: "Standards for QEC implementation"

relationships:
  commonly_combined:
    - "quantum-computing.error-handling.error-mitigation-strategy"
    - "quantum-computing.error-handling.noise-model-accuracy"
  depends_on:
    - "quantum-computing.quantum-algorithm.algorithm-correctness"
  feeds_into:
    - "quantum-computing.resource-estimation.qubit-requirement"

# Glossary of domain-specific terms:
glossary:
  "stabilizer": "A group of Pauli operators that defines the code space for quantum error correction"
  "syndrome": "Measurement outcomes indicating which errors have occurred"
  "logical qubit": "An encoded qubit protected by error correction codes"
  "WCET": "Worst-Case Execution Time - maximum time a task could take to complete"
