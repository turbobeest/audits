audit:
  id: dependency-supply-chain.dependency-inventory.dependency-documentation
  name: Dependency Documentation Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: dependency-supply-chain
  category_number: 32
  subcategory: dependency-inventory
  tier: expert
  estimated_duration: 1-2 hours  # median: 1h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: low
  scope: dependencies
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit evaluates the documentation around project dependencies,
    including why each dependency was chosen, its purpose, alternatives
    considered, and any special configuration or security considerations.
    It ensures teams can understand and maintain their dependency choices.
  why_it_matters: |
    Without documentation, teams lose context about why dependencies were
    chosen, leading to redundant libraries, forgotten security decisions,
    and difficulty during updates or migrations. Good dependency documentation
    accelerates onboarding and improves long-term maintainability.
  when_to_run:
  - During onboarding new team members
  - Before major dependency audits
  - When evaluating dependency changes
  - Annually as maintenance
prerequisites:
  required_artifacts:
  - type: dependency_manifest
    description: package.json, requirements.txt, etc.
  - type: documentation
    description: README, architecture docs, decision records
  access_requirements:
  - Read access to documentation and manifests
discovery:
  file_patterns:
  - glob: '**/README*'
    purpose: Find project documentation
  - glob: '**/DEPENDENCIES*'
    purpose: Find dependency documentation
  - glob: '**/docs/**/*.md'
    purpose: Find documentation files
  - glob: '**/adr/**/*.md'
    purpose: Find architecture decision records
  - glob: '**/decisions/**/*.md'
    purpose: Find decision documentation
knowledge_sources:
  guides:
  - id: adr-practice
    name: Architecture Decision Records
    url: https://adr.github.io/
  standards:
  - id: documentation-best-practices
    name: Technical Documentation Standards
    relevance: Maintaining project knowledge
tooling:
  analysis_tools:
  - tool: adr-tools
    purpose: Manage architecture decision records
signals:
  critical:
  - id: DEP-DOC-CRIT-001
    signal: Security-critical dependencies undocumented
    evidence_indicators:
    - Authentication library with no configuration docs
    - Cryptography choices not explained
    explanation: |
      Security-sensitive dependencies require clear documentation of
      configuration requirements, security assumptions, and known
      limitations to prevent misuse.
    remediation: Document all security-critical dependencies immediately
  high:
  - id: DEP-DOC-HIGH-001
    signal: No documentation explaining dependency choices
    evidence_indicators:
    - Multiple similar libraries without rationale
    - Team cannot explain why dependencies were chosen
    remediation: Create dependency documentation or ADRs
  medium:
  - id: DEP-DOC-MED-001
    signal: Dependency configuration undocumented
    evidence_indicators:
    - Custom configuration with no explanation
    - Environment-specific settings not documented
    remediation: Document all non-default configurations
  - id: DEP-DOC-MED-002
    signal: Migration history not captured
    evidence_indicators:
    - Past dependency migrations not documented
    - Deprecated dependencies still referenced in docs
    remediation: Update documentation to reflect current state
  low:
  - id: DEP-DOC-LOW-001
    signal: No inline comments explaining dependency purpose
    evidence_indicators:
    - package.json without comments (using descriptions)
    - requirements.txt without inline notes
    remediation: Add comments where manifest format allows
  - id: DEP-DOC-LOW-002
    signal: Alternatives not documented
    evidence_indicators:
    - No record of considered alternatives
    - Decision rationale missing
    remediation: Document why chosen over alternatives
  positive:
  - id: DEP-DOC-POS-001
    signal: Comprehensive dependency documentation maintained
  - id: DEP-DOC-POS-002
    signal: Architecture decision records for significant dependencies
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Find Existing Documentation
    description: Locate any existing dependency documentation
    commands:
    - purpose: Find dependency documentation files
      command: find . -iname '*depend*' -type f 2>/dev/null | grep -vE 'node_modules|vendor|\.lock' |
        head -20
    - purpose: Find ADRs
      command: find . -type d -name 'adr' -o -name 'decisions' 2>/dev/null | head -10
  - id: '2'
    name: Check README for Dependency Info
    description: Look for dependency documentation in README
    commands:
    - purpose: Check README for dependencies section
      command: grep -iE '(dependenc|prerequisite|requirement|install)' README* 2>/dev/null | head -20
        || echo 'No README dependency info found'
  - id: '3'
    name: Identify Undocumented Dependencies
    description: Find dependencies without documentation
    commands:
    - purpose: List direct npm dependencies
      command: cat package.json 2>/dev/null | jq -r '.dependencies | keys[]' | head -30 || echo 'No package.json'
    - purpose: Count documented vs undocumented
      command: 'echo ''Manual review required: Compare dependency list against existing documentation'''
  - id: '4'
    name: Check for Configuration Documentation
    description: Verify dependency configurations are documented
    commands:
    - purpose: Find configuration files
      command: find . -name '*.config.js' -o -name '*.config.ts' -o -name '.babelrc' -o -name '.eslintrc*'
        2>/dev/null | grep -v node_modules | head -20
  - id: '5'
    name: Assess Documentation Currency
    description: Check if documentation matches current dependencies
    commands:
    - purpose: Check documentation age
      command: ls -la README* docs/*.md 2>/dev/null | head -10 || echo 'No documentation files found'
output:
  deliverables:
  - type: documentation_assessment
    format: structured
    description: Assessment of dependency documentation coverage
  - type: gap_list
    format: list
    description: Dependencies lacking documentation
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Documentation Coverage
    - Critical Gaps
    - Recommendations
closeout_checklist:
- id: dep-doc-001
  item: Security-critical dependencies documented
  level: CRITICAL
  verification: Review security dependency docs
- id: dep-doc-002
  item: Major dependencies have documented rationale
  level: REQUIRED
  verification: ADRs or equivalent exist
- id: dep-doc-003
  item: Configuration documentation current
  level: REQUIRED
  verification: Configs match documentation
- id: dep-doc-004
  item: Documentation gap list addressed
  level: RECOMMENDED
  verification: All gaps planned for documentation
governance:
  applicable_to:
    archetypes:
    - all-software-projects
  compliance_mappings:
  - framework: ISO 27001
    control: A.12.1.1
    description: Documented operating procedures
  - framework: SOC 2
    control: CC2.2
    description: Communication of objectives
relationships:
  commonly_combined:
  - code-quality.documentation
  depends_on:
  - dependency-supply-chain.dependency-inventory.dependency-enumeration
  feeds_into:
  - knowledge-management.documentation-coverage
