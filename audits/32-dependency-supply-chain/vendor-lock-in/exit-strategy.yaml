# ============================================================
# AUDIT: Exit Strategy Assessment
# Category: 32 - Dependency & Supply Chain
# Subcategory: vendor-lock-in
# ============================================================

audit:
  id: "dependency-supply-chain.vendor-lock-in.exit-strategy"
  name: "Exit Strategy Assessment Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "dependency-supply-chain"
  category_number: 32
  subcategory: "vendor-lock-in"

  tier: "comprehensive"
  estimated_duration: "3-5 hours"

  completeness: "requires_discovery"
  requires_runtime: false
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "dependencies"

  default_profiles:
    - "full"
    - "strategic"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    This audit evaluates the existence and viability of exit strategies
    for critical vendor relationships. It assesses whether plans exist
    to exit vendor relationships if needed, and whether those plans
    are realistic and tested.

  why_it_matters: |
    An exit strategy provides insurance against vendor problems including
    price increases, service degradation, discontinuation, or acquisition.
    Without an exit strategy, you may be forced into unfavorable situations
    with no practical recourse.

  when_to_run:
    - "Annually for critical vendors"
    - "Before major vendor commitments"
    - "After vendor incidents or changes"
    - "During business continuity planning"

prerequisites:
  required_artifacts:
    - type: "vendor_contracts"
      description: "Understanding of vendor agreements"
    - type: "architecture_documentation"
      description: "System architecture documentation"
    - type: "alternative_assessment"
      description: "Available alternatives analysis"

  access_requirements:
    - "Understanding of vendor relationships"
    - "Access to planning resources"

discovery:
  file_patterns:
    - glob: "**/docs/*exit*"
      purpose: "Find exit strategy docs"
    - glob: "**/docs/*migration*"
      purpose: "Find migration plans"
    - glob: "**/runbook*"
      purpose: "Find operational runbooks"

knowledge_sources:
  guides:
    - id: "business-continuity"
      name: "Business Continuity Planning"
      url: "https://www.iso.org/iso-22301-business-continuity.html"

  standards:
    - id: "vendor-exit"
      name: "Vendor Exit Management"
      relevance: "Exit planning standards"

tooling:
  analysis_tools:
    - tool: "documentation-review"
      purpose: "Review exit documentation"

signals:
  critical:
    - id: "DEP-EXIT-CRIT-001"
      signal: "No exit strategy for critical vendor"
      evidence_indicators:
        - "No documented exit plan"
        - "No migration tested"
        - "Vendor is critical to operations"
      explanation: |
        Without an exit strategy for critical vendors, you have no
        recourse if the vendor relationship becomes untenable. This
        creates significant business risk.
      remediation: "Develop and document exit strategy immediately"

    - id: "DEP-EXIT-CRIT-002"
      signal: "Exit would cause extended outage"
      evidence_indicators:
        - "Migration requires significant downtime"
        - "No ability to run parallel systems"
      remediation: "Develop incremental migration approach"

  high:
    - id: "DEP-EXIT-HIGH-001"
      signal: "Exit strategy exists but untested"
      evidence_indicators:
        - "Plan documented but never tried"
        - "No runbooks or automation"
      remediation: "Conduct exit drill; validate plan"

    - id: "DEP-EXIT-HIGH-002"
      signal: "Data export capability unverified"
      evidence_indicators:
        - "Export theoretically possible"
        - "Never actually exported data"
      remediation: "Test data export; verify completeness"

  medium:
    - id: "DEP-EXIT-MED-001"
      signal: "Exit timeline exceeds acceptable limits"
      evidence_indicators:
        - "Exit would take months"
        - "May not meet RTO requirements"
      remediation: "Work to reduce exit time; add abstraction"

    - id: "DEP-EXIT-MED-002"
      signal: "Exit requires skills team doesn't have"
      evidence_indicators:
        - "Alternative uses different technology"
        - "Training needed for exit"
      remediation: "Plan training; document skill gaps"

  low:
    - id: "DEP-EXIT-LOW-001"
      signal: "Exit strategy documented but not recently updated"
      evidence_indicators:
        - "Plan more than a year old"
        - "May be out of date"
      remediation: "Review and update exit plan"

  positive:
    - id: "DEP-EXIT-POS-001"
      signal: "Tested exit strategy exists"

    - id: "DEP-EXIT-POS-002"
      signal: "Data export regularly verified"

procedure:
  context:
    cognitive_mode: "analytical"
    ensemble_role: "strategic-auditor"

  steps:
    - id: "1"
      name: "Find Existing Exit Documentation"
      description: "Locate any exit strategy documentation"
      commands:
        - purpose: "Find exit docs"
          command: "find . -iname '*exit*' -o -iname '*migration*' -o -iname '*contingency*' 2>/dev/null | grep -v node_modules | head -20"

    - id: "2"
      name: "Assess Data Export Capability"
      description: "Verify data can be extracted"
      commands:
        - purpose: "Note export assessment"
          command: "echo 'Data Export Assessment:\n\nVendor: [name]\n\nExport Capabilities:\n[ ] Full data export available\n[ ] Export in standard format\n[ ] Export tested recently\n[ ] Export includes all data types\n[ ] Export automation possible\n\nData Volume: [size]\nEstimated Export Time: [hours/days]'"

    - id: "3"
      name: "Document Exit Requirements"
      description: "List what's needed for exit"
      commands:
        - purpose: "Generate exit requirements"
          command: "echo 'Exit Requirements Checklist:\n\nPre-Exit:\n[ ] Alternative service provisioned\n[ ] Data export completed\n[ ] Configuration migrated\n[ ] DNS/endpoints updated\n[ ] Staff trained on new system\n\nDuring Exit:\n[ ] Parallel running period\n[ ] Data sync maintained\n[ ] Rollback capability\n[ ] Monitoring in place\n\nPost-Exit:\n[ ] Old service decommissioned\n[ ] Data verified in new system\n[ ] Performance validated\n[ ] Vendor contract terminated'"

    - id: "4"
      name: "Estimate Exit Timeline"
      description: "Calculate how long exit would take"
      commands:
        - purpose: "Generate timeline template"
          command: "echo 'Exit Timeline Estimate:\n\nPhase 1: Preparation (__ weeks)\n- Provision alternative\n- Train team\n- Test migration\n\nPhase 2: Migration (__ weeks)\n- Export data\n- Configure new system\n- Parallel running\n\nPhase 3: Cutover (__ days)\n- Switch traffic\n- Verify functionality\n- Monitor closely\n\nPhase 4: Cleanup (__ weeks)\n- Decommission old\n- Close accounts\n\nTotal: __ weeks'"

    - id: "5"
      name: "Identify Exit Risks"
      description: "Document risks in exit process"
      commands:
        - purpose: "Generate risk assessment"
          command: "echo 'Exit Risk Assessment:\n\nRisk: Data loss during migration\nLikelihood: [L/M/H]\nImpact: [L/M/H]\nMitigation: Multiple backups, verification\n\nRisk: Extended downtime\nLikelihood: [L/M/H]\nImpact: [L/M/H]\nMitigation: Parallel run, gradual cutover\n\nRisk: Feature gap in alternative\nLikelihood: [L/M/H]\nImpact: [L/M/H]\nMitigation: Gap analysis, workarounds'"

    - id: "6"
      name: "Create Exit Runbook"
      description: "Document step-by-step exit procedure"
      commands:
        - purpose: "Generate runbook outline"
          command: "echo 'Exit Runbook Outline:\n\n1. Decision and Approval\n   - Exit decision criteria\n   - Approval required from: [roles]\n\n2. Pre-Exit Checklist\n   - [step-by-step preparation]\n\n3. Data Migration Procedure\n   - [detailed data export steps]\n\n4. System Cutover Procedure\n   - [traffic switching steps]\n\n5. Verification Procedure\n   - [validation steps]\n\n6. Rollback Procedure\n   - [how to revert if needed]\n\n7. Post-Exit Cleanup\n   - [decommission steps]'"

output:
  deliverables:
    - type: "exit_strategy_assessment"
      format: "structured"
      description: "Assessment of exit readiness"

    - type: "exit_runbook"
      format: "document"
      description: "Step-by-step exit procedure"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Exit Capability Assessment"
        - "Timeline and Effort"
        - "Risks and Mitigations"
        - "Recommendations"

closeout_checklist:
  - id: "dep-exit-001"
    item: "Exit strategy documented for critical vendors"
    level: "CRITICAL"
    verification: "Exit documentation exists"

  - id: "dep-exit-002"
    item: "Data export capability verified"
    level: "CRITICAL"
    verification: "Export tested"

  - id: "dep-exit-003"
    item: "Exit timeline estimated"
    level: "REQUIRED"
    verification: "Timeline documented"

  - id: "dep-exit-004"
    item: "Exit runbook created"
    level: "REQUIRED"
    verification: "Runbook available"

governance:
  applicable_to:
    archetypes: ["all-software-projects"]

  compliance_mappings:
    - framework: "SOC 2"
      control: "CC9.2"
      description: "Vendor contingency planning"
    - framework: "ISO 27001"
      control: "A.15.2"
      description: "Supplier exit management"
    - framework: "ISO 22301"
      control: "8.4"
      description: "Business continuity plans"

relationships:
  commonly_combined:
    - "dependency-supply-chain.vendor-lock-in.alternative-availability"
  depends_on:
    - "dependency-supply-chain.vendor-lock-in.migration-difficulty"
  feeds_into:
    - "operations.business-continuity"
