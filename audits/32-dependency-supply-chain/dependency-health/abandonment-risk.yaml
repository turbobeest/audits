audit:
  id: dependency-supply-chain.dependency-health.abandonment-risk
  name: Abandonment Risk Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: dependency-supply-chain
  category_number: 32
  subcategory: dependency-health
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: dependencies
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit specifically assesses the risk of dependency abandonment
    by analyzing warning signs such as declining activity, unanswered
    issues, deprecated status, and maintainer burnout indicators. It
    helps prioritize migration planning.
  why_it_matters: |
    Dependency abandonment often happens gradually, then suddenly.
    By the time a package is officially deprecated, you may already
    be deep in technical debt. Early warning allows proactive planning
    instead of emergency migrations.
  when_to_run:
  - When maintenance activity declines
  - When vulnerabilities go unpatched
  - During annual risk assessments
  - Before major feature development
prerequisites:
  required_artifacts:
  - type: dependency_manifest
    description: List of dependencies
  - type: historical_data
    description: Package activity history
  access_requirements:
  - Access to package registries
  - Access to repository history
discovery:
  file_patterns:
  - glob: '**/package.json'
    purpose: Find dependencies
knowledge_sources:
  guides:
  - id: npm-deprecation
    name: npm Package Deprecation
    url: https://docs.npmjs.com/deprecating-and-undeprecating-packages-or-package-versions
  standards:
  - id: project-lifecycle
    name: Open Source Project Lifecycle
    relevance: Understanding abandonment patterns
tooling:
  analysis_tools:
  - tool: npm info
    purpose: Check deprecation status
  - tool: deps.dev
    purpose: Activity trends
signals:
  critical:
  - id: DEP-ABAND-CRIT-001
    signal: Dependency officially deprecated
    evidence_indicators:
    - npm deprecation warning
    - PyPI yanked status
    - Official sunset announcement
    explanation: |
      Deprecated packages won't receive security updates. Continued
      use creates growing security risk. Migration should be prioritized.
    remediation: Begin migration to recommended replacement immediately
  - id: DEP-ABAND-CRIT-002
    signal: Critical unpatched vulnerabilities for 90+ days
    evidence_indicators:
    - Known CVEs without fixes
    - Security PRs ignored
    remediation: Fork and patch, or migrate to alternative
  high:
  - id: DEP-ABAND-HIGH-001
    signal: Maintainer publicly announced reduced involvement
    evidence_indicators:
    - Blog post about burnout
    - Looking for new maintainers
    - Time constraints announced
    remediation: Consider offering support; plan alternative
  - id: DEP-ABAND-HIGH-002
    signal: Activity declined to near-zero
    evidence_indicators:
    - No commits in 12+ months
    - Issues unanswered
    - PRs not reviewed
    remediation: Treat as effectively abandoned
  medium:
  - id: DEP-ABAND-MED-001
    signal: Declining activity trend
    evidence_indicators:
    - Commit frequency decreasing
    - Release intervals lengthening
    remediation: Monitor closely; plan contingencies
  - id: DEP-ABAND-MED-002
    signal: Project seeking new maintainers
    evidence_indicators:
    - Help wanted notices
    - Maintainer recruitment posts
    remediation: Consider contributing; identify alternatives
  low:
  - id: DEP-ABAND-LOW-001
    signal: Stable package with minimal changes needed
    evidence_indicators:
    - Mature, complete package
    - Low activity but low issues
    remediation: May be acceptable; document risk acceptance
  positive:
  - id: DEP-ABAND-POS-001
    signal: No abandonment risk indicators
  - id: DEP-ABAND-POS-002
    signal: Active development and responsive maintenance
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Check for Deprecation Warnings
    description: Look for official deprecation
    commands:
    - purpose: Check npm deprecation
      command: 'npm info request deprecated 2>/dev/null || echo ''Example: npm info [package] deprecated'''
    - purpose: Install to see warnings
      command: npm install request --dry-run 2>&1 | grep -i deprec || echo 'No deprecation warning'
  - id: '2'
    name: Check Last Release Date
    description: Find when package was last updated
    commands:
    - purpose: Get last publish time
      command: npm info lodash time.modified 2>/dev/null || echo 'Check npm for last publish date'
  - id: '3'
    name: Analyze Activity Trend
    description: Compare recent vs historical activity
    commands:
    - purpose: Check commit frequency
      command: |-
        echo 'Check GitHub Insights > Contributors graph for:
        - Commit frequency trend
        - Number of active contributors
        - Recent vs historical activity'
  - id: '4'
    name: Check Issue Response
    description: Evaluate maintainer responsiveness
    commands:
    - purpose: Check open issues
      command: gh api repos/request/request/issues --jq 'length' 2>/dev/null || echo 'Check open issues
        on GitHub'
    - purpose: Check issue age
      command: gh api repos/request/request/issues --jq '.[0:5] | .[].created_at' 2>/dev/null || echo
        'Check oldest open issues'
  - id: '5'
    name: Look for Succession Announcements
    description: Check for maintainer transition news
    commands:
    - purpose: Note announcement checks
      command: |-
        echo 'Check for:
        - GitHub README for status
        - Recent blog posts
        - Twitter/social announcements
        - GitHub discussions/issues about project status'
  - id: '6'
    name: Identify Alternatives
    description: Find potential replacements
    commands:
    - purpose: Note alternative research
      command: |-
        echo 'To find alternatives:
        - Check deprecation message for suggestions
        - Search npm for similar packages
        - Check awesome-* lists
        - Ask in community forums'
output:
  deliverables:
  - type: abandonment_risk_assessment
    format: structured
    description: Risk scores for each dependency
  - type: at_risk_dependencies
    format: list
    description: Dependencies with abandonment indicators
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Deprecation Status
    - Activity Analysis
    - Migration Planning
    - Recommendations
closeout_checklist:
- id: dep-aband-001
  item: No deprecated dependencies in use
  level: CRITICAL
  verification: npm warn shows no deprecations
- id: dep-aband-002
  item: Abandonment risks identified
  level: REQUIRED
  verification: At-risk list complete
- id: dep-aband-003
  item: Alternatives identified for at-risk deps
  level: REQUIRED
  verification: Alternatives documented
- id: dep-aband-004
  item: Migration timeline planned
  level: RECOMMENDED
  verification: Timeline documented
governance:
  applicable_to:
    archetypes:
    - all-software-projects
  compliance_mappings:
  - framework: SOC 2
    control: CC9.2
    description: Third-party risk management
  - framework: ISO 27001
    control: A.15.2
    description: Supplier service monitoring
relationships:
  commonly_combined:
  - dependency-supply-chain.dependency-health.maintenance-status
  depends_on:
  - dependency-supply-chain.dependency-health.maintenance-status
  feeds_into:
  - dependency-supply-chain.update-management.dependency-upgrade-planning
