audit:
  id: architecture-design.system-decomposition.scalability-architecture
  name: Scalability Architecture Audit
  version: 1.0.0
  last_updated: '2026-01-19'
  status: active
  category: architecture-design
  category_number: 7
  subcategory: system-decomposition
  tier: phd
  estimated_duration: 2-4 hours  # median: 3h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: none
  severity: high
  scope: architecture
  default_profiles:
  - full
  - architecture
  - discovery
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit evaluates whether the architecture design can support the
    scale requirements stated in the PRD. It examines diagrams for
    bottlenecks, single points of failure, stateful components that
    limit horizontal scaling, and missing scalability patterns.
  why_it_matters: |
    Architectures that can't scale to requirements cause:
    - System failures when load increases
    - Expensive re-architecture under pressure
    - Customer-facing outages and SLA violations
    - Missed business opportunities from capacity limits
    - Technical debt from scaling workarounds

    Validating scalability early prevents architectural dead ends.
  when_to_run:
  - During Discovery phase when evaluating architecture proposals
  - During PRD phase when scale requirements are defined
  - Before committing to architecture decisions
  - When scale requirements change
prerequisites:
  required_artifacts:
  - type: architecture_diagram
    description: System architecture diagrams
  - type: scale_requirements
    description: PRD with scale targets (users, requests, data volume)
  access_requirements:
  - Access to architecture diagrams
  - Access to PRD with scale requirements
signals:
  critical:
  - id: SCALE-CRIT-001
    signal: Single instance bottleneck for stated load
    evidence_pattern: One API gateway for 1M concurrent users
    explanation: |
      Components that can't scale horizontally become bottlenecks
      that limit entire system capacity.
    remediation: Add horizontal scaling capability or load balancing
  - id: SCALE-CRIT-002
    signal: Synchronous dependency chain for high-throughput path
    evidence_pattern: Five synchronous hops for every user request
    explanation: |
      Synchronous chains multiply latency and limit throughput.
      Each hop is a potential bottleneck.
    remediation: Introduce async patterns; reduce synchronous depth
  high:
  - id: SCALE-HIGH-001
    signal: Stateful component without session externalization
    evidence_pattern: In-memory session storage in horizontally scaled service
    explanation: |
      Stateful components can't scale horizontally without external
      state management, limiting capacity to single instance.
    remediation: Externalize state to Redis/database; use sticky sessions
  - id: SCALE-HIGH-002
    signal: Database as integration point for high-volume writes
    evidence_pattern: All services writing to single database for event stream
    explanation: |
      Databases have write limits. Using DB as integration hub creates
      scaling ceiling and contention.
    remediation: Consider message queue for high-volume integrations
  medium:
  - id: SCALE-MED-001
    signal: No caching layer for read-heavy workload
    evidence_pattern: Direct database queries for every API call
    remediation: Add caching layer appropriate for access patterns
  - id: SCALE-MED-002
    signal: Missing auto-scaling indicators
    evidence_pattern: Fixed instance counts in production deployment
    remediation: Add auto-scaling based on metrics
  low:
  - id: SCALE-LOW-001
    signal: Scale requirements not quantified in PRD
    remediation: Define concrete scale targets
  positive:
  - id: SCALE-POS-001
    signal: Stateless services designed for horizontal scaling
  - id: SCALE-POS-002
    signal: Appropriate caching strategy documented
  - id: SCALE-POS-003
    signal: Async patterns for high-throughput paths
procedure:
  context:
    cognitive_mode: critical
    ensemble_role: architect
  steps:
  - id: '1'
    name: Extract scale requirements
    description: |
      Document the scale requirements from PRD.
    duration_estimate: 15 min
    questions:
    - What are the user/request targets?
    - What are the data volume targets?
    - What are the latency requirements?
    - What growth rate is expected?
    expected_findings:
    - Scale requirements
    - Growth projections
  - id: '2'
    name: Identify critical paths
    description: |
      Map the paths that must handle the highest load.
    duration_estimate: 20 min
    questions:
    - What user journeys have highest volume?
    - What API endpoints are most called?
    - Where does data volume concentrate?
    expected_findings:
    - Critical path identification
    - Load distribution
  - id: '3'
    name: Analyze horizontal scalability
    description: |
      Evaluate each component's ability to scale horizontally.
    duration_estimate: 30 min
    questions:
    - Can each component run multiple instances?
    - Is state externalized appropriately?
    - Are there stateful bottlenecks?
    expected_findings:
    - Scalability assessment by component
    - Bottleneck identification
  - id: '4'
    name: Check scaling patterns
    description: |
      Verify appropriate patterns are in place.
    duration_estimate: 25 min
    questions:
    - Is caching used appropriately?
    - Are async patterns used for high-volume?
    - Is there circuit breaking for dependencies?
    expected_findings:
    - Pattern coverage
    - Missing patterns
  - id: '5'
    name: Document findings
    description: |
      Compile scalability risks and recommendations.
    duration_estimate: 20 min
    expected_findings:
    - Scalability risks
    - Recommendations
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: scalability_assessment
    format: tabular
    sections:
    - Component
    - Scale Requirement
    - Current Capability
    - Gap
    - Recommendation
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Scale Requirement Analysis
    - Bottleneck Assessment
    - Recommendations
profiles:
  membership:
    quick:
      included: false
      reason: Requires thorough analysis
    full:
      included: true
      priority: 1
    architecture:
      included: true
      priority: 1
    discovery:
      included: true
      priority: 1
closeout_checklist:
- id: scale-001
  item: Scale requirements are documented
  level: CRITICAL
  verification: manual
  expected: Quantified scale targets exist
- id: scale-002
  item: Critical path components can scale horizontally
  level: CRITICAL
  verification: manual
  expected: No single-instance bottlenecks
- id: scale-003
  item: State is externalized appropriately
  level: BLOCKING
  verification: manual
  expected: Stateless services or external state
- id: scale-004
  item: Scaling patterns documented
  level: WARNING
  verification: manual
  expected: Caching, async, auto-scaling documented
governance:
  applicable_to:
    archetypes:
    - all
relationships:
  commonly_combined:
  - architecture-design.system-decomposition.architecture-style-consistency
  - scalability-capacity.capacity-planning.capacity-model
  - scalability-capacity.horizontal-scaling.stateless-design
discovery:
  file_patterns:
  - glob: '**/*.md'
    purpose: Documentation files
  - glob: '**/*.yaml'
    purpose: Configuration files
  - glob: '**/*.json'
    purpose: JSON configuration
