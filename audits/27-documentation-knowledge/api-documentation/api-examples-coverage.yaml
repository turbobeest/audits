audit:
  id: documentation-knowledge.api-documentation.api-examples-coverage
  name: API Examples Coverage Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: documentation-knowledge
  category_number: 27
  subcategory: api-documentation
  tier: expert
  estimated_duration: 2-4 hours  # median: 3h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: documentation
  default_profiles:
  - full
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit evaluates the coverage and quality of API usage examples in
    documentation. This includes code samples in multiple languages, request/
    response examples, use case walkthroughs, and integration scenarios.
    The audit assesses whether examples help consumers understand and use
    the API effectively.
  why_it_matters: |
    Examples are often the first thing developers look at when learning an
    API. High-quality examples accelerate onboarding, reduce support requests,
    and demonstrate best practices. APIs with poor or missing examples see
    higher abandonment and more incorrect usage patterns.
  when_to_run:
  - When improving developer experience
  - After API changes or new features
  - When adoption metrics show friction
  - During documentation reviews
prerequisites:
  required_artifacts:
  - type: api_documentation
    description: Access to API documentation
  - type: api_specification
    description: OpenAPI or similar specification
  access_requirements:
  - Read access to API documentation
  - Access to example code repositories
discovery:
  file_patterns:
  - glob: '**/examples/**/*'
    purpose: Find example code
  - glob: '**/samples/**/*'
    purpose: Find sample code
  - glob: '**/docs/quickstart*.md'
    purpose: Find quickstart guides
  - glob: '**/tutorials/**/*.md'
    purpose: Find tutorials
  - glob: '**/cookbook/**/*.md'
    purpose: Find cookbook examples
knowledge_sources:
  guides:
  - id: stripe-api-examples
    name: Stripe API Documentation (exemplary examples)
    url: https://stripe.com/docs/api
    offline_cache: true
  - id: twilio-code-samples
    name: Twilio Code Samples Approach
    url: https://www.twilio.com/docs
    offline_cache: true
tooling:
  analysis_commands:
  - purpose: Find code examples in documentation
    command: grep -rn '```' --include='*.md' docs/ | wc -l
  - purpose: Find curl examples
    command: grep -r 'curl' --include='*.md' docs/ | wc -l
  - purpose: Find SDK examples by language
    command: grep -rn '```python\|```javascript\|```java\|```ruby' docs/ | head -20
signals:
  critical:
  - id: EXAMPLES-CRIT-001
    signal: No API examples provided
    evidence_indicators:
    - Documentation has no code samples
    - No curl or HTTP examples
    - Consumers must guess at usage
    explanation: |
      APIs without examples are extremely difficult to use. Developers
      strongly prefer learning by example over reading specifications.
    remediation: Add examples for all major endpoints and use cases
  high:
  - id: EXAMPLES-HIGH-001
    signal: Examples don't work when executed
    evidence_indicators:
    - Example code has syntax errors
    - Examples use deprecated endpoints
    - Example requests return errors
    explanation: |
      Broken examples frustrate developers and waste time. They also
      suggest documentation is not maintained.
    remediation: Test all examples and add automated example testing
  - id: EXAMPLES-HIGH-002
    signal: Major endpoints lack examples
    evidence_threshold: '>30% of endpoints without examples'
    explanation: |
      Endpoints without examples require developers to construct
      requests through trial and error.
    remediation: Add examples for all public endpoints
  - id: EXAMPLES-HIGH-003
    signal: Only single language examples provided
    evidence_indicators:
    - Examples only in one language
    - No SDK code samples
    - Developers using other languages unsupported
    explanation: |
      Developers expect examples in their language. Single-language
      examples exclude large portions of the developer community.
    remediation: Add examples in major languages (3+)
  medium:
  - id: EXAMPLES-MED-001
    signal: Examples lack context or explanation
    explanation: |
      Code without explanation doesn't teach best practices or
      help developers understand the 'why' behind the code.
    remediation: Add explanatory comments and context to examples
  - id: EXAMPLES-MED-002
    signal: No end-to-end workflow examples
    remediation: Add examples showing complete use case workflows
  - id: EXAMPLES-MED-003
    signal: Error handling not demonstrated
    remediation: Add examples showing proper error handling
  - id: EXAMPLES-MED-004
    signal: Response examples missing
    remediation: Show example responses alongside requests
  low:
  - id: EXAMPLES-LOW-001
    signal: Examples not copy-paste ready
    remediation: Ensure examples can be copied and run directly
  - id: EXAMPLES-LOW-002
    signal: No runnable example environment
    remediation: Consider providing sandbox or playground
  positive:
  - id: EXAMPLES-POS-001
    signal: Examples in 3+ languages for all endpoints
  - id: EXAMPLES-POS-002
    signal: Examples tested automatically
  - id: EXAMPLES-POS-003
    signal: Interactive API explorer available
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory API Endpoints
    description: |
      List all API endpoints that should have examples.
    duration_estimate: 20 min
    commands:
    - purpose: Extract endpoints from OpenAPI
      command: yq '.paths | keys[]' openapi.yaml
    expected_findings:
    - Complete endpoint list
    - Prioritization by usage
  - id: '2'
    name: Assess Example Coverage
    description: |
      Map existing examples to endpoints and calculate coverage.
    duration_estimate: 45 min
    commands:
    - purpose: Count code blocks in docs
      command: 'grep -c ''```'' docs/api/*.md | awk -F: ''{sum+=$2} END {print sum}'''
    - purpose: Find language distribution
      command: grep -oh '```[a-z]*' docs/ -r | sort | uniq -c | sort -rn
    expected_findings:
    - Example coverage percentage
    - Language coverage
    - Gaps identified
  - id: '3'
    name: Evaluate Example Quality
    description: |
      Review examples for completeness, accuracy, and helpfulness.
    duration_estimate: 60 min
    quality_checklist:
    - Syntactically correct
    - Includes authentication
    - Shows request and response
    - Has explanatory comments
    - Demonstrates error handling
    - Uses realistic data
    - Copy-paste ready
    expected_findings:
    - Quality scores
    - Common quality issues
  - id: '4'
    name: Test Example Execution
    description: |
      Verify examples actually work against the API.
    duration_estimate: 30 min
    commands:
    - purpose: Extract and test curl examples
      command: grep -A5 '```bash' docs/api/users.md | grep curl
    expected_findings:
    - Working examples count
    - Broken examples identified
  - id: '5'
    name: Review Use Case Coverage
    description: |
      Assess whether examples cover common use cases and workflows.
    duration_estimate: 30 min
    expected_findings:
    - Use case coverage
    - Missing scenarios
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Coverage Analysis
    - Quality Assessment
    - Language Support
    - Recommendations
  - type: coverage_matrix
    format: table
    description: Endpoint to example mapping by language
  confidence_guidance:
    high: All examples tested for execution
    medium: Sample of examples tested
    low: Coverage count only
closeout_checklist:
- id: examples-001
  item: All public endpoints have examples
  level: CRITICAL
  verification: manual
  verification_notes: Compare endpoint list with example coverage
  expected: 100% coverage for public endpoints
- id: examples-002
  item: Examples work when executed
  level: BLOCKING
  verification: manual
  verification_notes: Test sample of examples
  expected: All tested examples work
- id: examples-003
  item: Multiple language support
  level: WARNING
  verification: grep -oh '```[a-z]*' docs/ -r | sort -u | wc -l
  expected: 3+ languages
- id: examples-004
  item: Response examples included
  level: WARNING
  verification: manual
  verification_notes: Check for response examples in docs
  expected: Responses shown for all examples
governance:
  applicable_to:
    archetypes:
    - api-service
    - public-api
    - developer-platform
relationships:
  commonly_combined:
  - documentation-knowledge.api-documentation.api-reference-completeness
  - documentation-knowledge.developer-guides.getting-started-guide
  feeds_into:
  - developer-experience.time-to-first-call
  - api-adoption.onboarding-success
