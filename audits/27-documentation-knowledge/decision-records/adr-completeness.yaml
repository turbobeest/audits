audit:
  id: documentation-knowledge.decision-records.adr-completeness
  name: ADR Completeness Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: documentation-knowledge
  category_number: 27
  subcategory: decision-records
  tier: expert
  estimated_duration: 2-4 hours  # median: 3h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: documentation
  default_profiles:
  - full
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit evaluates whether Architecture Decision Records comprehensively
    cover significant architectural decisions. The audit examines ADR coverage
    of major decisions, identifies undocumented decisions, and assesses
    whether the ADR corpus provides a complete picture of system evolution.
  why_it_matters: |
    Incomplete ADR coverage means important decisions exist only in memory
    or must be reverse-engineered from code. This creates knowledge silos,
    makes onboarding difficult, and risks repeating past mistakes or
    reopening settled decisions.
  when_to_run:
  - During architecture documentation reviews
  - When onboarding new architects
  - After major system changes
  - Annually as part of architecture governance
prerequisites:
  required_artifacts:
  - type: adr_repository
    description: Access to ADR files
  - type: system_knowledge
    description: Understanding of major system decisions
  access_requirements:
  - Read access to ADR files
  - Access to architecture team for interview
discovery:
  file_patterns:
  - glob: '**/adr/**/*.md'
    purpose: Find ADR files
  - glob: '**/ADR-*.md'
    purpose: Find numbered ADRs
  - glob: '**/decisions/**/*.md'
    purpose: Find decision documents
knowledge_sources:
  guides:
  - id: adr-best-practices
    name: ADR Best Practices
    url: https://adr.github.io/
    offline_cache: true
tooling:
  analysis_commands:
  - purpose: List all ADRs
    command: find . -path '*/adr/*' -name '*.md' | sort
  - purpose: Count ADRs by status
    command: grep -h 'Status:' adr/*.md 2>/dev/null | sort | uniq -c
  - purpose: Find ADRs mentioning specific technologies
    command: grep -l 'database\|framework\|language' adr/*.md 2>/dev/null
signals:
  critical:
  - id: ADRCOMP-CRIT-001
    signal: No ADRs exist
    evidence_indicators:
    - No ADR files found
    - No decision records anywhere
    - Architecture decisions undocumented
    explanation: |
      Without any ADRs, all architecture decisions are lost or
      exist only in tribal knowledge.
    remediation: Begin documenting architecture decisions immediately
  high:
  - id: ADRCOMP-HIGH-001
    signal: Major technology choices undocumented
    evidence_indicators:
    - Programming language choice not documented
    - Database selection not recorded
    - Framework decisions not captured
    explanation: |
      Major technology decisions shape the entire system. Without
      documentation, rationale is lost.
    remediation: Document all significant technology decisions
  - id: ADRCOMP-HIGH-002
    signal: Architectural pattern choices undocumented
    evidence_indicators:
    - Microservices vs monolith not documented
    - Communication patterns undocumented
    - Data architecture decisions missing
    explanation: |
      Architectural patterns have far-reaching implications.
      Undocumented patterns cause confusion.
    remediation: Document all architectural pattern decisions
  - id: ADRCOMP-HIGH-003
    signal: Recent significant decisions not documented
    evidence_indicators:
    - Recent major changes have no ADR
    - ADRs stale with no recent additions
    - Known decisions not in ADR repository
    explanation: |
      If recent decisions lack ADRs, the process may have broken
      down or never been established.
    remediation: Document recent decisions and reinforce process
  medium:
  - id: ADRCOMP-MED-001
    signal: Cross-cutting concerns undocumented
    explanation: |
      Decisions about logging, error handling, security patterns
      affect entire system and should be documented.
    remediation: Document cross-cutting concern decisions
  - id: ADRCOMP-MED-002
    signal: Third-party tool selections undocumented
    remediation: Document significant tool and vendor decisions
  - id: ADRCOMP-MED-003
    signal: API design decisions undocumented
    remediation: Document API style and design decisions
  low:
  - id: ADRCOMP-LOW-001
    signal: Minor decisions over-documented
    remediation: Focus ADRs on significant decisions
  - id: ADRCOMP-LOW-002
    signal: Historical decisions not retroactively documented
    remediation: Consider documenting key historical decisions
  positive:
  - id: ADRCOMP-POS-001
    signal: Comprehensive ADR coverage
  - id: ADRCOMP-POS-002
    signal: ADRs created for all major decisions
  - id: ADRCOMP-POS-003
    signal: Regular ADR creation ongoing
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Existing ADRs
    description: |
      List and categorize all existing ADRs.
    duration_estimate: 30 min
    commands:
    - purpose: List ADRs
      command: find . -path '*/adr/*' -name '*.md' | sort
    - purpose: Extract ADR titles
      command: find . -path '*/adr/*' -name '*.md' -exec head -1 {} \;
    expected_findings:
    - ADR inventory
    - Category distribution
  - id: '2'
    name: Identify Major System Decisions
    description: |
      List significant architecture decisions that should have ADRs.
    duration_estimate: 45 min
    decision_categories:
    - Technology stack (language, framework, database)
    - Architecture style (microservices, monolith)
    - Communication patterns (sync, async)
    - Data architecture (storage, caching)
    - Security architecture
    - Infrastructure choices
    expected_findings:
    - Decision inventory
    - Expected ADR list
  - id: '3'
    name: Calculate Coverage
    description: |
      Compare expected ADRs against actual ADRs.
    duration_estimate: 30 min
    expected_findings:
    - Coverage percentage
    - Gap list
  - id: '4'
    name: Assess Decision Significance
    description: |
      Prioritize missing ADRs by decision importance.
    duration_estimate: 30 min
    significance_criteria:
    - Scope of impact
    - Cost of reversal
    - Frequency of questions about decision
    - Compliance relevance
    expected_findings:
    - Prioritized gap list
    - Critical missing ADRs
  - id: '5'
    name: Interview Architects
    description: |
      Identify undocumented decisions through interviews.
    duration_estimate: 30 min
    interview_questions:
    - What major decisions were made recently?
    - What decisions do new team members ask about?
    - What decisions would you want documented?
    expected_findings:
    - Hidden decisions identified
    - Interview insights
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - ADR Inventory
    - Coverage Analysis
    - Gap Prioritization
    - Recommendations
  - type: gap_list
    format: table
    description: Missing ADRs prioritized
  confidence_guidance:
    high: Comprehensive decision inventory with architect interviews
    medium: ADR review with technology stack analysis
    low: ADR existence count only
closeout_checklist:
- id: adrcomp-001
  item: ADRs exist for major decisions
  level: CRITICAL
  verification: manual
  verification_notes: Compare decisions with ADR coverage
  expected: Major decisions covered
- id: adrcomp-002
  item: Technology choices documented
  level: BLOCKING
  verification: grep -l 'database\|framework\|language' adr/*.md 2>/dev/null | wc -l
  expected: Technology ADRs present
- id: adrcomp-003
  item: Recent decisions documented
  level: WARNING
  verification: find . -path '*/adr/*' -name '*.md' -mtime -180 | wc -l
  expected: Recent ADRs present
- id: adrcomp-004
  item: Architecture patterns documented
  level: WARNING
  verification: grep -ri 'pattern\|architecture\|style' adr/*.md 2>/dev/null | head -1
  expected: Pattern decisions present
governance:
  applicable_to:
    archetypes:
    - all-projects
relationships:
  commonly_combined:
  - documentation-knowledge.decision-records.adr-process
  - documentation-knowledge.decision-records.adr-traceability
  feeds_into:
  - architecture.decision-documentation
  - onboarding.architecture-understanding
