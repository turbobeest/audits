audit:
  id: documentation-knowledge.decision-records.trade-off-documentation
  name: Trade-off Documentation Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: documentation-knowledge
  category_number: 27
  subcategory: decision-records
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: documentation
  default_profiles:
  - full
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit evaluates how technical trade-offs are documented in decisions,
    design documents, and code comments. The audit examines whether trade-offs
    are explicitly stated, including what was sacrificed, what was gained,
    and under what conditions the trade-off should be revisited.
  why_it_matters: |
    Every technical decision involves trade-offs. When these aren't documented,
    future developers may not understand limitations, may try to optimize
    the wrong things, or may revisit settled decisions without context.
    Documented trade-offs enable informed future decisions.
  when_to_run:
  - During architecture reviews
  - When performance issues arise
  - When refactoring decisions are being made
  - During technical debt assessment
prerequisites:
  required_artifacts:
  - type: decision_docs
    description: Access to ADRs and design documents
  - type: codebase
    description: Access to code comments
  access_requirements:
  - Read access to decision documentation
  - Read access to source code
discovery:
  file_patterns:
  - glob: '**/adr/**/*.md'
    purpose: Find ADR files
  - glob: '**/docs/design/**/*.md'
    purpose: Find design documents
  - glob: '**/docs/architecture/**/*.md'
    purpose: Find architecture docs
  code_patterns:
  - pattern: trade.?off\|tradeoff
    purpose: Find trade-off comments
  - pattern: TODO.*performance\|FIXME.*scalab
    purpose: Find deferred optimization notes
knowledge_sources:
  guides:
  - id: architecture-trade-offs
    name: Software Architecture Trade-off Analysis
    relevance: Framework for analyzing trade-offs
tooling:
  analysis_commands:
  - purpose: Find trade-off mentions in docs
    command: grep -ri 'trade.off\|tradeoff\|sacrifice\|compromise' docs/
  - purpose: Find trade-off comments in code
    command: grep -rn 'trade.off\|tradeoff' --include='*.py' --include='*.java' src/
  - purpose: Find ADR consequences sections
    command: grep -A5 'Consequences' adr/*.md 2>/dev/null | head -30
signals:
  critical:
  - id: TRADEOFF-CRIT-001
    signal: Trade-offs not documented anywhere
    evidence_indicators:
    - No trade-off discussion in ADRs
    - Design docs don't mention limitations
    - Code has no trade-off comments
    explanation: |
      Without documented trade-offs, the limitations and costs of
      decisions are invisible, leading to confusion and poor choices.
    remediation: Begin documenting trade-offs in all decisions
  high:
  - id: TRADEOFF-HIGH-001
    signal: ADRs lack consequences section
    evidence_indicators:
    - No consequences documented
    - Only positive outcomes mentioned
    - Trade-offs not explicit
    explanation: |
      ADRs without consequences fail to capture what was given up
      in exchange for the chosen approach.
    remediation: Add consequences section to all ADRs
  - id: TRADEOFF-HIGH-002
    signal: Performance trade-offs undocumented
    evidence_indicators:
    - Performance-impacting decisions not explained
    - Scalability limits not noted
    - Known slow paths undocumented
    explanation: |
      Undocumented performance trade-offs lead to confusion when
      performance issues arise.
    remediation: Document all performance trade-offs
  medium:
  - id: TRADEOFF-MED-001
    signal: Trade-offs not quantified
    explanation: |
      Vague trade-offs like "slower" aren't as useful as quantified
      trade-offs like "2x slower for 50% less memory."
    remediation: Quantify trade-offs where possible
  - id: TRADEOFF-MED-002
    signal: Revisit criteria not documented
    remediation: Document when trade-offs should be revisited
  - id: TRADEOFF-MED-003
    signal: Security trade-offs not highlighted
    remediation: Explicitly document security trade-offs
  low:
  - id: TRADEOFF-LOW-001
    signal: Trade-offs not linked to decisions
    remediation: Link trade-off discussions to originating decisions
  - id: TRADEOFF-LOW-002
    signal: No trade-off summary available
    remediation: Create summary of major system trade-offs
  positive:
  - id: TRADEOFF-POS-001
    signal: Trade-offs explicitly documented in all decisions
  - id: TRADEOFF-POS-002
    signal: Quantified trade-offs with measurements
  - id: TRADEOFF-POS-003
    signal: Revisit criteria documented
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Search for Trade-off Documentation
    description: |
      Find explicit trade-off documentation.
    duration_estimate: 25 min
    commands:
    - purpose: Find trade-off mentions
      command: grep -ri 'trade.off\|tradeoff' docs/ adr/ | wc -l
    - purpose: Find consequences sections
      command: grep -l 'Consequence' adr/*.md 2>/dev/null | wc -l
    expected_findings:
    - Trade-off documentation presence
    - Documentation locations
  - id: '2'
    name: Review ADR Consequences
    description: |
      Evaluate consequences sections in ADRs.
    duration_estimate: 35 min
    evaluation_criteria:
    - Both positive and negative consequences
    - Trade-offs explicit
    - Impact quantified where possible
    - Affected quality attributes noted
    expected_findings:
    - Consequences quality
    - Missing trade-offs
  - id: '3'
    name: Check Design Documents
    description: |
      Review trade-off documentation in design docs.
    duration_estimate: 35 min
    checks:
    - Alternatives discussed
    - Trade-offs of chosen approach
    - Rejected alternatives and why
    - Limitations acknowledged
    expected_findings:
    - Design doc trade-off coverage
    - Gaps identified
  - id: '4'
    name: Review Code Comments
    description: |
      Check for trade-off documentation in code.
    duration_estimate: 30 min
    commands:
    - purpose: Find trade-off comments
      command: grep -rn 'trade.off\|tradeoff\|performance note\|limitation' --include='*.py' --include='*.java'
        src/
    expected_findings:
    - Code-level trade-off documentation
    - Coverage assessment
  - id: '5'
    name: Identify Undocumented Trade-offs
    description: |
      Interview team to find known but undocumented trade-offs.
    duration_estimate: 25 min
    interview_questions:
    - What performance trade-offs does the system have?
    - What scalability limitations exist?
    - What security trade-offs were made?
    expected_findings:
    - Undocumented trade-offs
    - Documentation priorities
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - ADR Trade-off Review
    - Design Doc Review
    - Code Comment Review
    - Recommendations
  confidence_guidance:
    high: Comprehensive review with team interviews
    medium: Documentation review only
    low: Search-based assessment
closeout_checklist:
- id: tradeoff-001
  item: Trade-offs documented in ADRs
  level: CRITICAL
  verification: grep -l 'consequence\|trade' adr/*.md 2>/dev/null | wc -l
  expected: Consequences in ADRs
- id: tradeoff-002
  item: Performance trade-offs documented
  level: BLOCKING
  verification: grep -ri 'performance' adr/ docs/design/ | head -1
  expected: Performance trade-offs noted
- id: tradeoff-003
  item: Trade-offs quantified where possible
  level: WARNING
  verification: manual
  verification_notes: Check for specific numbers in trade-offs
  expected: Quantified trade-offs
governance:
  applicable_to:
    archetypes:
    - all-projects
relationships:
  commonly_combined:
  - documentation-knowledge.decision-records.adr-completeness
  - documentation-knowledge.decision-records.design-decision-docs
  feeds_into:
  - technical-debt.debt-visibility
  - architecture.informed-decisions
