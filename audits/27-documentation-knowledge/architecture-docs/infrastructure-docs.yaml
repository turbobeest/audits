audit:
  id: documentation-knowledge.architecture-docs.infrastructure-docs
  name: Infrastructure Documentation Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: documentation-knowledge
  category_number: 27
  subcategory: architecture-docs
  tier: expert
  estimated_duration: 3-5 hours  # median: 4h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: documentation
  default_profiles:
  - full
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit evaluates infrastructure documentation including cloud
    architecture, Kubernetes/container orchestration, networking, storage,
    compute resources, and infrastructure-as-code documentation.
  why_it_matters: |
    Infrastructure documentation enables operations teams to manage, scale,
    and troubleshoot systems effectively. Without it, infrastructure becomes
    tribal knowledge, making operations risky and onboarding slow.
  when_to_run:
  - During infrastructure reviews
  - When onboarding operations staff
  - After major infrastructure changes
  - During disaster recovery planning
prerequisites:
  required_artifacts:
  - type: infrastructure_docs
    description: Access to infrastructure documentation
  - type: infrastructure_code
    description: Access to IaC repositories
  access_requirements:
  - Read access to infrastructure documentation
  - Read access to infrastructure-as-code
discovery:
  file_patterns:
  - glob: '**/docs/infrastructure/**/*.md'
    purpose: Find infrastructure documentation
  - glob: '**/infrastructure/**/*.tf'
    purpose: Find Terraform files
  - glob: '**/kubernetes/**/*.yaml'
    purpose: Find Kubernetes manifests
  - glob: '**/docs/cloud/**/*.md'
    purpose: Find cloud documentation
  - glob: '**/helm/**/*'
    purpose: Find Helm charts
knowledge_sources:
  guides:
  - id: terraform-docs
    name: Terraform Documentation
    url: https://www.terraform.io/docs
    offline_cache: true
  - id: kubernetes-docs
    name: Kubernetes Documentation
    url: https://kubernetes.io/docs/
    offline_cache: true
tooling:
  analysis_commands:
  - purpose: Find infrastructure documentation
    command: find . -name '*infrastructure*' -o -name '*infra*' | grep -E '\.(md|txt)$'
  - purpose: Find IaC files
    command: find . -name '*.tf' -o -name 'main.yaml' -path '*/kubernetes/*'
  - purpose: Find cloud configuration
    command: find . -name '*aws*' -o -name '*gcp*' -o -name '*azure*' | head -10
signals:
  critical:
  - id: INFRA-CRIT-001
    signal: No infrastructure documentation exists
    evidence_indicators:
    - Infrastructure undocumented
    - Ops team relies on tribal knowledge
    - No architecture diagrams
    explanation: |
      Without infrastructure documentation, operations are risky
      and dependent on specific individuals.
    remediation: Create infrastructure documentation immediately
  high:
  - id: INFRA-HIGH-001
    signal: Cloud architecture undocumented
    evidence_indicators:
    - Cloud services not listed
    - Resource relationships unclear
    - Regions and zones not documented
    explanation: |
      Undocumented cloud architecture makes cost management, security
      review, and troubleshooting difficult.
    remediation: Document cloud architecture and services
  - id: INFRA-HIGH-002
    signal: Network architecture not documented
    evidence_indicators:
    - VPC/network layout unknown
    - Routing undocumented
    - DNS configuration unclear
    explanation: |
      Network documentation is essential for connectivity
      troubleshooting and security review.
    remediation: Document network architecture
  - id: INFRA-HIGH-003
    signal: Kubernetes architecture undocumented
    evidence_indicators:
    - Cluster configuration not documented
    - Namespace structure unclear
    - Resource limits not explained
    explanation: |
      For K8s-based systems, cluster documentation is essential
      for operations and troubleshooting.
    remediation: Document Kubernetes architecture
  medium:
  - id: INFRA-MED-001
    signal: Infrastructure-as-code not explained
    explanation: |
      IaC without documentation is harder to review and modify safely.
    remediation: Add README files to IaC modules
  - id: INFRA-MED-002
    signal: Environment differences not documented
    remediation: Document differences between environments
  - id: INFRA-MED-003
    signal: Cost breakdown not documented
    remediation: Document major cost drivers
  low:
  - id: INFRA-LOW-001
    signal: Infrastructure diagrams not current
    remediation: Update infrastructure diagrams
  - id: INFRA-LOW-002
    signal: Access procedures not documented
    remediation: Document infrastructure access
  positive:
  - id: INFRA-POS-001
    signal: Comprehensive infrastructure documentation
  - id: INFRA-POS-002
    signal: Infrastructure diagrams auto-generated
  - id: INFRA-POS-003
    signal: IaC well-documented with examples
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Locate Infrastructure Documentation
    description: |
      Find all infrastructure documentation.
    duration_estimate: 30 min
    commands:
    - purpose: Find infra docs
      command: find . -name '*infra*' -o -name '*infrastructure*' | grep -E '\.(md|txt)$'
    - purpose: Find IaC
      command: find . -name '*.tf' -o -name 'main.yaml' -path '*/k8s/*'
    expected_findings:
    - Documentation inventory
    - IaC inventory
  - id: '2'
    name: Evaluate Cloud Documentation
    description: |
      Review cloud infrastructure documentation.
    duration_estimate: 45 min
    cloud_checklist:
    - Cloud services used
    - Regions and availability
    - Resource types and sizes
    - Managed vs self-managed
    - Cost structure
    expected_findings:
    - Cloud documentation status
    - Missing elements
  - id: '3'
    name: Review Compute Documentation
    description: |
      Evaluate compute infrastructure documentation.
    duration_estimate: 45 min
    compute_checklist:
    - Server/instance types
    - Container orchestration
    - Serverless functions
    - Scaling configuration
    expected_findings:
    - Compute documentation status
    - Gaps identified
  - id: '4'
    name: Assess Network Documentation
    description: |
      Review network infrastructure documentation.
    duration_estimate: 45 min
    network_checklist:
    - VPC/network topology
    - Subnets and routing
    - Load balancers
    - DNS configuration
    - CDN setup
    expected_findings:
    - Network documentation status
    - Missing documentation
  - id: '5'
    name: Verify IaC Documentation
    description: |
      Review infrastructure-as-code documentation.
    duration_estimate: 35 min
    commands:
    - purpose: Check for IaC READMEs
      command: find . -name 'README.md' -path '*/terraform/*' -o -path '*/infrastructure/*'
    expected_findings:
    - IaC documentation status
    - Undocumented modules
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Cloud Documentation
    - Compute Documentation
    - Network Documentation
    - IaC Review
    - Recommendations
  confidence_guidance:
    high: Documentation validated against actual infrastructure
    medium: Documentation reviewed with ops team
    low: Documentation existence review
closeout_checklist:
- id: infra-001
  item: Infrastructure documentation exists
  level: CRITICAL
  verification: find . -name '*infra*' | grep -E '\.md$' | head -1
  expected: Documentation present
- id: infra-002
  item: Cloud services documented
  level: BLOCKING
  verification: grep -ri 'aws\|gcp\|azure\|cloud' docs/infrastructure/ 2>/dev/null | head -1
  expected: Cloud documented
- id: infra-003
  item: Network architecture documented
  level: WARNING
  verification: grep -ri 'vpc\|network\|subnet' docs/ 2>/dev/null | head -1
  expected: Network documented
- id: infra-004
  item: IaC has documentation
  level: WARNING
  verification: find . -name 'README.md' -path '*/terraform/*' | head -1
  expected: IaC README present
governance:
  applicable_to:
    archetypes:
    - all-infrastructure
relationships:
  commonly_combined:
  - documentation-knowledge.architecture-docs.system-architecture-docs
  - documentation-knowledge.operational-docs.deployment-guides
  feeds_into:
  - infrastructure.audit-readiness
  - disaster-recovery.infrastructure-recovery
