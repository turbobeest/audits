audit:
  id: real-time-embedded.timing-analysis.execution-time-measurement
  name: Execution Time Measurement Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: real-time-embedded
  category_number: 39
  subcategory: timing-analysis
  tier: expert
  estimated_duration: 4-6 hours  # median: 5h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: embedded-systems
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the methodology and accuracy of execution time measurements for
    embedded tasks and functions. Reviews measurement instrumentation including
    hardware timers, cycle counters, and trace ports. Assesses measurement
    coverage, statistical significance, and correlation with static analysis.
    Verifies that measurements capture worst-case paths and boundary conditions.
  why_it_matters: |
    Measurement-based timing analysis complements static WCET analysis by
    providing empirical validation and identifying pessimism. However,
    measurements alone cannot guarantee worst-case bounds without exhaustive
    testing. Understanding measurement accuracy and coverage is essential
    for hybrid timing analysis approaches used in modern certification.
  when_to_run:
  - During timing characterization
  - When validating WCET results
  - After code optimization
  - Before certification activities
  - When debugging timing issues
prerequisites:
  required_artifacts:
  - type: firmware_binary
    description: Compiled firmware with debug symbols
  - type: measurement_setup
    description: Instrumentation configuration documentation
  - type: test_vectors
    description: Test cases covering timing scenarios
  - type: hardware_timer_specs
    description: Timer resolution and accuracy specs
  access_requirements:
  - Access to hardware test bench
  - Access to debug/trace hardware
  - Timing measurement tools
  - Code coverage tools
discovery:
  file_patterns:
  - glob: '**/timing_test*.c'
    purpose: Find timing test implementations
  - glob: '**/benchmark*.c'
    purpose: Find benchmark code
  - glob: '**/profiler*.c'
    purpose: Find profiling infrastructure
  - glob: '**/cycle_count*.h'
    purpose: Find cycle counting macros
  - glob: '**/instrumentation*.c'
    purpose: Find instrumentation code
knowledge_sources:
  guides:
  - id: measurement-wcet
    name: Measurement-Based WCET Analysis
    url: https://www.rapitasystems.com/measurement-based-timing
  - id: hybrid-wcet
    name: Hybrid WCET Methods
    url: https://www.absint.com/timing-analysis
  standards:
  - id: do-178c
    name: DO-178C Software Considerations
    relevance: Timing test requirements
  - id: iso-26262
    name: ISO 26262 Functional Safety
    relevance: Timing verification methods
tooling:
  analysis_tools:
  - tool: rapitime
    purpose: Measurement-based timing tool
  - tool: tracealyzer
    purpose: RTOS trace analysis
  - tool: segger-systemview
    purpose: Real-time visualization
  - tool: dtt
    purpose: Cycle-accurate profiling
signals:
  critical:
  - id: ETM-CRIT-001
    signal: Measured execution times exceed WCET estimates
    evidence_indicators:
    - Maximum measured time > static WCET
    - Outliers beyond analysis bounds
    - Unbounded time observed
    explanation: |
      When measurements exceed static WCET, either the analysis is wrong
      or the measurement found an unconsidered path. This requires
      immediate investigation as deadline guarantees may be invalid.
    remediation: Investigate path causing excess time and update analysis
  - id: ETM-CRIT-002
    signal: Measurement infrastructure has excessive overhead
    evidence_indicators:
    - Instrumentation overhead > 5%
    - Probe effect distorts results
    - Timing measurements unreliable
    explanation: |
      Excessive measurement overhead makes results unreliable. The act
      of measuring significantly changes the timing behavior being measured.
    remediation: Use lower-overhead measurement techniques
  high:
  - id: ETM-HIGH-001
    signal: Insufficient measurement coverage
    evidence_indicators:
    - Branch coverage below 100%
    - Worst-case paths not exercised
    - Input combinations incomplete
    explanation: |
      Without complete coverage, measurements may miss the true worst
      case. Critical paths may remain untested.
    remediation: Increase test coverage systematically
  - id: ETM-HIGH-002
    signal: Measurement timer resolution inadequate
    evidence_indicators:
    - Timer granularity > 1% of measured time
    - Quantization errors significant
    - Short functions unmeasurable
    explanation: |
      Poor timer resolution introduces uncertainty that masks real
      timing variations and reduces measurement accuracy.
    remediation: Use cycle-accurate counters or finer resolution timers
  medium:
  - id: ETM-MED-001
    signal: Statistical sample size insufficient
    evidence_indicators:
    - Fewer than 1000 samples per path
    - Confidence intervals wide
    - Distribution not characterized
    explanation: |
      Small sample sizes may not capture rare worst-case executions.
      Statistical reliability requires sufficient data.
    remediation: Increase measurement sample count
  - id: ETM-MED-002
    signal: Environmental conditions not varied
    evidence_indicators:
    - Temperature range not tested
    - Supply voltage variation ignored
    - Aging effects not considered
    explanation: |
      Execution times can vary with environmental conditions.
      Measurements should cover the operational envelope.
    remediation: Test across environmental operating ranges
  low:
  - id: ETM-LOW-001
    signal: Measurement data not properly archived
    evidence_indicators:
    - Raw data not retained
    - Test conditions not recorded
    - Version information missing
    explanation: |
      Measurement data is valuable evidence for certification and
      debugging. Proper archival enables future analysis.
    remediation: Implement measurement data management procedures
  positive:
  - id: ETM-POS-001
    signal: Comprehensive measurement campaign with high coverage
    evidence_indicators:
    - 100% branch coverage
    - Statistical significance achieved
    - Results correlate with analysis
  - id: ETM-POS-002
    signal: Measurement infrastructure well-characterized
    evidence_indicators:
    - Overhead quantified and acceptable
    - Resolution verified adequate
    - Reproducible results
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Review Measurement Infrastructure
    description: Assess timer accuracy, resolution, and overhead
    duration_estimate: 1 hour
  - id: '2'
    name: Evaluate Test Coverage
    description: Review code coverage and path coverage achieved
    duration_estimate: 1 hour
  - id: '3'
    name: Analyze Measurement Data
    description: Review statistical properties of collected data
    duration_estimate: 1-2 hours
  - id: '4'
    name: Compare with Static Analysis
    description: Correlate measurements with WCET estimates
    duration_estimate: 1 hour
  - id: '5'
    name: Assess Environmental Coverage
    description: Verify testing across operational conditions
    duration_estimate: 30 minutes
  - id: '6'
    name: Document Findings
    description: Compile measurement analysis report
    duration_estimate: 30 minutes
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Measurement Infrastructure
    - Coverage Analysis
    - Statistical Results
    - Recommendations
closeout_checklist:
- id: etm-001
  item: Measurement infrastructure validated
  level: HIGH
  verification: manual
- id: etm-002
  item: Test coverage assessed
  level: HIGH
  verification: automated
- id: etm-003
  item: Statistical analysis completed
  level: MEDIUM
  verification: automated
- id: etm-004
  item: Results correlated with static analysis
  level: HIGH
  verification: manual
governance:
  applicable_to:
    archetypes:
    - embedded-systems
    - safety-critical
    - automotive
    - avionics
  compliance_mappings:
  - framework: DO-178C
    control: '6.4'
    description: Timing test requirements
  - framework: ISO 26262
    control: Part 6
    description: Software verification methods
relationships:
  commonly_combined:
  - real-time-embedded.timing-analysis.wcet-analysis
  - real-time-embedded.timing-analysis.jitter-measurement
  depends_on:
  - testing.code-coverage
  - hardware.timer-configuration
  feeds_into:
  - real-time-embedded.timing-analysis.deadline-verification
  - certification.timing-evidence

# Glossary of domain-specific terms:
glossary:
  "WCET": "Worst-Case Execution Time - maximum possible execution time for a code path"
  "ISR": "Interrupt Service Routine - function executed in response to hardware interrupt"
  "jitter": "Variation in timing between expected and actual execution"
