# ============================================================
# AUDIT: Content Freshness
# ============================================================
# Evaluates content freshness signals and update frequency
# for SEO ranking optimization.

audit:
  id: "seo-discoverability.content-discovery.content-freshness"

  name: "Content Freshness Audit"

  version: "1.0.0"
  last_updated: "2026-01-19"
  status: "active"

  category: "seo-discoverability"
  category_number: 16
  subcategory: "content-discovery"

  tier: "expert"
  estimated_duration: "2.5 hours"

  completeness: "complete"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "codebase"

  default_profiles:
    - "full"
    - "production"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    This audit evaluates content freshness across the website, examining
    publication dates, last modified indicators, update frequency, schema
    markup for dates, and content staleness patterns. It assesses whether
    content is being kept current, how freshness signals are communicated
    to search engines, and identifies stale content requiring updates.

  why_it_matters: |
    Content freshness is a ranking factor for certain query types, particularly
    those with "freshness demand" (news, trending topics, recurring events).
    Google's "Freshness Update" algorithm favors recently updated content for
    time-sensitive searches. Stale content can lose rankings to competitors,
    provide outdated information to users, and signal neglect to search engines.
    Regular updates signal an active, maintained website.

  when_to_run:
    - "During content audits"
    - "When organic traffic to evergreen content declines"
    - "Before major content refresh initiatives"
    - "Quarterly content health reviews"

prerequisites:
  required_artifacts:
    - type: "deployed_website"
      description: "Live site for content date analysis"
    - type: "cms_access"
      description: "CMS for publication date review"

  access_requirements:
    - "Website URL access"
    - "CMS backend access for date information"
    - "Google Search Console for indexing data"

discovery:
  code_patterns:
    - pattern: "datePublished|dateModified|article:published_time"
      type: "keyword"
      scope: "source"
      purpose: "Detect date-related schema markup"
    - pattern: "\\d{4}-\\d{2}-\\d{2}"
      type: "regex"
      scope: "source"
      purpose: "Detect ISO date formats"
    - pattern: "last-modified|Last-Modified"
      type: "keyword"
      scope: "config"
      purpose: "Detect HTTP Last-Modified header"

  file_patterns:
    - glob: "**/*.html"
      purpose: "HTML files for date markup analysis"
    - glob: "**/sitemap*.xml"
      purpose: "Sitemaps for lastmod dates"
    - glob: "**/blog/**"
      purpose: "Blog content for freshness analysis"

knowledge_sources:
  specifications:
    - id: "google-freshness"
      name: "Google Freshness Algorithm"
      url: "https://developers.google.com/search/docs/appearance/publication-dates"
      offline_cache: true
      priority: "required"
    - id: "schema-article"
      name: "Schema.org Article DatePublished"
      url: "https://schema.org/Article"
      offline_cache: true
      priority: "required"

  guides:
    - id: "moz-freshness"
      name: "Moz Content Freshness Guide"
      url: "https://moz.com/blog/google-fresh-factor"
      offline_cache: true
    - id: "search-quality"
      name: "Google Search Quality Guidelines"
      url: "https://static.googleusercontent.com/media/guidelines.raterhub.com/en//searchqualityevaluatorguidelines.pdf"
      offline_cache: true

tooling:
  static_analysis:
    - tool: "Screaming Frog"
      purpose: "Crawl site for date information"
      offline_capable: false
    - tool: "Schema Validator"
      purpose: "Validate date schema markup"
      offline_capable: true

  infrastructure_tools:
    - tool: "curl"
      purpose: "Check Last-Modified headers"
      command: "curl -sI URL | grep -i last-modified"

  scripts:
    - id: "sitemap-freshness"
      language: "bash"
      purpose: "Extract lastmod dates from sitemap"
      source: "inline"
      code: |
        #!/bin/bash
        # Extract lastmod dates and find stale content
        curl -s $SITEMAP_URL | \
        grep -oE '<lastmod>[^<]+</lastmod>' | \
        sed 's/<[^>]*>//g' | \
        sort | uniq -c | sort -rn

signals:
  critical:
    - id: "SEO-FRESH-CRIT-001"
      signal: "Core content not updated in 2+ years"
      evidence_indicators:
        - "Key pages with dates from 2+ years ago"
        - "No lastmod updates in sitemap"
      explanation: |
        Critical business content that hasn't been updated in over two
        years may contain outdated information and signals neglect to
        search engines, potentially losing rankings to fresher competitors.
      remediation: "Audit and update all core content, ensuring dates reflect actual changes"
    - id: "SEO-FRESH-CRIT-002"
      signal: "Fake freshness (date manipulation without content changes)"
      evidence_pattern: "Date updates without corresponding content changes"
      explanation: |
        Updating dates without making meaningful content changes is a
        deceptive practice that Google may penalize. Freshness signals
        should reflect actual updates.
      remediation: "Only update dates when making substantive content improvements"

  high:
    - id: "SEO-FRESH-HIGH-001"
      signal: "Missing dateModified schema markup"
      explanation: |
        Without dateModified markup, search engines must infer update
        dates from other signals, potentially missing freshness indicators.
      remediation: "Add dateModified schema markup to updated content"
    - id: "SEO-FRESH-HIGH-002"
      signal: "Sitemap lastmod dates not updated"
      explanation: |
        Outdated sitemap lastmod dates prevent search engines from
        discovering content updates, reducing re-crawl priority.
      remediation: "Automatically update sitemap lastmod when content changes"

  medium:
    - id: "SEO-FRESH-MED-001"
      signal: "Inconsistent date formats across site"
      remediation: "Standardize on ISO 8601 date format (YYYY-MM-DD)"
    - id: "SEO-FRESH-MED-002"
      signal: "No visible publication dates for users"
      remediation: "Display publication and update dates for user trust"

  low:
    - id: "SEO-FRESH-LOW-001"
      signal: "HTTP Last-Modified header not set"

  positive:
    - id: "SEO-FRESH-POS-001"
      signal: "Regular content update schedule maintained"
    - id: "SEO-FRESH-POS-002"
      signal: "Proper datePublished and dateModified schema implemented"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Date Schema Analysis"
      description: |
        Examine pages for datePublished and dateModified schema
        markup implementation.
      duration_estimate: "30 min"

      commands:
        - purpose: "Find date schema markup"
          command: "curl -s $URL | grep -oE 'date(Published|Modified)\"[^\"]*\"[^\"]*\"'"
        - purpose: "Find Open Graph dates"
          command: "curl -s $URL | grep -oE 'article:(published|modified)_time[^>]*content=\"[^\"]*\"'"

      expected_findings:
        - "Schema date markup coverage"
        - "Date format consistency"

    - id: "2"
      name: "Sitemap Freshness Analysis"
      description: |
        Extract and analyze lastmod dates from XML sitemaps
        to identify stale content.
      duration_estimate: "25 min"

      commands:
        - purpose: "Extract sitemap lastmod dates"
          command: "curl -s $SITEMAP_URL | grep -oE '<lastmod>[^<]+</lastmod>' | sed 's/<[^>]*>//g' | sort"
        - purpose: "Count by year"
          command: "curl -s $SITEMAP_URL | grep -oE '<lastmod>202[0-9]' | sort | uniq -c"

      expected_findings:
        - "Content age distribution"
        - "Stale content identification"

    - id: "3"
      name: "HTTP Header Check"
      description: |
        Verify Last-Modified HTTP headers are set and
        accurate for key pages.
      duration_estimate: "15 min"

      commands:
        - purpose: "Check Last-Modified header"
          command: "curl -sI $URL | grep -i 'last-modified'"

      expected_findings:
        - "Last-Modified header presence"
        - "Header accuracy"

    - id: "4"
      name: "Content Staleness Assessment"
      description: |
        Review actual content to identify outdated information
        that needs updating regardless of date signals.
      duration_estimate: "45 min"

      questions:
        - "Are statistics and data current?"
        - "Are screenshots and examples up to date?"
        - "Have industry practices changed since publication?"
        - "Are linked resources still available?"

      expected_findings:
        - "Content accuracy assessment"
        - "Priority update list"

    - id: "5"
      name: "Update Frequency Analysis"
      description: |
        Analyze content update patterns and establish
        freshness maintenance schedule.
      duration_estimate: "25 min"

      questions:
        - "How frequently is content updated?"
        - "Is there a content refresh schedule?"
        - "Which content types need most frequent updates?"

      expected_findings:
        - "Update frequency patterns"
        - "Recommended refresh schedule"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Content Age Distribution"
        - "Stale Content Inventory"
        - "Schema Implementation Status"
        - "Update Recommendations"

  confidence_guidance:
    high: "Schema and sitemap data combined with content review"
    medium: "Automated date extraction without content verification"
    low: "Limited date signal analysis"

offline:
  capability: "partial"

  cache_manifest:
    knowledge:
      - source_id: "google-freshness"
        priority: "required"
      - source_id: "schema-article"
        priority: "required"

profiles:
  membership:
    quick:
      included: false
      reason: "Requires comprehensive content review"
    full:
      included: true
      priority: 2

closeout_checklist:
  - id: "content-freshness-001"
    item: "datePublished schema on all dated content"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "Verify schema markup on sample of dated pages"
    expected: "Confirmed by reviewer"

  - id: "content-freshness-002"
    item: "dateModified updated when content changes"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Verify dateModified reflects actual update dates"
    expected: "Confirmed by reviewer"

  - id: "content-freshness-003"
    item: "Sitemap lastmod dates accurate"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Compare sitemap dates with actual content dates"
    expected: "Confirmed by reviewer"

  - id: "content-freshness-004"
    item: "No content over 2 years without review"
    level: "WARNING"
    verification: "manual"
    verification_notes: "Identify and flag all content older than 2 years"
    expected: "All old content reviewed"

governance:
  applicable_to:
    archetypes: ["marketing-site", "blog", "news-site", "documentation"]

  compliance_frameworks:
    - framework: "Google Quality Guidelines"
      controls: ["E-E-A-T", "Content Freshness"]

relationships:
  commonly_combined:
    - "seo-discoverability.content-discovery.content-depth"
    - "seo-discoverability.technical-seo.sitemap"
    - "seo-discoverability.schema.article"
