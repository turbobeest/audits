audit:
  id: testing-quality-assurance.test-effectiveness.test-roi
  name: Test ROI
  version: 1.0.0
  last_updated: '2026-01-22'
  status: active
  category: testing-quality-assurance
  category_number: 26
  subcategory: test-effectiveness
  tier: expert
  estimated_duration: 1-2 hours  # median: 1h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: quality
  default_profiles:
  - full
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the return on investment of testing by comparing the cost
    of writing, maintaining, and running tests against the value of
    defects caught, confidence gained, and issues prevented. Helps
    optimize testing investment.
  why_it_matters: |
    Testing has costs: time to write, maintain, run, and debug. It also
    provides value: catching bugs, enabling refactoring, documenting
    behavior. Understanding ROI helps invest testing effort where it
    delivers the most value.
  when_to_run:
  - Budget planning
  - Testing strategy review
  - Process optimization
  - Team capacity planning
prerequisites:
  required_artifacts:
  - type: testing_metrics
    description: Test execution and defect data
  - type: time_tracking
    description: Time spent on testing activities
  access_requirements:
  - Test metrics access
  - Defect tracking data
  - Time tracking data
discovery:
  documents_to_review:
  - type: Time tracking
    purpose: Testing time investment
  - type: Defect data
    purpose: Bugs caught value
  - type: CI metrics
    purpose: Execution costs
  file_patterns:
  - glob: '**/*.md'
    purpose: Documentation files
  - glob: '**/*.yaml'
    purpose: Configuration files
  - glob: '**/*.json'
    purpose: JSON configuration
knowledge_sources:
  guides:
  - id: test-roi
    name: Measuring Test ROI
    url: https://www.stickyminds.com/article/testing-roi-metrics
    offline_cache: true
  - id: cost-of-quality
    name: Cost of Quality
    url: https://asq.org/quality-resources/cost-of-quality
    offline_cache: true
  learning_resources:
  - id: economics-testing
    title: Economics of Software Testing
    type: article
    reference: Quality Engineering
tooling:
  assessment_tools:
  - tool: Time tracking systems
    purpose: Effort measurement
  - tool: CI analytics
    purpose: Execution costs
  scripts:
  - id: roi-check
    language: bash
    purpose: Gather ROI indicators
    source: inline
    code: |
      #!/bin/bash
      echo "=== Test ROI Analysis ==="

      echo "Test suite size:"
      find . -name '*.test.*' -o -name '*.spec.*' 2>/dev/null | wc -l

      echo ""
      echo "Lines of test code:"
      find . -name '*.test.*' -o -name '*.spec.*' 2>/dev/null | xargs wc -l 2>/dev/null | tail -1

      echo ""
      echo "Test execution time (estimate from CI):"
      echo "(Check CI pipeline duration for test jobs)"

      echo ""
      echo "Key ROI metrics to gather:"
      echo "  - Hours spent writing/maintaining tests"
      echo "  - Defects caught by tests"
      echo "  - Cost per defect in production"
      echo "  - CI compute costs"

      echo ""
      echo "ROI = (Value of defects caught - Test costs) / Test costs"
signals:
  critical:
  - id: ROI-CRIT-001
    signal: Testing costs exceed value delivered
    evidence_pattern: High maintenance, low defect detection
    explanation: |
      When testing costs more than it saves, the investment is negative.
      This doesn't mean stop testing - it means optimize. Focus effort
      on high-value tests and reduce maintenance burden.
    remediation: |
      Optimize test investment:
      1. Identify low-value tests
      2. Remove or simplify
      3. Focus on critical paths
      4. Reduce maintenance burden
      5. Track ROI improvements
  high:
  - id: ROI-HIGH-001
    signal: Most test effort on low-risk areas
    evidence_pattern: Critical paths undertested, trivial code overtested
    explanation: |
      Testing investment should align with risk. High coverage on
      low-risk utilities while critical paths are undertested means
      misallocated effort.
    remediation: |
      Realign testing effort:
      - Identify critical paths
      - Prioritize testing there
      - Reduce trivial test maintenance
      - Risk-based test strategy
  - id: ROI-HIGH-002
    signal: Excessive CI costs for tests
    evidence_pattern: High compute costs for running tests
    explanation: |
      CI costs add up quickly. Long-running tests, parallel execution,
      and frequent runs accumulate expense. Balance coverage with
      efficiency.
    remediation: |
      Optimize CI costs:
      - Optimize slow tests
      - Use test splitting wisely
      - Cache dependencies
      - Run relevant tests only
  medium:
  - id: ROI-MED-001
    signal: No ROI measurement in place
    evidence_pattern: Testing value not tracked
    remediation: Implement testing ROI measurement
  - id: ROI-MED-002
    signal: Test effort not tracked
    evidence_pattern: Unknown time spent on testing
    remediation: Track time spent on test activities
  low:
  - id: ROI-LOW-001
    signal: ROI not communicated to stakeholders
    evidence_pattern: Value of testing not visible
  positive:
  - id: ROI-POS-001
    signal: Positive test ROI
    evidence_pattern: Defects caught exceed testing costs
  - id: ROI-POS-002
    signal: ROI actively optimized
    evidence_pattern: Testing investment continuously improved
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Measure testing costs
    description: |
      Calculate total testing investment.
    duration_estimate: 20 min
    questions:
    - Hours spent writing tests?
    - Hours maintaining tests?
    - CI compute costs for tests?
    - Test infrastructure costs?
    expected_findings:
    - Total testing costs
    - Cost breakdown
  - id: '2'
    name: Estimate testing value
    description: |
      Calculate value delivered by testing.
    duration_estimate: 20 min
    questions:
    - How many defects caught by tests?
    - What's the cost per production defect?
    - What's the confidence value?
    - Documentation value?
    expected_findings:
    - Defects prevented
    - Value estimate
  - id: '3'
    name: Calculate ROI
    description: |
      Compute return on investment.
    duration_estimate: 10 min
    questions:
    - ROI = (Value - Costs) / Costs
    - What is the current ROI?
    - Is ROI positive?
    expected_findings:
    - ROI value
    - Break-even analysis
  - id: '4'
    name: Identify optimization opportunities
    description: |
      Find ways to improve ROI.
    duration_estimate: 20 min
    questions:
    - Which tests have lowest value?
    - Where could coverage increase value?
    - What maintenance can be reduced?
    expected_findings:
    - Optimization opportunities
    - Investment recommendations
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: roi_report
    format: table
    sections:
    - Cost Analysis
    - Value Analysis
    - ROI Calculation
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - ROI Analysis
    - Optimization Recommendations
  confidence_guidance:
    high: Full cost and value tracking data
    medium: Estimated costs and value
    low: Qualitative assessment
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: test-roi
      priority: recommended
profiles:
  membership:
    quick:
      included: false
      reason: Requires detailed cost analysis
    full:
      included: true
      priority: 7
closeout_checklist:
- id: roi-001
  item: Testing costs calculated
  level: CRITICAL
  verification: manual
  verification_notes: Document total testing investment
  expected: Costs documented
- id: roi-002
  item: Testing value estimated
  level: CRITICAL
  verification: manual
  verification_notes: Document defects caught and value
  expected: Value documented
- id: roi-003
  item: ROI calculated
  level: WARNING
  verification: manual
  verification_notes: Calculate ROI percentage
  expected: ROI documented
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: FinOps
    controls:
    - Cost Optimization
relationships:
  commonly_combined:
  - testing-quality-assurance.test-effectiveness.defect-detection-rate
  - testing-quality-assurance.test-effectiveness.test-maintenance-burden
  - testing-quality-assurance.test-coverage.critical-path-coverage
