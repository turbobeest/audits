audit:
  id: testing-quality-assurance.test-environment.environment-data
  name: Environment Data
  version: 1.0.0
  last_updated: '2026-01-22'
  status: active
  category: testing-quality-assurance
  category_number: 26
  subcategory: test-environment
  tier: expert
  estimated_duration: 30-45 min
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: 'yes'
  severity: medium
  scope: quality
  default_profiles:
  - full
  - quality
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates how test environment data is managed including database
    seeding, data reset procedures, reference data management, and
    data quality. Ensures environments have appropriate data for
    meaningful testing.
  why_it_matters: |
    Tests are only as good as the data they run against. Empty or
    unrealistic data limits test coverage. Corrupted data causes
    false failures. Proper data management ensures tests validate
    real-world scenarios.
  when_to_run:
  - Environment setup review
  - Test coverage assessment
  - Data quality issues
  - Quality improvement
prerequisites:
  required_artifacts:
  - type: seed_files
    description: Database seed data
  - type: reset_scripts
    description: Data reset automation
  access_requirements:
  - Database access
  - Seed file access
discovery:
  file_patterns:
  - glob: '**/seeds/**'
    purpose: Seed data files
  - glob: '**/db/seeds*'
    purpose: Database seeds
  - glob: '**/fixtures/**'
    purpose: Test fixtures
  code_patterns:
  - pattern: seed|migrate|reset|populate
    type: regex
    scope: scripts
    purpose: Data management commands
knowledge_sources:
  guides:
  - id: database-seeding
    name: Database Seeding Best Practices
    url: https://knexjs.org/guide/migrations.html#seed-files
    offline_cache: true
  learning_resources:
  - id: test-data
    title: Test Data Management
    type: guide
    reference: QA Best Practices
tooling:
  static_analysis:
  - tool: Custom analysis
    purpose: Seed data detection
    offline_capable: true
  scripts:
  - id: env-data-check
    language: bash
    purpose: Analyze environment data
    source: inline
    code: |
      #!/bin/bash
      echo "=== Environment Data Analysis ==="

      echo "Seed files:"
      find . -path '*/seeds/*' -o -path '*/db/seeds*' -o -name '*seed*' 2>/dev/null | grep -E '\.(js|ts|sql|json)$' | head -15

      echo ""
      echo "Migration files:"
      find . -path '*/migrations/*' -type f 2>/dev/null | tail -10

      echo ""
      echo "Reset scripts:"
      find . -name '*reset*' -o -name '*truncate*' 2>/dev/null | head -10

      echo ""
      echo "Seed commands in package.json:"
      grep -E 'seed|reset|migrate' package.json 2>/dev/null

      echo ""
      echo "Reference data:"
      find . -name '*reference*' -o -name '*lookup*' 2>/dev/null | head -5
signals:
  critical:
  - id: ENVDATA-CRIT-001
    signal: No seed data defined
    evidence_pattern: Empty database for testing
    explanation: |
      Empty databases limit test coverage. Many code paths require
      existing data to test properly. Seed data establishes baseline
      state for meaningful tests.
    remediation: |
      Create seed data:
      1. Identify required reference data
      2. Create base entity records
      3. Build seed scripts
      4. Include in environment setup
      5. Version control seed data
  - id: ENVDATA-CRIT-002
    signal: Corrupted environment data
    evidence_pattern: Data integrity issues in test database
    explanation: |
      Corrupted data causes false test failures and masks real issues.
      Tests may pass against corrupt data that would fail in production.
      Data integrity must be maintained.
    remediation: |
      Fix and prevent corruption:
      1. Identify corruption source
      2. Add integrity constraints
      3. Implement validation
      4. Regular data audits
      5. Automated reset procedures
  high:
  - id: ENVDATA-HIGH-001
    signal: No automated data reset
    evidence_pattern: Manual database reset required
    explanation: |
      Manual reset is slow, error-prone, and blocks testing. Automated
      reset enables quick recovery and consistent starting state.
      Tests should be able to reset data on demand.
    remediation: |
      Automate data reset:
      - Create reset scripts
      - Include in test setup
      - Document reset procedures
      - Enable per-test reset if needed
  - id: ENVDATA-HIGH-002
    signal: Reference data missing
    evidence_pattern: Lookups fail due to missing data
    explanation: |
      Many applications depend on reference data (countries, currencies,
      status codes). Missing reference data causes unexpected failures
      in tests that work fine with application logic.
    remediation: |
      Seed reference data:
      - Identify all lookup tables
      - Create seed for each
      - Include in environment setup
      - Keep reference data current
  medium:
  - id: ENVDATA-MED-001
    signal: Seed data not version controlled
    evidence_pattern: Seed data managed separately from code
    remediation: Version control all seed data with application code
  - id: ENVDATA-MED-002
    signal: Seed data doesn't match schema
    evidence_pattern: Seeds fail after schema changes
    remediation: Keep seeds synchronized with schema migrations
  low:
  - id: ENVDATA-LOW-001
    signal: No documentation of data requirements
    evidence_pattern: Unclear what data is needed
  positive:
  - id: ENVDATA-POS-001
    signal: Comprehensive seed data
    evidence_pattern: All reference data and test scenarios seeded
  - id: ENVDATA-POS-002
    signal: Automated reset on demand
    evidence_pattern: Single command resets to known state
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Find seed data
    description: |
      Locate seed files and data definitions.
    duration_estimate: 10 min
    commands:
    - purpose: Find seed files
      command: find . -path '*/seeds/*' -o -name '*seed*' 2>/dev/null | grep -E '\.(js|ts|sql)$' | head
        -10
    - purpose: Check for migrations
      command: find . -path '*/migrations/*' -type f 2>/dev/null | tail -5
    expected_findings:
    - Seed file locations
    - Migration status
  - id: '2'
    name: Review reset automation
    description: |
      Check for automated data reset.
    duration_estimate: 10 min
    commands:
    - purpose: Find reset scripts
      command: find . -name '*reset*' -o -name '*truncate*' 2>/dev/null | head -5
    - purpose: Check package scripts
      command: grep -E 'reset|seed' package.json 2>/dev/null
    expected_findings:
    - Reset automation
    - Script availability
  - id: '3'
    name: Assess data coverage
    description: |
      Evaluate what data is seeded.
    duration_estimate: 15 min
    questions:
    - What entities are seeded?
    - Is reference data included?
    - Are edge cases represented?
    expected_findings:
    - Data coverage
    - Missing data types
  - id: '4'
    name: Verify data quality
    description: |
      Check data integrity and quality.
    duration_estimate: 10 min
    questions:
    - Is seed data valid?
    - Are relationships correct?
    - Does data match schema?
    expected_findings:
    - Data quality
    - Integrity issues
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: data_report
    format: table
    sections:
    - Seed Data Coverage
    - Reset Automation
    - Data Quality
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Data Analysis
    - Recommendations
  confidence_guidance:
    high: Full data review with database access
    medium: Seed file analysis
    low: Pattern detection only
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: database-seeding
      priority: recommended
profiles:
  membership:
    quick:
      included: false
      reason: Requires data analysis
    quality:
      included: true
      priority: 4
    full:
      included: true
      priority: 5
closeout_checklist:
- id: envdata-001
  item: Seed data identified
  level: CRITICAL
  verification: find . -path '*/seeds/*' -o -name '*seed*' 2>/dev/null | wc -l
  expected: Count > 0
- id: envdata-002
  item: Reset automation verified
  level: WARNING
  verification: grep -E 'reset|seed' package.json 2>/dev/null | wc -l
  expected: Count > 0
- id: envdata-003
  item: Data coverage assessed
  level: WARNING
  verification: manual
  verification_notes: Document seeded entities
  expected: Coverage documented
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: ISO 25010
    controls:
    - Maintainability
relationships:
  commonly_combined:
  - testing-quality-assurance.test-data-management.test-data-strategy
  - testing-quality-assurance.test-data-management.test-data-refresh
  - testing-quality-assurance.test-environment.environment-provisioning
