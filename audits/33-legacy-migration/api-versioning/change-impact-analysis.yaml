audit:
  id: legacy-migration.api-versioning.change-impact-analysis
  name: API Change Impact Analysis Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: legacy-migration
  category_number: 33
  subcategory: api-versioning
  tier: expert
  estimated_duration: 3-5 hours  # median: 4h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: api
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Analyzes the impact of proposed API changes on existing consumers by
    identifying affected endpoints, estimating consumer impact, and assessing
    the scope of required consumer updates. This audit provides decision
    support for API changes by quantifying their downstream effects.
  why_it_matters: |
    API changes without impact analysis lead to unexpected consumer breakage.
    Understanding the blast radius of changes enables informed decisions about
    whether changes justify their impact and how to communicate and support
    affected consumers.
  when_to_run:
  - Before proposing API changes
  - During change review
  - When evaluating new features
  - Before major version releases
prerequisites:
  required_artifacts:
  - type: proposed_changes
    description: Documentation of proposed API changes
  - type: consumer_usage
    description: Usage data for affected endpoints
  - type: api_specifications
    description: Current API specifications
  access_requirements:
  - Proposed change documentation
  - API usage analytics
  - Consumer information
discovery:
  file_patterns:
  - glob: '**/openapi*.{yaml,json}'
    purpose: Find API specifications
  - glob: '**/change-request*'
    purpose: Find change proposals
  interview_questions:
  - role: API Developer
    questions:
    - What changes are being proposed?
    - Which endpoints are affected?
    - What consumer impact do you expect?
  - role: API Product Owner
    questions:
    - What is the business driver for these changes?
    - What is the acceptable level of consumer impact?
    - How will affected consumers be supported?
knowledge_sources:
  guides:
  - id: change-management
    name: API Change Management
    url: https://swagger.io/blog/api-development/api-change-management/
  standards:
  - id: itil-change
    name: ITIL Change Management
    relevance: Change impact assessment
tooling:
  analysis_tools:
  - tool: openapi-diff
    purpose: Detect API changes
    command: openapi-diff current.yaml proposed.yaml
  - tool: Optic
    purpose: API change review
  - tool: API Analytics
    purpose: Identify affected consumers
signals:
  critical:
  - id: CIA-CRIT-001
    signal: Change impacts majority of API consumers
    evidence_indicators:
    - '>50% of consumers affected'
    - High-volume endpoints modified
    - Breaking changes to core functionality
    explanation: |
      Changes affecting the majority of consumers require extensive
      coordination and may not be justified by the benefits.
    remediation: Reconsider change approach or plan extensive support
  - id: CIA-CRIT-002
    signal: No impact analysis performed for breaking change
    evidence_indicators:
    - Breaking change proposed
    - Consumer impact not assessed
    - No consumer communication planned
    explanation: |
      Breaking changes without impact analysis risk unexpected
      widespread consumer disruption.
    remediation: Complete impact analysis before proceeding
  high:
  - id: CIA-HIGH-001
    signal: Key consumers significantly affected
    remediation: Engage key consumers before change
  - id: CIA-HIGH-002
    signal: Change timing conflicts with consumer releases
    remediation: Coordinate timing with affected consumers
  - id: CIA-HIGH-003
    signal: Migration effort high for affected consumers
    remediation: Provide migration tooling or support
  medium:
  - id: CIA-MED-001
    signal: Moderate consumer impact manageable
    remediation: Plan communication and support
  - id: CIA-MED-002
    signal: Impact on low-usage endpoints
    remediation: Notify affected consumers
  low:
  - id: CIA-LOW-001
    signal: Minimal consumer impact expected
    remediation: Document change in release notes
  - id: CIA-LOW-002
    signal: Non-breaking changes only
    remediation: Standard release communication
  positive:
  - id: CIA-POS-001
    signal: Thorough impact analysis with mitigation plan
  - id: CIA-POS-002
    signal: Proactive consumer engagement
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Document Proposed Changes
    description: Catalog all proposed API changes
    duration_estimate: 30 minutes
  - id: '2'
    name: Identify Affected Endpoints
    description: Map changes to specific endpoints
    duration_estimate: 30 minutes
  - id: '3'
    name: Analyze Consumer Usage
    description: Determine which consumers use affected endpoints
    duration_estimate: 1 hour
  - id: '4'
    name: Assess Impact Severity
    description: Evaluate impact on each affected consumer
    duration_estimate: 1 hour
  - id: '5'
    name: Recommend Mitigation
    description: Propose ways to reduce impact
    duration_estimate: 30 minutes
  - id: '6'
    name: Document Analysis
    description: Create impact analysis report
    duration_estimate: 1 hour
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Proposed Changes
    - Affected Consumers
    - Impact Assessment
    - Mitigation Recommendations
closeout_checklist:
- id: cia-001
  item: All proposed changes documented
  level: WARNING
  verification: manual
- id: cia-002
  item: Consumer impact quantified
  level: WARNING
  verification: manual
- id: cia-003
  item: Mitigation recommendations provided
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - api-providers
    - platform-organizations
  compliance_mappings:
  - framework: ITIL
    control: Change Enablement
    description: Change impact assessment
relationships:
  commonly_combined:
  - legacy-migration.api-versioning.backward-compatibility
  - change-management.impact-assessment
  depends_on:
  - api-design.api-analytics
  feeds_into:
  - legacy-migration.api-versioning.consumer-migration
  - change-management.change-approval
