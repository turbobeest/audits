audit:
  id: legacy-migration.api-versioning.versioning-strategy
  name: API Versioning Strategy Assessment Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: legacy-migration
  category_number: 33
  subcategory: api-versioning
  tier: phd
  estimated_duration: 4-6 hours  # median: 5h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: api
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the API versioning strategy including version numbering scheme,
    versioning mechanism (URL, header, query parameter), backward compatibility
    policies, and version lifecycle management. This audit ensures APIs can
    evolve while maintaining compatibility with existing consumers.
  why_it_matters: |
    Poor versioning strategy makes API evolution difficult and breaks consumer
    integrations. A well-designed versioning approach enables continuous
    improvement while minimizing disruption to API consumers. Without proper
    versioning, organizations face either API stagnation or consumer breakage.
  when_to_run:
  - During API design phase
  - When establishing API standards
  - Before major API changes
  - During API governance reviews
prerequisites:
  required_artifacts:
  - type: api_documentation
    description: Current API specifications
  - type: api_standards
    description: API design guidelines
  - type: consumer_inventory
    description: List of API consumers
  access_requirements:
  - API documentation access
  - API governance documentation
  - Consumer relationship information
discovery:
  file_patterns:
  - glob: '**/openapi*.{yaml,json}'
    purpose: Find OpenAPI specifications
  - glob: '**/swagger*.{yaml,json}'
    purpose: Find Swagger documentation
  - glob: '**/api/**/*.{yaml,json}'
    purpose: Find API definitions
  - glob: '**/versioning*'
    purpose: Find versioning documentation
  interview_questions:
  - role: API Product Owner
    questions:
    - What is the versioning strategy?
    - How are breaking changes communicated?
    - What is the deprecation policy?
  - role: API Developer
    questions:
    - How do you version APIs currently?
    - What challenges exist with current approach?
    - How are multiple versions maintained?
knowledge_sources:
  guides:
  - id: api-versioning
    name: API Versioning Best Practices
    url: https://www.mulesoft.com/resources/api/api-versioning
  - id: semver
    name: Semantic Versioning
    url: https://semver.org/
  standards:
  - id: openapi
    name: OpenAPI Specification
    relevance: API documentation standard
tooling:
  analysis_tools:
  - tool: Spectral
    purpose: API linting and standards
    command: spectral lint openapi.yaml
  - tool: Optic
    purpose: API change detection
  - tool: swagger-diff
    purpose: API version comparison
signals:
  critical:
  - id: AVS-CRIT-001
    signal: No versioning strategy exists
    evidence_indicators:
    - APIs have no version indication
    - Breaking changes made without versioning
    - No way to distinguish API versions
    explanation: |
      Without versioning, any API change risks breaking consumers with
      no way to manage the transition.
    remediation: Implement comprehensive versioning strategy
  - id: AVS-CRIT-002
    signal: Multiple inconsistent versioning approaches
    evidence_indicators:
    - Different APIs use different schemes
    - URL and header versioning mixed
    - No organizational standard
    explanation: |
      Inconsistent versioning confuses consumers and complicates API
      management across the organization.
    remediation: Standardize on single versioning approach
  high:
  - id: AVS-HIGH-001
    signal: No deprecation policy defined
    remediation: Define and document deprecation policy
  - id: AVS-HIGH-002
    signal: Breaking changes without version increment
    remediation: Implement breaking change controls
  - id: AVS-HIGH-003
    signal: No consumer communication process
    remediation: Establish version communication process
  medium:
  - id: AVS-MED-001
    signal: Version lifecycle not documented
    remediation: Document version support lifecycle
  - id: AVS-MED-002
    signal: Limited tooling for version management
    remediation: Implement version management tooling
  low:
  - id: AVS-LOW-001
    signal: Documentation could better explain versioning
    remediation: Improve versioning documentation
  - id: AVS-LOW-002
    signal: Minor inconsistencies in version format
    remediation: Standardize version formatting
  positive:
  - id: AVS-POS-001
    signal: Clear, consistent versioning strategy
  - id: AVS-POS-002
    signal: Well-documented deprecation process
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Review Current Strategy
    description: Document existing versioning approach
    duration_estimate: 1 hour
  - id: '2'
    name: Analyze Consistency
    description: Check consistency across APIs
    duration_estimate: 1 hour
  - id: '3'
    name: Evaluate Mechanisms
    description: Assess versioning implementation
    duration_estimate: 1 hour
  - id: '4'
    name: Review Lifecycle Management
    description: Examine version lifecycle policies
    duration_estimate: 1 hour
  - id: '5'
    name: Assess Consumer Impact
    description: Evaluate impact on API consumers
    duration_estimate: 1 hour
  - id: '6'
    name: Document Recommendations
    description: Create strategy improvement recommendations
    duration_estimate: 1 hour
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Current Strategy Analysis
    - Consistency Assessment
    - Lifecycle Management Review
    - Recommendations
closeout_checklist:
- id: avs-001
  item: Versioning strategy documented
  level: WARNING
  verification: manual
- id: avs-002
  item: Consistency assessed across APIs
  level: WARNING
  verification: manual
- id: avs-003
  item: Improvement recommendations provided
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - api-providers
    - platform-organizations
  compliance_mappings:
  - framework: API Governance
    control: Version Management
    description: API version control standards
relationships:
  commonly_combined:
  - api-design.api-standards
  - legacy-migration.api-versioning.deprecation-management
  depends_on:
  - api-design.api-inventory
  feeds_into:
  - legacy-migration.api-versioning.backward-compatibility
  - api-governance.api-lifecycle
