audit:
  id: legacy-migration.api-versioning.consumer-migration
  name: API Consumer Migration Assessment Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: legacy-migration
  category_number: 33
  subcategory: api-versioning
  tier: phd
  estimated_duration: 4-8 hours  # median: 6h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: api
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Tracks and supports API consumer migration from deprecated versions to
    current versions. This audit identifies consumers still using deprecated
    APIs, assesses migration progress, identifies blockers, and ensures
    consumers have adequate support and documentation to complete migration.
  why_it_matters: |
    API deprecation is only successful when consumers migrate. Understanding
    consumer migration status enables targeted support, realistic timeline
    setting, and informed decisions about version sunset. Stranded consumers
    on deprecated versions create support burden and security risk.
  when_to_run:
  - During deprecation periods
  - Before version sunset
  - When migration progress stalls
  - As part of API portfolio review
prerequisites:
  required_artifacts:
  - type: consumer_list
    description: Registered API consumers
  - type: usage_analytics
    description: API usage data by version
  - type: migration_guides
    description: Consumer migration documentation
  access_requirements:
  - API analytics access
  - Consumer contact information
  - Support ticket access
discovery:
  file_patterns:
  - glob: '**/api-consumers*'
    purpose: Find consumer registrations
  - glob: '**/migration-guide*'
    purpose: Find migration documentation
  interview_questions:
  - role: Developer Relations
    questions:
    - Which consumers are still on deprecated versions?
    - What are the common migration blockers?
    - How is migration progress tracked?
  - role: API Product Owner
    questions:
    - What is the migration success rate?
    - How do you support consumer migration?
    - What feedback have consumers provided?
knowledge_sources:
  guides:
  - id: developer-experience
    name: Developer Experience Best Practices
    url: https://www.devrel.agency/developer-experience
  standards:
  - id: api-governance
    name: API Governance Standards
    relevance: Consumer management practices
tooling:
  analysis_tools:
  - tool: API Analytics
    purpose: Track version usage by consumer
  - tool: Mixpanel
    purpose: API usage analytics
  - tool: Amplitude
    purpose: Consumer behavior tracking
signals:
  critical:
  - id: ACM-CRIT-001
    signal: Major consumers unable to migrate before sunset
    evidence_indicators:
    - High-volume consumers on deprecated version
    - Migration blockers unresolved
    - Sunset date approaching
    explanation: |
      Major consumers stranded on deprecated versions will experience
      outages at sunset, causing significant business impact.
    remediation: Provide dedicated migration support or extend timeline
  - id: ACM-CRIT-002
    signal: No visibility into consumer migration status
    evidence_indicators:
    - Usage by version not tracked
    - Consumer identity unknown
    - Cannot contact consumers
    explanation: |
      Without visibility into consumer status, migration cannot be
      managed effectively and sunset risks cannot be assessed.
    remediation: Implement consumer tracking and analytics
  high:
  - id: ACM-HIGH-001
    signal: Migration documentation inadequate
    remediation: Improve migration guides with examples
  - id: ACM-HIGH-002
    signal: Common migration blockers not addressed
    remediation: Provide solutions for common blockers
  - id: ACM-HIGH-003
    signal: Consumer feedback not incorporated
    remediation: Establish feedback loop and act on input
  medium:
  - id: ACM-MED-001
    signal: Migration progress slower than planned
    remediation: Increase support or adjust timeline
  - id: ACM-MED-002
    signal: Support resources insufficient
    remediation: Allocate additional migration support
  low:
  - id: ACM-LOW-001
    signal: Minor consumers have not started migration
    remediation: Send reminders and offer support
  - id: ACM-LOW-002
    signal: Migration metrics incomplete
    remediation: Improve tracking and reporting
  positive:
  - id: ACM-POS-001
    signal: High percentage of consumers migrated
  - id: ACM-POS-002
    signal: Strong migration support and documentation
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Analyze Version Usage
    description: Determine usage by API version
    duration_estimate: 1 hour
  - id: '2'
    name: Identify Consumers
    description: List consumers on deprecated versions
    duration_estimate: 1 hour
  - id: '3'
    name: Assess Migration Progress
    description: Track consumer migration status
    duration_estimate: 1 hour
  - id: '4'
    name: Identify Blockers
    description: Determine migration obstacles
    duration_estimate: 1 hour
  - id: '5'
    name: Review Support Resources
    description: Assess migration support adequacy
    duration_estimate: 1 hour
  - id: '6'
    name: Create Migration Report
    description: Document migration status and recommendations
    duration_estimate: 2 hours
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Migration Progress Report
    - Consumer Status
    - Blocker Analysis
    - Recommendations
closeout_checklist:
- id: acm-001
  item: Consumer migration status documented
  level: WARNING
  verification: tool_output
- id: acm-002
  item: Migration blockers identified
  level: WARNING
  verification: manual
- id: acm-003
  item: Support recommendations provided
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - api-providers
    - platform-organizations
  compliance_mappings:
  - framework: API Governance
    control: Consumer Management
    description: API consumer lifecycle
relationships:
  commonly_combined:
  - legacy-migration.api-versioning.deprecation-management
  - developer-experience.api-support
  depends_on:
  - api-design.api-analytics
  feeds_into:
  - legacy-migration.sunset-decommission.api-retirement
