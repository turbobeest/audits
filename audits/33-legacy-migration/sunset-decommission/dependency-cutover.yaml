audit:
  id: legacy-migration.sunset-decommission.dependency-cutover
  name: Dependency Cutover Assessment Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: legacy-migration
  category_number: 33
  subcategory: sunset-decommission
  tier: expert
  estimated_duration: 4-6 hours  # median: 5h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: system
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Verifies that all dependencies on a system being decommissioned have been
    successfully transitioned to alternatives. This audit confirms that no
    active systems rely on the decommissioning target and that all integrations
    have been redirected or removed.
  why_it_matters: |
    Decommissioning a system with active dependencies causes outages in
    dependent systems. Complete dependency cutover verification prevents
    unexpected failures and ensures a clean decommission without collateral
    damage.
  when_to_run:
  - Before decommission execution
  - After dependency migration
  - During decommission readiness review
  - When dependencies are discovered late
prerequisites:
  required_artifacts:
  - type: dependency_map
    description: Complete dependency inventory
  - type: cutover_plan
    description: Dependency migration plan
  - type: monitoring_data
    description: Traffic and usage data
  access_requirements:
  - Network traffic visibility
  - Application logs
  - Monitoring systems
  - CMDB access
discovery:
  file_patterns:
  - glob: '**/dependencies*'
    purpose: Find dependency documentation
  - glob: '**/cutover*'
    purpose: Find cutover plans
  - glob: '**/integration*'
    purpose: Find integration documentation
  interview_questions:
  - role: Integration Engineer
    questions:
    - Have all integrations been redirected?
    - What traffic patterns remain?
    - Are there any undocumented integrations?
  - role: Operations Engineer
    questions:
    - What traffic do you see to this system?
    - What monitoring alerts are configured?
    - How will you detect if something is missed?
knowledge_sources:
  guides:
  - id: adm
    name: Application Dependency Mapping
    url: https://www.servicenow.com/products/it-operations-management/application-dependency-mapping.html
  standards:
  - id: itil-change
    name: ITIL Change Management
    relevance: Change verification practices
tooling:
  analysis_tools:
  - tool: Dynatrace
    purpose: Dependency discovery
  - tool: AppDynamics
    purpose: Application flow mapping
  - tool: ServiceNow Discovery
    purpose: CMDB population
  - tool: Network monitoring
    purpose: Traffic analysis
signals:
  critical:
  - id: DCO-CRIT-001
    signal: Active traffic still flowing to system
    evidence_indicators:
    - API calls being received
    - Database queries from external systems
    - Users still accessing system
    explanation: |
      Active dependencies indicate incomplete cutover. Decommissioning
      will break these connections.
    remediation: Complete dependency migration before decommission
  - id: DCO-CRIT-002
    signal: Critical system depends on decommission target
    evidence_indicators:
    - Production system integration
    - Business-critical data flow
    - No alternative configured
    explanation: |
      Critical system dependencies must be resolved to prevent
      business-critical failures.
    remediation: Migrate critical dependency immediately
  high:
  - id: DCO-HIGH-001
    signal: Some dependencies not migrated
    remediation: Complete remaining migrations
  - id: DCO-HIGH-002
    signal: Undocumented dependencies discovered
    remediation: Investigate and migrate discovered dependencies
  - id: DCO-HIGH-003
    signal: Batch jobs still configured
    remediation: Disable or redirect batch jobs
  medium:
  - id: DCO-MED-001
    signal: Low-volume traffic remains
    remediation: Identify source and redirect
  - id: DCO-MED-002
    signal: Monitoring not detecting all traffic
    remediation: Improve traffic monitoring
  low:
  - id: DCO-LOW-001
    signal: Documentation cleanup needed
    remediation: Update documentation post-decommission
  - id: DCO-LOW-002
    signal: Historical references remain
    remediation: Clean up references
  positive:
  - id: DCO-POS-001
    signal: No active dependencies detected
  - id: DCO-POS-002
    signal: All known dependencies migrated and verified
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Review Dependency Map
    description: Confirm known dependencies
    duration_estimate: 1 hour
  - id: '2'
    name: Analyze Traffic
    description: Monitor for active connections
    duration_estimate: 2 hours
  - id: '3'
    name: Check Migration Status
    description: Verify all migrations completed
    duration_estimate: 1 hour
  - id: '4'
    name: Scan for Undocumented
    description: Discover unknown dependencies
    duration_estimate: 1 hour
  - id: '5'
    name: Verify Alternatives
    description: Confirm alternatives are working
    duration_estimate: 30 minutes
  - id: '6'
    name: Document Readiness
    description: Create cutover readiness report
    duration_estimate: 30 minutes
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Dependency Review
    - Traffic Analysis
    - Migration Status
    - Cutover Readiness
closeout_checklist:
- id: dco-001
  item: No active dependencies detected
  level: GATE
  verification: tool_output
- id: dco-002
  item: All known dependencies migrated
  level: GATE
  verification: manual
- id: dco-003
  item: Alternatives verified working
  level: GATE
  verification: manual
governance:
  applicable_to:
    archetypes:
    - system-decommission
    - integration-heavy-systems
  compliance_mappings:
  - framework: ITIL
    control: Change Management
    description: Change verification
relationships:
  commonly_combined:
  - legacy-migration.sunset-decommission.decommission-planning
  - legacy-migration.legacy-system-analysis.integration-mapping
  depends_on:
  - legacy-migration.legacy-system-analysis.integration-mapping
  feeds_into:
  - legacy-migration.sunset-decommission.decommission-execution
