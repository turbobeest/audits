audit:
  id: legacy-migration.code-modernization.pattern-modernization
  name: Design Pattern Modernization Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: legacy-migration
  category_number: 33
  subcategory: code-modernization
  tier: expert
  estimated_duration: 4-6 hours  # median: 5h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: codebase
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Identifies outdated design patterns and antipatterns in legacy code and
    recommends modern alternatives. This audit evaluates architectural patterns,
    concurrency approaches, data access patterns, and other structural elements
    against current best practices.
  why_it_matters: |
    Outdated patterns can limit scalability, increase maintenance burden, and
    prevent adoption of modern tooling. Modernizing patterns improves code
    quality, enables better testing, and aligns the codebase with current
    development practices.
  when_to_run:
  - During modernization planning
  - When refactoring strategy is developed
  - During architecture reviews
  - When maintainability issues arise
prerequisites:
  required_artifacts:
  - type: source_code
    description: Legacy codebase
  - type: architecture_documentation
    description: System architecture
  access_requirements:
  - Read access to source code
  - Architecture documentation
discovery:
  file_patterns:
  - glob: '**/*.{java,cs,py,js,ts}'
    purpose: Find source code
  - glob: '**/Singleton*'
    purpose: Find potential singletons
  - glob: '**/Factory*'
    purpose: Find factory patterns
  - glob: '**/Manager*'
    purpose: Find manager/god classes
  interview_questions:
  - role: Senior Developer
    questions:
    - What patterns do you see most often?
    - Which patterns cause problems?
    - What modern patterns would help?
  - role: Software Architect
    questions:
    - What is the target architecture style?
    - What patterns should be standardized?
    - What antipatterns need elimination?
knowledge_sources:
  guides:
  - id: design-patterns
    name: Design Patterns by Gang of Four
    url: https://refactoring.guru/design-patterns
  - id: patterns-of-enterprise
    name: Patterns of Enterprise Application Architecture
    url: https://martinfowler.com/books/eaa.html
  standards:
  - id: solid-principles
    name: SOLID Principles
    relevance: Object-oriented design principles
tooling:
  analysis_tools:
  - tool: Structure101
    purpose: Architectural pattern analysis
  - tool: SonarQube
    purpose: Pattern and antipattern detection
  - tool: ndepend
    purpose: .NET pattern analysis
  - tool: DesigniteJava
    purpose: Java design smell detection
    command: java -jar DesigniteJava.jar -i src -o output
signals:
  critical:
  - id: PMD-CRIT-001
    signal: Antipatterns prevent scalability or testing
    evidence_indicators:
    - Singletons with global state
    - Tight coupling preventing unit testing
    - Synchronous blocking patterns
    explanation: |
      Deeply embedded antipatterns can fundamentally limit system
      capabilities and require significant effort to remediate.
    remediation: Prioritize antipattern removal in refactoring
  - id: PMD-CRIT-002
    signal: God objects controlling entire subsystems
    evidence_indicators:
    - Classes with thousands of lines
    - Single class handling multiple responsibilities
    - Extreme coupling to god object
    explanation: |
      God objects are extremely difficult to test, maintain, and modify
      safely. They often become bottlenecks for development.
    remediation: Plan decomposition into focused components
  high:
  - id: PMD-HIGH-001
    signal: Outdated concurrency patterns
    remediation: Modernize to async/await or reactive patterns
  - id: PMD-HIGH-002
    signal: Database access without repository pattern
    remediation: Introduce data access abstraction
  - id: PMD-HIGH-003
    signal: Hard-coded dependencies throughout
    remediation: Introduce dependency injection
  medium:
  - id: PMD-MED-001
    signal: Inconsistent pattern usage
    remediation: Standardize pattern implementations
  - id: PMD-MED-002
    signal: Overuse of inheritance
    remediation: Favor composition over inheritance
  low:
  - id: PMD-LOW-001
    signal: Verbose patterns replaceable with language features
    remediation: Modernize during maintenance
  - id: PMD-LOW-002
    signal: Pattern naming inconsistencies
    remediation: Standardize naming conventions
  positive:
  - id: PMD-POS-001
    signal: Modern patterns well-applied
  - id: PMD-POS-002
    signal: Consistent pattern usage across codebase
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Identify Current Patterns
    description: Catalog patterns in use
    duration_estimate: 2 hours
  - id: '2'
    name: Detect Antipatterns
    description: Find problematic patterns
    duration_estimate: 1 hour
  - id: '3'
    name: Assess Impact
    description: Evaluate impact of pattern issues
    duration_estimate: 1 hour
  - id: '4'
    name: Recommend Alternatives
    description: Identify modern pattern replacements
    duration_estimate: 1 hour
  - id: '5'
    name: Create Migration Plan
    description: Plan pattern modernization
    duration_estimate: 1 hour
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Pattern Inventory
    - Antipattern Analysis
    - Modernization Recommendations
    - Migration Priority
closeout_checklist:
- id: pmd-001
  item: Current patterns documented
  level: WARNING
  verification: manual
- id: pmd-002
  item: Antipatterns identified
  level: WARNING
  verification: manual
- id: pmd-003
  item: Modern alternatives recommended
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - legacy-codebases
    - modernization-projects
  compliance_mappings:
  - framework: ISO 25010
    control: Maintainability
    description: Code modifiability and reusability
relationships:
  commonly_combined:
  - legacy-migration.code-modernization.refactoring-strategy
  - code-quality.architecture-review
  depends_on:
  - legacy-migration.technical-debt-assessment.code-smell-analysis
  feeds_into:
  - legacy-migration.code-modernization.refactoring-strategy
  - architecture-design.pattern-standardization
