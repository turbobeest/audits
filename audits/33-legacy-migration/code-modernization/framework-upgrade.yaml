audit:
  id: legacy-migration.code-modernization.framework-upgrade
  name: Framework Upgrade Assessment Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: legacy-migration
  category_number: 33
  subcategory: code-modernization
  tier: phd
  estimated_duration: 6-8 hours  # median: 7h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: codebase
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Assesses the feasibility and requirements for upgrading application frameworks
    including breaking change analysis, deprecated API identification, migration
    path evaluation, and effort estimation. This audit ensures framework upgrades
    are planned properly and identifies all required code changes.
  why_it_matters: |
    Framework upgrades are often necessary for security patches and continued
    support but can require significant code changes. Understanding the scope
    of changes needed enables proper planning and prevents upgrade projects
    from becoming unexpectedly large.
  when_to_run:
  - Before major framework upgrades
  - When framework EOL approaches
  - During technology planning
  - When security patches require upgrades
prerequisites:
  required_artifacts:
  - type: source_code
    description: Application codebase
  - type: dependency_manifest
    description: Current framework versions
  - type: upgrade_guide
    description: Framework migration documentation
  access_requirements:
  - Read access to source code
  - Framework documentation access
  - Dependency management access
discovery:
  file_patterns:
  - glob: '**/package.json'
    purpose: Find Node.js dependencies
  - glob: '**/pom.xml'
    purpose: Find Java dependencies
  - glob: '**/requirements*.txt'
    purpose: Find Python dependencies
  - glob: '**/Gemfile*'
    purpose: Find Ruby dependencies
  - glob: '**/*.csproj'
    purpose: Find .NET dependencies
  interview_questions:
  - role: Tech Lead
    questions:
    - What framework version are you targeting?
    - What deprecated features are currently used?
    - What breaking changes are expected?
  - role: Developer
    questions:
    - What areas of code use framework-specific APIs?
    - Have you upgraded this framework before?
    - What testing exists for framework functionality?
knowledge_sources:
  guides:
  - id: react-upgrade
    name: React Upgrade Guide
    url: https://react.dev/blog
  - id: spring-migration
    name: Spring Boot Migration Guide
    url: https://github.com/spring-projects/spring-boot/wiki
  - id: django-upgrade
    name: Django Upgrade Guide
    url: https://docs.djangoproject.com/en/stable/howto/upgrade-version/
  standards:
  - id: semver
    name: Semantic Versioning
    relevance: Version compatibility
tooling:
  analysis_tools:
  - tool: npm-check-updates
    purpose: Node.js dependency analysis
    command: ncu --format group
  - tool: openrewrite
    purpose: Automated code migration
    command: mvn rewrite:run
  - tool: rector
    purpose: PHP automated upgrades
  - tool: pyupgrade
    purpose: Python syntax modernization
    command: pyupgrade --py3-plus *.py
  - tool: jdeprscan
    purpose: Java deprecated API scanner
    command: jdeprscan --release 17 app.jar
signals:
  critical:
  - id: FUA-CRIT-001
    signal: Framework upgrade requires major API changes
    evidence_indicators:
    - Multiple breaking changes affect core code
    - Deprecated APIs used extensively
    - No automated migration path available
    explanation: |
      Extensive breaking changes make framework upgrade equivalent to
      major refactoring project with associated risks and costs.
    remediation: Plan comprehensive upgrade project with adequate resources
  - id: FUA-CRIT-002
    signal: Current framework version has unpatched vulnerabilities
    evidence_indicators:
    - Known CVEs without patches
    - Security advisories for current version
    - Upgrade is only remediation
    explanation: |
      Security vulnerabilities require urgent upgrade regardless of
      effort required.
    remediation: Prioritize upgrade for security remediation
  high:
  - id: FUA-HIGH-001
    signal: Significant deprecated API usage
    remediation: Plan deprecated API replacement
  - id: FUA-HIGH-002
    signal: Upgrade requires dependency chain updates
    remediation: Map and plan dependent updates
  - id: FUA-HIGH-003
    signal: Test coverage insufficient for upgrade
    remediation: Add tests before upgrade
  medium:
  - id: FUA-MED-001
    signal: Minor code changes needed
    remediation: Document and plan changes
  - id: FUA-MED-002
    signal: Configuration updates required
    remediation: Plan configuration migration
  low:
  - id: FUA-LOW-001
    signal: Documentation updates needed
    remediation: Update documentation post-upgrade
  - id: FUA-LOW-002
    signal: Minor deprecation warnings
    remediation: Address in subsequent iteration
  positive:
  - id: FUA-POS-001
    signal: Minimal changes needed for upgrade
  - id: FUA-POS-002
    signal: Automated migration tools available
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Identify Current Version
    description: Document current framework versions
    duration_estimate: 30 minutes
  - id: '2'
    name: Review Release Notes
    description: Analyze breaking changes and deprecations
    duration_estimate: 2 hours
  - id: '3'
    name: Scan for Deprecated APIs
    description: Find usage of deprecated functionality
    duration_estimate: 1 hour
  - id: '4'
    name: Identify Code Changes
    description: Map required code modifications
    duration_estimate: 2 hours
  - id: '5'
    name: Assess Test Coverage
    description: Evaluate testing readiness
    duration_estimate: 1 hour
  - id: '6'
    name: Estimate Effort
    description: Create effort estimate for upgrade
    duration_estimate: 1 hour
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Version Analysis
    - Breaking Changes
    - Required Code Changes
    - Effort Estimate
    - Upgrade Plan
closeout_checklist:
- id: fua-001
  item: Breaking changes identified
  level: WARNING
  verification: manual
- id: fua-002
  item: Deprecated API usage catalogued
  level: WARNING
  verification: tool_output
- id: fua-003
  item: Effort estimate provided
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - web-applications
    - framework-dependent-systems
  compliance_mappings:
  - framework: PCI DSS
    control: '6.2'
    description: System component security patches
  - framework: ISO 27001
    control: A.12.6.1
    description: Management of technical vulnerabilities
relationships:
  commonly_combined:
  - legacy-migration.technical-debt-assessment.dependency-debt
  - security.vulnerability-management
  depends_on:
  - inventory.dependency-inventory
  feeds_into:
  - legacy-migration.migration-planning.technology-selection
  - project-management.upgrade-planning
