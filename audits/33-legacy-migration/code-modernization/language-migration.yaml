# ============================================================
# AUDIT: Language Migration Assessment
# Category: 33 - Legacy & Migration
# Subcategory: code-modernization
# ============================================================

audit:
  id: "legacy-migration.code-modernization.language-migration"
  name: "Language Migration Assessment Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "legacy-migration"
  category_number: 33
  subcategory: "code-modernization"

  tier: "expert"
  estimated_duration: "8-12 hours"  # median: 10h

  completeness: "requires_discovery"
  requires_runtime: false
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "system"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Assesses the feasibility and requirements for migrating applications from
    one programming language to another, including feature mapping, library
    equivalents, paradigm differences, and rewrite strategies. This audit
    evaluates whether language migration is justified and what approach to take.

  why_it_matters: |
    Language migrations are among the most expensive and risky modernization
    efforts. They may be necessary when a language becomes unsupported, talent
    is unavailable, or platform requirements change. Thorough assessment prevents
    underestimating the effort or choosing an inappropriate target language.

  when_to_run:
    - "When evaluating language migration"
    - "When current language becomes unsupported"
    - "During platform modernization"
    - "When talent availability is critical concern"

prerequisites:
  required_artifacts:
    - type: "source_code"
      description: "Current application codebase"
    - type: "architecture_documentation"
      description: "System architecture"
    - type: "requirements"
      description: "Functional requirements documentation"

  access_requirements:
    - "Complete source code access"
    - "Architecture documentation"
    - "Business requirements"
    - "Team skills assessment"

discovery:
  file_patterns:
    - glob: "**/*.{cobol,cob,cbl}"
      purpose: "Find COBOL code"
    - glob: "**/*.{vb,vbs}"
      purpose: "Find VB/VBScript code"
    - glob: "**/*.{pl,pm}"
      purpose: "Find Perl code"
    - glob: "**/*.{f,f90,for}"
      purpose: "Find Fortran code"

  interview_questions:
    - role: "Software Architect"
      questions:
        - "Why is language migration being considered?"
        - "What target languages are being evaluated?"
        - "What is acceptable for rewrite vs automated translation?"
    - role: "Engineering Manager"
      questions:
        - "What team skills exist for target language?"
        - "What is the timeline pressure?"
        - "What alternatives to migration exist?"

knowledge_sources:
  guides:
    - id: "cobol-modernization"
      name: "COBOL Modernization Approaches"
      url: "https://www.microfocus.com/en-us/what-is/cobol-modernization"
    - id: "language-migration-patterns"
      name: "Legacy Migration Patterns"
      url: "https://martinfowler.com/articles/patterns-legacy-displacement/"

  standards:
    - id: "iso-25010"
      name: "ISO/IEC 25010"
      relevance: "Software quality characteristics"

tooling:
  analysis_tools:
    - tool: "AWS Mainframe Modernization"
      purpose: "COBOL to Java/C# conversion"
    - tool: "BluAge"
      purpose: "Mainframe application modernization"
    - tool: "SonarQube"
      purpose: "Code complexity analysis"
    - tool: "CAST Highlight"
      purpose: "Application portfolio analysis"

signals:
  critical:
    - id: "LMA-CRIT-001"
      signal: "Language-specific features have no equivalent"
      evidence_indicators:
        - "Language idioms cannot be translated"
        - "Library dependencies don't exist in target"
        - "Platform features are language-specific"
      explanation: |
        Fundamental incompatibilities between languages may make migration
        infeasible or require complete redesign of affected functionality.
      remediation: "Evaluate alternative approaches or accept limitations"

    - id: "LMA-CRIT-002"
      signal: "Business logic undocumented and embedded in code"
      evidence_indicators:
        - "Complex business rules in code"
        - "No documentation of logic"
        - "Original developers unavailable"
      explanation: |
        Migrating code with undocumented business logic risks losing
        critical functionality or introducing subtle bugs.
      remediation: "Extract and document business logic before migration"

  high:
    - id: "LMA-HIGH-001"
      signal: "Rewrite effort exceeds available resources"
      remediation: "Consider incremental approach or alternatives"

    - id: "LMA-HIGH-002"
      signal: "No team expertise in target language"
      remediation: "Plan training or hiring before migration"

    - id: "LMA-HIGH-003"
      signal: "Test coverage insufficient for validation"
      remediation: "Add characterization tests before migration"

  medium:
    - id: "LMA-MED-001"
      signal: "Paradigm shift requires design changes"
      remediation: "Plan architecture adaptation"

    - id: "LMA-MED-002"
      signal: "Performance characteristics differ"
      remediation: "Plan performance optimization in target"

  low:
    - id: "LMA-LOW-001"
      signal: "Minor library differences"
      remediation: "Document library mappings"

    - id: "LMA-LOW-002"
      signal: "Coding style adaptation needed"
      remediation: "Establish target language standards"

  positive:
    - id: "LMA-POS-001"
      signal: "Automated translation tools available"

    - id: "LMA-POS-002"
      signal: "Team experienced in target language"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Analyze Source Language"
      description: "Inventory language features and patterns used"
      duration_estimate: "2 hours"

    - id: "2"
      name: "Evaluate Target Language"
      description: "Assess target language capabilities"
      duration_estimate: "2 hours"

    - id: "3"
      name: "Map Features"
      description: "Create feature mapping between languages"
      duration_estimate: "2 hours"

    - id: "4"
      name: "Identify Libraries"
      description: "Map library dependencies to equivalents"
      duration_estimate: "2 hours"

    - id: "5"
      name: "Assess Team Readiness"
      description: "Evaluate team skills for target language"
      duration_estimate: "1 hour"

    - id: "6"
      name: "Estimate Effort"
      description: "Create migration effort estimate"
      duration_estimate: "2 hours"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Language Comparison"
        - "Feature Mapping"
        - "Library Analysis"
        - "Team Readiness"
        - "Effort Estimate"
        - "Migration Recommendations"

closeout_checklist:
  - id: "lma-001"
    item: "Feature mapping completed"
    level: "WARNING"
    verification: "manual"
  - id: "lma-002"
    item: "Infeasible features identified"
    level: "WARNING"
    verification: "manual"
  - id: "lma-003"
    item: "Migration approach recommended"
    level: "WARNING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["mainframe-systems", "legacy-language-codebases"]

  compliance_mappings:
    - framework: "ISO 27001"
      control: "A.14.2.2"
      description: "System change control"

relationships:
  commonly_combined:
    - "legacy-migration.legacy-system-analysis.knowledge-concentration"
    - "legacy-migration.migration-planning.roadmap-development"
  depends_on:
    - "legacy-migration.legacy-system-analysis.business-criticality"
  feeds_into:
    - "legacy-migration.migration-planning.resource-requirements"
    - "training.skills-development"
