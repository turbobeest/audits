audit:
  id: legacy-migration.code-modernization.documentation-generation
  name: Legacy Documentation Generation Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: legacy-migration
  category_number: 33
  subcategory: code-modernization
  tier: expert
  estimated_duration: 4-6 hours  # median: 5h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: codebase
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates approaches for generating documentation from legacy code including
    API documentation extraction, architecture diagram generation, code comments
    analysis, and knowledge capture strategies. This audit identifies what
    documentation can be auto-generated and what requires manual documentation.
  why_it_matters: |
    Legacy systems often lack documentation, making maintenance and migration
    difficult. Generating documentation from code provides a foundation for
    understanding the system. Knowing what can be auto-generated versus what
    requires human effort helps allocate documentation resources effectively.
  when_to_run:
  - During modernization planning
  - When documentation gaps are critical
  - Before knowledge transfer efforts
  - During team onboarding
prerequisites:
  required_artifacts:
  - type: source_code
    description: Legacy codebase
  - type: existing_documentation
    description: Any current documentation
  access_requirements:
  - Read access to source code
  - Documentation tool access
  - Repository access
discovery:
  file_patterns:
  - glob: '**/*.{java,cs,py,js,ts,rb,go}'
    purpose: Find source code for documentation
  - glob: '**/README*'
    purpose: Find existing documentation
  - glob: '**/*.md'
    purpose: Find markdown documentation
  - glob: '**/docs/**'
    purpose: Find documentation directories
  interview_questions:
  - role: Developer
    questions:
    - What documentation would be most valuable?
    - What parts of the code are hardest to understand?
    - Are code comments generally accurate?
  - role: Technical Writer
    questions:
    - What documentation exists?
    - What documentation tools are available?
    - What documentation standards are used?
knowledge_sources:
  guides:
  - id: code-archaeology
    name: Software Archaeology
    url: https://www.oreilly.com/content/software-archaeology/
  - id: documentation-system
    name: The Documentation System
    url: https://documentation.divio.com/
  standards:
  - id: diátaxis
    name: Diátaxis Framework
    relevance: Documentation organization
tooling:
  analysis_tools:
  - tool: Doxygen
    purpose: Code documentation generation
    command: doxygen Doxyfile
  - tool: Swagger/OpenAPI
    purpose: API documentation
  - tool: JSDoc
    purpose: JavaScript documentation
    command: jsdoc -c jsdoc.json
  - tool: Sphinx
    purpose: Python documentation
    command: sphinx-build -b html docs/ _build/
  - tool: Structurizr
    purpose: Architecture documentation
  - tool: PlantUML
    purpose: UML diagram generation
signals:
  critical:
  - id: DGN-CRIT-001
    signal: Critical business logic completely undocumented
    evidence_indicators:
    - No comments in business-critical code
    - No architecture documentation
    - No API documentation
    explanation: |
      Complete documentation gaps for critical code make maintenance
      extremely risky and knowledge loss inevitable.
    remediation: Prioritize documentation of critical areas
  - id: DGN-CRIT-002
    signal: Existing documentation severely outdated
    evidence_indicators:
    - Documentation describes different system
    - APIs documented no longer exist
    - Architecture diagrams don't match code
    explanation: |
      Outdated documentation is worse than none as it misleads
      and wastes time.
    remediation: Regenerate documentation from current code
  high:
  - id: DGN-HIGH-001
    signal: API documentation cannot be auto-generated
    remediation: Manual API documentation project
  - id: DGN-HIGH-002
    signal: Code comments misleading or incorrect
    remediation: Review and correct comments during audit
  - id: DGN-HIGH-003
    signal: No architecture documentation extractable
    remediation: Manual architecture documentation
  medium:
  - id: DGN-MED-001
    signal: Documentation generation requires setup
    remediation: Configure documentation tooling
  - id: DGN-MED-002
    signal: Mixed documentation quality
    remediation: Standardize documentation approach
  low:
  - id: DGN-LOW-001
    signal: Documentation formatting inconsistent
    remediation: Apply documentation templates
  - id: DGN-LOW-002
    signal: Minor documentation gaps
    remediation: Fill during regular development
  positive:
  - id: DGN-POS-001
    signal: Code well-commented enabling auto-generation
  - id: DGN-POS-002
    signal: Documentation infrastructure in place
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Existing Documentation
    description: Catalog what documentation exists
    duration_estimate: 1 hour
  - id: '2'
    name: Analyze Code Comments
    description: Assess comment quality and coverage
    duration_estimate: 1 hour
  - id: '3'
    name: Evaluate Auto-Generation Options
    description: Determine what can be auto-generated
    duration_estimate: 1 hour
  - id: '4'
    name: Identify Manual Documentation Needs
    description: Determine what requires human effort
    duration_estimate: 1 hour
  - id: '5'
    name: Prioritize Documentation Efforts
    description: Rank documentation by value
    duration_estimate: 30 minutes
  - id: '6'
    name: Create Documentation Plan
    description: Plan documentation generation
    duration_estimate: 1 hour
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Existing Documentation Inventory
    - Auto-Generation Assessment
    - Manual Documentation Needs
    - Documentation Plan
closeout_checklist:
- id: dgn-001
  item: Documentation status assessed
  level: WARNING
  verification: manual
- id: dgn-002
  item: Auto-generation options identified
  level: WARNING
  verification: manual
- id: dgn-003
  item: Documentation plan created
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - legacy-systems
    - documentation-deficient-projects
  compliance_mappings:
  - framework: ISO 27001
    control: A.8.1.1
    description: Inventory of assets
relationships:
  commonly_combined:
  - legacy-migration.legacy-system-analysis.documentation-gaps
  - documentation.technical-writing
  depends_on:
  - legacy-migration.legacy-system-analysis.knowledge-concentration
  feeds_into:
  - legacy-migration.migration-planning.knowledge-requirements
  - team-health.onboarding-improvement
