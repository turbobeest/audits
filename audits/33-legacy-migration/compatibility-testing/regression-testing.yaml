audit:
  id: legacy-migration.compatibility-testing.regression-testing
  name: Regression Testing Assessment Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: legacy-migration
  category_number: 33
  subcategory: compatibility-testing
  tier: phd
  estimated_duration: 4-6 hours  # median: 5h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: system
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the regression testing strategy and coverage for migration projects,
    ensuring that migrated functionality behaves identically to the original
    system. This audit examines test automation, characterization tests, and
    comparison testing approaches used to verify migration correctness.
  why_it_matters: |
    Migration success depends on the new system behaving correctly for all
    existing use cases. Regression testing provides confidence that functionality
    has been preserved. Inadequate regression testing leads to post-migration
    bugs and loss of confidence in the new system.
  when_to_run:
  - During migration planning
  - Before migration phases
  - When test coverage is questioned
  - After migration issues
prerequisites:
  required_artifacts:
  - type: existing_tests
    description: Current test suite
  - type: test_coverage
    description: Coverage reports
  - type: test_results
    description: Historical test results
  access_requirements:
  - Test suite access
  - Test execution environment
  - Coverage reporting tools
discovery:
  file_patterns:
  - glob: '**/*test*.{py,js,ts,java,cs,rb}'
    purpose: Find test files
  - glob: '**/*spec*.{py,js,ts,rb}'
    purpose: Find spec files
  - glob: '**/e2e/**'
    purpose: Find end-to-end tests
  - glob: '**/regression/**'
    purpose: Find regression tests
  interview_questions:
  - role: QA Lead
    questions:
    - What regression testing exists?
    - How confident are you in test coverage?
    - What has regression testing caught?
  - role: Developer
    questions:
    - What areas lack test coverage?
    - Are tests reliable indicators of correctness?
    - What manual testing is required?
knowledge_sources:
  guides:
  - id: test-pyramid
    name: The Practical Test Pyramid
    url: https://martinfowler.com/articles/practical-test-pyramid.html
  - id: characterization-tests
    name: Characterization Testing
    url: https://michaelfeathers.silvrback.com/characterization-testing
  standards:
  - id: istqb
    name: ISTQB Testing Standards
    relevance: Regression testing practices
tooling:
  analysis_tools:
  - tool: Selenium
    purpose: Browser-based regression testing
  - tool: Cypress
    purpose: Modern e2e testing
    command: cypress run
  - tool: Playwright
    purpose: Cross-browser testing
    command: playwright test
  - tool: pytest
    purpose: Python test execution
    command: pytest --tb=short
  - tool: JUnit
    purpose: Java test framework
signals:
  critical:
  - id: RTA-CRIT-001
    signal: No automated regression tests for migrating functionality
    evidence_indicators:
    - Zero test coverage for migration scope
    - Manual testing only
    - No characterization tests
    explanation: |
      Without automated regression tests, migration correctness cannot be
      verified systematically, risking undetected functionality loss.
    remediation: Create characterization tests before migration
  - id: RTA-CRIT-002
    signal: Existing tests unreliable or frequently failing
    evidence_indicators:
    - High flaky test rate
    - Tests ignored due to unreliability
    - Test results not trusted
    explanation: |
      Unreliable tests provide no confidence in migration correctness
      and may mask real issues.
    remediation: Fix or replace unreliable tests
  high:
  - id: RTA-HIGH-001
    signal: Critical business flows lack test coverage
    remediation: Add tests for critical paths before migration
  - id: RTA-HIGH-002
    signal: Regression suite too slow for CI/CD
    remediation: Optimize or parallelize test execution
  - id: RTA-HIGH-003
    signal: No comparison testing between old and new
    remediation: Implement parallel comparison testing
  medium:
  - id: RTA-MED-001
    signal: Test coverage below recommended threshold
    remediation: Increase coverage for migration scope
  - id: RTA-MED-002
    signal: Test data management inadequate
    remediation: Improve test data strategy
  low:
  - id: RTA-LOW-001
    signal: Minor coverage gaps in edge cases
    remediation: Add tests during migration
  - id: RTA-LOW-002
    signal: Test organization could be improved
    remediation: Refactor test structure
  positive:
  - id: RTA-POS-001
    signal: Comprehensive automated regression suite
  - id: RTA-POS-002
    signal: Parallel comparison testing in place
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Tests
    description: Catalog existing regression tests
    duration_estimate: 1 hour
  - id: '2'
    name: Analyze Coverage
    description: Measure test coverage
    duration_estimate: 1 hour
  - id: '3'
    name: Assess Reliability
    description: Evaluate test stability
    duration_estimate: 1 hour
  - id: '4'
    name: Map to Migration Scope
    description: Align tests with migration scope
    duration_estimate: 1 hour
  - id: '5'
    name: Identify Gaps
    description: Find coverage gaps
    duration_estimate: 30 minutes
  - id: '6'
    name: Document Recommendations
    description: Create testing improvement plan
    duration_estimate: 1 hour
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Test Inventory
    - Coverage Analysis
    - Reliability Assessment
    - Gap Analysis
    - Recommendations
closeout_checklist:
- id: rta-001
  item: Test coverage measured
  level: WARNING
  verification: tool_output
- id: rta-002
  item: Coverage gaps identified
  level: WARNING
  verification: manual
- id: rta-003
  item: Test improvement plan created
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - any-migration
    - system-changes
  compliance_mappings:
  - framework: ISO 25010
    control: Functional Suitability
    description: Functional correctness
  - framework: IEC 62304
    control: Software Testing
    description: Medical device testing requirements
relationships:
  commonly_combined:
  - legacy-migration.technical-debt-assessment.test-debt
  - quality-assurance.test-strategy
  depends_on:
  - code-quality.test-coverage
  feeds_into:
  - legacy-migration.data-migration.migration-verification
  - legacy-migration.migration-planning.migration-risk-assessment
