audit:
  id: legacy-migration.compatibility-testing.performance-comparison
  name: Performance Comparison Testing Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: legacy-migration
  category_number: 33
  subcategory: compatibility-testing
  tier: expert
  estimated_duration: 4-6 hours  # median: 5h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: system
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Compares the performance characteristics of migrated systems against the
    legacy systems to ensure performance requirements are met. This audit
    evaluates response times, throughput, resource utilization, and scalability
    between old and new implementations.
  why_it_matters: |
    Migration can inadvertently degrade performance, impacting user experience
    and business operations. Comparing performance before cutover ensures the
    new system meets or exceeds the performance of the old system and identifies
    optimization opportunities.
  when_to_run:
  - During migration testing
  - Before production cutover
  - After performance issues arise
  - During acceptance testing
prerequisites:
  required_artifacts:
  - type: baseline_metrics
    description: Legacy system performance baselines
  - type: load_tests
    description: Performance test scripts
  - type: requirements
    description: Performance requirements
  access_requirements:
  - Both systems for testing
  - Performance testing tools
  - Monitoring systems
  - Load generation capability
discovery:
  file_patterns:
  - glob: '**/perf*'
    purpose: Find performance tests
  - glob: '**/load*test*'
    purpose: Find load tests
  - glob: '**/jmeter/**'
    purpose: Find JMeter tests
  - glob: '**/k6/**'
    purpose: Find k6 tests
  interview_questions:
  - role: Performance Engineer
    questions:
    - What are the performance baselines?
    - What performance testing exists?
    - What are the performance requirements?
  - role: Operations Engineer
    questions:
    - What performance issues has the legacy system had?
    - What are the capacity limits?
    - How is performance monitored?
knowledge_sources:
  guides:
  - id: performance-testing
    name: Web Performance Testing Guide
    url: https://developer.mozilla.org/en-US/docs/Web/Performance
  standards:
  - id: iso-25010
    name: ISO 25010 Performance Efficiency
    relevance: Performance quality characteristics
tooling:
  analysis_tools:
  - tool: JMeter
    purpose: Load testing
    command: jmeter -n -t test-plan.jmx -l results.jtl
  - tool: k6
    purpose: Modern load testing
    command: k6 run script.js
  - tool: Gatling
    purpose: Scala-based load testing
  - tool: Locust
    purpose: Python load testing
    command: locust -f locustfile.py
  - tool: wrk
    purpose: HTTP benchmarking
    command: wrk -t12 -c400 -d30s http://api
signals:
  critical:
  - id: PCT-CRIT-001
    signal: New system significantly slower than legacy
    evidence_indicators:
    - Response times >50% worse
    - Throughput significantly reduced
    - Cannot meet SLA requirements
    explanation: |
      Significant performance degradation will impact user experience
      and may violate SLA commitments.
    remediation: Optimize performance before cutover
  - id: PCT-CRIT-002
    signal: New system cannot handle production load
    evidence_indicators:
    - Failures under expected load
    - Resource exhaustion
    - Cannot scale to requirements
    explanation: |
      Systems that cannot handle production load will fail in production.
    remediation: Resolve scalability issues before cutover
  high:
  - id: PCT-HIGH-001
    signal: Performance degradation in key operations
    remediation: Optimize critical paths
  - id: PCT-HIGH-002
    signal: Resource utilization significantly higher
    remediation: Optimize resource usage or increase capacity
  - id: PCT-HIGH-003
    signal: No performance baseline for comparison
    remediation: Establish baseline before migration
  medium:
  - id: PCT-MED-001
    signal: Minor performance variations
    remediation: Monitor and optimize post-migration
  - id: PCT-MED-002
    signal: Performance testing incomplete
    remediation: Complete performance testing
  low:
  - id: PCT-LOW-001
    signal: Performance testing environment differs from production
    remediation: Improve environment parity
  - id: PCT-LOW-002
    signal: Some scenarios not performance tested
    remediation: Add additional performance tests
  positive:
  - id: PCT-POS-001
    signal: New system meets or exceeds performance requirements
  - id: PCT-POS-002
    signal: Improved performance in key areas
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Establish Baselines
    description: Document legacy system performance
    duration_estimate: 1 hour
  - id: '2'
    name: Define Requirements
    description: Clarify performance requirements
    duration_estimate: 30 minutes
  - id: '3'
    name: Execute Load Tests
    description: Run comparable tests on both systems
    duration_estimate: 2 hours
  - id: '4'
    name: Compare Results
    description: Analyze performance differences
    duration_estimate: 1 hour
  - id: '5'
    name: Identify Optimization
    description: Find performance improvement opportunities
    duration_estimate: 30 minutes
  - id: '6'
    name: Document Findings
    description: Create comparison report
    duration_estimate: 1 hour
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Performance Baselines
    - Comparison Results
    - Gap Analysis
    - Optimization Recommendations
closeout_checklist:
- id: pct-001
  item: Baselines established
  level: WARNING
  verification: tool_output
- id: pct-002
  item: Comparison completed
  level: WARNING
  verification: tool_output
- id: pct-003
  item: Performance acceptable for cutover
  level: GATE
  verification: manual
governance:
  applicable_to:
    archetypes:
    - any-migration
    - performance-critical-systems
  compliance_mappings:
  - framework: ISO 25010
    control: Performance Efficiency
    description: Time behavior and resource utilization
relationships:
  commonly_combined:
  - performance.load-testing
  - legacy-migration.data-migration.migration-verification
  depends_on:
  - performance.baseline-establishment
  feeds_into:
  - legacy-migration.migration-planning.migration-risk-assessment
  - operations.production-cutover
