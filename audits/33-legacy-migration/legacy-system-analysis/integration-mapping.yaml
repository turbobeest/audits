audit:
  id: legacy-migration.legacy-system-analysis.integration-mapping
  name: Integration Mapping Analysis Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: legacy-migration
  category_number: 33
  subcategory: legacy-system-analysis
  tier: phd
  estimated_duration: 6-10 hours  # median: 8h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: system
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Maps all integrations and dependencies of legacy systems including APIs,
    file transfers, database links, message queues, and external service
    connections. This audit discovers both documented and undocumented
    integrations, identifies data flows, and catalogs all systems that depend
    on or are dependencies of the legacy system.
  why_it_matters: |
    Hidden integrations are the primary cause of migration failures. Legacy
    systems often have undocumented connections that break during migration.
    Complete integration mapping is essential for accurate migration planning,
    risk assessment, and ensuring business continuity during transitions.
  when_to_run:
  - Before any migration planning
  - During system inventory efforts
  - When consolidating systems
  - As part of M&A technical due diligence
prerequisites:
  required_artifacts:
  - type: source_code
    description: Legacy system codebase
  - type: network_configuration
    description: Firewall rules and network diagrams
  - type: infrastructure_inventory
    description: Server and service inventory
  access_requirements:
  - Read access to source code
  - Network traffic visibility
  - Database connection logs
  - API gateway access
discovery:
  file_patterns:
  - glob: '**/config*.{xml,json,yaml,properties}'
    purpose: Find configuration with connection strings
  - glob: '**/application*.{properties,yml}'
    purpose: Find Spring Boot configurations
  - glob: '**/*client*.{java,cs,py,js}'
    purpose: Find client implementation files
  - glob: '**/web.config'
    purpose: Find .NET connection configurations
  interview_questions:
  - role: Integration Architect
    questions:
    - What systems does this application connect to?
    - Are there any batch file transfers?
    - What message queues are used?
  - role: Database Administrator
    questions:
    - Are there database links to other systems?
    - What external applications connect to this database?
    - Are there any ETL processes involved?
knowledge_sources:
  guides:
  - id: c4-model
    name: C4 Model for Software Architecture
    url: https://c4model.com/
  - id: eip-patterns
    name: Enterprise Integration Patterns
    url: https://www.enterpriseintegrationpatterns.com/
  standards:
  - id: togaf-integration
    name: TOGAF Integration Architecture
    relevance: Enterprise integration standards
tooling:
  analysis_tools:
  - tool: Wireshark
    purpose: Network traffic analysis
  - tool: tcpdump
    purpose: Packet capture for integration discovery
    command: tcpdump -i any port not 22
  - tool: Application Dependency Mapping
    purpose: ServiceNow or similar ADM tools
  - tool: Dynatrace
    purpose: Application dependency discovery
  - tool: AWS X-Ray
    purpose: Cloud service tracing
signals:
  critical:
  - id: IMA-CRIT-001
    signal: Undocumented critical integration discovered
    evidence_indicators:
    - Network traffic to unknown destinations
    - Database connections not in documentation
    - File transfers without recorded schedules
    explanation: |
      Undocumented integrations represent unknown dependencies that could
      break during migration without warning, causing business disruption.
    remediation: Document integration immediately and add to migration scope
  - id: IMA-CRIT-002
    signal: Circular dependencies between migrating systems
    evidence_indicators:
    - System A calls B, B calls C, C calls A
    - Cannot migrate in isolation
    explanation: |
      Circular dependencies complicate migration sequencing and may require
      simultaneous cutover of multiple systems.
    remediation: Plan coordinated migration or break dependency cycles
  high:
  - id: IMA-HIGH-001
    signal: Integration uses deprecated protocols or methods
    remediation: Plan protocol upgrade as part of migration
  - id: IMA-HIGH-002
    signal: Point-to-point integrations without abstraction
    remediation: Consider introducing integration layer during migration
  - id: IMA-HIGH-003
    signal: Synchronous dependencies on legacy systems
    remediation: Evaluate async patterns to decouple systems
  medium:
  - id: IMA-MED-001
    signal: Integration documentation outdated
    remediation: Update integration documentation
  - id: IMA-MED-002
    signal: Error handling inconsistent across integrations
    remediation: Standardize error handling patterns
  low:
  - id: IMA-LOW-001
    signal: Minor endpoint version mismatches
    remediation: Align versions during next maintenance
  - id: IMA-LOW-002
    signal: Integration monitoring incomplete
    remediation: Add monitoring for all integration points
  positive:
  - id: IMA-POS-001
    signal: All integrations documented with data flow diagrams
  - id: IMA-POS-002
    signal: Integration contracts well-defined and versioned
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Review Documentation
    description: Gather all existing integration documentation
    duration_estimate: 1 hour
  - id: '2'
    name: Analyze Source Code
    description: Find connection strings and API calls in code
    duration_estimate: 2 hours
  - id: '3'
    name: Monitor Network Traffic
    description: Capture and analyze network connections
    duration_estimate: 2 hours
  - id: '4'
    name: Review Database Connections
    description: Identify database links and cross-database queries
    duration_estimate: 1 hour
  - id: '5'
    name: Interview Stakeholders
    description: Gather knowledge of undocumented integrations
    duration_estimate: 2 hours
  - id: '6'
    name: Create Integration Map
    description: Document complete integration landscape
    duration_estimate: 2 hours
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Integration Inventory
    - Data Flow Diagrams
    - Dependency Analysis
    - Undocumented Integrations
    - Migration Considerations
closeout_checklist:
- id: ima-001
  item: All integrations inventoried
  level: WARNING
  verification: manual
- id: ima-002
  item: Undocumented integrations discovered and documented
  level: WARNING
  verification: manual
- id: ima-003
  item: Integration map created with data flows
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - enterprise-systems
    - integration-heavy-architectures
  compliance_mappings:
  - framework: TOGAF
    control: Technology Architecture
    description: Integration architecture documentation
  - framework: ISO 27001
    control: A.13.1.1
    description: Network controls and segregation
relationships:
  commonly_combined:
  - architecture-design.dependency-analysis
  - security.data-flow-analysis
  depends_on:
  - inventory.system-inventory
  feeds_into:
  - legacy-migration.migration-planning.dependency-sequencing
  - legacy-migration.data-migration.data-flow-mapping
