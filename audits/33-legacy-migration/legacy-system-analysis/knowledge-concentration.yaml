audit:
  id: legacy-migration.legacy-system-analysis.knowledge-concentration
  name: Knowledge Concentration Assessment Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: legacy-migration
  category_number: 33
  subcategory: legacy-system-analysis
  tier: phd
  estimated_duration: 4-8 hours  # median: 6h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: system
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Identifies single points of knowledge failure by analyzing code ownership
    patterns, commit history, and tribal knowledge dependencies. This audit
    determines which parts of the system are understood by only one or two
    people, creating "bus factor" risks. It maps knowledge distribution across
    the organization and highlights areas requiring knowledge transfer.
  why_it_matters: |
    Knowledge concentration creates significant business continuity risk. When
    critical system knowledge resides with a single person, their departure,
    illness, or unavailability can halt operations. Legacy systems are particularly
    susceptible as original developers move on and documentation becomes stale.
  when_to_run:
  - During organizational change or restructuring
  - Before key personnel transitions
  - As part of business continuity planning
  - When teams report difficulty maintaining systems
prerequisites:
  required_artifacts:
  - type: version_history
    description: Complete git history with author information
  - type: team_roster
    description: Current team member list
  - type: system_documentation
    description: Available documentation and runbooks
  access_requirements:
  - Read access to all repositories
  - HR data on current team composition
  - Access to documentation repositories
discovery:
  file_patterns:
  - glob: '**/*.{java,cs,py,js,ts,go,rb}'
    purpose: Find source files for ownership analysis
  - glob: '**/CODEOWNERS'
    purpose: Find explicit ownership assignments
  - glob: '**/MAINTAINERS*'
    purpose: Find maintainer documentation
  interview_questions:
  - role: Engineering Manager
    questions:
    - Who are the go-to people for different system areas?
    - What happens when key engineers are on vacation?
    - Are there any 'hero' developers essential to operations?
  - role: Senior Developer
    questions:
    - Which parts of the system do you avoid because no one understands them?
    - Who do you escalate to for specific system areas?
    - Are there undocumented procedures only certain people know?
knowledge_sources:
  guides:
  - id: bus-factor
    name: Bus Factor and Team Resilience
    url: https://en.wikipedia.org/wiki/Bus_factor
  - id: code-ownership
    name: Patterns of Code Ownership
    url: https://martinfowler.com/bliki/CodeOwnership.html
  standards:
  - id: iso-22301
    name: ISO 22301 Business Continuity
    relevance: Business continuity management
tooling:
  analysis_tools:
  - tool: git-fame
    purpose: Code ownership distribution
    command: git-fame --format csv
  - tool: CodeScene
    purpose: Knowledge distribution and hotspot analysis
  - tool: gitinspector
    purpose: Author statistics and contribution patterns
    command: gitinspector --format=json
  - tool: code-maat
    purpose: Social analysis of code
    command: maat -l git.log -c git -a main-dev
signals:
  critical:
  - id: KCA-CRIT-001
    signal: Critical system components with single active contributor
    evidence_indicators:
    - 100% of recent commits from one person
    - Business-critical code path with one knowledgeable developer
    - No other team members have modified code in 2+ years
    explanation: |
      Single contributor ownership of critical code creates severe business
      continuity risk. Loss of that person would leave the organization
      unable to maintain or modify the system safely.
    remediation: Implement immediate knowledge transfer and pair programming program
  - id: KCA-CRIT-002
    signal: Original system authors no longer with organization
    evidence_indicators:
    - Key historical contributors departed
    - No formal knowledge transfer occurred
    - Remaining team has minimal familiarity
    explanation: |
      When original authors depart without knowledge transfer, teams inherit
      systems they don't understand, leading to fragile modifications.
    remediation: Commission archeological documentation and code analysis
  high:
  - id: KCA-HIGH-001
    signal: Less than 3 people understand core system architecture
    remediation: Assign additional engineers to learn system through pairing
  - id: KCA-HIGH-002
    signal: Operational procedures known only to specific individuals
    remediation: Document runbooks and cross-train operations team
  - id: KCA-HIGH-003
    signal: Business logic undocumented and understood by few
    remediation: Create decision documentation through reverse engineering
  medium:
  - id: KCA-MED-001
    signal: Uneven knowledge distribution across modules
    remediation: Rotate team members through different system areas
  - id: KCA-MED-002
    signal: Limited overlap in expertise between team members
    remediation: Implement code review rotation and pairing
  low:
  - id: KCA-LOW-001
    signal: Some specialized areas with concentrated expertise
    remediation: Document specialized knowledge and plan cross-training
  - id: KCA-LOW-002
    signal: Historical contributors no longer active
    remediation: Ensure current team has adequate documentation
  positive:
  - id: KCA-POS-001
    signal: Multiple knowledgeable contributors for all critical areas
  - id: KCA-POS-002
    signal: Active knowledge sharing and rotation practices
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Analyze Contribution Patterns
    description: Extract authorship statistics from version control
    duration_estimate: 1 hour
  - id: '2'
    name: Map Current Team Coverage
    description: Determine which current team members understand each area
    duration_estimate: 2 hours
  - id: '3'
    name: Identify Historical Dependencies
    description: Find code written by departed contributors
    duration_estimate: 1 hour
  - id: '4'
    name: Assess Documentation Coverage
    description: Evaluate documentation quality for concentrated areas
    duration_estimate: 1 hour
  - id: '5'
    name: Calculate Bus Factor
    description: Determine minimum people required for system operation
    duration_estimate: 1 hour
  - id: '6'
    name: Prioritize Knowledge Transfer
    description: Create prioritized list of knowledge transfer needs
    duration_estimate: 1 hour
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Knowledge Distribution Map
    - Bus Factor Analysis
    - Critical Risk Areas
    - Knowledge Transfer Plan
closeout_checklist:
- id: kca-001
  item: Code ownership analysis completed
  level: WARNING
  verification: tool_output
- id: kca-002
  item: Critical knowledge gaps identified
  level: WARNING
  verification: manual
- id: kca-003
  item: Knowledge transfer priorities documented
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - small-teams
    - legacy-systems
    - critical-infrastructure
  compliance_mappings:
  - framework: ISO 22301
    control: Business Continuity
    description: Resource and competence management
  - framework: SOX
    control: Internal Controls
    description: Adequate staffing for financial systems
relationships:
  commonly_combined:
  - team-health.knowledge-sharing
  - documentation.system-documentation
  depends_on:
  - version-control.repository-access
  feeds_into:
  - legacy-migration.migration-planning.resource-requirements
  - risk-management.operational-risk-assessment
