# ============================================================
# AUDIT: Decision Record Assessment
# ============================================================
# Evaluates the practice and quality of documenting
# architectural and technical decisions with their rationale.
# ============================================================

audit:
  id: "human-organizational.documentation.decision-record"

  name: "Decision Record Assessment"

  version: "1.0.0"
  last_updated: "2026-01-19"
  status: "active"

  category: "human-organizational"
  category_number: 17
  subcategory: "documentation"

  tier: "expert"
  estimated_duration: "2 hours"

  completeness: "complete"
  requires_runtime: false
  destructive: false

execution:
  automatable: "partial"

  severity: "medium"

  scope: "documentation"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    This audit assesses the practice of documenting technical decisions:
    - Architecture Decision Records (ADRs) or equivalent
    - Decision context and drivers
    - Options considered and trade-offs
    - Rationale for chosen approach
    - Consequences and follow-up

    It evaluates whether decisions are captured in a way that enables
    understanding and appropriate revision.

  why_it_matters: |
    Undocumented decisions lead to:
    - Repeated debates about settled questions
    - Reversal of decisions without understanding context
    - Lost knowledge when decision makers leave
    - Inability to know when decisions should be revisited
    - Cargo-culting patterns without understanding why

    Documented decisions enable organizational learning, informed
    evolution, and efficient onboarding.

  when_to_run:
    - "As part of documentation assessment"
    - "When revisiting past architectural decisions"
    - "During team transitions"
    - "Annually during documentation review"

prerequisites:
  required_artifacts:
    - type: "documentation"
      description: "Decision records or ADRs if they exist"

  access_requirements:
    - "Access to documentation repositories"
    - "Access to design documents and RFC archives"
    - "Interviews with architects and tech leads"

discovery:
  file_patterns:
    - glob: "**/adr/**"
      purpose: "Find ADR directories"
    - glob: "**/decisions/**"
      purpose: "Find decision record directories"
    - glob: "**/doc/adr/**"
      purpose: "Find alternative ADR locations"
    - glob: "**/*-ADR-*.md"
      purpose: "Find numbered ADR files"
    - glob: "**/rfc/**"
      purpose: "Find RFC documents"

  code_patterns:
    - pattern: "ADR|Architecture Decision Record|Decision Record"
      type: "keyword"
      scope: "docs"
      purpose: "Find ADR references in documentation"

  interviews:
    - role: "Architects/Tech Leads"
      questions:
        - "How do you document architectural decisions?"
        - "Where are past decisions recorded?"
        - "What template or format do you use?"
        - "How do you decide what merits an ADR?"
        - "How do you handle superseded decisions?"
      purpose: "Understand decision documentation practice"

    - role: "Engineers"
      questions:
        - "Can you find documentation for why things are built the way they are?"
        - "Have you ever wondered why a decision was made and couldn't find out?"
        - "Are you aware of ADRs or decision records?"
      purpose: "Validate awareness and accessibility"

  documents_to_review:
    - type: "ADRs"
      purpose: "Assess quality and completeness"
    - type: "Design documents"
      purpose: "Check for decision documentation"
    - type: "RFCs"
      purpose: "Review decision-related RFCs"

knowledge_sources:
  guides:
    - id: "adr-github"
      name: "Architecture Decision Records"
      url: "https://adr.github.io/"
      offline_cache: true

    - id: "madr"
      name: "Markdown Any Decision Records (MADR)"
      url: "https://adr.github.io/madr/"
      offline_cache: true

  papers:
    - id: "adr-paper"
      title: "Sustainable Architectural Design Decisions"
      url: "https://www.computer.org/csdl/magazine/so/2016/02/mso2016020046/13rRUwI5qkd"

  learning_resources:
    - id: "documenting-arch"
      title: "Documenting Software Architectures: Views and Beyond"
      type: "book"
      reference: "ISBN 978-0321552686"

tooling:
  static_analysis:
    - tool: "adr-tools"
      purpose: "ADR creation and management"
      offline_capable: true

  assessment_tools:
    - tool: "ADR Completeness Checklist"
      purpose: "Verify ADR content quality"

signals:
  critical:
    - id: "ADR-CRIT-001"
      signal: "No decision documentation practice exists"
      evidence_indicators:
        - "No ADRs or equivalent found"
        - "No process for documenting decisions"
        - "Architectural rationale exists only in people's heads"
      explanation: |
        Without decision documentation, organizations cannot learn
        from past decisions or understand when to revisit them.
        Knowledge is lost with personnel changes.
      remediation: "Establish ADR practice for significant decisions"

  high:
    - id: "ADR-HIGH-001"
      signal: "Major decisions undocumented"
      evidence_indicators:
        - "Significant architectural choices have no record"
        - "Technology selections unexplained"
        - "Pattern choices not documented"
      explanation: |
        Major undocumented decisions lead to confusion about
        constraints and ongoing debates about settled matters.
      remediation: "Retrospectively document major decisions"

    - id: "ADR-HIGH-002"
      signal: "Decision rationale not captured"
      evidence_indicators:
        - "Records state what, not why"
        - "Alternatives not documented"
        - "Trade-offs not explained"
      explanation: |
        Without rationale, decisions cannot be properly evaluated
        or revisited when circumstances change.
      remediation: "Enhance records with context and rationale"

  medium:
    - id: "ADR-MED-001"
      signal: "ADR practice inconsistent"
      evidence_indicators:
        - "Some teams use ADRs, others don't"
        - "Coverage varies by project"
        - "No organization-wide standard"
      remediation: "Standardize ADR practice across organization"

    - id: "ADR-MED-002"
      signal: "ADRs not findable"
      evidence_indicators:
        - "ADRs exist but not discoverable"
        - "No central index or search"
        - "Engineers unaware ADRs exist"
      remediation: "Create ADR index and improve discoverability"

  low:
    - id: "ADR-LOW-001"
      signal: "ADR format inconsistent"
      evidence_indicators:
        - "Different templates used"
        - "Variable content quality"
      remediation: "Standardize on single template (e.g., MADR)"

  positive:
    - id: "ADR-POS-001"
      signal: "Strong decision documentation practice"
      evidence_indicators:
        - "ADRs for significant decisions"
        - "Clear rationale captured"
        - "ADRs findable and referenced"
        - "Team aware and using ADRs"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "documentation_auditor"

  steps:
    - id: "1"
      name: "Find Existing Decision Records"
      description: |
        Search for ADRs and equivalent decision documentation:
        - ADR directories
        - Design documents with decisions
        - RFCs or decision logs
      duration_estimate: "30 min"

      commands:
        - purpose: "Find ADR files"
          command: "find . -path '*adr*' -name '*.md' -o -path '*decision*' -name '*.md'"

      expected_findings:
        - "Inventory of existing decision documentation"

    - id: "2"
      name: "Assess Decision Coverage"
      description: |
        Evaluate which decisions have been documented:
        - Are major architectural decisions recorded?
        - Are technology choices explained?
        - Are pattern decisions documented?
      duration_estimate: "30 min"

      questions:
        - "What significant decisions have been made?"
        - "Which of these are documented?"
        - "What major gaps exist?"

      expected_findings:
        - "Coverage assessment of documented vs undocumented decisions"

    - id: "3"
      name: "Evaluate Record Quality"
      description: |
        Review sample ADRs for quality:
        - Is context captured?
        - Are options documented?
        - Is rationale clear?
        - Are consequences noted?
      duration_estimate: "30 min"

      questions:
        - "Do records explain why, not just what?"
        - "Are alternatives documented?"
        - "Can someone understand the trade-offs?"

      expected_findings:
        - "Quality assessment of sample records"

    - id: "4"
      name: "Interview Stakeholders"
      description: |
        Gather perspectives on decision documentation:
        - Architects on their practice
        - Engineers on awareness and usage
      duration_estimate: "30 min"

      questions:
        - "Is there a consistent ADR practice?"
        - "Are team members aware of ADRs?"
        - "How are ADRs used?"

      expected_findings:
        - "Stakeholder perspective on ADR practice"

    - id: "5"
      name: "Develop Recommendations"
      description: |
        Prioritize improvements to decision documentation:
        - Establishing or enhancing practice
        - Retrospective documentation
        - Process improvements
      duration_estimate: "20 min"

      expected_findings:
        - "Prioritized recommendations"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "coverage_assessment"
      format: "tabular"
      sections:
        - "Decision Inventory"
        - "Documentation Status"
        - "Quality Assessment"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Current Practice"
        - "Key Gaps"
        - "Recommendations"

  confidence_guidance:
    high: "Records reviewed and stakeholders interviewed"
    medium: "Records reviewed without interviews"
    low: "Quick search only"

offline:
  capability: "full"

  cache_manifest:
    knowledge:
      - source_id: "adr-github"
        priority: "required"
      - source_id: "madr"
        priority: "recommended"

profiles:
  membership:
    quick:
      included: true
      priority: 3
    full:
      included: true
      priority: 2

closeout_checklist:
  - id: "adr-001"
    item: "Existing ADRs inventoried"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "All ADR locations checked"
    expected: "Confirmed by reviewer"

  - id: "adr-002"
    item: "Coverage assessed"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Major decisions checked for documentation"
    expected: "Confirmed by reviewer"

  - id: "adr-003"
    item: "Sample quality reviewed"
    level: "WARNING"
    verification: "manual"
    verification_notes: "At least 3 ADRs reviewed for quality"
    expected: "Confirmed by reviewer"

governance:
  applicable_to:
    archetypes: ["all"]

relationships:
  commonly_combined:
    - "human-organizational.documentation.architecture-documentation"
    - "human-organizational.knowledge-management.knowledge-sharing-practice"
