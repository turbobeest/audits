# ============================================================
# AUDIT: Ubiquitous Language Consistency
# Category: 34 - Business Logic & Domain
# Subcategory: domain-modeling
# ============================================================

audit:
  id: "business-logic-domain.domain-modeling.ubiquitous-language-consistency"
  name: "Ubiquitous Language Consistency Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "business-logic-domain"
  category_number: 34
  subcategory: "domain-modeling"

  tier: "expert"
  estimated_duration: "3-5 hours"  # median: 4h

  completeness: "requires_discovery"
  requires_runtime: false
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "business-logic"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates the consistency of ubiquitous language usage throughout the codebase
    and documentation. This audit examines whether domain terminology is consistently
    applied across code, tests, documentation, and team communication. It identifies
    terminology drift, synonyms that cause confusion, and misalignments between
    code and business language.

  why_it_matters: |
    Inconsistent terminology creates communication barriers between developers and
    domain experts, leads to misunderstandings, and makes the codebase harder to
    navigate. When code uses different terms than the business, knowledge transfer
    becomes difficult and bugs from misunderstanding requirements become common.

  when_to_run:
    - "During domain model reviews"
    - "When onboarding new team members"
    - "After major requirement changes"
    - "When communication issues arise between teams"

prerequisites:
  required_artifacts:
    - type: "source_code"
      description: "Domain model implementations"
    - type: "glossary"
      description: "Domain terminology glossary"
    - type: "documentation"
      description: "Business requirements and specifications"

  access_requirements:
    - "Read access to source code"
    - "Access to domain documentation"
    - "Access to business requirements"

discovery:
  file_patterns:
    - glob: "**/domain/**/*.{ts,java,cs,py}"
      purpose: "Find domain layer code"
    - glob: "**/*.md"
      purpose: "Find documentation files"
    - glob: "**/test/**/*.{ts,java,cs,py}"
      purpose: "Find test files for language usage"
    - glob: "**/docs/**/*"
      purpose: "Find documentation"

  interview_questions:
    - role: "Domain Expert"
      questions:
        - "What are the key terms used in your domain?"
        - "Are there any terms that mean different things in different contexts?"
        - "What terminology do you find missing or misused in the system?"
    - role: "Developer"
      questions:
        - "Is there a glossary of domain terms?"
        - "Are there terms in the code that you are unsure about?"
        - "Do you ever struggle to translate business requirements to code?"

knowledge_sources:
  guides:
    - id: "ddd-reference"
      name: "Domain-Driven Design Reference"
      url: "https://www.domainlanguage.com/ddd/reference/"
    - id: "ubiquitous-language"
      name: "Ubiquitous Language Best Practices"
      url: "https://martinfowler.com/bliki/UbiquitousLanguage.html"

  standards:
    - id: "ddd-strategic-patterns"
      name: "DDD Strategic Patterns"
      relevance: "Ubiquitous language principles"

tooling:
  analysis_tools:
    - tool: "Custom Glossary Linter"
      purpose: "Validate terminology usage against glossary"
    - tool: "SonarQube"
      purpose: "Custom naming convention rules"
    - tool: "Vale"
      purpose: "Documentation terminology validation"

signals:
  critical:
    - id: "ULC-CRIT-001"
      signal: "Same term used with different meanings in code"
      evidence_indicators:
        - "Multiple classes with same name meaning different things"
        - "Methods with same name doing different operations"
        - "Confusion in code reviews about term meanings"
      explanation: |
        When the same term has multiple meanings, developers make incorrect
        assumptions and introduce subtle bugs. This is especially dangerous
        when it leads to incorrect business logic implementation.
      remediation: "Establish clear definitions and rename to disambiguate; consider bounded contexts"

  high:
    - id: "ULC-HIGH-001"
      signal: "Code terminology does not match business terminology"
      evidence_indicators:
        - "Domain experts do not recognize class or method names"
        - "Translation required when discussing code with business"
        - "Technical jargon used instead of business terms"
      remediation: "Refactor code to use business terminology; update glossary"

    - id: "ULC-HIGH-002"
      signal: "No maintained glossary of domain terms"
      evidence_indicators:
        - "No documentation of term definitions"
        - "Team members have different understandings of terms"
        - "New team members struggle with terminology"
      remediation: "Create and maintain a domain glossary with clear definitions"

  medium:
    - id: "ULC-MED-001"
      signal: "Synonyms used interchangeably causing confusion"
      evidence_indicators:
        - "Customer/Client/User used interchangeably"
        - "Order/Transaction/Purchase used without distinction"
        - "Inconsistent naming across modules"
      remediation: "Choose one canonical term and use consistently; document synonyms"

    - id: "ULC-MED-002"
      signal: "Abbreviations used without definition"
      evidence_indicators:
        - "Unknown acronyms in code"
        - "Abbreviations not in glossary"
        - "New team members confused by shorthand"
      remediation: "Define all abbreviations in glossary; consider using full terms in code"

  low:
    - id: "ULC-LOW-001"
      signal: "Documentation uses different terms than code"
      evidence_indicators:
        - "README uses different names than classes"
        - "API documentation uses non-standard terms"
      remediation: "Synchronize documentation terminology with code"

  positive:
    - id: "ULC-POS-001"
      signal: "Maintained glossary actively used by team"
    - id: "ULC-POS-002"
      signal: "Code readable by domain experts without translation"

procedure:
  context:
    cognitive_mode: "analytical"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Collect Domain Terminology"
      description: "Gather all domain terms from code, docs, and experts"
      duration_estimate: "1 hour"

    - id: "2"
      name: "Build Term Inventory"
      description: "Create inventory of all terms and their usage locations"
      duration_estimate: "1 hour"

    - id: "3"
      name: "Identify Inconsistencies"
      description: "Find terms with multiple meanings or missing definitions"
      duration_estimate: "1 hour"

    - id: "4"
      name: "Validate with Domain Experts"
      description: "Confirm terminology understanding with business stakeholders"
      duration_estimate: "1 hour"

    - id: "5"
      name: "Document Findings"
      description: "Compile terminology consistency findings and recommendations"
      duration_estimate: "30 minutes"

output:
  deliverables:
    - type: "glossary"
      format: "structured"
      description: "Updated domain terminology glossary"

    - type: "finding_list"
      format: "structured"
      description: "List of terminology inconsistencies"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Term Inventory"
        - "Inconsistency Analysis"
        - "Recommendations"

closeout_checklist:
  - id: "ulc-001"
    item: "Domain glossary created or updated"
    level: "REQUIRED"
    verification: "manual"
  - id: "ulc-002"
    item: "Term inconsistencies documented"
    level: "REQUIRED"
    verification: "manual"
  - id: "ulc-003"
    item: "Domain expert validation completed"
    level: "WARNING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["enterprise-applications", "fintech", "healthcare", "e-commerce"]

  compliance_mappings:
    - framework: "DDD"
      control: "Strategic Design"
      description: "Ubiquitous language consistency"

relationships:
  commonly_combined:
    - "business-logic-domain.domain-modeling.bounded-context-clarity"
    - "documentation.code-documentation"
  depends_on:
    - "requirements-specification.business-requirements"
  feeds_into:
    - "onboarding.knowledge-transfer"
