audit:
  id: business-logic-domain.integration-contracts.contract-testing
  name: Contract Testing Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: business-logic-domain
  category_number: 34
  subcategory: integration-contracts
  tier: expert
  estimated_duration: 3-5 hours  # median: 4h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: business-logic
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the implementation of contract testing for API integrations. This
    audit examines consumer-driven contracts, provider verification, contract
    versioning, and integration with CI/CD. It ensures API contracts are tested
    to prevent integration failures.
  why_it_matters: |
    Integration failures are often discovered in production because API contracts
    aren't properly tested. Contract testing catches breaking changes before
    deployment, preventing outages and enabling independent deployability.
    Good contract testing is essential for microservices and B2B integrations.
  when_to_run:
  - When establishing integration testing strategy
  - After integration failures
  - When adopting microservices
  - During CI/CD pipeline reviews
prerequisites:
  required_artifacts:
  - type: contract_tests
    description: Existing contract test implementations
  - type: api_specs
    description: API specifications
  - type: ci_config
    description: CI/CD configuration
  access_requirements:
  - Read access to contract tests
  - Access to CI/CD configuration
  - Access to API specifications
discovery:
  file_patterns:
  - glob: '**/*Contract*.*'
    purpose: Find contract test files
  - glob: '**/*.pact.json'
    purpose: Find Pact contract files
  - glob: '**/contracts/**/*'
    purpose: Find contract definitions
  - glob: '**/pacts/**/*'
    purpose: Find Pact contracts
  interview_questions:
  - role: Lead Developer
    questions:
    - Do you use contract testing?
    - How are contracts shared between teams?
    - Are contract tests in CI/CD?
  - role: QA Engineer
    questions:
    - How do you test API integrations?
    - Have integration failures been caught by contract tests?
    - What contract testing framework is used?
knowledge_sources:
  guides:
  - id: contract-testing
    name: Contract Testing Guide
    url: https://martinfowler.com/bliki/ContractTest.html
  - id: pact-documentation
    name: Pact Documentation
    url: https://docs.pact.io/
  standards:
  - id: consumer-driven-contracts
    name: Consumer-Driven Contracts
    relevance: Contract testing patterns
tooling:
  analysis_tools:
  - tool: Pact
    purpose: Consumer-driven contract testing
  - tool: Spring Cloud Contract
    purpose: Java contract testing
  - tool: Dredd
    purpose: OpenAPI contract testing
  - tool: Prism
    purpose: OpenAPI mocking and validation
signals:
  critical:
  - id: CTT-CRIT-001
    signal: No contract testing for critical integrations
    evidence_indicators:
    - Integration points untested
    - Only end-to-end tests for APIs
    - Breaking changes discovered in production
    explanation: |
      Without contract testing, breaking changes in APIs go undetected
      until production, causing outages and customer impact.
    remediation: Implement contract tests for all critical integrations
  high:
  - id: CTT-HIGH-001
    signal: Contract tests not in CI/CD pipeline
    evidence_indicators:
    - Manual contract test execution
    - Contracts not verified on build
    - Deployments without contract verification
    remediation: Add contract test execution to CI/CD
  - id: CTT-HIGH-002
    signal: Contracts not shared with providers
    evidence_indicators:
    - Consumer contracts not published
    - Providers unaware of consumer expectations
    - No contract broker or shared repository
    remediation: Publish contracts; use Pact Broker or similar
  medium:
  - id: CTT-MED-001
    signal: Contract coverage incomplete
    evidence_indicators:
    - Only happy paths tested
    - Error scenarios not contracted
    - Not all endpoints covered
    remediation: Expand contract coverage to error scenarios and all endpoints
  - id: CTT-MED-002
    signal: Contract versioning not managed
    evidence_indicators:
    - No version tracking for contracts
    - Contracts break without warning
    - Cannot match contracts to deployments
    remediation: Implement contract versioning and tracking
  low:
  - id: CTT-LOW-001
    signal: Contract test maintenance burden high
    evidence_indicators:
    - Tests frequently break for non-issues
    - Over-specific contracts
    remediation: Use appropriate matchers; avoid over-specification
  positive:
  - id: CTT-POS-001
    signal: Consumer-driven contracts for all services
  - id: CTT-POS-002
    signal: Contracts verified in CI with provider
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Integrations
    description: Map all API integrations requiring contracts
    duration_estimate: 30 minutes
  - id: '2'
    name: Review Contract Tests
    description: Analyze existing contract test coverage
    duration_estimate: 1-2 hours
  - id: '3'
    name: Check CI/CD Integration
    description: Verify contracts run in pipeline
    duration_estimate: 30 minutes
  - id: '4'
    name: Assess Contract Sharing
    description: Review how contracts are shared
    duration_estimate: 30 minutes
  - id: '5'
    name: Document Findings
    description: Compile contract testing findings
    duration_estimate: 30 minutes
output:
  deliverables:
  - type: finding_list
    format: structured
    description: List of contract testing gaps
  - type: coverage_matrix
    format: structured
    description: Contract coverage matrix
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Integration Inventory
    - Contract Coverage
    - CI/CD Integration
    - Recommendations
closeout_checklist:
- id: ctt-001
  item: Integration points inventoried
  level: REQUIRED
  verification: manual
- id: ctt-002
  item: Contract coverage assessed
  level: REQUIRED
  verification: automated
- id: ctt-003
  item: CI/CD integration verified
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - microservices
    - api-platforms
    - b2b-integrations
  compliance_mappings:
  - framework: DevOps Best Practices
    control: Integration Testing
    description: Contract testing practices
relationships:
  commonly_combined:
  - business-logic-domain.integration-contracts.partner-api-compliance
  - testing-quality-assurance.integration-testing
  depends_on:
  - api-design.api-specifications
  feeds_into:
  - cicd.pipeline-quality
