# ============================================================
# AUDIT: 3D Audio Implementation
# Category: 43 - Metaverse & Immersive
# Subcategory: audio-spatial-sound
# ============================================================

audit:
  id: "metaverse-immersive.audio-spatial-sound.3d-audio-implementation"
  name: "3D Audio Implementation Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "audio-spatial-sound"

  tier: "expert"
  estimated_duration: "2-4 hours"  # median: 3h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "xr-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates 3D spatial audio implementation for XR including HRTF
    processing, sound source positioning, room acoustics simulation,
    and integration with head tracking.

  why_it_matters: |
    Spatial audio significantly enhances presence and immersion in XR.
    Poor 3D audio implementation makes the experience feel flat and
    can confuse users about the location of sound sources. Good spatial
    audio is essential for believable virtual environments.

  when_to_run:
    - "When implementing audio"
    - "When sounds don't localize correctly"
    - "During immersion review"
    - "After audio system changes"

prerequisites:
  required_artifacts:
    - type: "audio_system"
      description: "Spatial audio implementation"
    - type: "audio_assets"
      description: "Sound files and sources"

  access_requirements:
    - "Headphones/VR audio"
    - "Full audio system access"

discovery:
  file_patterns:
    - glob: "**/audio/**/*.cs"
      purpose: "Find audio code"
    - glob: "**/spatial/**/*.cs"
      purpose: "Find spatial audio code"

  code_patterns:
    - pattern: "SpatialAudio|HRTF|OculusSpatializer"
      type: "keyword"
      scope: "source"
      purpose: "Find spatial audio systems"

knowledge_sources:
  guides:
    - id: "meta-audio"
      name: "Meta Spatial Audio"
      url: "https://developer.oculus.com/documentation/unity/audio-osp-unity/"
      offline_cache: true
      priority: "required"

    - id: "steam-audio"
      name: "Steam Audio"
      url: "https://valvesoftware.github.io/steam-audio/"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "audio-visualizer"
      purpose: "Audio spatialization visualization"

signals:
  critical:
    - id: "3DA-CRIT-001"
      signal: "No spatial audio implemented"
      evidence_indicators:
        - "2D audio only"
        - "No HRTF processing"
        - "Sounds not localized"
      explanation: |
        Without spatial audio, the soundscape is flat and detached
        from the visual experience, breaking immersion.
      remediation: "Implement spatial audio using platform SDK"

    - id: "3DA-CRIT-002"
      signal: "Audio doesn't follow head tracking"
      evidence_indicators:
        - "Sound positions static"
        - "Audio doesn't update with head movement"
      explanation: |
        Audio must track head position for proper localization.
        Static audio in VR is disorienting.
      remediation: "Integrate audio with head tracking"

  high:
    - id: "3DA-HIGH-001"
      signal: "Poor sound localization"
      evidence_indicators:
        - "Sounds hard to locate"
        - "Front-back confusion common"
      remediation: "Use proper HRTF and improve source positioning"

    - id: "3DA-HIGH-002"
      signal: "No occlusion/obstruction"
      evidence_indicators:
        - "Sounds through walls unaffected"
        - "No environmental filtering"
      remediation: "Implement audio occlusion"

  medium:
    - id: "3DA-MED-001"
      signal: "No reverb/room acoustics"
      remediation: "Add environmental reverb"

    - id: "3DA-MED-002"
      signal: "Distance attenuation unrealistic"
      remediation: "Tune distance rolloff curves"

  low:
    - id: "3DA-LOW-001"
      signal: "Spatial audio settings undocumented"
      remediation: "Document audio configuration"

  positive:
    - id: "3DA-POS-001"
      signal: "Accurate sound localization"
    - id: "3DA-POS-002"
      signal: "Proper occlusion implemented"
    - id: "3DA-POS-003"
      signal: "Realistic room acoustics"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Test Localization"
      description: "Check sound positioning accuracy"
      duration_estimate: "1 hour"

    - id: "2"
      name: "Test Head Tracking"
      description: "Verify audio updates with movement"
      duration_estimate: "30 min"

    - id: "3"
      name: "Test Occlusion"
      description: "Check environmental filtering"
      duration_estimate: "45 min"

    - id: "4"
      name: "Assess Immersion"
      description: "Evaluate overall audio quality"
      duration_estimate: "45 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "audio_report"
      format: "json"
      description: "3D audio analysis"

closeout_checklist:
  - id: "3da-001"
    item: "Spatial audio implemented"
    level: "CRITICAL"
    verification: "manual"

  - id: "3da-002"
    item: "Head tracking integrated"
    level: "CRITICAL"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["xr-applications"]

relationships:
  commonly_combined:
    - "metaverse-immersive.audio-spatial-sound.sound-localization"
    - "metaverse-immersive.audio-spatial-sound.audio-latency"
