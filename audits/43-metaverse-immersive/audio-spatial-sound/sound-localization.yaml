# ============================================================
# AUDIT: Sound Localization
# Category: 43 - Metaverse & Immersive
# Subcategory: audio-spatial-sound
# ============================================================

audit:
  id: "metaverse-immersive.audio-spatial-sound.sound-localization"
  name: "Sound Localization Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "audio-spatial-sound"

  tier: "expert"
  estimated_duration: "2-3 hours"  # median: 2h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "xr-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates the accuracy of sound source localization in XR,
    measuring how well users can identify the direction and distance
    of sound sources in the virtual environment.

  why_it_matters: |
    Accurate sound localization helps users understand their environment
    and enables audio-based gameplay mechanics. Poor localization is
    confusing and breaks the sense of being in a real space.

  when_to_run:
    - "When testing spatial audio"
    - "When users can't locate sounds"
    - "During audio polish"
    - "After spatialization changes"

prerequisites:
  required_artifacts:
    - type: "audio_system"
      description: "Spatial audio setup"
    - type: "test_sources"
      description: "Test sound sources"

  access_requirements:
    - "VR headset with audio"
    - "Test environment"

discovery:
  code_patterns:
    - pattern: "AudioSource|SpatialBlend"
      type: "keyword"
      scope: "source"
      purpose: "Find audio sources"

knowledge_sources:
  guides:
    - id: "localization-research"
      name: "Sound Localization in VR"
      url: "https://developer.oculus.com/documentation/unity/audio-osp-unity-spatialize/"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "localization-tester"
      purpose: "Localization accuracy testing"

signals:
  critical:
    - id: "SL-CRIT-001"
      signal: "Sound localization completely wrong"
      evidence_indicators:
        - "Sounds in opposite direction"
        - "Left-right reversed"
      explanation: |
        Fundamentally wrong localization is worse than no
        spatialization as it actively misleads users.
      remediation: "Fix coordinate system and HRTF implementation"

  high:
    - id: "SL-HIGH-001"
      signal: "Poor elevation localization"
      evidence_indicators:
        - "Cannot tell up vs down"
        - "Elevation always sounds wrong"
      remediation: "Improve HRTF processing for elevation"

    - id: "SL-HIGH-002"
      signal: "Front-back confusion frequent"
      evidence_indicators:
        - "Users often look wrong direction"
        - "Cone of confusion issues"
      remediation: "Add early reflections or movement cues"

  medium:
    - id: "SL-MED-001"
      signal: "Distance perception inaccurate"
      remediation: "Tune distance attenuation curves"

    - id: "SL-MED-002"
      signal: "Localization degrades in complex scenes"
      remediation: "Optimize audio source management"

  low:
    - id: "SL-LOW-001"
      signal: "Localization accuracy not tested"
      remediation: "Conduct localization testing"

  positive:
    - id: "SL-POS-001"
      signal: "Accurate directional localization"
    - id: "SL-POS-002"
      signal: "Good elevation perception"
    - id: "SL-POS-003"
      signal: "Realistic distance perception"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Test Horizontal Localization"
      description: "Check left-right accuracy"
      duration_estimate: "45 min"

    - id: "2"
      name: "Test Vertical Localization"
      description: "Check up-down accuracy"
      duration_estimate: "30 min"

    - id: "3"
      name: "Test Distance Perception"
      description: "Check near-far accuracy"
      duration_estimate: "30 min"

    - id: "4"
      name: "Test Complex Scenes"
      description: "Check with multiple sources"
      duration_estimate: "30 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "localization_report"
      format: "json"
      description: "Sound localization analysis"

closeout_checklist:
  - id: "sl-001"
    item: "Horizontal localization accurate"
    level: "CRITICAL"
    verification: "manual"

  - id: "sl-002"
    item: "Elevation reasonable"
    level: "BLOCKING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["xr-applications"]

relationships:
  commonly_combined:
    - "metaverse-immersive.audio-spatial-sound.3d-audio-implementation"
    - "metaverse-immersive.audio-spatial-sound.audio-latency"
