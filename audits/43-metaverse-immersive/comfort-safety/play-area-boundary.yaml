# ============================================================
# AUDIT: Play Area Boundary
# Category: 43 - Metaverse & Immersive
# Subcategory: comfort-safety
# ============================================================

audit:
  id: "metaverse-immersive.comfort-safety.play-area-boundary"
  name: "Play Area Boundary Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "comfort-safety"

  tier: "expert"
  estimated_duration: "2-3 hours"  # median: 2h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "critical"
  scope: "xr-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: true
  parallelizable: true

description:
  what: |
    Evaluates how VR applications handle play area boundaries and user
    safety. Assesses integration with guardian/chaperone systems, boundary
    awareness, and prevention of users from colliding with real-world objects.

  why_it_matters: |
    Users in VR cannot see the real world. Without proper boundary handling,
    users may walk into walls, furniture, or other people causing injury.
    Physical safety is the highest priority in VR design.

  when_to_run:
    - "During safety review"
    - "Before release"
    - "When encouraging movement"
    - "After guardian integration changes"

prerequisites:
  required_artifacts:
    - type: "guardian_integration"
      description: "Guardian/chaperone system integration"
    - type: "play_area_handling"
      description: "Boundary handling code"

  access_requirements:
    - "Access to guardian system"
    - "Room-scale test area"

discovery:
  file_patterns:
    - glob: "**/boundary/**/*.cs"
      purpose: "Find boundary code"
    - glob: "**/guardian/**/*.cs"
      purpose: "Find guardian code"

  code_patterns:
    - pattern: "Guardian|Chaperone|PlayArea|Boundary"
      type: "keyword"
      scope: "source"
      purpose: "Find boundary handling"

knowledge_sources:
  guides:
    - id: "oculus-guardian"
      name: "Oculus Guardian System"
      url: "https://developer.oculus.com/documentation/unity/unity-guardian/"
      offline_cache: true
      priority: "required"

    - id: "steamvr-chaperone"
      name: "SteamVR Chaperone"
      url: "https://developer.valvesoftware.com/wiki/SteamVR_Chaperone"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "boundary-tester"
      purpose: "Boundary integration testing"

signals:
  critical:
    - id: "PAB-CRIT-001"
      signal: "Guardian/chaperone disabled"
      evidence_indicators:
        - "Application disables boundary system"
        - "No boundary warnings shown"
        - "Users can walk out of safe area"
      explanation: |
        Disabling boundary protection puts users at physical risk.
        This is a critical safety issue.
      remediation: "Never disable system guardian/chaperone"

    - id: "PAB-CRIT-002"
      signal: "Application encourages exceeding boundaries"
      evidence_indicators:
        - "Content placed outside play area"
        - "Gameplay requires leaving safe zone"
      explanation: |
        If content encourages users to exceed boundaries, they will
        attempt to reach it and may be injured.
      remediation: "Keep all content within reachable play area"

  high:
    - id: "PAB-HIGH-001"
      signal: "No in-game boundary awareness"
      evidence_indicators:
        - "No warning before hitting boundary"
        - "Relies solely on system guardian"
      remediation: "Add in-game boundary awareness"

    - id: "PAB-HIGH-002"
      signal: "Minimum play area not enforced"
      evidence_indicators:
        - "Works in tiny space dangerously"
        - "No space requirement warning"
      remediation: "Require minimum safe play area"

  medium:
    - id: "PAB-MED-001"
      signal: "No stationary/seated mode"
      remediation: "Support stationary play"

    - id: "PAB-MED-002"
      signal: "Boundary feedback insufficient"
      remediation: "Improve boundary approach warnings"

  low:
    - id: "PAB-LOW-001"
      signal: "Play area requirements undocumented"
      remediation: "Document space requirements"

  positive:
    - id: "PAB-POS-001"
      signal: "Guardian system preserved"
    - id: "PAB-POS-002"
      signal: "In-game boundary awareness"
    - id: "PAB-POS-003"
      signal: "Content within play area"

procedure:
  context:
    cognitive_mode: "critical"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Test Guardian Integration"
      description: "Verify system boundary system works"
      duration_estimate: "30 min"

    - id: "2"
      name: "Check Content Placement"
      description: "Verify content within reachable area"
      duration_estimate: "45 min"

    - id: "3"
      name: "Test Boundary Approach"
      description: "Check warnings when approaching boundary"
      duration_estimate: "30 min"

    - id: "4"
      name: "Test Small Spaces"
      description: "Verify behavior in minimum space"
      duration_estimate: "30 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "safety_report"
      format: "prose"
      description: "Play area safety assessment"

closeout_checklist:
  - id: "pab-001"
    item: "Guardian system not disabled"
    level: "CRITICAL"
    verification: "manual"

  - id: "pab-002"
    item: "Content within play area"
    level: "CRITICAL"
    verification: "manual"

  - id: "pab-003"
    item: "Space requirements documented"
    level: "WARNING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["vr-applications"]

  compliance_frameworks:
    - framework: "Meta VRC"
      controls: ["Safety Requirements"]

relationships:
  commonly_combined:
    - "metaverse-immersive.comfort-safety.guardian-chaperone-system"
    - "metaverse-immersive.comfort-safety.locomotion-strategy"
