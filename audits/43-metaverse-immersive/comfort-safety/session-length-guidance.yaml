# ============================================================
# AUDIT: Session Length Guidance
# Category: 43 - Metaverse & Immersive
# Subcategory: comfort-safety
# ============================================================

audit:
  id: "metaverse-immersive.comfort-safety.session-length-guidance"
  name: "Session Length Guidance Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "comfort-safety"

  tier: "expert"
  estimated_duration: "1-2 hours"  # median: 1h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "xr-systems"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates whether VR applications provide appropriate guidance and
    features for managing session length including break reminders,
    usage warnings, and save points that encourage healthy usage patterns.

  why_it_matters: |
    Extended VR use causes physical fatigue, eye strain, and potential
    health issues. Users often lose track of time in VR. Applications
    should help users manage their session length for health and wellbeing.

  when_to_run:
    - "During health review"
    - "Before release"
    - "For long-form experiences"
    - "During accessibility review"

prerequisites:
  required_artifacts:
    - type: "session_features"
      description: "Session management features"
    - type: "health_warnings"
      description: "Health warning content"

  access_requirements:
    - "Access to application"
    - "Settings and UI review"

discovery:
  file_patterns:
    - glob: "**/session/**/*.cs"
      purpose: "Find session management code"
    - glob: "**/health/**/*.cs"
      purpose: "Find health features"

  code_patterns:
    - pattern: "breakReminder|sessionTime|healthWarning"
      type: "keyword"
      scope: "source"
      purpose: "Find session management"

knowledge_sources:
  guides:
    - id: "vr-health"
      name: "VR Health Guidelines"
      url: "https://developer.oculus.com/documentation/unity/unity-health/"
      offline_cache: true

tooling:
  assessment_tools:
    - tool: "session-analyzer"
      purpose: "Session feature review"

signals:
  critical:
    - id: "SLG-CRIT-001"
      signal: "No health warning at startup"
      evidence_indicators:
        - "No initial health/safety warning"
        - "Missing platform-required warnings"
      explanation: |
        Platform guidelines typically require health warnings.
        Missing warnings may violate store requirements.
      remediation: "Add required health warnings"

  high:
    - id: "SLG-HIGH-001"
      signal: "No break reminders for long experiences"
      evidence_indicators:
        - "Multi-hour experience with no reminders"
        - "No option to enable break reminders"
      remediation: "Add optional break reminders"

    - id: "SLG-HIGH-002"
      signal: "No natural break points"
      evidence_indicators:
        - "Cannot pause or save"
        - "Penalties for stopping"
      remediation: "Add save points and pause functionality"

  medium:
    - id: "SLG-MED-001"
      signal: "Session time not tracked"
      remediation: "Track and optionally display session time"

    - id: "SLG-MED-002"
      signal: "Break reminders not customizable"
      remediation: "Allow users to set break reminder intervals"

  low:
    - id: "SLG-LOW-001"
      signal: "Usage guidance minimal"
      remediation: "Add health usage recommendations"

  positive:
    - id: "SLG-POS-001"
      signal: "Break reminders available"
    - id: "SLG-POS-002"
      signal: "Natural save/break points"
    - id: "SLG-POS-003"
      signal: "Session time displayed"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Check Health Warnings"
      description: "Verify required warnings present"
      duration_estimate: "20 min"

    - id: "2"
      name: "Test Break Features"
      description: "Check break reminder functionality"
      duration_estimate: "30 min"

    - id: "3"
      name: "Evaluate Save Points"
      description: "Check ability to stop and resume"
      duration_estimate: "30 min"

    - id: "4"
      name: "Review Guidance"
      description: "Assess health usage guidance"
      duration_estimate: "20 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "session_report"
      format: "json"
      description: "Session guidance assessment"

closeout_checklist:
  - id: "slg-001"
    item: "Health warnings present"
    level: "CRITICAL"
    verification: "manual"

  - id: "slg-002"
    item: "Break points available"
    level: "BLOCKING"
    verification: "manual"

  - id: "slg-003"
    item: "Break reminders optional"
    level: "WARNING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["vr-applications"]

  compliance_frameworks:
    - framework: "Meta VRC"
      controls: ["Health Warnings"]

relationships:
  commonly_combined:
    - "metaverse-immersive.comfort-safety.eye-strain-prevention"
    - "metaverse-immersive.comfort-safety.motion-sickness-prevention"
