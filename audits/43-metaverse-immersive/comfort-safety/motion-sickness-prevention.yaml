# ============================================================
# AUDIT: Motion Sickness Prevention
# Category: 43 - Metaverse & Immersive
# Subcategory: comfort-safety
# ============================================================

audit:
  id: "metaverse-immersive.comfort-safety.motion-sickness-prevention"
  name: "Motion Sickness Prevention Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "comfort-safety"

  tier: "expert"
  estimated_duration: "4-6 hours"  # median: 5h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  requires_human_evaluation: true
  severity: "critical"
  scope: "xr-systems"

  default_profiles:
    - "full"
    - "quick"
    - "production"

  blocks_phase: true
  parallelizable: true

description:
  what: |
    Evaluates VR comfort and motion sickness prevention measures including
    artificial locomotion, camera control, acceleration profiles, and
    comfort options. Assesses known sickness triggers and mitigation
    strategies.

  why_it_matters: |
    Motion sickness can render VR experiences unusable and create lasting
    negative associations. Users experiencing simulator sickness may never
    return to VR. Preventing motion sickness is essential for adoption and
    user wellbeing.

  when_to_run:
    - "During design review"
    - "When users report discomfort"
    - "Before release"
    - "After locomotion changes"

prerequisites:
  required_artifacts:
    - type: "locomotion_system"
      description: "Movement implementation"
    - type: "comfort_options"
      description: "User comfort settings"
    - type: "camera_rig"
      description: "Camera control system"

  access_requirements:
    - "Access to VR application"
    - "Multiple testers"
    - "Extended test sessions"

discovery:
  file_patterns:
    - glob: "**/locomotion/**/*.cs"
      purpose: "Find locomotion code"
    - glob: "**/camera/**/*.cs"
      purpose: "Find camera control"
    - glob: "**/comfort/**/*.cs"
      purpose: "Find comfort features"

  code_patterns:
    - pattern: "smooth locomotion|artificial locomotion"
      type: "keyword"
      scope: "source"
      purpose: "Find locomotion systems"
    - pattern: "vignette|tunnel|comfort"
      type: "keyword"
      scope: "source"
      purpose: "Find comfort features"

knowledge_sources:
  specifications:
    - id: "vr-comfort-research"
      name: "VR Comfort Research"
      url: "https://developer.oculus.com/blog/vr-best-practices/"
      offline_cache: true
      priority: "required"

  guides:
    - id: "meta-comfort"
      name: "Meta Comfort Guidelines"
      url: "https://developer.oculus.com/resources/publish-quest-req/"
      offline_cache: true

    - id: "valve-comfort"
      name: "Valve VR Comfort Guidelines"
      url: "https://developer.valvesoftware.com/wiki/VR_Best_Practices"
      offline_cache: true

tooling:
  assessment_tools:
    - tool: "sickness-questionnaire"
      purpose: "Standardized comfort assessment"

    - tool: "biometric-monitoring"
      purpose: "Physiological response measurement"

signals:
  critical:
    - id: "MSP-CRIT-001"
      signal: "Forced camera movement without user control"
      evidence_indicators:
        - "Camera rotates without user input"
        - "Cutscenes move camera artificially"
        - "No way to skip uncomfortable sequences"
      explanation: |
        Forced camera movement is the primary cause of VR sickness.
        The vestibular system expects to control head movement.
      remediation: |
        Never move the camera without user control.
        Replace cutscenes with in-world events.
        Add skip options for any camera movement.

    - id: "MSP-CRIT-002"
      signal: "No comfort options provided"
      evidence_indicators:
        - "No vignette during movement"
        - "No teleport alternative to smooth locomotion"
        - "No comfort settings menu"
      explanation: |
        Users have varying sensitivity to motion. Without options,
        sensitive users cannot use the application.
      remediation: "Implement comprehensive comfort options"

  high:
    - id: "MSP-HIGH-001"
      signal: "Instant acceleration/deceleration"
      evidence_indicators:
        - "Movement starts at full speed"
        - "Movement stops instantly"
      remediation: "Add gradual acceleration curves"

    - id: "MSP-HIGH-002"
      signal: "Fast artificial rotation"
      evidence_indicators:
        - "Smooth turn speed > 90 deg/sec"
        - "No snap turn option"
      remediation: "Reduce turn speed or add snap turn"

    - id: "MSP-HIGH-003"
      signal: "Visual inconsistencies during movement"
      evidence_indicators:
        - "Frame rate drops during movement"
        - "Tracking issues while moving"
      remediation: "Ensure stable performance during movement"

  medium:
    - id: "MSP-MED-001"
      signal: "No reference frame during movement"
      remediation: "Add visual reference frame or vignette"

    - id: "MSP-MED-002"
      signal: "Height mismatches"
      remediation: "Calibrate user height properly"

  low:
    - id: "MSP-LOW-001"
      signal: "Comfort options not explained"
      remediation: "Add comfort option explanations"

  positive:
    - id: "MSP-POS-001"
      signal: "User-controlled camera only"
    - id: "MSP-POS-002"
      signal: "Comprehensive comfort options"
    - id: "MSP-POS-003"
      signal: "Teleport locomotion available"

procedure:
  context:
    cognitive_mode: "critical"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Review Locomotion System"
      description: "Analyze movement implementation"
      duration_estimate: "1 hour"

    - id: "2"
      name: "Test Comfort Features"
      description: "Verify comfort options work"
      duration_estimate: "1 hour"

    - id: "3"
      name: "User Testing"
      description: "Test with sensitive users"
      duration_estimate: "2 hours"

    - id: "4"
      name: "Identify Trigger Points"
      description: "Find remaining discomfort sources"
      duration_estimate: "1 hour"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "comfort_report"
      format: "prose"
      description: "Comfort assessment"

closeout_checklist:
  - id: "msp-001"
    item: "No forced camera movement"
    level: "CRITICAL"
    verification: "manual"

  - id: "msp-002"
    item: "Comfort options provided"
    level: "CRITICAL"
    verification: "manual"

  - id: "msp-003"
    item: "User testing completed"
    level: "BLOCKING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["vr-applications"]

  compliance_frameworks:
    - framework: "Meta VRC"
      controls: ["Comfort Requirements"]

relationships:
  commonly_combined:
    - "metaverse-immersive.rendering-performance.frame-rate-stability"
    - "metaverse-immersive.comfort-safety.locomotion-strategy"
