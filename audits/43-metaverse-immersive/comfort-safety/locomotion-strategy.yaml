# ============================================================
# AUDIT: Locomotion Strategy
# Category: 43 - Metaverse & Immersive
# Subcategory: comfort-safety
# ============================================================

audit:
  id: "metaverse-immersive.comfort-safety.locomotion-strategy"
  name: "VR Locomotion Strategy Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "comfort-safety"

  tier: "expert"
  estimated_duration: "3-5 hours"  # median: 4h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "xr-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates the VR locomotion strategy including movement mechanics,
    turning methods, vertical movement, and transitions between locomotion
    modes. Assesses appropriateness for the experience type and user comfort.

  why_it_matters: |
    Locomotion is the most challenging VR design problem. The chosen approach
    fundamentally shapes user comfort, immersion, and what experiences are
    possible. Wrong locomotion choices can make otherwise great experiences
    unplayable.

  when_to_run:
    - "During design phase"
    - "When choosing locomotion method"
    - "When users report issues"
    - "During experience review"

prerequisites:
  required_artifacts:
    - type: "locomotion_implementation"
      description: "Locomotion system code"
    - type: "design_docs"
      description: "Locomotion design rationale"

  access_requirements:
    - "Access to locomotion code"
    - "VR testing capability"

discovery:
  file_patterns:
    - glob: "**/locomotion/**/*.cs"
      purpose: "Find locomotion code"
    - glob: "**/movement/**/*.cs"
      purpose: "Find movement systems"

  code_patterns:
    - pattern: "teleport|smoothLocomotion|dashMove"
      type: "keyword"
      scope: "source"
      purpose: "Find locomotion types"
    - pattern: "turnProvider|snapTurn|smoothTurn"
      type: "keyword"
      scope: "source"
      purpose: "Find turn methods"

knowledge_sources:
  guides:
    - id: "vr-locomotion"
      name: "VR Locomotion Techniques"
      url: "https://uploadvr.com/vr-locomotion-guide/"
      offline_cache: true

    - id: "locomotion-research"
      name: "Locomotion Research"
      url: "https://developer.oculus.com/documentation/unity/unity-locomotion/"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "locomotion-tester"
      purpose: "Locomotion evaluation"

signals:
  critical:
    - id: "LS-CRIT-001"
      signal: "Locomotion fundamentally uncomfortable"
      evidence_indicators:
        - "Most users report nausea"
        - "No comfortable alternative"
        - "Core movement causes sickness"
      explanation: |
        If the primary locomotion method causes sickness in most users,
        the application is fundamentally flawed.
      remediation: "Redesign locomotion approach"

    - id: "LS-CRIT-002"
      signal: "Only one locomotion option"
      evidence_indicators:
        - "No alternative movement methods"
        - "Forced locomotion type"
      explanation: |
        Users need options. Forcing one locomotion type excludes
        those who can't tolerate it.
      remediation: "Implement multiple locomotion options"

  high:
    - id: "LS-HIGH-001"
      signal: "Inappropriate for experience type"
      evidence_indicators:
        - "Fast locomotion in exploration game"
        - "Teleport in action game without alternative"
      remediation: "Match locomotion to experience type"

    - id: "LS-HIGH-002"
      signal: "Vertical movement uncomfortable"
      evidence_indicators:
        - "Smooth ascent/descent"
        - "Falling sensation uncomfortable"
      remediation: "Implement comfortable vertical movement"

  medium:
    - id: "LS-MED-001"
      signal: "Locomotion speed not adjustable"
      remediation: "Add speed settings"

    - id: "LS-MED-002"
      signal: "No room-scale integration"
      remediation: "Support physical walking"

  low:
    - id: "LS-LOW-001"
      signal: "Locomotion rationale undocumented"
      remediation: "Document locomotion design decisions"

  positive:
    - id: "LS-POS-001"
      signal: "Multiple locomotion options"
    - id: "LS-POS-002"
      signal: "Appropriate for experience"
    - id: "LS-POS-003"
      signal: "Comfortable by default"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Document Locomotion Methods"
      description: "List all available movement options"
      duration_estimate: "30 min"

    - id: "2"
      name: "Assess Comfort"
      description: "Test each method for comfort"
      duration_estimate: "1.5 hours"

    - id: "3"
      name: "Evaluate Appropriateness"
      description: "Check fit with experience"
      duration_estimate: "45 min"

    - id: "4"
      name: "Test Transitions"
      description: "Verify mode switching works"
      duration_estimate: "45 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "locomotion_report"
      format: "prose"
      description: "Locomotion strategy assessment"

closeout_checklist:
  - id: "ls-001"
    item: "Multiple options available"
    level: "CRITICAL"
    verification: "manual"

  - id: "ls-002"
    item: "Default is comfortable"
    level: "BLOCKING"
    verification: "manual"

  - id: "ls-003"
    item: "Appropriate for experience"
    level: "WARNING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["vr-applications"]

relationships:
  commonly_combined:
    - "metaverse-immersive.comfort-safety.motion-sickness-prevention"
    - "metaverse-immersive.comfort-safety.comfort-mode-options"
