# ============================================================
# AUDIT: Animation Quality
# Category: 43 - Metaverse & Immersive
# Subcategory: 3d-asset-quality
# ============================================================

audit:
  id: "metaverse-immersive.3d-asset-quality.animation-quality"
  name: "Animation Quality Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "3d-asset-quality"

  tier: "expert"
  estimated_duration: "3-5 hours"  # median: 4h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "xr-systems"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates animation quality for XR including visual smoothness,
    performance impact, rig efficiency, and appropriateness for
    immersive viewing at various distances.

  why_it_matters: |
    Animations are scrutinized more closely in VR due to proximity
    and stereoscopic viewing. Poor animations break immersion while
    expensive animations impact performance. Quality animations are
    essential for believable XR characters.

  when_to_run:
    - "During character review"
    - "When animations look wrong"
    - "During performance optimization"
    - "After animation changes"

prerequisites:
  required_artifacts:
    - type: "animations"
      description: "Animation clips"
    - type: "rigs"
      description: "Character rigs"

  access_requirements:
    - "Access to animations"
    - "VR viewing capability"

discovery:
  file_patterns:
    - glob: "**/*.anim"
      purpose: "Find Unity animations"
    - glob: "**/*.fbx"
      purpose: "Find animated models"

knowledge_sources:
  guides:
    - id: "vr-animation"
      name: "VR Animation Guidelines"
      url: "https://developer.oculus.com/documentation/unity/unity-animation/"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "animation-analyzer"
      purpose: "Animation quality analysis"

signals:
  critical:
    - id: "AQ-CRIT-001"
      signal: "Animations cause frame drops"
      evidence_indicators:
        - "Frame rate drops during animation"
        - "Excessive bone count"
        - "Too many animated characters"
      explanation: |
        Animation performance is critical in VR. Frame drops during
        animations cause discomfort.
      remediation: "Optimize rigs and animation count"

  high:
    - id: "AQ-HIGH-001"
      signal: "Animation quality insufficient for VR"
      evidence_indicators:
        - "Jerky movement visible in stereo"
        - "Obvious interpolation artifacts"
      remediation: "Improve animation quality for VR viewing"

    - id: "AQ-HIGH-002"
      signal: "Excessive bone count"
      evidence_threshold: "bones > 75 per character on mobile"
      remediation: "Reduce skeleton complexity"

  medium:
    - id: "AQ-MED-001"
      signal: "Animation blending rough"
      remediation: "Improve transition blending"

    - id: "AQ-MED-002"
      signal: "Keyframe density excessive"
      remediation: "Optimize keyframe count"

  low:
    - id: "AQ-LOW-001"
      signal: "Animation guidelines missing"
      remediation: "Document animation standards"

  positive:
    - id: "AQ-POS-001"
      signal: "Smooth VR-quality animations"
    - id: "AQ-POS-002"
      signal: "Efficient rig structure"
    - id: "AQ-POS-003"
      signal: "Optimized keyframes"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Review in VR"
      description: "Assess animation quality in headset"
      duration_estimate: "1.5 hours"

    - id: "2"
      name: "Check Performance"
      description: "Profile animation impact"
      duration_estimate: "1 hour"

    - id: "3"
      name: "Analyze Rigs"
      description: "Check skeleton efficiency"
      duration_estimate: "45 min"

    - id: "4"
      name: "Check Blending"
      description: "Verify transition quality"
      duration_estimate: "45 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "animation_report"
      format: "json"
      description: "Animation quality analysis"

closeout_checklist:
  - id: "aq-001"
    item: "Animations don't impact frame rate"
    level: "CRITICAL"
    verification: "automated"

  - id: "aq-002"
    item: "Quality acceptable in VR"
    level: "BLOCKING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["xr-applications", "3d-applications"]

relationships:
  commonly_combined:
    - "metaverse-immersive.3d-asset-quality.model-polygon-count"
    - "metaverse-immersive.rendering-performance.frame-rate-stability"
