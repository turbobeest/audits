# ============================================================
# AUDIT: Material Quality
# Category: 43 - Metaverse & Immersive
# Subcategory: 3d-asset-quality
# ============================================================

audit:
  id: "metaverse-immersive.3d-asset-quality.material-quality"
  name: "Material Quality Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "3d-asset-quality"

  tier: "expert"
  estimated_duration: "2-4 hours"  # median: 3h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "xr-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates material quality and efficiency including material count,
    shader complexity, texture usage, and visual consistency for XR
    applications.

  why_it_matters: |
    Materials significantly impact both visual quality and performance.
    Too many materials break batching while poor materials look bad.
    Material optimization is essential for professional XR content.

  when_to_run:
    - "During content review"
    - "When optimizing draw calls"
    - "When visuals look wrong"
    - "During polish phase"

prerequisites:
  required_artifacts:
    - type: "materials"
      description: "Material definitions"
    - type: "shaders"
      description: "Shader usage"

  access_requirements:
    - "Access to materials"
    - "Visual inspection capability"

discovery:
  file_patterns:
    - glob: "**/*.mat"
      purpose: "Find Unity materials"
    - glob: "**/materials/**"
      purpose: "Find material files"

knowledge_sources:
  guides:
    - id: "vr-materials"
      name: "VR Material Guidelines"
      url: "https://developer.oculus.com/documentation/unity/unity-materials/"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "material-analyzer"
      purpose: "Material efficiency analysis"

signals:
  critical:
    - id: "MQ-CRIT-001"
      signal: "Desktop-only materials on mobile"
      evidence_indicators:
        - "Standard shader on mobile VR"
        - "Complex PBR on mobile"
      explanation: |
        Desktop materials are far too expensive for mobile VR
        and will cause severe performance issues.
      remediation: "Use mobile-optimized materials"

  high:
    - id: "MQ-HIGH-001"
      signal: "Excessive material count"
      evidence_threshold: "unique_materials > draw_call_budget"
      remediation: "Consolidate materials with atlases"

    - id: "MQ-HIGH-002"
      signal: "Materials break batching"
      evidence_indicators:
        - "Similar materials not shared"
        - "Unnecessary material variations"
      remediation: "Share materials where possible"

  medium:
    - id: "MQ-MED-001"
      signal: "Material visual quality inconsistent"
      remediation: "Standardize material quality"

    - id: "MQ-MED-002"
      signal: "Unused texture channels"
      remediation: "Remove unused texture slots"

  low:
    - id: "MQ-LOW-001"
      signal: "Material guidelines missing"
      remediation: "Document material standards"

  positive:
    - id: "MQ-POS-001"
      signal: "Efficient material usage"
    - id: "MQ-POS-002"
      signal: "Platform-appropriate shaders"
    - id: "MQ-POS-003"
      signal: "Consistent visual quality"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Count Materials"
      description: "Inventory unique materials"
      duration_estimate: "30 min"

    - id: "2"
      name: "Check Shader Usage"
      description: "Verify appropriate shaders"
      duration_estimate: "45 min"

    - id: "3"
      name: "Assess Visual Quality"
      description: "Review material appearance"
      duration_estimate: "1 hour"

    - id: "4"
      name: "Check Batching Impact"
      description: "Verify material batching"
      duration_estimate: "30 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "material_report"
      format: "json"
      description: "Material quality analysis"

closeout_checklist:
  - id: "mq-001"
    item: "Platform-appropriate materials"
    level: "CRITICAL"
    verification: "manual"

  - id: "mq-002"
    item: "Material count efficient"
    level: "BLOCKING"
    verification: "automated"

governance:
  applicable_to:
    archetypes: ["xr-applications", "3d-applications"]

relationships:
  commonly_combined:
    - "metaverse-immersive.rendering-performance.shader-performance"
    - "metaverse-immersive.rendering-performance.draw-call-optimization"
