# ============================================================
# AUDIT: Texture Resolution
# Category: 43 - Metaverse & Immersive
# Subcategory: 3d-asset-quality
# ============================================================

audit:
  id: "metaverse-immersive.3d-asset-quality.texture-resolution"
  name: "Texture Resolution Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "3d-asset-quality"

  tier: "expert"
  estimated_duration: "2-3 hours"  # median: 2h

  completeness: "requires_discovery"
  requires_runtime: false
  destructive: false

execution:
  automatable: "yes"
  severity: "high"
  scope: "xr-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates texture resolutions against memory budgets and visual quality
    requirements. Assesses texture sizes, formats, compression, and mipmapping
    for XR optimization.

  why_it_matters: |
    Texture memory is limited, especially on mobile VR. Oversized textures
    waste memory and bandwidth while undersized textures appear blurry.
    Proper texture sizing balances quality and performance.

  when_to_run:
    - "When importing textures"
    - "During memory optimization"
    - "When textures appear blurry"
    - "During asset review"

prerequisites:
  required_artifacts:
    - type: "textures"
      description: "Texture files"
    - type: "memory_budget"
      description: "Texture memory limit"

  access_requirements:
    - "Access to texture files"
    - "Texture analysis tools"

discovery:
  file_patterns:
    - glob: "**/*.png"
      purpose: "Find PNG textures"
    - glob: "**/*.jpg"
      purpose: "Find JPEG textures"
    - glob: "**/*.tga"
      purpose: "Find TGA textures"

knowledge_sources:
  guides:
    - id: "vr-textures"
      name: "VR Texture Guidelines"
      url: "https://developer.oculus.com/documentation/unity/unity-textures/"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "texture-analyzer"
      purpose: "Texture resolution analysis"

signals:
  critical:
    - id: "TR-CRIT-001"
      signal: "Texture memory exceeds budget"
      evidence_threshold: "total_texture_memory > platform_budget"
      explanation: |
        Exceeding texture memory causes out-of-memory crashes or
        streaming issues.
      remediation: "Reduce texture sizes or use compression"

    - id: "TR-CRIT-002"
      signal: "Extremely large textures"
      evidence_threshold: "texture_size > 4096x4096"
      explanation: |
        Very large textures are almost never needed for XR and
        waste significant memory.
      remediation: "Resize textures appropriately"

  high:
    - id: "TR-HIGH-001"
      signal: "No texture compression"
      evidence_indicators:
        - "Uncompressed textures in build"
        - "No GPU compression used"
      remediation: "Use appropriate texture compression"

    - id: "TR-HIGH-002"
      signal: "Missing mipmaps"
      evidence_indicators:
        - "Mipmaps disabled"
        - "Aliasing on distant textures"
      remediation: "Enable mipmaps for 3D objects"

  medium:
    - id: "TR-MED-001"
      signal: "Texture resolution not matched to usage"
      remediation: "Size textures for actual screen usage"

    - id: "TR-MED-002"
      signal: "Non-power-of-two textures"
      remediation: "Use power-of-two dimensions"

  low:
    - id: "TR-LOW-001"
      signal: "Texture budget undocumented"
      remediation: "Document texture guidelines"

  positive:
    - id: "TR-POS-001"
      signal: "Textures within budget"
    - id: "TR-POS-002"
      signal: "Appropriate compression"
    - id: "TR-POS-003"
      signal: "Mipmaps enabled"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Count Total Memory"
      description: "Measure texture memory usage"
      duration_estimate: "30 min"

    - id: "2"
      name: "Analyze Sizes"
      description: "Check individual texture sizes"
      duration_estimate: "45 min"

    - id: "3"
      name: "Check Compression"
      description: "Verify compression settings"
      duration_estimate: "30 min"

    - id: "4"
      name: "Verify Mipmaps"
      description: "Check mipmap settings"
      duration_estimate: "30 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "texture_report"
      format: "json"
      description: "Texture resolution analysis"

closeout_checklist:
  - id: "tr-001"
    item: "Memory within budget"
    level: "CRITICAL"
    verification: "automated"

  - id: "tr-002"
    item: "Compression appropriate"
    level: "BLOCKING"
    verification: "automated"

governance:
  applicable_to:
    archetypes: ["xr-applications", "3d-applications"]

relationships:
  commonly_combined:
    - "metaverse-immersive.3d-asset-quality.material-quality"
    - "metaverse-immersive.rendering-performance.shader-performance"
