# ============================================================
# AUDIT: Presence Indicators
# Category: 43 - Metaverse & Immersive
# Subcategory: multiplayer-social
# ============================================================

audit:
  id: "metaverse-immersive.multiplayer-social.presence-indicators"
  name: "Presence Indicators Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "multiplayer-social"

  tier: "expert"
  estimated_duration: "2-3 hours"  # median: 2h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "xr-systems"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates presence and status indicators in social VR including
    online status, activity indicators, speaking indicators, and
    attention cues that help users understand others' availability.

  why_it_matters: |
    Presence indicators help users understand social context in VR.
    Without them, users cannot tell if someone is engaged, away,
    or speaking. Good indicators enable natural social interaction.

  when_to_run:
    - "During social feature review"
    - "When social cues unclear"
    - "During UX review"
    - "After indicator changes"

prerequisites:
  required_artifacts:
    - type: "presence_system"
      description: "Presence indicator implementation"
    - type: "status_system"
      description: "User status system"

  access_requirements:
    - "Multiplayer environment"
    - "Multiple users"

discovery:
  file_patterns:
    - glob: "**/presence/**/*.cs"
      purpose: "Find presence code"
    - glob: "**/status/**/*.cs"
      purpose: "Find status code"

  code_patterns:
    - pattern: "Presence|Status|Online"
      type: "keyword"
      scope: "source"
      purpose: "Find presence systems"

knowledge_sources:
  guides:
    - id: "social-presence"
      name: "Social Presence in VR"
      url: "https://developer.oculus.com/documentation/unity/ps-platform-presence/"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "ux-analyzer"
      purpose: "UX analysis"

signals:
  critical:
    - id: "PI-CRIT-001"
      signal: "Cannot tell if user is present"
      evidence_indicators:
        - "No way to know if user active"
        - "Avatars don't indicate AFK"
      explanation: |
        Users need to know if others are actually present
        to avoid talking to inactive users.
      remediation: "Add presence indicators"

  high:
    - id: "PI-HIGH-001"
      signal: "No speaking indicator"
      evidence_indicators:
        - "Cannot tell who is talking"
        - "No voice visualization"
      remediation: "Add speaking indicator to avatars"

    - id: "PI-HIGH-002"
      signal: "Status privacy not controllable"
      evidence_indicators:
        - "Presence always shared"
        - "No privacy options"
      remediation: "Add presence privacy controls"

  medium:
    - id: "PI-MED-001"
      signal: "Indicators not visible at distance"
      remediation: "Make indicators visible from afar"

    - id: "PI-MED-002"
      signal: "No attention indicators"
      remediation: "Add gaze or attention cues"

  low:
    - id: "PI-LOW-001"
      signal: "Indicator meaning unclear"
      remediation: "Document indicator meanings"

  positive:
    - id: "PI-POS-001"
      signal: "Clear presence indicators"
    - id: "PI-POS-002"
      signal: "Speaking clearly indicated"
    - id: "PI-POS-003"
      signal: "Privacy controls available"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Test Presence Indicators"
      description: "Check presence visibility"
      duration_estimate: "45 min"

    - id: "2"
      name: "Test Speaking Indicators"
      description: "Verify voice visualization"
      duration_estimate: "30 min"

    - id: "3"
      name: "Test Privacy Controls"
      description: "Check status privacy"
      duration_estimate: "30 min"

    - id: "4"
      name: "Test Visibility"
      description: "Check indicators at distance"
      duration_estimate: "30 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "presence_report"
      format: "json"
      description: "Presence indicator analysis"

closeout_checklist:
  - id: "pi-001"
    item: "Presence indicators exist"
    level: "CRITICAL"
    verification: "manual"

  - id: "pi-002"
    item: "Speaking indicated"
    level: "BLOCKING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["social-vr", "metaverse"]

relationships:
  commonly_combined:
    - "metaverse-immersive.multiplayer-social.avatar-system"
    - "metaverse-immersive.multiplayer-social.voice-chat-quality"
