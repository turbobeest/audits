# ============================================================
# AUDIT: Avatar System
# Category: 43 - Metaverse & Immersive
# Subcategory: multiplayer-social
# ============================================================

audit:
  id: "metaverse-immersive.multiplayer-social.avatar-system"
  name: "Avatar System Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "multiplayer-social"

  tier: "expert"
  estimated_duration: "3-5 hours"  # median: 4h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "xr-systems"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates avatar systems for social VR including avatar representation,
    customization options, tracking fidelity, performance, and social
    appropriateness of avatar capabilities.

  why_it_matters: |
    Avatars are the user's presence in social VR. Poor avatar representation
    reduces social connection and can enable harassment. Good avatar systems
    balance expressiveness, performance, and safety.

  when_to_run:
    - "During social feature development"
    - "When designing avatar systems"
    - "During safety review"
    - "After avatar changes"

prerequisites:
  required_artifacts:
    - type: "avatar_system"
      description: "Avatar implementation"
    - type: "customization"
      description: "Avatar customization options"

  access_requirements:
    - "Multiplayer testing"
    - "Avatar system access"

discovery:
  file_patterns:
    - glob: "**/avatar/**/*.cs"
      purpose: "Find avatar code"
    - glob: "**/customization/**/*.cs"
      purpose: "Find customization code"

  code_patterns:
    - pattern: "Avatar|OVRAvatar|IKRig"
      type: "keyword"
      scope: "source"
      purpose: "Find avatar systems"

knowledge_sources:
  guides:
    - id: "meta-avatars"
      name: "Meta Avatars SDK"
      url: "https://developer.oculus.com/documentation/unity/meta-avatars-overview/"
      offline_cache: true
      priority: "required"

tooling:
  analysis_tools:
    - tool: "avatar-analyzer"
      purpose: "Avatar quality analysis"

signals:
  critical:
    - id: "AVS-CRIT-001"
      signal: "Avatar enables harassment"
      evidence_indicators:
        - "Can invade personal space"
        - "Inappropriate gestures possible"
        - "No way to block or mute"
      explanation: |
        Avatars that enable harassment drive users away and create
        toxic environments. Safety must be built in.
      remediation: "Implement personal space and safety features"

    - id: "AVS-CRIT-002"
      signal: "Avatar performance breaks frame rate"
      evidence_indicators:
        - "Frame rate drops with avatars"
        - "Too many bones/polygons"
      explanation: |
        Avatar performance cannot compromise frame rate.
        Social VR requires many avatars rendering smoothly.
      remediation: "Optimize avatar rendering"

  high:
    - id: "AVS-HIGH-001"
      signal: "Avatar tracking uncanny"
      evidence_indicators:
        - "Movement looks wrong"
        - "IK artifacts visible"
      remediation: "Improve avatar tracking and IK"

    - id: "AVS-HIGH-002"
      signal: "Limited customization"
      evidence_indicators:
        - "Few avatar options"
        - "No diversity in options"
      remediation: "Expand customization options"

  medium:
    - id: "AVS-MED-001"
      signal: "No hand representation"
      remediation: "Add hand tracking to avatars"

    - id: "AVS-MED-002"
      signal: "Avatar loading slow"
      remediation: "Optimize avatar loading"

  low:
    - id: "AVS-LOW-001"
      signal: "Avatar guidelines missing"
      remediation: "Document avatar standards"

  positive:
    - id: "AVS-POS-001"
      signal: "Natural avatar movement"
    - id: "AVS-POS-002"
      signal: "Diverse customization"
    - id: "AVS-POS-003"
      signal: "Built-in safety features"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Test Avatar Quality"
      description: "Evaluate avatar representation"
      duration_estimate: "1 hour"

    - id: "2"
      name: "Test Performance"
      description: "Check avatar rendering performance"
      duration_estimate: "1 hour"

    - id: "3"
      name: "Test Customization"
      description: "Review customization options"
      duration_estimate: "45 min"

    - id: "4"
      name: "Test Safety"
      description: "Verify safety features"
      duration_estimate: "45 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "avatar_report"
      format: "json"
      description: "Avatar system assessment"

closeout_checklist:
  - id: "avs-001"
    item: "Safety features implemented"
    level: "CRITICAL"
    verification: "manual"

  - id: "avs-002"
    item: "Performance acceptable"
    level: "CRITICAL"
    verification: "automated"

governance:
  applicable_to:
    archetypes: ["social-vr", "metaverse"]

relationships:
  commonly_combined:
    - "metaverse-immersive.multiplayer-social.social-boundaries"
    - "metaverse-immersive.multiplayer-social.moderation-tools"
