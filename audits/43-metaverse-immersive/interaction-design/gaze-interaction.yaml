# ============================================================
# AUDIT: Gaze Interaction
# Category: 43 - Metaverse & Immersive
# Subcategory: interaction-design
# ============================================================

audit:
  id: "metaverse-immersive.interaction-design.gaze-interaction"
  name: "Gaze Interaction Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "interaction-design"

  tier: "expert"
  estimated_duration: "2-3 hours"  # median: 2h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "xr-systems"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates gaze-based interaction including eye tracking integration,
    gaze cursor design, dwell-time selection, and gaze as input modality.
    Assesses whether gaze interactions feel natural and accurate.

  why_it_matters: |
    Gaze is a natural pointing mechanism that can enable hands-free
    interaction. However, poor gaze interaction causes eye fatigue and
    frustration. Eye tracking also raises privacy considerations that
    must be addressed.

  when_to_run:
    - "When implementing gaze input"
    - "When using eye tracking"
    - "During accessibility review"
    - "When gaze feels inaccurate"

prerequisites:
  required_artifacts:
    - type: "gaze_implementation"
      description: "Gaze interaction code"
    - type: "eye_tracking"
      description: "Eye tracking integration (if used)"

  access_requirements:
    - "XR device"
    - "Eye tracking if implemented"

discovery:
  file_patterns:
    - glob: "**/gaze/**/*.cs"
      purpose: "Find gaze code"
    - glob: "**/eyetracking/**/*.cs"
      purpose: "Find eye tracking code"

  code_patterns:
    - pattern: "Gaze|EyeTracking|EyeGaze"
      type: "keyword"
      scope: "source"
      purpose: "Find gaze systems"

knowledge_sources:
  guides:
    - id: "eye-tracking"
      name: "Eye Tracking in XR"
      url: "https://developer.oculus.com/documentation/unity/unity-eyetracking/"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "gaze-visualizer"
      purpose: "Gaze pattern visualization"

signals:
  critical:
    - id: "GI-CRIT-001"
      signal: "Eye tracking data privacy violation"
      evidence_indicators:
        - "Eye tracking data sent without consent"
        - "No privacy disclosure"
        - "Data retained inappropriately"
      explanation: |
        Eye tracking data is sensitive and can reveal health,
        attention, and emotional state. Privacy must be respected.
      remediation: "Implement proper eye tracking privacy controls"

  high:
    - id: "GI-HIGH-001"
      signal: "Gaze accuracy insufficient"
      evidence_indicators:
        - "Gaze misses targets frequently"
        - "Calibration issues"
      remediation: "Improve calibration or use larger targets"

    - id: "GI-HIGH-002"
      signal: "Dwell time causes fatigue"
      evidence_indicators:
        - "Long dwell times required"
        - "Users report eye strain"
      remediation: "Reduce dwell time or add alternatives"

  medium:
    - id: "GI-MED-001"
      signal: "No gaze cursor or feedback"
      remediation: "Add visual gaze feedback"

    - id: "GI-MED-002"
      signal: "Gaze-only without alternatives"
      remediation: "Provide alternative input methods"

  low:
    - id: "GI-LOW-001"
      signal: "Gaze calibration not prompted"
      remediation: "Prompt calibration when needed"

  positive:
    - id: "GI-POS-001"
      signal: "Accurate gaze tracking"
    - id: "GI-POS-002"
      signal: "Privacy properly handled"
    - id: "GI-POS-003"
      signal: "Comfortable dwell times"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Test Gaze Accuracy"
      description: "Verify gaze targeting precision"
      duration_estimate: "45 min"

    - id: "2"
      name: "Review Privacy Handling"
      description: "Check eye tracking privacy"
      duration_estimate: "30 min"

    - id: "3"
      name: "Test Dwell Selection"
      description: "Evaluate dwell-time interactions"
      duration_estimate: "30 min"

    - id: "4"
      name: "Assess Comfort"
      description: "Check for eye fatigue"
      duration_estimate: "30 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "gaze_report"
      format: "json"
      description: "Gaze interaction analysis"

closeout_checklist:
  - id: "gi-001"
    item: "Privacy properly handled"
    level: "CRITICAL"
    verification: "manual"

  - id: "gi-002"
    item: "Gaze accuracy acceptable"
    level: "BLOCKING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["xr-applications"]

  compliance_frameworks:
    - framework: "GDPR"
      controls: ["Biometric Data"]

relationships:
  commonly_combined:
    - "metaverse-immersive.interaction-design.controller-input"
    - "metaverse-immersive.accessibility.vr-accessibility-options"
