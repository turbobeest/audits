# ============================================================
# AUDIT: Controller Input
# Category: 43 - Metaverse & Immersive
# Subcategory: interaction-design
# ============================================================

audit:
  id: "metaverse-immersive.interaction-design.controller-input"
  name: "Controller Input Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "interaction-design"

  tier: "expert"
  estimated_duration: "2-4 hours"  # median: 3h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "xr-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates VR controller input implementation including button mapping,
    thumbstick handling, haptic feedback, and cross-controller compatibility.
    Assesses whether inputs feel responsive and intuitive.

  why_it_matters: |
    Controllers are the primary input method for most VR applications.
    Poor controller handling makes interactions feel sluggish or frustrating.
    Good controller input is fundamental to user experience quality.

  when_to_run:
    - "During input implementation"
    - "When inputs feel wrong"
    - "When supporting new controllers"
    - "During UX review"

prerequisites:
  required_artifacts:
    - type: "input_system"
      description: "Controller input implementation"
    - type: "controller_mapping"
      description: "Button and axis mapping"

  access_requirements:
    - "Access to VR controllers"
    - "Multiple controller types if cross-platform"

discovery:
  file_patterns:
    - glob: "**/input/**/*.cs"
      purpose: "Find input code"
    - glob: "**/controllers/**/*.cs"
      purpose: "Find controller code"

  code_patterns:
    - pattern: "OVRInput|XRController|InputDevice"
      type: "keyword"
      scope: "source"
      purpose: "Find controller input"

knowledge_sources:
  guides:
    - id: "unity-input"
      name: "Unity XR Input"
      url: "https://docs.unity3d.com/Manual/XRInputOptions.html"
      offline_cache: true

    - id: "oculus-input"
      name: "Oculus Controller Input"
      url: "https://developer.oculus.com/documentation/unity/unity-ovrinput/"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "input-debugger"
      purpose: "Input visualization"

signals:
  critical:
    - id: "CI-CRIT-001"
      signal: "Essential inputs not functional"
      evidence_indicators:
        - "Primary actions don't work"
        - "Input not detected"
        - "Button mapping broken"
      explanation: |
        If core inputs don't work, the application is unusable.
      remediation: "Fix input detection and mapping"

    - id: "CI-CRIT-002"
      signal: "Input latency severe"
      evidence_threshold: "input_latency > 50ms"
      explanation: |
        High input latency makes interactions feel disconnected
        and unresponsive.
      remediation: "Optimize input processing pipeline"

  high:
    - id: "CI-HIGH-001"
      signal: "Unintuitive button mapping"
      evidence_indicators:
        - "Common actions on uncomfortable buttons"
        - "Mapping inconsistent with platform norms"
      remediation: "Use platform-standard button mapping"

    - id: "CI-HIGH-002"
      signal: "Thumbstick handling poor"
      evidence_indicators:
        - "Dead zone too large or small"
        - "No smoothing for movement"
      remediation: "Tune thumbstick handling"

  medium:
    - id: "CI-MED-001"
      signal: "No button remapping"
      remediation: "Add input customization options"

    - id: "CI-MED-002"
      signal: "Single controller type only"
      remediation: "Support multiple controller types"

  low:
    - id: "CI-LOW-001"
      signal: "Input mapping undocumented"
      remediation: "Document control scheme"

  positive:
    - id: "CI-POS-001"
      signal: "Responsive input handling"
    - id: "CI-POS-002"
      signal: "Platform-appropriate mapping"
    - id: "CI-POS-003"
      signal: "Cross-controller support"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Test All Inputs"
      description: "Verify all buttons and axes"
      duration_estimate: "1 hour"

    - id: "2"
      name: "Assess Mapping"
      description: "Evaluate button assignment"
      duration_estimate: "45 min"

    - id: "3"
      name: "Measure Latency"
      description: "Check input responsiveness"
      duration_estimate: "30 min"

    - id: "4"
      name: "Test Cross-Platform"
      description: "Verify on different controllers"
      duration_estimate: "45 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "input_report"
      format: "json"
      description: "Controller input analysis"

closeout_checklist:
  - id: "ci-001"
    item: "All inputs functional"
    level: "CRITICAL"
    verification: "manual"

  - id: "ci-002"
    item: "Input latency acceptable"
    level: "BLOCKING"
    verification: "automated"

governance:
  applicable_to:
    archetypes: ["vr-applications"]

relationships:
  commonly_combined:
    - "metaverse-immersive.interaction-design.haptic-feedback"
    - "metaverse-immersive.comfort-safety.locomotion-strategy"
