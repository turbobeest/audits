# ============================================================
# AUDIT: Voice Input
# Category: 43 - Metaverse & Immersive
# Subcategory: interaction-design
# ============================================================

audit:
  id: "metaverse-immersive.interaction-design.voice-input"
  name: "Voice Input Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "metaverse-immersive"
  category_number: 43
  subcategory: "interaction-design"

  tier: "expert"
  estimated_duration: "2-4 hours"  # median: 3h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "xr-systems"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates voice input systems for XR including speech recognition
    accuracy, command design, feedback, language support, and privacy
    handling of voice data.

  why_it_matters: |
    Voice provides hands-free interaction and natural communication
    in XR. Poor voice recognition frustrates users while privacy
    mishandling creates legal and trust issues. Voice can be essential
    for accessibility.

  when_to_run:
    - "When implementing voice input"
    - "When voice commands fail"
    - "During accessibility review"
    - "During privacy review"

prerequisites:
  required_artifacts:
    - type: "voice_implementation"
      description: "Voice input code"
    - type: "command_definitions"
      description: "Voice commands defined"

  access_requirements:
    - "Microphone-capable device"
    - "Quiet test environment"

discovery:
  file_patterns:
    - glob: "**/voice/**/*.cs"
      purpose: "Find voice code"
    - glob: "**/speech/**/*.cs"
      purpose: "Find speech recognition code"

  code_patterns:
    - pattern: "Speech|Voice|Microphone"
      type: "keyword"
      scope: "source"
      purpose: "Find voice systems"

knowledge_sources:
  guides:
    - id: "voice-design"
      name: "Voice Interface Design"
      url: "https://developer.oculus.com/documentation/unity/unity-voice/"
      offline_cache: true

tooling:
  analysis_tools:
    - tool: "speech-analyzer"
      purpose: "Recognition accuracy testing"

signals:
  critical:
    - id: "VI-CRIT-001"
      signal: "Voice data privacy violation"
      evidence_indicators:
        - "Audio recorded without consent"
        - "Voice data sent to cloud without disclosure"
        - "No privacy policy for voice"
      explanation: |
        Voice data is sensitive personal information. Improper
        handling violates privacy laws and user trust.
      remediation: "Implement proper voice data privacy"

  high:
    - id: "VI-HIGH-001"
      signal: "Voice recognition unreliable"
      evidence_threshold: "recognition_rate < 80%"
      remediation: "Improve recognition or command design"

    - id: "VI-HIGH-002"
      signal: "No voice feedback"
      evidence_indicators:
        - "Users don't know if heard"
        - "No confirmation of commands"
      remediation: "Add voice recognition feedback"

  medium:
    - id: "VI-MED-001"
      signal: "Limited language support"
      remediation: "Document supported languages"

    - id: "VI-MED-002"
      signal: "No push-to-talk option"
      remediation: "Add activation mode options"

  low:
    - id: "VI-LOW-001"
      signal: "Voice commands undocumented"
      remediation: "Document available voice commands"

  positive:
    - id: "VI-POS-001"
      signal: "Accurate voice recognition"
    - id: "VI-POS-002"
      signal: "Privacy properly handled"
    - id: "VI-POS-003"
      signal: "Clear voice feedback"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Test Recognition Accuracy"
      description: "Measure command recognition rate"
      duration_estimate: "1 hour"

    - id: "2"
      name: "Review Privacy Handling"
      description: "Check voice data privacy"
      duration_estimate: "30 min"

    - id: "3"
      name: "Test Feedback"
      description: "Verify voice feedback quality"
      duration_estimate: "30 min"

    - id: "4"
      name: "Test Noise Handling"
      description: "Test in various noise conditions"
      duration_estimate: "30 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "voice_report"
      format: "json"
      description: "Voice input assessment"

closeout_checklist:
  - id: "vi-001"
    item: "Privacy properly handled"
    level: "CRITICAL"
    verification: "manual"

  - id: "vi-002"
    item: "Recognition acceptable"
    level: "BLOCKING"
    verification: "automated"

governance:
  applicable_to:
    archetypes: ["xr-applications"]

  compliance_frameworks:
    - framework: "GDPR"
      controls: ["Voice Data"]

relationships:
  commonly_combined:
    - "metaverse-immersive.accessibility.vr-accessibility-options"
    - "metaverse-immersive.multiplayer-social.voice-chat-quality"
