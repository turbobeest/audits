audit:
  id: requirements-specification.change-control.change-approval-workflow
  name: Change Approval Workflow Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: requirements-specification
  category_number: 28
  subcategory: change-control
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: documentation
  default_profiles:
  - full
  - requirements
  - governance
description:
  what: |
    This audit examines the workflow for approving requirements changes.
    It evaluates:
    - Approval workflow definition
    - Approval authority levels
    - CCB (Change Control Board) if applicable
    - Approval criteria
    - Approval documentation
    - Escalation procedures
  why_it_matters: |
    Approval workflow ensures appropriate authorization:
    - Prevents unauthorized scope changes
    - Ensures appropriate review level
    - Documents decision authority
    - Supports audit compliance
    - Enables accountability
    - CCB provides governance for significant changes
prerequisites:
  required_artifacts:
  - type: approval_workflow
    description: Approval workflow documentation
  - type: approval_records
    description: Historical approval records
  - type: ccb_records
    description: CCB meeting records if applicable
  access_requirements:
  - Read access to workflow documentation
  - Access to approval records
  - Access to CCB records
discovery:
  code_patterns:
  - pattern: (approval|approve|CCB|change control board)
    type: regex
    scope: documentation
    purpose: Detect approval references
  - pattern: (workflow|escalate|authority)
    type: regex
    scope: documentation
    purpose: Detect workflow elements
  file_patterns:
  - glob: '**/approval*.{md,yaml}'
    purpose: Approval documentation
  - glob: '**/workflow*.{md,yaml}'
    purpose: Workflow documentation
  - glob: '**/CCB*.{md,yaml}'
    purpose: CCB documentation
knowledge_sources:
  specifications:
  - id: ccb-process
    name: Change Control Board Process
    url: https://www.pmi.org/
    offline_cache: true
    priority: required
signals:
  critical:
  - id: APPROVE-CRIT-001
    signal: No approval workflow defined
    evidence_indicators:
    - Changes without approval
    - No approval process
    - Ad-hoc approval
    remediation: |
      - Define approval workflow
      - Establish approval authority
      - Document approval levels
      - Implement tracking
  - id: APPROVE-CRIT-002
    signal: Approval authority inappropriate
    evidence_indicators:
    - Low-level approval for major changes
    - Authority not matched to impact
    - No escalation for significant changes
    remediation: |
      - Define approval authority levels
      - Match authority to change impact
      - Establish CCB for major changes
      - Document escalation criteria
  high:
  - id: APPROVE-HIGH-001
    signal: Approvals not documented
    evidence_indicators:
    - Verbal approvals only
    - No approval records
    - Cannot verify who approved
    remediation: |
      - Require documented approvals
      - Track approval dates
      - Record approver identity
      - Maintain approval audit trail
procedure:
  steps:
  - id: '1'
    name: Approval Workflow Assessment
    commands:
    - purpose: Find approval documentation
      command: |
        find . -type f \( -name "*approval*" -o -name "*workflow*" \
          -o -name "*CCB*" \) \( -name "*.md" -o -name "*.yaml" \) 2>/dev/null | head -15
  - id: '2'
    name: Approval Records Check
    commands:
    - purpose: Check for approval records
      command: |
        grep -rniE "(approved by|approval|CCB|authorized)" \
          --include="*.md" --include="*.yaml" . 2>/dev/null | head -30
output:
  deliverables:
  - type: approval_workflow_assessment
    format: prose
closeout_checklist:
- id: approve-001
  item: Approval workflow defined
  level: CRITICAL
  verification: manual
  expected: Confirmed
governance:
  applicable_to:
    archetypes:
    - all
relationships:
  commonly_combined:
  - requirements-specification.change-control.change-request-process
  - requirements-specification.change-control.impact-assessment
