# ============================================================
# AUDIT: Requirements Freeze
# Category: 28 - Requirements & Specification
# Subcategory: change-control
# ============================================================

audit:
  id: "requirements-specification.change-control.requirements-freeze"
  name: "Requirements Freeze Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "requirements-specification"
  category_number: 28
  subcategory: "change-control"

  tier: "focused"
  estimated_duration: "1-2 hours"  # median: 1h

  completeness: "requires_discovery"
  requires_runtime: false
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "documentation"
  default_profiles:
    - "full"
    - "requirements"

description:
  what: |
    This audit examines the use of requirements freeze periods before releases.
    It evaluates:
    - Freeze policy definition
    - Freeze timing appropriateness
    - Freeze enforcement
    - Exception handling
    - Communication of freeze status
    - Freeze effectiveness

  why_it_matters: |
    Requirements freeze enables stable delivery:
    - Provides stability for final development and testing
    - Prevents last-minute scope disruption
    - Enables predictable delivery
    - Allows testing to complete against stable target
    - Exception process handles genuine emergencies
    - Communicates commitment to delivery

prerequisites:
  required_artifacts:
    - type: "freeze_policy"
      description: "Requirements freeze policy"
    - type: "freeze_records"
      description: "Freeze period records"

  access_requirements:
    - "Read access to freeze policy"
    - "Access to freeze records"

discovery:
  code_patterns:
    - pattern: "(freeze|locked|no.?change|feature.?complete)"
      type: "regex"
      scope: "documentation"
      purpose: "Detect freeze references"

  file_patterns:
    - glob: "**/freeze*.{md,yaml}"
      purpose: "Freeze documentation"
    - glob: "**/release*.{md,yaml}"
      purpose: "Release documentation"

signals:
  high:
    - id: "FREEZE-HIGH-001"
      signal: "No requirements freeze before release"
      evidence_indicators:
        - "Changes accepted until release"
        - "No stability period"
        - "Last-minute requirements"
      remediation: |
        - Establish freeze policy
        - Define freeze timing
        - Communicate freeze dates
        - Enforce freeze period

    - id: "FREEZE-HIGH-002"
      signal: "Freeze exceptions not controlled"
      evidence_indicators:
        - "Freeze bypassed regularly"
        - "No exception process"
        - "Exception authority unclear"
      remediation: |
        - Define exception process
        - Require high-level approval
        - Document all exceptions
        - Assess exception impact

procedure:
  steps:
    - id: "1"
      name: "Freeze Policy Check"
      commands:
        - purpose: "Find freeze documentation"
          command: |
            find . -type f \( -name "*freeze*" -o -name "*lock*" \) \
              \( -name "*.md" -o -name "*.yaml" \) 2>/dev/null | head -10

    - id: "2"
      name: "Freeze Practice Check"
      commands:
        - purpose: "Check for freeze references"
          command: |
            grep -rniE "(freeze|locked|feature complete|code freeze)" \
              --include="*.md" --include="*.yaml" . 2>/dev/null | head -20

output:
  deliverables:
    - type: "freeze_assessment"
      format: "prose"

closeout_checklist:
  - id: "freeze-001"
    item: "Requirements freeze policy exists"
    level: "WARNING"
    verification: "manual"
    expected: "Confirmed"

governance:
  applicable_to:
    archetypes: ["all"]

relationships:
  commonly_combined:
    - "requirements-specification.change-control.baseline-management"
    - "requirements-specification.change-control.scope-creep-control"
