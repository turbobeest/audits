audit:
  id: requirements-specification.acceptance-criteria.business-rules-validation
  name: Business Rules Validation Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: requirements-specification
  category_number: 28
  subcategory: acceptance-criteria
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: documentation
  default_profiles:
  - full
  - requirements
description:
  what: |
    This audit examines how business rules are validated through
    acceptance criteria and testing. It evaluates:
    - Business rules documented with test criteria
    - Rule validation in acceptance criteria
    - Business rule test coverage
    - Edge case handling for rules
    - Rule consistency across the system
  why_it_matters: |
    Business rules enforce domain constraints:
    - Rules are often undocumented or implicit
    - Incorrect rule implementation causes business errors
    - Rules need explicit validation criteria
    - Rule violations can have financial/legal impact
    - Comprehensive rule testing prevents defects
prerequisites:
  required_artifacts:
  - type: business_rules
    description: Business rules documentation
  - type: acceptance_criteria
    description: Acceptance criteria for rules
  - type: test_cases
    description: Tests for business rules
  access_requirements:
  - Read access to business rules
  - Access to acceptance criteria
  - Access to test documentation
discovery:
  code_patterns:
  - pattern: (business rule|BR-|rule:|constraint)
    type: regex
    scope: documentation
    purpose: Detect business rules
  - pattern: (validate|verify|enforce|must be|cannot)
    type: regex
    scope: documentation
    purpose: Detect rule validation
  file_patterns:
  - glob: '**/business*rule*.{md,yaml}'
    purpose: Business rules documentation
  - glob: '**/rules/**'
    purpose: Rules directory
  - glob: '**/constraints*.{md,yaml}'
    purpose: Constraints documentation
knowledge_sources:
  specifications:
  - id: sbvr
    name: Semantics of Business Vocabulary and Rules
    url: https://www.omg.org/spec/SBVR/
    offline_cache: true
    priority: recommended
signals:
  critical:
  - id: BRRULE-CRIT-001
    signal: Business rules not documented
    evidence_indicators:
    - Rules embedded in code only
    - No business rules catalog
    - Rules known only to developers
    remediation: |
      - Create business rules catalog
      - Document all rules explicitly
      - Include validation criteria
      - Link rules to requirements
      - Review with business stakeholders
  high:
  - id: BRRULE-HIGH-001
    signal: Business rules without test criteria
    evidence_indicators:
    - Rules without acceptance tests
    - Validation behavior unspecified
    - Error conditions undefined
    remediation: |
      - Add acceptance criteria for each rule
      - Specify valid and invalid cases
      - Define error messages/behaviors
      - Create automated rule tests
procedure:
  steps:
  - id: '1'
    name: Business Rules Discovery
    commands:
    - purpose: Find business rules documentation
      command: |
        find . -type f \( -name "*business*rule*" -o -name "*rule*" \
          -o -name "*constraint*" \) \( -name "*.md" -o -name "*.yaml" \) 2>/dev/null | head -20
  - id: '2'
    name: Rule Validation Coverage
    commands:
    - purpose: Check for rule tests
      command: |
        grep -rniE "(business rule|BR-|validate|constraint)" \
          --include="*.feature" --include="*test*" . 2>/dev/null | head -30
output:
  deliverables:
  - type: rule_assessment
    format: prose
closeout_checklist:
- id: brrule-001
  item: Business rules documented
  level: CRITICAL
  verification: manual
  expected: Confirmed
governance:
  applicable_to:
    archetypes:
    - all
relationships:
  commonly_combined:
  - requirements-specification.requirements-elicitation.domain-analysis
  - requirements-specification.acceptance-criteria.acceptance-criteria-definition
