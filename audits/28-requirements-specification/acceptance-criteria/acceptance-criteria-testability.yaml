audit:
  id: requirements-specification.acceptance-criteria.acceptance-criteria-testability
  name: Acceptance Criteria Testability Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: requirements-specification
  category_number: 28
  subcategory: acceptance-criteria
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: documentation
  default_profiles:
  - full
  - requirements
  - testing
description:
  what: |
    This audit examines whether acceptance criteria can be effectively tested.
    It evaluates:
    - Criteria translate to test cases
    - Pass/fail conditions are unambiguous
    - Test automation potential
    - BDD scenario executable coverage
    - Test case existence for criteria
  why_it_matters: |
    Testable acceptance criteria enable verification:
    - Untestable criteria cannot be verified
    - BDD requires executable specifications
    - Automation requires testable criteria
    - Clear pass/fail enables objective assessment
    - Reduces disputes about completion
prerequisites:
  required_artifacts:
  - type: acceptance_criteria
    description: Acceptance criteria documentation
  - type: test_cases
    description: Test case documentation
  - type: bdd_features
    description: BDD feature files with step definitions
  access_requirements:
  - Read access to acceptance criteria
  - Access to test documentation
  - Access to BDD implementations
discovery:
  code_patterns:
  - pattern: (Given|When|Then|And|But)
    type: regex
    scope: documentation
    purpose: Detect BDD syntax
  - pattern: '@(test|Test|given|when|then)'
    type: regex
    scope: source
    purpose: Detect test implementations
  file_patterns:
  - glob: '**/*.feature'
    purpose: BDD feature files
  - glob: '**/step*definitions*/**'
    purpose: BDD step definitions
  - glob: '**/test*/**'
    purpose: Test implementations
knowledge_sources:
  specifications:
  - id: bdd-executable
    name: Executable Specifications with BDD
    url: https://cucumber.io/
    offline_cache: true
    priority: required
signals:
  critical:
  - id: ACTEST-CRIT-001
    signal: Acceptance criteria cannot be tested
    evidence_indicators:
    - Criteria describe internal states
    - No observable outcome
    - Subjective evaluation required
    remediation: |
      - Rewrite criteria with observable outcomes
      - Remove internal state references
      - Add measurable conditions
      - Include expected results
      - Validate with testers
  high:
  - id: ACTEST-HIGH-001
    signal: BDD scenarios not executable
    evidence_indicators:
    - Feature files without step definitions
    - Scenarios cannot be run
    - Steps not implemented
    remediation: |
      - Implement step definitions
      - Connect features to automation
      - Run scenarios in CI/CD
      - Maintain step implementations
  - id: ACTEST-HIGH-002
    signal: No tests for acceptance criteria
    evidence_indicators:
    - Criteria without corresponding tests
    - Manual testing only
    - Test coverage unknown
    remediation: |
      - Create tests for each criterion
      - Automate where possible
      - Link tests to criteria
      - Track test coverage
procedure:
  steps:
  - id: '1'
    name: Testability Assessment
    commands:
    - purpose: Find BDD step definitions
      command: |
        find . -type f \( -name "*step*" -o -name "*steps*" \) \
          \( -name "*.ts" -o -name "*.js" -o -name "*.rb" -o -name "*.java" \) 2>/dev/null | head -20
  - id: '2'
    name: Feature-Test Connection
    commands:
    - purpose: Compare features to implementations
      command: |
        echo "Feature files:"
        find . -name "*.feature" 2>/dev/null | wc -l
        echo "Step definition files:"
        find . -type f -name "*step*" \( -name "*.ts" -o -name "*.js" -o -name "*.rb" \) 2>/dev/null | wc -l
output:
  deliverables:
  - type: testability_assessment
    format: prose
closeout_checklist:
- id: actest-001
  item: Criteria are testable
  level: CRITICAL
  verification: manual
  expected: Confirmed
governance:
  applicable_to:
    archetypes:
    - all
relationships:
  commonly_combined:
  - requirements-specification.acceptance-criteria.acceptance-criteria-definition
  - requirements-specification.requirements-traceability.test-coverage-tracing
