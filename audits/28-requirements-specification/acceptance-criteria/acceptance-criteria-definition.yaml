audit:
  id: requirements-specification.acceptance-criteria.acceptance-criteria-definition
  name: Acceptance Criteria Definition Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: requirements-specification
  category_number: 28
  subcategory: acceptance-criteria
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: documentation
  default_profiles:
  - full
  - requirements
  - agile
description:
  what: |
    This audit examines the definition and quality of acceptance criteria
    for requirements and user stories. It evaluates:
    - Presence of acceptance criteria for all stories/requirements
    - Clarity and specificity of criteria
    - Use of Given-When-Then or equivalent format
    - Measurability of criteria
    - Stakeholder-understandable language
  why_it_matters: |
    Acceptance criteria define done and enable verification:
    - Provide shared understanding of requirement completion
    - Enable acceptance testing
    - Reduce ambiguity in requirements
    - Support sprint completion decisions
    - Facilitate stakeholder sign-off
    - Enable automated acceptance tests
prerequisites:
  required_artifacts:
  - type: user_stories
    description: User stories with acceptance criteria
  - type: requirements
    description: Requirements with acceptance criteria
  - type: bdd_features
    description: BDD feature files
  access_requirements:
  - Read access to stories and requirements
  - Access to BDD features
  - Access to requirements management tools
discovery:
  code_patterns:
  - pattern: (acceptance criteria|AC:|Given|When|Then)
    type: regex
    scope: documentation
    purpose: Detect acceptance criteria
  - pattern: (verify|validate|confirm|check that)
    type: regex
    scope: documentation
    purpose: Detect verification language
  file_patterns:
  - glob: '**/*.feature'
    purpose: BDD feature files
  - glob: '**/stories/**'
    purpose: User story documentation
  - glob: '**/acceptance*.{md,yaml}'
    purpose: Acceptance criteria documentation
knowledge_sources:
  specifications:
  - id: bdd-gherkin
    name: Cucumber - Gherkin Reference
    url: https://cucumber.io/docs/gherkin/reference/
    offline_cache: true
    priority: required
  - id: agile-acceptance
    name: Agile Alliance - Acceptance Criteria
    url: https://www.agilealliance.org/
    offline_cache: true
    priority: required
signals:
  critical:
  - id: AC-CRIT-001
    signal: Requirements/stories lack acceptance criteria
    evidence_indicators:
    - Stories without acceptance criteria
    - Requirements with no verification criteria
    - Completion criteria undefined
    remediation: |
      - Add acceptance criteria to all stories
      - Define criteria during backlog refinement
      - Use Given-When-Then format
      - Review criteria with stakeholders
      - Ensure testability
  - id: AC-CRIT-002
    signal: Acceptance criteria are vague
    evidence_indicators:
    - Criteria use subjective terms
    - Cannot determine pass/fail
    - Multiple interpretations possible
    remediation: |
      - Make criteria specific and measurable
      - Remove subjective terms
      - Add concrete values and thresholds
      - Review for single interpretation
      - Test with team members
  high:
  - id: AC-HIGH-001
    signal: Acceptance criteria not testable
    evidence_indicators:
    - Cannot create test from criteria
    - Criteria describe implementation
    - No observable outcome specified
    remediation: |
      - Rewrite for testability
      - Focus on observable outcomes
      - Include expected results
      - Remove implementation details
      - Connect to test cases
procedure:
  steps:
  - id: '1'
    name: Acceptance Criteria Discovery
    commands:
    - purpose: Find acceptance criteria
      command: |
        grep -rniE "(acceptance criteria|AC:|Given|When|Then)" \
          --include="*.md" --include="*.yaml" --include="*.feature" . 2>/dev/null | head -50
  - id: '2'
    name: Coverage Analysis
    commands:
    - purpose: Count stories and criteria
      command: |
        echo "Stories found:"
        grep -rnoE "(US-|STORY-)[0-9]+" --include="*.md" --include="*.yaml" . 2>/dev/null | wc -l
        echo "Acceptance criteria found:"
        grep -rnoE "(acceptance criteria|AC:)" --include="*.md" --include="*.yaml" . 2>/dev/null | wc -l
output:
  deliverables:
  - type: ac_assessment
    format: prose
closeout_checklist:
- id: ac-001
  item: All stories have acceptance criteria
  level: CRITICAL
  verification: manual
  expected: Confirmed
- id: ac-002
  item: Criteria are testable
  level: BLOCKING
  verification: manual
  expected: Confirmed
governance:
  applicable_to:
    archetypes:
    - all
relationships:
  commonly_combined:
  - requirements-specification.acceptance-criteria.acceptance-criteria-testability
  - requirements-specification.acceptance-criteria.definition-of-done
  - requirements-specification.requirements-traceability.test-coverage-tracing
