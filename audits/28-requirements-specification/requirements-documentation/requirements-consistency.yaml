audit:
  id: requirements-specification.requirements-documentation.requirements-consistency
  name: Requirements Consistency Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: requirements-specification
  category_number: 28
  subcategory: requirements-documentation
  tier: expert
  estimated_duration: 2-4 hours  # median: 3h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: documentation
  default_profiles:
  - full
  - requirements
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit examines the internal consistency of requirements documentation,
    ensuring requirements do not conflict with each other. It evaluates:
    - Absence of contradictory requirements
    - Consistent terminology usage
    - Aligned version references
    - Coherent requirement relationships
    - Consistent priority and status assignments
    - Synchronized cross-document references
  why_it_matters: |
    Consistency is essential for reliable requirements:
    - IEEE 830 lists consistency as a fundamental SRS characteristic
    - Conflicting requirements create implementation impossibilities
    - Terminology inconsistency causes misunderstandings
    - Version mismatches create confusion about current state
    - Inconsistent priorities lead to wrong decisions
    - Broken cross-references indicate maintenance issues

    Research shows that inconsistent requirements are a leading cause of
    project disputes and rework, with conflicts often discovered late.
  when_to_run:
  - After requirements updates
  - During requirements reviews
  - Before requirements baseline
  - When conflicts are suspected
  - At quality assessments
prerequisites:
  required_artifacts:
  - type: requirements_documents
    description: All requirements documentation
  - type: glossary
    description: Terminology definitions
  - type: cross_references
    description: Requirement relationship documentation
  access_requirements:
  - Read access to all requirements documents
  - Access to terminology glossary
  - Access to requirements management tools
  - Access to version history
discovery:
  code_patterns:
  - pattern: (conflict|contradict|inconsisten|mismatch)
    type: regex
    scope: documentation
    purpose: Detect acknowledged conflicts
  - pattern: (version|v[0-9]+|revision)
    type: regex
    scope: documentation
    purpose: Detect version references
  - pattern: (see also|refer to|related to|depends on)
    type: regex
    scope: documentation
    purpose: Detect cross-references
  file_patterns:
  - glob: '**/requirements/**'
    purpose: Requirements documentation
  - glob: '**/glossary*.{md,yaml}'
    purpose: Terminology glossary
  - glob: '**/SRS*.{md,docx}'
    purpose: Software Requirements Specification
  - glob: '**/trace*.{md,yaml}'
    purpose: Traceability documentation
knowledge_sources:
  specifications:
  - id: ieee-830-consistent
    name: IEEE 830 - Consistency Requirement
    url: https://standards.ieee.org/standard/830-1998.html
    offline_cache: true
    priority: required
  - id: iso-29148-consistent
    name: ISO/IEC/IEEE 29148 - Consistency
    url: https://www.iso.org/standard/72089.html
    offline_cache: true
    priority: required
  guides:
  - id: requirements-analysis
    name: Requirements Conflict Detection
    url: https://www.requirements-engineering.org/
    offline_cache: true
  - id: consistency-checking
    name: Consistency Analysis Techniques
    url: https://www.modernanalyst.com/
    offline_cache: true
tooling:
  static_analysis:
  - tool: requirements-analyzer
    purpose: Analyze requirements for consistency
    offline_capable: true
  - tool: conflict-detector
    purpose: Detect potential requirement conflicts
    offline_capable: true
  scripts:
  - id: consistency-scanner
    language: bash
    purpose: Scan for consistency issues
    source: inline
    code: |
      #!/bin/bash
      echo "=== Requirements Consistency Scan ==="
      echo "Looking for conflict indicators..."
      grep -rniE "(conflict|contradict|inconsisten|differ from)" \
        --include="*.md" --include="*.yaml" . 2>/dev/null | head -30
      echo ""
      echo "Checking version references..."
      grep -rnoE "v[0-9]+\.[0-9]+|version\s+[0-9]+" \
        --include="*.md" --include="*.yaml" . 2>/dev/null | \
        cut -d: -f2 | sort | uniq -c | sort -rn | head -20
      echo ""
      echo "Checking cross-references..."
      grep -rniE "(see|refer to|REQ-[0-9]+|FR-[0-9]+)" \
        --include="*.md" --include="*.yaml" . 2>/dev/null | head -30
signals:
  critical:
  - id: CONSIST-CRIT-001
    signal: Contradictory requirements exist
    evidence_indicators:
    - Requirements state opposite behaviors
    - Conflicting constraints documented
    - Acknowledged but unresolved conflicts
    explanation: |
      Contradictory requirements cannot both be implemented. IEEE 830
      requires that no requirements conflict with each other. Conflicts
      indicate incomplete stakeholder alignment or requirements analysis
      errors that must be resolved before development.
    remediation: |
      - Identify all conflicting requirements
      - Determine authoritative requirement
      - Resolve with stakeholder input
      - Document resolution rationale
      - Update requirements to remove conflicts
  - id: CONSIST-CRIT-002
    signal: Terminology used inconsistently
    evidence_indicators:
    - Same term with different meanings
    - Different terms for same concept
    - Glossary definitions not followed
    explanation: |
      Inconsistent terminology creates confusion about whether requirements
      refer to the same thing. This is particularly problematic when terms
      appear similar but have distinct meanings. IEEE 830 emphasizes
      consistent terminology for unambiguous communication.
    remediation: |
      - Conduct terminology review
      - Identify inconsistent usage
      - Establish canonical terms in glossary
      - Update requirements to use standard terms
      - Enforce terminology in reviews
  high:
  - id: CONSIST-HIGH-001
    signal: Cross-references broken or missing
    evidence_indicators:
    - References to non-existent requirements
    - Dependency links not maintained
    - Related requirements not linked
    explanation: |
      Cross-references enable understanding of requirement relationships.
      Broken references indicate maintenance issues and can cause
      requirements to be missed during impact analysis. All references
      should resolve to valid requirements.
    remediation: |
      - Validate all cross-references
      - Fix broken references
      - Add missing relationship links
      - Implement reference checking
      - Update references when requirements change
  - id: CONSIST-HIGH-002
    signal: Version references inconsistent
    evidence_indicators:
    - Different version numbers for same document
    - Outdated versions referenced
    - No version control
    explanation: |
      Inconsistent version references create confusion about current state.
      When documents reference outdated versions, requirements may be
      misaligned. Version control and consistent referencing are essential.
    remediation: |
      - Establish version numbering scheme
      - Update outdated references
      - Implement version tracking
      - Review version consistency
      - Automate version validation
  - id: CONSIST-HIGH-003
    signal: Priority assignments inconsistent
    evidence_indicators:
    - Same requirement different priorities in different places
    - Related requirements with contradictory priorities
    - Priority scale used inconsistently
    explanation: |
      Priority inconsistencies undermine prioritization effectiveness.
      When the same requirement has different priorities in different
      documents, planning becomes confused. Consistent priority assignment
      is essential for coherent planning.
    remediation: |
      - Establish single authoritative priority source
      - Reconcile priority differences
      - Standardize priority scale
      - Synchronize priorities across documents
      - Document priority change process
  medium:
  - id: CONSIST-MED-001
    signal: Status information inconsistent
    evidence_indicators:
    - Different status values for same requirement
    - Status not updated consistently
    - Workflow not followed
    explanation: |
      Status inconsistency causes process confusion. When requirements
      show different states in different systems, it's unclear what the
      actual state is. Single source of truth for status is important.
    remediation: |
      - Designate authoritative status source
      - Synchronize status across systems
      - Implement status workflow
      - Audit status consistency
      - Document status definitions
  - id: CONSIST-MED-002
    signal: Format inconsistencies across documents
    evidence_indicators:
    - Different structures in different documents
    - Varying levels of detail
    - Inconsistent attribute sets
    explanation: |
      Format inconsistencies make requirements harder to compare and
      analyze. While some variation may be appropriate, systematic
      inconsistencies indicate lack of standards or non-compliance.
    remediation: |
      - Establish format standards
      - Review documents for compliance
      - Migrate to consistent format
      - Enforce format in templates
      - Audit format consistency
  - id: CONSIST-MED-003
    signal: Metric units inconsistent
    evidence_indicators:
    - Mixed measurement systems
    - Inconsistent unit conventions
    - No unit specification
    explanation: |
      Metric inconsistencies (mixing imperial/metric, using different
      time units) can cause misinterpretation. Requirements should use
      consistent units throughout to prevent errors.
    remediation: |
      - Establish unit conventions
      - Specify units explicitly
      - Standardize on single system
      - Convert inconsistent measurements
      - Include units in templates
  low:
  - id: CONSIST-LOW-001
    signal: Writing style inconsistent
    evidence_indicators:
    - Varying writing styles across requirements
    - Different authors with different conventions
    - No style guide followed
    explanation: |
      While not affecting meaning, inconsistent style reduces professional
      quality and can signal deeper consistency issues. Style guides
      improve readability and reduce variability.
    remediation: |
      - Create requirements style guide
      - Apply style during editing
      - Train authors on style
      - Review for style compliance
  positive:
  - id: CONSIST-POS-001
    signal: Requirements internally consistent
    evidence_indicators:
    - No conflicting requirements found
    - Terminology used consistently
    - Cross-references valid
  - id: CONSIST-POS-002
    signal: Systematic consistency maintenance
    evidence_indicators:
    - Consistency checks in review process
    - Automated reference validation
    - Regular consistency audits
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Conflict Detection
    description: |
      Scan requirements documentation for potential conflicts
      and contradictions.
    duration_estimate: 45 min
    commands:
    - purpose: Find conflict indicators
      command: |
        grep -rniE "(conflict|contradict|inconsisten|incompatible)" \
          --include="*.md" --include="*.yaml" . 2>/dev/null | head -40
    - purpose: Find opposite terms proximity
      command: |
        grep -rniE "(must not.*must|shall not.*shall|enable.*disable)" \
          --include="*.md" --include="*.yaml" . 2>/dev/null | head -20
    expected_findings:
    - Conflict indicators
    - Potential contradictions
    - Inconsistency patterns
  - id: '2'
    name: Terminology Consistency Check
    description: |
      Assess terminology usage consistency across requirements
      documentation.
    duration_estimate: 30 min
    commands:
    - purpose: Find key term variations
      command: |
        grep -rnoE "(user|customer|client|account|system|application|service)" \
          --include="*.md" --include="*.yaml" . 2>/dev/null | \
          cut -d: -f2 | sort | uniq -c | sort -rn | head -30
    - purpose: Check glossary references
      command: |
        find . -type f -name "*glossary*" 2>/dev/null | head -5
    expected_findings:
    - Term usage patterns
    - Potential synonyms
    - Glossary presence
  - id: '3'
    name: Cross-Reference Validation
    description: |
      Verify that cross-references between requirements are
      valid and maintained.
    duration_estimate: 30 min
    commands:
    - purpose: Find requirement references
      command: |
        grep -rnoE "(REQ-|FR-|NFR-|US-)[0-9]+" \
          --include="*.md" --include="*.yaml" . 2>/dev/null | \
          cut -d: -f2 | sort | uniq -c | sort -rn | head -30
    - purpose: Check for broken references
      command: |
        grep -rniE "(see also|refer to|depends on|related to)" \
          --include="*.md" --include="*.yaml" . 2>/dev/null | head -30
    expected_findings:
    - Reference patterns
    - Reference frequency
    - Potential broken references
  - id: '4'
    name: Attribute Consistency Review
    description: |
      Check consistency of requirement attributes including
      priority, status, and versions.
    duration_estimate: 30 min
    commands:
    - purpose: Check priority consistency
      command: |
        grep -rnoE "(priority|Priority):\s*\w+" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | \
          cut -d: -f3 | sort | uniq -c | sort -rn
    - purpose: Check version references
      command: |
        grep -rnoE "v[0-9]+\.[0-9]+\.[0-9]+|version:\s*[0-9]+" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | \
          cut -d: -f2 | sort | uniq -c | sort -rn | head -20
    expected_findings:
    - Priority distribution
    - Version patterns
    - Attribute consistency
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Conflict Analysis
    - Terminology Review
    - Reference Validation
    - Recommendations
  - type: conflict_list
    format: table
    description: List of identified conflicts and inconsistencies
  confidence_guidance:
    high: Requirements thoroughly analyzed for consistency
    medium: Consistency patterns identified but completeness uncertain
    low: Consistency status unclear, requires detailed analysis
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: ieee-830-consistent
      priority: required
    - source_id: iso-29148-consistent
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Consistency audit requires thorough review
    full:
      included: true
      priority: 2
    requirements:
      included: true
      priority: 1
closeout_checklist:
- id: consist-001
  item: No contradictory requirements
  level: CRITICAL
  verification: manual
  verification_notes: Review for conflicting requirements
  expected: Confirmed by reviewer
- id: consist-002
  item: Terminology used consistently
  level: BLOCKING
  verification: |
    find . -type f -name "*glossary*" 2>/dev/null | \
      wc -l | xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
- id: consist-003
  item: Cross-references valid
  level: WARNING
  verification: manual
  verification_notes: Verify requirement cross-references resolve
  expected: Confirmed by reviewer
- id: consist-004
  item: Priority and status consistent
  level: WARNING
  verification: manual
  verification_notes: Verify no attribute conflicts
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: IEEE 830
    controls:
    - Section 4.4
  - framework: ISO 29148
    controls:
    - 5.2.4
  - framework: CMMI
    controls:
    - RD SP 1.3
relationships:
  commonly_combined:
  - requirements-specification.requirements-documentation.requirements-clarity
  - requirements-specification.requirements-documentation.requirements-completeness
  - requirements-specification.requirements-traceability.traceability-matrix
  - requirements-specification.requirements-validation.requirements-conflicts
