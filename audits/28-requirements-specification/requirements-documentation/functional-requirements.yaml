audit:
  id: requirements-specification.requirements-documentation.functional-requirements
  name: Functional Requirements Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: requirements-specification
  category_number: 28
  subcategory: requirements-documentation
  tier: expert
  estimated_duration: 3-4 hours  # median: 3h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: documentation
  default_profiles:
  - full
  - requirements
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit examines the documentation quality of functional requirements
    that describe what the system must do. It evaluates:
    - Coverage of system functions and features
    - Specification of inputs, outputs, and behaviors
    - Use case and scenario documentation
    - Data processing requirements
    - External interface requirements
    - Error handling and exception requirements
  why_it_matters: |
    Functional requirements define the system's capabilities:
    - IEEE 830 Section 3.2 specifies functional requirements content
    - Incomplete functional requirements lead to missing features
    - Ambiguous requirements cause implementation disagreements
    - Missing error cases cause reliability issues
    - Interface requirements drive integration success
    - Functional completeness determines user satisfaction

    Studies show that 40-60% of software defects originate from
    requirements issues, with functional requirements being primary.
  when_to_run:
  - After requirements elicitation phases
  - Before development starts
  - During requirements reviews
  - When feature gaps are discovered
  - At project health assessments
prerequisites:
  required_artifacts:
  - type: functional_requirements
    description: Functional requirements documentation
  - type: use_cases
    description: Use case specifications
  - type: user_stories
    description: User stories with acceptance criteria
  access_requirements:
  - Read access to requirements documentation
  - Access to use case documentation
  - Access to feature specifications
  - Access to interface documentation
discovery:
  code_patterns:
  - pattern: (FR-|FUNC-|feature:)[0-9]+
    type: regex
    scope: documentation
    purpose: Detect functional requirement IDs
  - pattern: (system shall|user shall|system must|user must)
    type: regex
    scope: documentation
    purpose: Detect functional requirement statements
  - pattern: (use.?case|scenario|precondition|postcondition)
    type: regex
    scope: documentation
    purpose: Detect use case documentation
  file_patterns:
  - glob: '**/functional*.{md,yaml,docx}'
    purpose: Functional requirements files
  - glob: '**/use-case*.{md,yaml}'
    purpose: Use case documentation
  - glob: '**/features/**'
    purpose: Feature documentation
  - glob: '**/*.feature'
    purpose: Gherkin feature files
  - glob: '**/SRS*.{md,docx}'
    purpose: Software Requirements Specifications
knowledge_sources:
  specifications:
  - id: ieee-830-functional
    name: IEEE 830 - Functional Requirements Section
    url: https://standards.ieee.org/standard/830-1998.html
    offline_cache: true
    priority: required
  - id: iso-29148-functional
    name: ISO/IEC/IEEE 29148 - Functional Requirements
    url: https://www.iso.org/standard/72089.html
    offline_cache: true
    priority: required
  guides:
  - id: cockburn-use-cases
    name: Writing Effective Use Cases - Alistair Cockburn
    url: https://alistair.cockburn.us/use-cases/
    offline_cache: true
  - id: bdd-gherkin
    name: BDD with Gherkin - Cucumber
    url: https://cucumber.io/docs/bdd/
    offline_cache: true
tooling:
  static_analysis:
  - tool: requirements-analyzer
    purpose: Analyze functional requirements coverage
    offline_capable: true
  infrastructure_tools:
  - tool: doors
    purpose: IBM DOORS functional requirements
  - tool: jira
    purpose: Jira functional story analysis
  scripts:
  - id: functional-req-scanner
    language: bash
    purpose: Scan for functional requirements
    source: inline
    code: |
      #!/bin/bash
      echo "=== Functional Requirements Scan ==="
      echo "Looking for functional requirements..."
      grep -rniE "(FR-|FUNC-|functional|feature)" \
        --include="*.md" --include="*.yaml" --include="*.feature" . 2>/dev/null | head -50
      echo ""
      echo "Checking for use cases..."
      find . -type f \( -name "*use-case*" -o -name "*usecase*" \) 2>/dev/null | head -20
signals:
  critical:
  - id: FUNC-CRIT-001
    signal: Functional requirements not documented
    evidence_indicators:
    - No functional requirements specification exists
    - System capabilities not explicitly defined
    - Development based on implicit assumptions
    explanation: |
      Functional requirements are the core of what the system must do.
      Without explicit documentation, developers work from assumptions
      that may not match stakeholder expectations. IEEE 830 requires
      comprehensive functional requirements for a valid SRS.
    remediation: |
      - Create functional requirements document or section
      - Identify all system functions systematically
      - Document inputs, processing, and outputs
      - Include error handling requirements
      - Validate with stakeholders
  - id: FUNC-CRIT-002
    signal: Major system functions not covered
    evidence_indicators:
    - Key features mentioned but not specified
    - Stakeholder functions missing from requirements
    - Gaps discovered during development
    explanation: |
      Functional requirements must cover all system capabilities.
      Missing functions lead to scope creep or disappointed stakeholders.
      Systematic function identification (through use cases, story mapping)
      helps ensure coverage.
    remediation: |
      - Conduct functional coverage review
      - Map stakeholder needs to functions
      - Identify gaps through elicitation
      - Add missing functional requirements
      - Validate coverage with stakeholders
  high:
  - id: FUNC-HIGH-001
    signal: Functional requirements lack input/output specification
    evidence_indicators:
    - Functions described without inputs
    - Expected outputs not specified
    - Data formats and constraints undefined
    explanation: |
      Functional requirements must specify what goes in and what comes out.
      IEEE 830 requires description of inputs, processing, and outputs
      for each function. Without this, implementation becomes guesswork.
    remediation: |
      - Add input specifications to all functions
      - Define expected outputs with formats
      - Specify data constraints and validations
      - Include data type and format details
      - Document input-output relationships
  - id: FUNC-HIGH-002
    signal: Error handling not specified
    evidence_indicators:
    - Only happy path documented
    - No error conditions specified
    - Exception handling requirements missing
    explanation: |
      Robust systems require error handling. Without specified error
      conditions and expected responses, implementations vary and
      user experience suffers. Each function should specify what
      happens when things go wrong.
    remediation: |
      - Identify error conditions for each function
      - Specify expected error responses
      - Document error messages and codes
      - Define recovery procedures
      - Include error handling in acceptance criteria
  - id: FUNC-HIGH-003
    signal: Use cases incomplete or missing
    evidence_indicators:
    - No use case documentation
    - Use cases without alternate flows
    - Missing preconditions and postconditions
    explanation: |
      Use cases provide functional context that requirement statements
      alone lack. Alistair Cockburn emphasizes that complete use cases
      include main success scenario, extensions, preconditions, and
      postconditions. Incomplete use cases miss important scenarios.
    remediation: |
      - Create use cases for major functions
      - Document main success scenario
      - Add alternate and exception flows
      - Specify preconditions and postconditions
      - Include business rules in use cases
  medium:
  - id: FUNC-MED-001
    signal: Functional requirements not linked to user goals
    evidence_indicators:
    - System functions without user context
    - No connection to stakeholder needs
    - Technical functions without business value
    explanation: |
      Functions exist to serve user goals. Requirements without goal
      context risk being unnecessary or misaligned. User stories
      explicitly connect functions to user goals through the
      "so that" clause.
    remediation: |
      - Link functions to user goals
      - Add goal context to requirements
      - Use user story format for context
      - Trace requirements to stakeholder needs
      - Remove functions without clear goals
  - id: FUNC-MED-002
    signal: Interface requirements incomplete
    evidence_indicators:
    - External interfaces mentioned but not specified
    - User interface requirements missing
    - System interface details undefined
    explanation: |
      IEEE 830 requires specific interface requirements including
      user interfaces, hardware interfaces, software interfaces,
      and communications interfaces. Incomplete interface requirements
      cause integration and usability issues.
    remediation: |
      - Identify all system interfaces
      - Document user interface requirements
      - Specify external system interfaces
      - Define data exchange formats
      - Include interface constraints
  - id: FUNC-MED-003
    signal: Functional requirements too granular or too abstract
    evidence_indicators:
    - Mix of very detailed and very vague requirements
    - Implementation details in requirements
    - Abstract statements without specificity
    explanation: |
      Requirements should be at consistent abstraction level.
      Too granular constrains implementation; too abstract provides
      insufficient guidance. The right level specifies WHAT without
      dictating HOW.
    remediation: |
      - Review requirements for abstraction level
      - Remove implementation details
      - Add specificity to abstract requirements
      - Establish granularity guidelines
      - Use templates for consistency
  low:
  - id: FUNC-LOW-001
    signal: Functional requirements not categorized
    evidence_indicators:
    - All functions in single flat list
    - No logical grouping of functions
    - Related functions not connected
    explanation: |
      Categorization aids understanding and navigation. IEEE 830
      suggests organizing by mode, user class, object, or feature.
      Flat lists become unwieldy and hide relationships.
    remediation: |
      - Organize functions into logical groups
      - Use hierarchical structure
      - Group by feature, user class, or subsystem
      - Cross-reference related functions
      - Provide navigation aids
  positive:
  - id: FUNC-POS-001
    signal: Comprehensive functional requirements documented
    evidence_indicators:
    - All system functions specified
    - Inputs and outputs defined
    - Error handling included
  - id: FUNC-POS-002
    signal: Use cases provide functional context
    evidence_indicators:
    - Complete use cases with scenarios
    - Alternate flows documented
    - Preconditions and postconditions specified
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Functional Requirements Discovery
    description: |
      Locate functional requirements documentation including
      SRS sections, use cases, and feature specifications.
    duration_estimate: 30 min
    commands:
    - purpose: Find functional requirements documentation
      command: |
        find . -type f \( -name "*functional*" -o -name "*feature*" \
          -o -name "*SRS*" -o -name "*use-case*" \) 2>/dev/null | head -30
    - purpose: Search for functional requirement patterns
      command: |
        grep -rniE "(FR-|FUNC-|the system shall|user shall)" \
          --include="*.md" --include="*.yaml" --include="*.feature" . 2>/dev/null | head -50
    expected_findings:
    - Functional requirements documents
    - Use case documentation
    - Feature specifications
  - id: '2'
    name: Coverage Analysis
    description: |
      Assess the coverage of functional requirements across
      system capabilities and user needs.
    duration_estimate: 45 min
    commands:
    - purpose: Count functional requirements
      command: |
        grep -rnoE "(FR-|FUNC-)[0-9]+" \
          --include="*.md" --include="*.yaml" . 2>/dev/null | \
          cut -d: -f2 | sort -u | wc -l
    - purpose: Find feature areas covered
      command: |
        grep -rniE "(feature|function|capability):" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | head -40
    expected_findings:
    - Number of functional requirements
    - Feature areas covered
    - Potential gaps
  - id: '3'
    name: Completeness Review
    description: |
      Verify that functional requirements include necessary
      details: inputs, outputs, processing, and errors.
    duration_estimate: 45 min
    commands:
    - purpose: Check for input/output specifications
      command: |
        grep -rniE "(input|output|response|returns|produces)" \
          --include="*.md" --include="*.yaml" . 2>/dev/null | head -40
    - purpose: Check for error handling
      command: |
        grep -rniE "(error|exception|failure|invalid|reject)" \
          --include="*.md" --include="*.yaml" --include="*.feature" . 2>/dev/null | head -30
    expected_findings:
    - Input/output specifications
    - Error handling requirements
    - Processing details
  - id: '4'
    name: Use Case Assessment
    description: |
      Review use case documentation for completeness including
      scenarios, flows, and conditions.
    duration_estimate: 30 min
    commands:
    - purpose: Find use case documentation
      command: |
        find . -type f \( -name "*use*case*" -o -name "*scenario*" \) 2>/dev/null | head -20
    - purpose: Check for use case elements
      command: |
        grep -rniE "(precondition|postcondition|main.?flow|alternate|exception)" \
          --include="*.md" --include="*.yaml" . 2>/dev/null | head -30
    expected_findings:
    - Use case documentation
    - Scenario coverage
    - Conditions and flows
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Coverage Assessment
    - Completeness Analysis
    - Use Case Review
    - Recommendations
  - type: coverage_matrix
    format: table
    description: Functional requirements coverage by feature area
  confidence_guidance:
    high: Functional requirements documentation directly reviewed
    medium: Functional requirements found but completeness uncertain
    low: Functional requirements status unclear, requires detailed review
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: ieee-830-functional
      priority: required
    - source_id: iso-29148-functional
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Functional requirements audit requires thorough review
    full:
      included: true
      priority: 2
    requirements:
      included: true
      priority: 1
closeout_checklist:
- id: func-001
  item: Functional requirements documented
  level: CRITICAL
  verification: |
    find . -type f \( -name "*functional*" -o -name "*feature*" \) \
      2>/dev/null | wc -l | xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
- id: func-002
  item: System functions have input/output specifications
  level: BLOCKING
  verification: |
    grep -rniE "(input|output)" --include="*.md" --include="*.yaml" . \
      2>/dev/null | wc -l | xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
- id: func-003
  item: Error handling requirements included
  level: BLOCKING
  verification: |
    grep -rniE "(error|exception|failure)" --include="*.md" . \
      2>/dev/null | wc -l | xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
- id: func-004
  item: Use cases or scenarios documented
  level: WARNING
  verification: |
    find . -type f \( -name "*use*case*" -o -name "*scenario*" -o -name "*.feature" \) \
      2>/dev/null | wc -l | xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: IEEE 830
    controls:
    - Section 3.2
  - framework: ISO 29148
    controls:
    - 6.4.2
  - framework: CMMI
    controls:
    - RD SP 1.3
    - RD SP 2.1
relationships:
  commonly_combined:
  - requirements-specification.requirements-documentation.non-functional-requirements
  - requirements-specification.acceptance-criteria.acceptance-criteria-definition
  - requirements-specification.requirements-traceability.implementation-coverage
  - requirements-specification.specification-quality.behavior-specification
