# ============================================================
# AUDIT: Feedback Incorporation
# Category: 28 - Requirements & Specification
# Subcategory: stakeholder-management
# ============================================================

audit:
  id: "requirements-specification.stakeholder-management.feedback-incorporation"
  name: "Feedback Incorporation Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "requirements-specification"
  category_number: 28
  subcategory: "stakeholder-management"

  tier: "focused"
  estimated_duration: "2-3 hours"  # median: 2h

  completeness: "requires_discovery"
  requires_runtime: false
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "documentation"
  default_profiles:
    - "full"
    - "requirements"

description:
  what: |
    This audit examines how stakeholder feedback is collected, processed,
    and incorporated into requirements. It evaluates:
    - Feedback collection mechanisms
    - Feedback processing procedures
    - Incorporation into requirements
    - Feedback acknowledgment
    - Closure communication
    - Feedback tracking

  why_it_matters: |
    Feedback incorporation validates and improves requirements:
    - Stakeholders validate requirements through feedback
    - Unincorporated feedback leads to dissatisfaction
    - Closed-loop feedback builds trust
    - Feedback reveals misunderstandings
    - Effective feedback process improves requirements quality
    - Stakeholders more likely to engage when feedback is acted on

prerequisites:
  required_artifacts:
    - type: "feedback_records"
      description: "Stakeholder feedback records"
    - type: "feedback_process"
      description: "Feedback handling process"

  access_requirements:
    - "Read access to feedback records"
    - "Access to feedback process"

discovery:
  code_patterns:
    - pattern: "(feedback|comment|suggestion|input)"
      type: "regex"
      scope: "documentation"
      purpose: "Detect feedback references"

    - pattern: "(incorporated|addressed|resolved)"
      type: "regex"
      scope: "documentation"
      purpose: "Detect incorporation references"

  file_patterns:
    - glob: "**/feedback*.{md,yaml}"
      purpose: "Feedback documentation"
    - glob: "**/comment*.{md,yaml}"
      purpose: "Comment records"

signals:
  high:
    - id: "FEEDBACK-HIGH-001"
      signal: "Stakeholder feedback not tracked"
      evidence_indicators:
        - "No feedback records"
        - "Feedback lost"
        - "Cannot show feedback disposition"
      remediation: |
        - Implement feedback tracking
        - Record all feedback
        - Track disposition
        - Report feedback status

    - id: "FEEDBACK-HIGH-002"
      signal: "Feedback not incorporated or acknowledged"
      evidence_indicators:
        - "Feedback collected but not acted on"
        - "Stakeholders not informed of disposition"
        - "Open feedback items"
      remediation: |
        - Process all feedback
        - Incorporate valid feedback
        - Document reasons for rejection
        - Communicate disposition to stakeholders

procedure:
  steps:
    - id: "1"
      name: "Feedback Process Check"
      commands:
        - purpose: "Find feedback documentation"
          command: |
            find . -type f \( -name "*feedback*" -o -name "*comment*" \) \
              \( -name "*.md" -o -name "*.yaml" \) 2>/dev/null | head -15

    - id: "2"
      name: "Feedback Handling Check"
      commands:
        - purpose: "Check for feedback handling"
          command: |
            grep -rniE "(feedback|comment|suggestion|incorporated|addressed)" \
              --include="*.md" --include="*.yaml" . 2>/dev/null | head -25

output:
  deliverables:
    - type: "feedback_assessment"
      format: "prose"

closeout_checklist:
  - id: "feedback-001"
    item: "Feedback tracking exists"
    level: "WARNING"
    verification: "manual"
    expected: "Confirmed"

governance:
  applicable_to:
    archetypes: ["all"]

relationships:
  commonly_combined:
    - "requirements-specification.stakeholder-management.stakeholder-engagement"
    - "requirements-specification.requirements-validation.requirements-review-process"
