audit:
  id: requirements-specification.requirements-traceability.traceability-matrix
  name: Traceability Matrix Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: requirements-specification
  category_number: 28
  subcategory: requirements-traceability
  tier: expert
  estimated_duration: 2-4 hours  # median: 3h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: documentation
  default_profiles:
  - full
  - requirements
  - compliance
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit examines the existence and quality of requirements traceability
    matrices (RTMs) that link requirements to other artifacts. It evaluates:
    - Existence of traceability matrix or equivalent
    - Completeness of requirement coverage
    - Links to stakeholder needs (backward traceability)
    - Links to design and implementation (forward traceability)
    - Links to test cases (verification traceability)
    - Matrix maintenance and currency
  why_it_matters: |
    Traceability matrices enable requirements management:
    - IEEE 830 and ISO 29148 require traceability
    - RTMs verify all requirements are addressed
    - Impact analysis depends on traceability links
    - Compliance audits require requirements traceability
    - Testing coverage relies on requirements-to-test links
    - Change management needs dependency visibility

    Organizations with effective traceability report 30-50% reduction in
    requirements-related defects and significantly faster impact analysis.
  when_to_run:
  - After requirements documentation phase
  - Before development begins
  - During compliance audits
  - When change requests are evaluated
  - At project milestones
prerequisites:
  required_artifacts:
  - type: requirements_documents
    description: Documented requirements
  - type: design_documents
    description: Design and architecture documentation
  - type: test_cases
    description: Test case documentation
  access_requirements:
  - Read access to requirements documentation
  - Access to design artifacts
  - Access to test documentation
  - Access to requirements management tools
discovery:
  code_patterns:
  - pattern: (trace|RTM|coverage|link.*requirement)
    type: regex
    scope: documentation
    purpose: Detect traceability documentation
  - pattern: (REQ-|FR-|NFR-)[0-9]+.*(design|test|impl)
    type: regex
    scope: documentation
    purpose: Detect requirement links
  file_patterns:
  - glob: '**/trace*.{md,yaml,csv,xlsx}'
    purpose: Traceability matrix files
  - glob: '**/RTM*.{md,yaml,csv,xlsx}'
    purpose: Requirements Traceability Matrix
  - glob: '**/coverage*.{md,yaml}'
    purpose: Coverage documentation
  - glob: '**/requirements-to-*.{md,yaml}'
    purpose: Requirements mapping files
knowledge_sources:
  specifications:
  - id: ieee-830-trace
    name: IEEE 830 - Traceability
    url: https://standards.ieee.org/standard/830-1998.html
    offline_cache: true
    priority: required
  - id: iso-29148-trace
    name: ISO/IEC/IEEE 29148 - Traceability
    url: https://www.iso.org/standard/72089.html
    offline_cache: true
    priority: required
  - id: cmmi-rd
    name: CMMI for Development - Requirements Development
    url: https://cmmiinstitute.com/
    offline_cache: true
    priority: recommended
  guides:
  - id: requirements-traceability
    name: Requirements Traceability Handbook
    url: https://www.requirements-engineering.org/
    offline_cache: true
tooling:
  static_analysis:
  - tool: rtm-analyzer
    purpose: Analyze traceability matrix coverage
    offline_capable: true
  infrastructure_tools:
  - tool: doors
    purpose: IBM DOORS traceability
  - tool: jira
    purpose: Jira issue linking for traceability
  - tool: polarion
    purpose: Polarion requirements traceability
  scripts:
  - id: traceability-scanner
    language: bash
    purpose: Scan for traceability artifacts
    source: inline
    code: |
      #!/bin/bash
      echo "=== Traceability Matrix Scan ==="
      echo "Looking for traceability documentation..."
      find . -type f \( -name "*trace*" -o -name "*RTM*" \
        -o -name "*coverage*" -o -name "*mapping*" \) 2>/dev/null | head -30
      echo ""
      echo "Searching for requirement links..."
      grep -rniE "(implements:|tests:|traces to:|derived from:)" \
        --include="*.yaml" --include="*.md" . 2>/dev/null | head -40
signals:
  critical:
  - id: RTM-CRIT-001
    signal: No requirements traceability matrix exists
    evidence_indicators:
    - No RTM or equivalent documentation found
    - Requirements not linked to other artifacts
    - No coverage analysis possible
    explanation: |
      Without traceability, there's no way to verify requirements are
      addressed or assess change impacts. IEEE 830 requires the SRS
      to be traceable. CMMI requires bidirectional traceability.
      Missing traceability is a significant process gap.
    remediation: |
      - Create requirements traceability matrix
      - Link requirements to stakeholder needs
      - Link requirements to design elements
      - Link requirements to test cases
      - Establish RTM maintenance process
  - id: RTM-CRIT-002
    signal: Significant requirements not traced
    evidence_indicators:
    - Many requirements without links
    - Coverage analysis shows gaps
    - Critical requirements untraced
    explanation: |
      Partial traceability provides incomplete picture. If significant
      requirements have no forward or backward links, coverage cannot
      be verified. All requirements should have at least forward
      traceability to implementation/tests.
    remediation: |
      - Identify untraced requirements
      - Prioritize by criticality
      - Add missing links
      - Investigate why links were missing
      - Improve linking process
  high:
  - id: RTM-HIGH-001
    signal: Traceability matrix not maintained
    evidence_indicators:
    - RTM out of date
    - New requirements not in matrix
    - Broken links not fixed
    explanation: |
      Traceability value depends on currency. An outdated RTM gives
      false confidence about coverage. RTM must be updated when
      requirements change, when design evolves, and when tests
      are added or modified.
    remediation: |
      - Update RTM to current state
      - Establish maintenance schedule
      - Include RTM updates in change process
      - Validate RTM at milestones
      - Automate where possible
  - id: RTM-HIGH-002
    signal: Backward traceability missing
    evidence_indicators:
    - Requirements not linked to stakeholder needs
    - No source attribution for requirements
    - Cannot determine requirement origin
    explanation: |
      Backward traceability links requirements to their sources
      (stakeholder needs, business objectives, regulations).
      Without this, requirements cannot be validated against original
      needs and orphan requirements cannot be identified.
    remediation: |
      - Add stakeholder need sources
      - Link requirements to business objectives
      - Document regulatory sources
      - Validate backward traceability
      - Remove orphan requirements
  - id: RTM-HIGH-003
    signal: Forward traceability to tests missing
    evidence_indicators:
    - Requirements not linked to test cases
    - Test coverage of requirements unknown
    - Cannot verify all requirements tested
    explanation: |
      Requirements-to-test traceability verifies that all requirements
      are tested. Without this link, testing coverage of requirements
      cannot be assessed and untested requirements may exist.
    remediation: |
      - Link requirements to test cases
      - Identify untested requirements
      - Create tests for missing coverage
      - Maintain test links
      - Report requirements test coverage
  medium:
  - id: RTM-MED-001
    signal: Traceability tool not integrated
    evidence_indicators:
    - Manual traceability maintenance
    - Links stored separately from artifacts
    - Synchronization required
    explanation: |
      Manual traceability maintenance is error-prone and time-consuming.
      Integrated tools maintain links automatically and provide real-time
      coverage analysis. Separate spreadsheets drift out of sync.
    remediation: |
      - Evaluate integrated traceability tools
      - Migrate to integrated solution
      - Automate link maintenance
      - Connect to test management
      - Generate reports from tool
  - id: RTM-MED-002
    signal: Traceability granularity inappropriate
    evidence_indicators:
    - Requirements linked at wrong level
    - Many-to-many links without detail
    - Cannot trace specific functionality
    explanation: |
      Traceability granularity affects usefulness. Too coarse and
      impact analysis is imprecise; too fine and maintenance is
      excessive. Links should enable meaningful coverage and
      impact analysis.
    remediation: |
      - Review traceability granularity
      - Define appropriate link level
      - Refine existing links
      - Document granularity guidelines
      - Balance precision with maintainability
  - id: RTM-MED-003
    signal: Traceability reports not generated
    evidence_indicators:
    - No coverage reports
    - No impact analysis capability
    - RTM not analyzed
    explanation: |
      Traceability value comes from analysis. Without coverage reports,
      impact analysis, and gap detection, the RTM is underutilized.
      Regular reporting surfaces issues and demonstrates coverage.
    remediation: |
      - Generate coverage reports regularly
      - Create impact analysis procedures
      - Report traceability metrics
      - Review gaps in coverage
      - Share reports with stakeholders
  low:
  - id: RTM-LOW-001
    signal: Traceability documentation not standardized
    evidence_indicators:
    - Different traceability formats used
    - Inconsistent link notation
    - No traceability standard documented
    explanation: |
      Standardized traceability formats improve consistency and
      tooling integration. Inconsistent formats make analysis
      difficult and maintenance error-prone.
    remediation: |
      - Define traceability standard
      - Standardize link notation
      - Document traceability procedures
      - Migrate to standard format
  positive:
  - id: RTM-POS-001
    signal: Comprehensive traceability maintained
    evidence_indicators:
    - Complete RTM with all link types
    - Regular maintenance evident
    - Coverage reports available
  - id: RTM-POS-002
    signal: Automated traceability support
    evidence_indicators:
    - Tool-supported traceability
    - Automated coverage analysis
    - Integrated with development process
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Traceability Artifact Discovery
    description: |
      Locate traceability matrices, coverage documentation,
      and requirement linking artifacts.
    duration_estimate: 30 min
    commands:
    - purpose: Find traceability documentation
      command: |
        find . -type f \( -name "*trace*" -o -name "*RTM*" \
          -o -name "*coverage*" -o -name "*mapping*" \) 2>/dev/null | head -30
    - purpose: Search for traceability links
      command: |
        grep -rniE "(implements:|tests:|traces to:|derived from:|covers:)" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | head -50
    expected_findings:
    - RTM or equivalent
    - Traceability links
    - Coverage documentation
  - id: '2'
    name: Coverage Analysis
    description: |
      Assess the coverage of requirements traceability including
      backward and forward links.
    duration_estimate: 45 min
    commands:
    - purpose: Count requirements
      command: |
        grep -rnoE "(REQ-|FR-|NFR-|US-)[0-9]+" \
          --include="*.md" --include="*.yaml" . 2>/dev/null | \
          cut -d: -f2 | sort -u | wc -l
    - purpose: Count traced requirements
      command: |
        grep -rnoE "(REQ-|FR-|NFR-|US-)[0-9]+.*(implements|tests|design)" \
          --include="*.md" --include="*.yaml" . 2>/dev/null | \
          cut -d: -f2 | sort -u | wc -l
    expected_findings:
    - Total requirements
    - Traced requirements
    - Coverage ratio
  - id: '3'
    name: Link Type Assessment
    description: |
      Verify presence of different traceability link types:
      backward, forward, and verification.
    duration_estimate: 30 min
    commands:
    - purpose: Check backward traceability
      command: |
        grep -rniE "(derived from:|source:|stakeholder:|need:)" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | head -30
    - purpose: Check forward traceability
      command: |
        grep -rniE "(implements:|design:|component:|module:)" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | head -30
    - purpose: Check test traceability
      command: |
        grep -rniE "(tests:|verified by:|test case:|validates:)" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | head -30
    expected_findings:
    - Backward traceability
    - Forward traceability
    - Test traceability
  - id: '4'
    name: RTM Currency Check
    description: |
      Verify that traceability matrix is current and maintained.
    duration_estimate: 30 min
    commands:
    - purpose: Check RTM file dates
      command: |
        find . -type f \( -name "*trace*" -o -name "*RTM*" \) \
          -mtime -30 2>/dev/null | head -10
    - purpose: Compare requirement counts
      command: |
        echo "Requirements in docs:"
        grep -rnoE "(REQ-|FR-)[0-9]+" --include="*.md" . 2>/dev/null | \
          cut -d: -f2 | sort -u | tail -5
        echo ""
        echo "Requirements in traceability:"
        grep -rnoE "(REQ-|FR-)[0-9]+" --include="*trace*" . 2>/dev/null | \
          cut -d: -f2 | sort -u | tail -5
    expected_findings:
    - RTM update recency
    - Requirement alignment
    - Maintenance evidence
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - RTM Assessment
    - Coverage Analysis
    - Link Type Review
    - Recommendations
  - type: coverage_report
    format: table
    description: Requirements traceability coverage statistics
  confidence_guidance:
    high: RTM directly reviewed with coverage analysis
    medium: Traceability artifacts found but completeness uncertain
    low: Traceability status unclear, requires detailed RTM review
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: ieee-830-trace
      priority: required
    - source_id: iso-29148-trace
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: RTM audit requires thorough review
    full:
      included: true
      priority: 2
    requirements:
      included: true
      priority: 1
    compliance:
      included: true
      priority: 1
closeout_checklist:
- id: rtm-001
  item: Requirements traceability matrix exists
  level: CRITICAL
  verification: |
    find . -type f \( -name "*trace*" -o -name "*RTM*" \) \
      2>/dev/null | wc -l | xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
- id: rtm-002
  item: Requirements traced to implementation
  level: BLOCKING
  verification: |
    grep -rniE "(implements:|design:|component:)" \
      --include="*.yaml" --include="*.md" . 2>/dev/null | \
      wc -l | xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
- id: rtm-003
  item: Requirements traced to tests
  level: BLOCKING
  verification: |
    grep -rniE "(tests:|verified by:|test case:)" \
      --include="*.yaml" --include="*.md" . 2>/dev/null | \
      wc -l | xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
- id: rtm-004
  item: RTM is current
  level: WARNING
  verification: |
    find . -type f -name "*trace*" -mtime -30 2>/dev/null | \
      wc -l | xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: IEEE 830
    controls:
    - Section 4.5
  - framework: ISO 29148
    controls:
    - '6.5'
  - framework: CMMI
    controls:
    - RD SP 1.4
    - RD SP 1.5
  - framework: DO-178C
    controls:
    - Section 5.5
relationships:
  commonly_combined:
  - requirements-specification.requirements-traceability.bi-directional-tracing
  - requirements-specification.requirements-traceability.implementation-coverage
  - requirements-specification.requirements-traceability.test-coverage-tracing
  - requirements-specification.change-control.change-impact-analysis
