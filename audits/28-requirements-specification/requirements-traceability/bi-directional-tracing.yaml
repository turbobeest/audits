audit:
  id: requirements-specification.requirements-traceability.bi-directional-tracing
  name: Bi-Directional Tracing Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: requirements-specification
  category_number: 28
  subcategory: requirements-traceability
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: documentation
  default_profiles:
  - full
  - requirements
  - compliance
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit examines the presence and quality of bi-directional traceability
    between requirements and other project artifacts. It evaluates:
    - Forward traceability (requirements to implementation/tests)
    - Backward traceability (requirements to stakeholder needs)
    - Completeness of both directions
    - Consistency between directions
    - Ability to trace in both directions effectively
  why_it_matters: |
    Bi-directional traceability enables complete requirements management:
    - CMMI requires bi-directional traceability for RD and REQM
    - Forward tracing verifies requirements are implemented
    - Backward tracing validates requirements origin and necessity
    - One-directional tracing leaves gaps in analysis capability
    - Orphan detection requires backward tracing
    - Gold-plating detection requires forward tracing

    Bi-directional traceability provides the foundation for effective
    change impact analysis, coverage verification, and requirements validation.
  when_to_run:
  - After establishing traceability
  - During compliance audits
  - When change impacts are unclear
  - At quality assessments
  - Before major releases
prerequisites:
  required_artifacts:
  - type: traceability_matrix
    description: Requirements traceability documentation
  - type: stakeholder_needs
    description: Source needs and objectives
  - type: implementation_artifacts
    description: Design, code, and test documentation
  access_requirements:
  - Read access to traceability documentation
  - Access to stakeholder needs
  - Access to implementation artifacts
  - Access to requirements management tools
discovery:
  code_patterns:
  - pattern: (derives from|source:|origin:|stakeholder:)
    type: regex
    scope: documentation
    purpose: Detect backward traceability
  - pattern: (implements:|satisfies:|addressed by:|test:|design:)
    type: regex
    scope: documentation
    purpose: Detect forward traceability
  file_patterns:
  - glob: '**/trace*.{md,yaml,csv}'
    purpose: Traceability documentation
  - glob: '**/needs/**'
    purpose: Stakeholder needs documentation
  - glob: '**/requirements-to-*.{md,yaml}'
    purpose: Requirements mapping
knowledge_sources:
  specifications:
  - id: cmmi-trace
    name: CMMI - Bi-directional Traceability
    url: https://cmmiinstitute.com/
    offline_cache: true
    priority: required
  - id: iso-29148-bi
    name: ISO/IEC/IEEE 29148 - Bi-directional Traceability
    url: https://www.iso.org/standard/72089.html
    offline_cache: true
    priority: required
  guides:
  - id: traceability-practices
    name: Bi-directional Traceability Practices
    url: https://www.requirements-engineering.org/
    offline_cache: true
tooling:
  static_analysis:
  - tool: traceability-analyzer
    purpose: Analyze bi-directional coverage
    offline_capable: true
  infrastructure_tools:
  - tool: doors
    purpose: IBM DOORS bi-directional links
  - tool: polarion
    purpose: Polarion bi-directional tracing
  scripts:
  - id: bidirectional-scanner
    language: bash
    purpose: Scan for bi-directional traceability
    source: inline
    code: |
      #!/bin/bash
      echo "=== Bi-Directional Traceability Scan ==="
      echo "Checking backward traceability..."
      grep -rniE "(derives from|source:|origin:|stakeholder:|need:)" \
        --include="*.yaml" --include="*.md" . 2>/dev/null | head -30
      echo ""
      echo "Checking forward traceability..."
      grep -rniE "(implements:|satisfies:|addressed by:|test:|design:)" \
        --include="*.yaml" --include="*.md" . 2>/dev/null | head -30
signals:
  critical:
  - id: BIDIR-CRIT-001
    signal: No backward traceability exists
    evidence_indicators:
    - Requirements not linked to sources
    - No stakeholder need references
    - Cannot validate requirement necessity
    explanation: |
      Backward traceability links requirements to their sources (business
      needs, stakeholder requests, regulations). Without it, requirements
      cannot be validated against original needs, and orphan requirements
      cannot be identified. CMMI requires this for REQM.
    remediation: |
      - Identify source for each requirement
      - Link requirements to stakeholder needs
      - Document business objective sources
      - Include regulatory sources
      - Validate backward links
  - id: BIDIR-CRIT-002
    signal: No forward traceability exists
    evidence_indicators:
    - Requirements not linked to implementation
    - No test case references
    - Cannot verify requirements are addressed
    explanation: |
      Forward traceability links requirements to implementation and tests.
      Without it, coverage cannot be verified and unimplemented requirements
      may be missed. This is essential for verification and validation.
    remediation: |
      - Link requirements to design elements
      - Link requirements to code modules
      - Link requirements to test cases
      - Verify all requirements have forward links
      - Update links as implementation evolves
  high:
  - id: BIDIR-HIGH-001
    signal: Traceability only in one direction
    evidence_indicators:
    - Forward tracing without backward
    - Backward tracing without forward
    - Incomplete bi-directional coverage
    explanation: |
      Bi-directional traceability requires both directions. Forward-only
      tracing cannot identify orphan requirements or validate necessity.
      Backward-only tracing cannot verify implementation coverage.
      Both directions are needed for complete analysis.
    remediation: |
      - Identify missing direction
      - Add missing link type
      - Balance both directions
      - Validate bi-directional completeness
      - Document traceability in both directions
  - id: BIDIR-HIGH-002
    signal: Inconsistent bi-directional links
    evidence_indicators:
    - Forward link without corresponding backward link
    - Design traces to requirement but requirement doesn't trace to design
    - Asymmetric relationship definitions
    explanation: |
      Bi-directional links should be consistent: if A traces to B forward,
      B should trace to A backward. Inconsistencies indicate maintenance
      issues and undermine traceability reliability.
    remediation: |
      - Audit link consistency
      - Add missing reciprocal links
      - Synchronize forward and backward
      - Implement consistency checks
      - Automate reciprocal linking
  - id: BIDIR-HIGH-003
    signal: Orphan requirements detected
    evidence_indicators:
    - Requirements without source/need
    - No backward traceability for some requirements
    - Requirements of unknown origin
    explanation: |
      Orphan requirements have no traceable source. They may be
      unnecessary, incorrectly documented, or missing their source link.
      Orphans indicate either scope creep or incomplete backward tracing.
    remediation: |
      - Identify all orphan requirements
      - Investigate each orphan's origin
      - Add missing source links
      - Remove truly unnecessary requirements
      - Prevent future orphans with process
  medium:
  - id: BIDIR-MED-001
    signal: Gold-plated features detected
    evidence_indicators:
    - Implementation without requirement source
    - Design elements not traced to requirements
    - Extra functionality beyond requirements
    explanation: |
      Gold-plating is implementing features beyond requirements. Forward
      tracing from requirements should cover all implementation; orphan
      implementation indicates gold-plating. This may add cost without
      stakeholder-validated value.
    remediation: |
      - Identify untraced implementation
      - Determine if requirements missing
      - Add missing requirements if valid
      - Remove gold-plated features if not needed
      - Enforce requirements-driven development
  - id: BIDIR-MED-002
    signal: Traceability gaps in verification chain
    evidence_indicators:
    - Requirements without test links
    - Tests without requirement links
    - Incomplete verification traceability
    explanation: |
      Verification traceability links requirements to test cases in
      both directions. Gaps mean some requirements may be untested
      or some tests may be unnecessary. Both directions support
      coverage analysis.
    remediation: |
      - Link all requirements to tests
      - Link all tests to requirements
      - Identify untested requirements
      - Justify tests without requirements
      - Report verification coverage
  low:
  - id: BIDIR-LOW-001
    signal: Bi-directional navigation not supported
    evidence_indicators:
    - Can only navigate one direction
    - Tools don't support reverse lookup
    - Manual effort to trace backward
    explanation: |
      Effective bi-directional tracing requires navigation in both
      directions. If tooling only supports one direction, analysis
      is hampered and maintenance is difficult.
    remediation: |
      - Enable bi-directional navigation
      - Use tools with reverse lookup
      - Generate both direction reports
      - Document navigation procedures
  positive:
  - id: BIDIR-POS-001
    signal: Complete bi-directional traceability
    evidence_indicators:
    - Both forward and backward tracing complete
    - Consistent reciprocal links
    - No orphans or gold-plating
  - id: BIDIR-POS-002
    signal: Bi-directional analysis actively used
    evidence_indicators:
    - Impact analysis uses both directions
    - Coverage reports from both perspectives
    - Orphan and gold-plating reviews conducted
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Backward Traceability Assessment
    description: |
      Assess backward traceability from requirements to their
      sources (stakeholder needs, business objectives).
    duration_estimate: 30 min
    commands:
    - purpose: Find backward traceability links
      command: |
        grep -rniE "(derives from|source:|origin:|stakeholder:|need:|business.?objective)" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | head -40
    - purpose: Count requirements with sources
      command: |
        grep -rnoE "(REQ-|FR-)[0-9]+.*(source|derived|stakeholder)" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | \
          cut -d: -f2 | sort -u | wc -l
    expected_findings:
    - Backward traceability links
    - Source coverage
    - Potential orphans
  - id: '2'
    name: Forward Traceability Assessment
    description: |
      Assess forward traceability from requirements to
      implementation and tests.
    duration_estimate: 30 min
    commands:
    - purpose: Find forward traceability links
      command: |
        grep -rniE "(implements:|satisfies:|design:|component:|test:|verified by:)" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | head -40
    - purpose: Count requirements with forward links
      command: |
        grep -rnoE "(REQ-|FR-)[0-9]+.*(implement|design|test|satisfy)" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | \
          cut -d: -f2 | sort -u | wc -l
    expected_findings:
    - Forward traceability links
    - Implementation coverage
    - Test coverage
  - id: '3'
    name: Bi-Directional Consistency Check
    description: |
      Verify that bi-directional links are consistent and
      reciprocal.
    duration_estimate: 30 min
    commands:
    - purpose: Find design references to requirements
      command: |
        grep -rniE "(requirement|REQ-|FR-)" \
          --include="*design*" --include="*arch*" . 2>/dev/null | head -20
    - purpose: Check for reciprocal linking
      command: |
        grep -rniE "(linked to|related to|references)" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | head -20
    expected_findings:
    - Reciprocal links
    - Consistency level
    - Asymmetries
  - id: '4'
    name: Orphan and Gold-Plating Detection
    description: |
      Identify orphan requirements (no source) and gold-plated
      implementation (no requirement).
    duration_estimate: 30 min
    commands:
    - purpose: Find requirements without source
      command: |
        # Compare requirements list with sourced requirements
        echo "Checking for orphan requirements..."
        grep -rnoE "(REQ-|FR-)[0-9]+" --include="*.md" . 2>/dev/null | \
          cut -d: -f2 | sort -u > /tmp/all_reqs.txt 2>/dev/null || true
        grep -rnoE "(REQ-|FR-)[0-9]+.*(source|derived)" --include="*.md" . 2>/dev/null | \
          cut -d: -f2 | sort -u > /tmp/sourced_reqs.txt 2>/dev/null || true
        comm -23 /tmp/all_reqs.txt /tmp/sourced_reqs.txt 2>/dev/null | head -10 || echo "Unable to compare"
    - purpose: Check for implementation without requirements
      command: |
        grep -rniE "TODO.*no.*requirement|implement.*without.*req" \
          --include="*.ts" --include="*.java" --include="*.py" . 2>/dev/null | head -10
    expected_findings:
    - Orphan requirements
    - Gold-plated features
    - Coverage gaps
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Backward Traceability
    - Forward Traceability
    - Consistency Analysis
    - Recommendations
  confidence_guidance:
    high: Bi-directional traceability directly verified
    medium: Traceability found but completeness uncertain
    low: Traceability status unclear, requires detailed review
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: cmmi-trace
      priority: required
    - source_id: iso-29148-bi
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Bi-directional tracing audit requires thorough review
    full:
      included: true
      priority: 2
    requirements:
      included: true
      priority: 1
    compliance:
      included: true
      priority: 1
closeout_checklist:
- id: bidir-001
  item: Backward traceability exists
  level: CRITICAL
  verification: |
    grep -rniE "(source:|derived from:|stakeholder:)" \
      --include="*.yaml" --include="*.md" . 2>/dev/null | \
      wc -l | xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
- id: bidir-002
  item: Forward traceability exists
  level: CRITICAL
  verification: |
    grep -rniE "(implements:|design:|test:)" \
      --include="*.yaml" --include="*.md" . 2>/dev/null | \
      wc -l | xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
- id: bidir-003
  item: No orphan requirements
  level: BLOCKING
  verification: manual
  verification_notes: Verify all requirements have source attribution
  expected: Confirmed by reviewer
- id: bidir-004
  item: Bi-directional links consistent
  level: WARNING
  verification: manual
  verification_notes: Verify reciprocal links are present
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: CMMI
    controls:
    - RD SP 1.4
    - RD SP 1.5
    - REQM SP 1.4
  - framework: ISO 29148
    controls:
    - 6.5.2
  - framework: DO-178C
    controls:
    - Section 5.5
relationships:
  commonly_combined:
  - requirements-specification.requirements-traceability.traceability-matrix
  - requirements-specification.requirements-traceability.implementation-coverage
  - requirements-specification.requirements-traceability.test-coverage-tracing
  - requirements-specification.change-control.change-impact-analysis
