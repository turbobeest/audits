audit:
  id: requirements-specification.requirements-traceability.test-coverage-tracing
  name: Test Coverage Tracing Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: requirements-specification
  category_number: 28
  subcategory: requirements-traceability
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: documentation
  default_profiles:
  - full
  - requirements
  - testing
description:
  what: |
    This audit examines the traceability between requirements and test cases,
    ensuring all requirements have verification coverage. It evaluates:
    - Requirements linked to test cases
    - Test cases linked back to requirements
    - Coverage completeness metrics
    - Untested requirements identification
    - Tests without requirement justification
  why_it_matters: |
    Requirements-test traceability ensures verification completeness:
    - Verifies all requirements are testable and tested
    - Identifies untested requirements before release
    - Justifies test suite scope against requirements
    - Supports test prioritization based on requirement priority
    - Enables coverage-based release decisions
    - Required by standards like DO-178C, ISO 26262
prerequisites:
  required_artifacts:
  - type: requirements
    description: Requirements documentation
  - type: test_cases
    description: Test case documentation
  - type: test_results
    description: Test execution results
  access_requirements:
  - Read access to requirements
  - Read access to test documentation
  - Access to test management tools
discovery:
  code_patterns:
  - pattern: (tests|verifies|validates).*REQ-
    type: regex
    scope: documentation
    purpose: Detect test-requirement links
  - pattern: '@test.*requirement|@requirement'
    type: regex
    scope: source
    purpose: Detect requirement annotations in tests
  file_patterns:
  - glob: '**/test*trace*.{md,yaml}'
    purpose: Test traceability documentation
  - glob: '**/*.feature'
    purpose: BDD feature files
  - glob: '**/test*coverage*.{md,yaml}'
    purpose: Test coverage documentation
knowledge_sources:
  specifications:
  - id: iso-29119
    name: ISO/IEC/IEEE 29119 - Software Testing
    url: https://www.iso.org/standard/81291.html
    offline_cache: true
    priority: required
  - id: do-178c-test
    name: DO-178C - Software Testing Requirements
    url: https://www.rtca.org/
    offline_cache: true
    priority: recommended
signals:
  critical:
  - id: TESTCOV-CRIT-001
    signal: Requirements not traced to test cases
    evidence_indicators:
    - No requirement-test links exist
    - Test coverage of requirements unknown
    - Cannot verify all requirements tested
    remediation: |
      - Link each requirement to test cases
      - Link test cases back to requirements
      - Generate coverage matrix
      - Identify untested requirements
      - Create tests for uncovered requirements
  - id: TESTCOV-CRIT-002
    signal: Significant untested requirements
    evidence_indicators:
    - Requirements without test links
    - Coverage analysis shows large gaps
    - Critical requirements untested
    remediation: |
      - Prioritize test creation for critical requirements
      - Create test plan for untested requirements
      - Track test coverage progress
      - Block release until critical coverage achieved
  high:
  - id: TESTCOV-HIGH-001
    signal: Test coverage metrics not tracked
    evidence_indicators:
    - No requirement coverage reporting
    - Coverage not measured
    - Progress not tracked
    remediation: |
      - Implement coverage tracking
      - Generate regular coverage reports
      - Set coverage targets
      - Review coverage in test planning
  - id: TESTCOV-HIGH-002
    signal: Tests exist without requirement traceability
    evidence_indicators:
    - Tests without requirement links
    - Test purpose unclear
    - Orphan tests in suite
    remediation: |
      - Link tests to requirements
      - Justify tests without direct requirement link
      - Remove unnecessary tests
      - Document test purposes
  medium:
  - id: TESTCOV-MED-001
    signal: Acceptance criteria not linked to tests
    evidence_indicators:
    - Acceptance criteria exist but no test links
    - Tests don't reference acceptance criteria
    remediation: |
      - Link acceptance criteria to tests
      - Ensure each criterion has verification
      - Use BDD to connect criteria to tests
procedure:
  steps:
  - id: '1'
    name: Test Traceability Discovery
    commands:
    - purpose: Find test-requirement links
      command: |
        grep -rniE "(tests|verifies|validates|covers).*REQ-" \
          --include="*.md" --include="*.yaml" --include="*.feature" . 2>/dev/null | head -40
  - id: '2'
    name: Coverage Analysis
    commands:
    - purpose: Count requirements and test coverage
      command: |
        echo "Total requirements:"
        grep -rnoE "(REQ-|FR-)[0-9]+" --include="*.md" . 2>/dev/null | \
          cut -d: -f2 | sort -u | wc -l
        echo "Requirements with tests:"
        grep -rnoE "(REQ-|FR-)[0-9]+" --include="*.feature" --include="*test*" . 2>/dev/null | \
          cut -d: -f2 | sort -u | wc -l
output:
  deliverables:
  - type: coverage_matrix
    format: table
    description: Requirements-to-test coverage matrix
closeout_checklist:
- id: testcov-001
  item: Requirements traced to tests
  level: CRITICAL
  verification: manual
  expected: Confirmed
- id: testcov-002
  item: Coverage metrics available
  level: BLOCKING
  verification: manual
  expected: Confirmed
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: ISO 29119
    controls:
    - Test Design
  - framework: DO-178C
    controls:
    - Section 6
relationships:
  commonly_combined:
  - requirements-specification.requirements-traceability.traceability-matrix
  - requirements-specification.acceptance-criteria.acceptance-criteria-testability
