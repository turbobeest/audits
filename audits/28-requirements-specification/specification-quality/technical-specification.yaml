# ============================================================
# AUDIT: Technical Specification
# Category: 28 - Requirements & Specification
# Subcategory: specification-quality
# ============================================================

audit:
  id: "requirements-specification.specification-quality.technical-specification"
  name: "Technical Specification Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "requirements-specification"
  category_number: 28
  subcategory: "specification-quality"

  tier: "expert"
  estimated_duration: "3-4 hours"  # median: 3h

  completeness: "requires_discovery"
  requires_runtime: false
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "documentation"
  default_profiles:
    - "full"
    - "requirements"
    - "architecture"

description:
  what: |
    This audit examines the quality and completeness of technical specifications
    that bridge requirements and implementation. It evaluates:
    - Technical detail sufficiency
    - Architecture alignment
    - Technology choices documented
    - Constraints and limitations
    - Integration requirements
    - Performance specifications

  why_it_matters: |
    Technical specifications guide implementation:
    - Bridge between what (requirements) and how (implementation)
    - Reduce implementation ambiguity
    - Enable accurate estimation
    - Support architectural decision documentation
    - Facilitate code review against specifications
    - Enable independent implementation verification

prerequisites:
  required_artifacts:
    - type: "technical_specs"
      description: "Technical specification documents"
    - type: "architecture"
      description: "Architecture documentation"
    - type: "requirements"
      description: "Source requirements"

  access_requirements:
    - "Read access to technical specifications"
    - "Access to architecture documentation"
    - "Access to requirements"

discovery:
  code_patterns:
    - pattern: "(technical specification|tech spec|design spec)"
      type: "regex"
      scope: "documentation"
      purpose: "Detect technical specifications"

    - pattern: "(architecture|component|module|service)"
      type: "regex"
      scope: "documentation"
      purpose: "Detect technical elements"

  file_patterns:
    - glob: "**/tech*spec*.{md,yaml}"
      purpose: "Technical specifications"
    - glob: "**/design/**"
      purpose: "Design documentation"
    - glob: "**/architecture/**"
      purpose: "Architecture documentation"

knowledge_sources:
  specifications:
    - id: "ieee-1016"
      name: "IEEE 1016: Software Design Descriptions"
      url: "https://standards.ieee.org/standard/1016-2009.html"
      offline_cache: true
      priority: "required"

signals:
  critical:
    - id: "TECHSPEC-CRIT-001"
      signal: "No technical specifications exist"
      evidence_indicators:
        - "Requirements directly to code without specification"
        - "No design documentation"
        - "Technical decisions undocumented"
      remediation: |
        - Create technical specifications for major features
        - Document architectural decisions
        - Specify technical constraints
        - Link specifications to requirements

  high:
    - id: "TECHSPEC-HIGH-001"
      signal: "Technical specifications lack detail"
      evidence_indicators:
        - "Specifications too high-level"
        - "Implementation details missing"
        - "Significant decisions left to implementer"
      remediation: |
        - Add implementation guidance
        - Specify algorithms and approaches
        - Document data structures
        - Include error handling details

    - id: "TECHSPEC-HIGH-002"
      signal: "Specifications not aligned with architecture"
      evidence_indicators:
        - "Specifications contradict architecture"
        - "Architectural constraints ignored"
        - "No architecture references"
      remediation: |
        - Review specifications against architecture
        - Reference architectural decisions
        - Ensure consistency
        - Update as architecture evolves

procedure:
  steps:
    - id: "1"
      name: "Technical Specification Discovery"
      commands:
        - purpose: "Find technical specifications"
          command: |
            find . -type f \( -name "*tech*spec*" -o -name "*design*" \) \
              \( -name "*.md" -o -name "*.yaml" \) 2>/dev/null | head -30

    - id: "2"
      name: "Specification Quality Assessment"
      commands:
        - purpose: "Check specification depth"
          command: |
            grep -rniE "(algorithm|data structure|interface|protocol|format)" \
              --include="*spec*" --include="*design*" . 2>/dev/null | head -40

output:
  deliverables:
    - type: "specification_assessment"
      format: "prose"

closeout_checklist:
  - id: "techspec-001"
    item: "Technical specifications exist"
    level: "CRITICAL"
    verification: "manual"
    expected: "Confirmed"

governance:
  applicable_to:
    archetypes: ["all"]

  compliance_frameworks:
    - framework: "IEEE 1016"
      controls: ["All"]

relationships:
  commonly_combined:
    - "requirements-specification.specification-quality.api-specification"
    - "requirements-specification.specification-quality.data-specification"
