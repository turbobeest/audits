audit:
  id: requirements-specification.specification-quality.data-specification
  name: Data Specification Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: requirements-specification
  category_number: 28
  subcategory: specification-quality
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: documentation
  default_profiles:
  - full
  - requirements
  - data
description:
  what: |
    This audit examines the specification of data entities, structures,
    and relationships. It evaluates:
    - Data dictionary completeness
    - Entity relationship documentation
    - Data type specifications
    - Validation rules
    - Data lifecycle requirements
    - Data quality constraints
  why_it_matters: |
    Data specifications are foundational to correct implementation:
    - Data models drive database design
    - Missing specifications cause data quality issues
    - Validation rules prevent corruption
    - Relationships enable referential integrity
    - Lifecycle requirements affect retention and deletion
    - Data specifications enable test data generation
prerequisites:
  required_artifacts:
  - type: data_models
    description: Data model documentation
  - type: data_dictionary
    description: Data dictionary
  - type: schemas
    description: Database schemas
  access_requirements:
  - Read access to data documentation
  - Access to database schemas
  - Access to domain models
discovery:
  code_patterns:
  - pattern: (entity|data model|schema|table|column)
    type: regex
    scope: documentation
    purpose: Detect data specification elements
  - pattern: (validation|constraint|type|format)
    type: regex
    scope: documentation
    purpose: Detect data rules
  file_patterns:
  - glob: '**/data*model*.{md,yaml}'
    purpose: Data model documentation
  - glob: '**/schema*.{sql,prisma,yaml}'
    purpose: Schema definitions
  - glob: '**/dictionary*.{md,yaml,csv}'
    purpose: Data dictionary
  - glob: '**/entities/**'
    purpose: Entity definitions
knowledge_sources:
  specifications:
  - id: data-modeling
    name: Data Modeling Standards
    url: https://www.datamanagement.org/
    offline_cache: true
    priority: required
signals:
  critical:
  - id: DATASPEC-CRIT-001
    signal: No data dictionary exists
    evidence_indicators:
    - Data elements undefined
    - No entity documentation
    - Data types unspecified
    remediation: |
      - Create data dictionary
      - Define all entities and attributes
      - Specify data types and formats
      - Document relationships
      - Include validation rules
  high:
  - id: DATASPEC-HIGH-001
    signal: Validation rules not specified
    evidence_indicators:
    - Data constraints undefined
    - Format rules missing
    - Range restrictions unspecified
    remediation: |
      - Define validation rules for all fields
      - Specify format constraints
      - Document allowed values
      - Include business rule validations
  - id: DATASPEC-HIGH-002
    signal: Data relationships not documented
    evidence_indicators:
    - Entity relationships missing
    - Cardinality unspecified
    - No ER diagrams
    remediation: |
      - Document all relationships
      - Specify cardinality
      - Create ER diagrams
      - Document referential integrity rules
procedure:
  steps:
  - id: '1'
    name: Data Specification Discovery
    commands:
    - purpose: Find data specifications
      command: |
        find . -type f \( -name "*data*model*" -o -name "*schema*" \
          -o -name "*dictionary*" -o -name "*entity*" \) 2>/dev/null | head -20
  - id: '2'
    name: Specification Completeness Check
    commands:
    - purpose: Check for data specification elements
      command: |
        grep -rniE "(type|format|constraint|validation|relationship)" \
          --include="*.yaml" --include="*.md" --include="*.sql" . 2>/dev/null | head -40
output:
  deliverables:
  - type: data_spec_assessment
    format: prose
closeout_checklist:
- id: dataspec-001
  item: Data dictionary exists
  level: CRITICAL
  verification: manual
  expected: Confirmed
governance:
  applicable_to:
    archetypes:
    - all
relationships:
  commonly_combined:
  - requirements-specification.requirements-elicitation.domain-analysis
  - requirements-specification.specification-quality.api-specification
