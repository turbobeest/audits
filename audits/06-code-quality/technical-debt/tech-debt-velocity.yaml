audit:
  id: code-quality.technical-debt.tech-debt-velocity
  name: Technical Debt Velocity Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: code-quality
  category_number: 6
  subcategory: technical-debt
  tier: expert
  estimated_duration: 1.5 hours
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: metrics
  default_profiles:
  - full
  - maintenance
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Measures the rate at which technical debt is being created versus remediated
    over time. Analyzes trends in debt markers, code quality metrics, and
    backlog items to determine if debt is accumulating, stable, or being
    reduced. Provides velocity metrics for debt management.
  why_it_matters: |
    Knowing debt velocity is essential for sustainable development. If debt
    accrues faster than it's paid down, eventual velocity collapse is
    inevitable. Teams need visibility into debt trends to make informed
    decisions about balancing feature work with debt reduction. Sustainable
    pace requires debt velocity awareness.
  when_to_run:
  - Monthly or quarterly reviews
  - Sprint retrospectives
  - Planning sessions
  - After major releases
prerequisites:
  required_artifacts:
  - type: metrics_history
    description: Historical code quality data
  - type: issue_tracker
    description: Backlog history
  - type: source_control
    description: Git history access
  access_requirements:
  - Access to historical metrics
  - Read access to issue tracker
  - Git history access
discovery:
  code_patterns:
  - pattern: (TODO|FIXME|HACK)
    type: regex
    scope: source
    purpose: Track debt markers over time
  file_patterns:
  - glob: '**/sonar-project.properties'
    purpose: Quality tool configuration
  - glob: '**/.codeclimate.yml'
    purpose: Quality tool configuration
knowledge_sources:
  specifications:
  - id: debt-quadrant
    name: Technical Debt Quadrant
    url: https://martinfowler.com/bliki/TechnicalDebtQuadrant.html
    offline_cache: true
    priority: recommended
  guides:
  - id: sustainable-pace
    name: Sustainable Pace
    url: https://www.agilealliance.org/glossary/sustainable
    offline_cache: true
  - id: refactoring-fowler
    name: Martin Fowler - Refactoring
    url: https://refactoring.com/
    offline_cache: false
  - id: refactoring-catalog
    name: Refactoring Catalog
    url: https://refactoring.com/catalog/
    offline_cache: false
  - id: clean-code
    name: Robert C. Martin - Clean Code
    url: https://www.oreilly.com/library/view/clean-code-a/9780136083238/
    offline_cache: false
tooling:
  static_analysis:
  - tool: sonarqube
    purpose: Historical debt metrics
    offline_capable: false
  - tool: codeclimate
    purpose: Trend analysis
    offline_capable: false
  scripts:
  - id: debt-trend
    language: bash
    purpose: Calculate debt marker trends
    source: inline
    code: |
      # Count debt markers by month
      for month in $(git log --format='%Y-%m' | sort -u | tail -6); do
        count=$(git log --since="${month}-01" --until="${month}-31" -p | \
          grep -c "TODO\|FIXME\|HACK" || true)
        echo "$month: $count"
      done
signals:
  critical:
  - id: VEL-CRIT-001
    signal: Debt accumulating faster than remediation
    evidence_pattern: increasing debt trend over 3+ months
    explanation: |
      Technical debt is growing faster than it's being paid down.
      This leads to eventual velocity collapse and quality degradation.
    remediation: Allocate dedicated capacity for debt reduction
  high:
  - id: VEL-HIGH-001
    signal: No debt reduction activity
    evidence_pattern: zero debt items closed in period
    explanation: |
      No technical debt is being addressed. Debt will accumulate
      indefinitely without dedicated reduction effort.
    remediation: Commit percentage of sprint capacity to debt work
  - id: VEL-HIGH-002
    signal: Debt metrics not tracked
    evidence_pattern: no historical debt data
    explanation: |
      Without historical tracking, debt velocity is unknown.
      Teams cannot make informed decisions without trend data.
    remediation: Implement debt metric collection and trending
  medium:
  - id: VEL-MED-001
    signal: Volatile debt levels
    evidence_pattern: high variance in debt metrics
    remediation: Investigate causes of volatility; stabilize debt management
  - id: VEL-MED-002
    signal: Debt velocity not reviewed
    evidence_pattern: metrics not discussed in retrospectives
    remediation: Add debt velocity to regular team reviews
  low:
  - id: VEL-LOW-001
    signal: Missing debt velocity targets
    evidence_pattern: no goals for debt reduction
    remediation: Set measurable debt velocity targets
  positive:
  - id: VEL-POS-001
    signal: Decreasing debt trend
    evidence_pattern: debt declining over time
  - id: VEL-POS-002
    signal: Balanced creation and remediation
    evidence_pattern: debt stable over time
  - id: VEL-POS-003
    signal: Regular debt velocity reviews
    evidence_pattern: metrics in retrospectives
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: metrics-analyst
  steps:
  - id: '1'
    name: Collect Historical Debt Markers
    description: |
      Gather debt marker counts over time from
      source control history.
    duration_estimate: 20 min
    commands:
    - purpose: Count current debt markers
      command: |
        grep -rn --include="*.{js,ts,py,java,go,rb,cs}" \
          -E "(TODO|FIXME|HACK)" . | wc -l
    - purpose: Check marker trends in commits
      command: |
        git log --oneline --since="3 months ago" | head -50
    expected_findings:
    - Current marker count
    - Historical context
  - id: '2'
    name: Analyze Issue Tracker History
    description: |
      Review creation and closure rates for
      debt-related issues.
    duration_estimate: 20 min
    commands:
    - purpose: Find debt issues created
      command: |
        gh issue list --label "tech-debt" --state all \
          --json createdAt,closedAt | head -30
    - purpose: Count open vs closed
      command: |
        echo "Open:"; gh issue list --label "tech-debt" --state open | wc -l
        echo "Closed:"; gh issue list --label "tech-debt" --state closed | wc -l
    expected_findings:
    - Creation rate
    - Closure rate
  - id: '3'
    name: Review Quality Tool Trends
    description: |
      Examine trend data from automated quality
      tools if available.
    duration_estimate: 15 min
    commands:
    - purpose: Check for quality configs
      command: |
        find . -name "sonar*" -o -name ".codeclimate*" 2>/dev/null
    expected_findings:
    - Tool availability
    - Historical data access
  - id: '4'
    name: Calculate Velocity Metrics
    description: |
      Compute debt velocity from collected
      historical data.
    duration_estimate: 20 min
    commands:
    - purpose: Analyze commit trends
      command: |
        git log --since="6 months ago" --oneline \
          --grep="debt\|refactor\|cleanup" | wc -l
    - purpose: Check recent debt work
      command: |
        git log --since="1 month ago" --oneline \
          --grep="debt\|refactor\|cleanup"
    expected_findings:
    - Debt work frequency
    - Velocity calculation
  - id: '5'
    name: Assess Team Practices
    description: |
      Review how debt velocity is monitored
      and discussed by the team.
    duration_estimate: 15 min
    commands:
    - purpose: Check for debt reports
      command: |
        find . -name "*debt*report*" -o -name "*quality*report*" 2>/dev/null
    expected_findings:
    - Reporting practices
    - Review frequency
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Velocity Metrics
    - Trend Analysis
    - Team Practices
    - Recommendations
  confidence_guidance:
    high: Complete historical data with clear trends
    medium: Partial data with estimates
    low: Limited historical visibility
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: debt-quadrant
      priority: recommended
profiles:
  membership:
    quick:
      included: false
      reason: Requires historical analysis
    full:
      included: true
      priority: 2
    maintenance:
      included: true
      priority: 1
closeout_checklist:
- id: vel-001
  item: Debt velocity calculated
  level: REQUIRED
  verification: Manual velocity calculation
  expected: Net velocity documented
- id: vel-002
  item: Historical tracking in place
  level: WARNING
  verification: |
    find . -name "sonar*" -o -name ".codeclimate*" 2>/dev/null | wc -l
  expected: Greater than 0
- id: vel-003
  item: Team reviews velocity regularly
  level: WARNING
  verification: Check team practices
  expected: Regular reviews documented
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: ISO 25010
    controls:
    - Maintainability
relationships:
  commonly_combined:
  - code-quality.technical-debt.tech-debt-tracking
  - code-quality.technical-debt.tech-debt-inventory
  - code-quality.technical-debt.debt-prioritization
