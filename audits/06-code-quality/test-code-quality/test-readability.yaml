audit:
  id: code-quality.test-code-quality.test-readability
  name: Test Readability Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: code-quality
  category_number: 6
  subcategory: test-code-quality
  tier: expert
  estimated_duration: 45 minutes
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: testing
  default_profiles:
  - full
  - quality
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the readability and comprehensibility of test code. This includes
    examining test structure, clarity of assertions, meaningful variable names,
    helpful comments, and whether tests effectively document the expected behavior
    of the system under test.
  why_it_matters: |
    Tests serve as executable documentation. Readable tests help developers
    understand system behavior, make debugging faster, and reduce the barrier
    to modifying tests. Unreadable tests are often skipped or disabled rather
    than fixed, eroding the value of the test suite.
  when_to_run:
  - During code reviews
  - Test suite maintenance
  - Onboarding new team members
  - Technical debt assessments
prerequisites:
  required_artifacts:
  - type: test_code
    description: Test files and specifications
  access_requirements:
  - Read access to test directories
discovery:
  code_patterns:
  - pattern: test\d+|testCase\d+
    type: regex
    scope: testing
    purpose: Detect non-descriptive test names
  - pattern: expect\(.*\)\.toBe\(true\)|assert.*True
    type: regex
    scope: testing
    purpose: Detect non-specific boolean assertions
  - pattern: // TODO|// FIXME|// HACK
    type: regex
    scope: testing
    purpose: Detect incomplete or problematic tests
  file_patterns:
  - glob: '**/*.test.{js,ts,jsx,tsx}'
    purpose: Jest/Vitest test files
  - glob: '**/*.spec.{js,ts,jsx,tsx}'
    purpose: Spec files
  - glob: '**/test_*.py'
    purpose: Python test files
  - glob: '**/*_test.go'
    purpose: Go test files
knowledge_sources:
  guides:
  - id: jest-best-practices
    name: Jest Testing Best Practices
    url: https://jestjs.io/docs/setup-teardown
    offline_cache: true
  - id: google-testing
    name: Google Testing Blog
    url: https://testing.googleblog.com/
    offline_cache: true
  - id: xunit-patterns
    name: 'xUnit Test Patterns: Refactoring Test Code'
    url: https://www.amazon.com/xUnit-Test-Patterns-Refactoring-Code/dp/0131495054
    offline_cache: false
  - id: working-effectively-legacy
    name: Working Effectively with Legacy Code
    url: https://www.oreilly.com/library/view/working-effectively-with/0131177052/
    offline_cache: false
  learning_resources:
  - id: xunit-patterns
    title: xUnit Test Patterns
    type: book
    reference: 'Gerard Meszaros, ISBN: 978-0131495050'
tooling:
  static_analysis:
  - tool: eslint-plugin-jest
    purpose: Jest test quality enforcement
    offline_capable: true
  - tool: pylint
    purpose: Python test quality
    offline_capable: true
  scripts:
  - id: test-readability-scan
    language: bash
    purpose: Analyze test readability patterns
    source: inline
    code: |
      echo "=== Non-Descriptive Test Names ==="
      grep -rn "it('\|test('\|def test_" --include="*.test.js" --include="*.spec.ts" --include="test_*.py" . 2>/dev/null | \
        grep -E "test[0-9]|test_[0-9]|it\('[a-z]+'\)" | head -20

      echo "=== Long Test Functions ==="
      awk '/^(it|test|def test_)/{start=NR} /^}/{if(start && NR-start>50) print FILENAME":"start": long test ("NR-start" lines)"; start=0}' **/*.test.js 2>/dev/null | head -10
signals:
  critical:
  - id: TREAD-CRIT-001
    signal: Tests with no assertions
    evidence_pattern: it\(.*\{[^}]*\}\)(?!.*expect|assert)
    explanation: |
      Tests without assertions always pass, providing false confidence.
      They consume CI time without providing value.
    remediation: Add meaningful assertions or remove the test
  - id: TREAD-CRIT-002
    signal: Disabled tests without explanation
    evidence_pattern: it\.skip\(|@skip|xdescribe|xit
    explanation: |
      Disabled tests without explanation rot. They may hide real bugs
      or become permanently orphaned.
    remediation: Add TODO comment with issue link, or fix/remove the test
  high:
  - id: TREAD-HIGH-001
    signal: Non-descriptive test names
    evidence_pattern: test\d+|it\('test|test_\d+
    explanation: |
      Test names like "test1" or "testCase2" provide no information about
      what behavior is being tested. Failures are meaningless.
    remediation: 'Use descriptive names: ''should return empty array when no items match'''
  - id: TREAD-HIGH-002
    signal: Overly long test functions (>50 lines)
    evidence_pattern: test function body > 50 lines
    explanation: |
      Long tests are hard to understand and maintain. They often test
      multiple things, making failures ambiguous.
    remediation: Split into multiple focused tests, extract helper functions
  medium:
  - id: TREAD-MED-001
    signal: Magic values in assertions without explanation
    evidence_pattern: expect\(.*\)\.toBe\(42\)|assert.*== 1337
    remediation: Use named constants or add comments explaining expected values
  - id: TREAD-MED-002
    signal: Deeply nested test setup
    evidence_pattern: beforeEach.*beforeEach|setUp.*setUp
    remediation: Flatten setup hierarchy or use test factories
  - id: TREAD-MED-003
    signal: Complex assertion chains without explanation
    evidence_pattern: \.to\.have\.property.*\.that\.includes.*\.with
    remediation: Break into multiple assertions with comments, or use custom matchers
  low:
  - id: TREAD-LOW-001
    signal: Inconsistent test structure
    evidence_pattern: Mixed arrange-act-assert patterns
    remediation: Standardize on consistent test structure patterns
  - id: TREAD-LOW-002
    signal: Missing test documentation
    evidence_pattern: No comments explaining complex test scenarios
    remediation: Add JSDoc/docstring comments for non-obvious test cases
  positive:
  - id: TREAD-POS-001
    signal: Descriptive test names following convention
    evidence_pattern: should|when|given|returns|throws
  - id: TREAD-POS-002
    signal: Clear arrange-act-assert structure
    evidence_pattern: // Arrange.*// Act.*// Assert
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Analyze Test File Structure
    description: |
      Review the organization and structure of test files.
    duration_estimate: 10 min
    commands:
    - purpose: Find test files
      command: |
        find . -name "*.test.js" -o -name "*.spec.ts" -o -name "test_*.py" -o -name "*_test.go" | \
        grep -v node_modules | head -30
    - purpose: Check test file sizes
      command: |
        find . \( -name "*.test.js" -o -name "*.spec.ts" -o -name "test_*.py" \) -not -path "*/node_modules/*" | \
        xargs wc -l 2>/dev/null | sort -rn | head -20
    expected_findings:
    - Test file inventory
    - Oversized test files
  - id: '2'
    name: Check Test Naming Conventions
    description: |
      Evaluate whether test names are descriptive and follow conventions.
    duration_estimate: 15 min
    commands:
    - purpose: Find non-descriptive test names
      command: |
        grep -rn "it('\|test('\|def test_" --include="*.test.js" --include="*.spec.ts" --include="test_*.py" . 2>/dev/null | \
        grep -v node_modules | head -50
    - purpose: Find good naming patterns
      command: |
        grep -rn "it('should\|test('.*when\|def test_.*_given_\|def test_.*_should_" . 2>/dev/null | \
        grep -v node_modules | wc -l
    expected_findings:
    - Test naming pattern distribution
    - Non-descriptive test locations
  - id: '3'
    name: Identify Disabled Tests
    description: |
      Find tests that have been skipped or disabled.
    duration_estimate: 10 min
    commands:
    - purpose: Find skipped tests
      command: |
        grep -rn "it\.skip\|xit\|xdescribe\|@skip\|@pytest\.mark\.skip" \
          --include="*.test.js" --include="*.spec.ts" --include="test_*.py" . 2>/dev/null | head -30
    expected_findings:
    - Disabled test inventory
    - Skip reasons present/absent
  - id: '4'
    name: Check Assertion Quality
    description: |
      Evaluate the clarity and specificity of assertions.
    duration_estimate: 10 min
    commands:
    - purpose: Find vague boolean assertions
      command: |
        grep -rn "expect.*toBe(true)\|expect.*toBe(false)\|assert.*True\|assert.*False" \
          --include="*.test.js" --include="*.spec.ts" --include="test_*.py" . 2>/dev/null | head -30
    expected_findings:
    - Vague assertion locations
    - Assertion quality assessment
output:
  deliverables:
  - type: finding_list
    format: structured
    content:
    - readability_issues
    - naming_violations
    - disabled_tests
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Naming Convention Analysis
    - Structure Recommendations
    - Priority Improvements
  confidence_guidance:
    high: Automated pattern detection with clear remediation
    medium: Pattern match requiring context review
    low: Subjective readability assessment
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: xunit-patterns
      priority: recommended
profiles:
  membership:
    quick:
      included: false
      reason: Readability analysis requires careful review
    full:
      included: true
      priority: 2
    quality:
      included: true
      priority: 1
closeout_checklist:
- id: tread-001
  item: Test naming conventions evaluated
  level: BLOCKING
  verification: Test name patterns analyzed
  expected: Naming convention report
- id: tread-002
  item: No tests without assertions
  level: CRITICAL
  verification: All tests have meaningful assertions
  expected: Zero empty tests
- id: tread-003
  item: Disabled tests documented
  level: WARNING
  verification: All skipped tests have explanations
  expected: No unexplained skips
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: ISO 25010
    controls:
    - Maintainability
    - Testability
relationships:
  commonly_combined:
  - code-quality.test-code-quality.test-naming
  - code-quality.test-code-quality.arrange-act-assert-pattern
  - code-quality.maintainability.code-readability
