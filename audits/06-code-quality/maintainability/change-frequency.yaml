audit:
  id: code-quality.maintainability.change-frequency
  name: Change Frequency Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: code-quality
  category_number: 6
  subcategory: maintainability
  tier: expert
  estimated_duration: 30 minutes
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: full
  severity: medium
  scope: repository
  default_profiles:
  - full
  - quality
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Analyzes how frequently different files and modules are modified over time.
    Identifies code areas with high change rates that may indicate instability,
    unclear requirements, or design issues. Tracks change patterns to predict
    maintenance hotspots.
  why_it_matters: |
    Frequently changing code is more likely to contain bugs and requires more
    testing attention. Files changed often should be of high quality and well-
    tested. Research shows files in the top 20% of change frequency contain
    50% of bugs. Understanding change patterns helps allocate testing and
    review resources effectively.
  when_to_run:
  - Sprint planning
  - Test prioritization
  - Refactoring planning
  - Technical debt assessments
prerequisites:
  required_artifacts:
  - type: git_history
    description: Git repository with commit history
  access_requirements:
  - Read access to git repository
discovery:
  file_patterns:
  - glob: '**/*.{js,ts,py,java,go,rb,cs}'
    purpose: Source code files
knowledge_sources:
  guides:
  - id: your-code-change
    name: Your Code as a Crime Scene
    url: https://pragprog.com/titles/atcrime/your-code-as-a-crime-scene/
    offline_cache: true
    priority: required
  - id: clean-code
    name: Robert C. Martin - Clean Code
    url: https://www.oreilly.com/library/view/clean-code-a/9780136083238/
    offline_cache: false
  - id: pragmatic-programmer
    name: The Pragmatic Programmer
    url: https://pragprog.com/titles/tpp20/the-pragmatic-programmer-20th-anniversary-edition/
    offline_cache: false
tooling:
  scripts:
  - id: change-frequency
    language: bash
    purpose: Calculate file change frequency
    source: inline
    code: |
      git log --format= --name-only --since="90 days ago" | \
        grep -E "\.(js|ts|py|java|go)$" | sort | uniq -c | sort -rn | head -20
signals:
  critical:
  - id: CF-CRIT-001
    signal: Files changed more than once per day average
    evidence_pattern: change_frequency > 1/day
    explanation: |
      Extremely high change frequency indicates significant churn
      that may signal unclear requirements, poor design, or
      ongoing production issues.
    remediation: Investigate root cause and stabilize design
  high:
  - id: CF-HIGH-001
    signal: High-frequency files with low test coverage
    evidence_pattern: high_churn && low_coverage
    explanation: |
      Frequently changing code with poor test coverage is a
      significant bug risk.
    remediation: Prioritize adding tests to high-churn files
  - id: CF-HIGH-002
    signal: Core modules in top 10% of change frequency
    evidence_pattern: core_module && high_frequency
    explanation: |
      Core infrastructure changing frequently suggests architectural
      instability that affects the entire system.
    remediation: Stabilize core interfaces and designs
  medium:
  - id: CF-MED-001
    signal: Change frequency increasing over time
    evidence_pattern: frequency_trend_increasing
    remediation: Monitor and investigate causes of increasing churn
  low:
  - id: CF-LOW-001
    signal: No change frequency analysis
    evidence_pattern: no_frequency_tracking
    remediation: Add change frequency to development metrics
  positive:
  - id: CF-POS-001
    signal: Stable core with change isolated to features
    evidence_pattern: core_stable && feature_churn
  - id: CF-POS-002
    signal: Decreasing change frequency over time
    evidence_pattern: frequency_trend_decreasing
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Extract Change History
    description: |
      Query git history to count changes per file over the
      analysis period.
    duration_estimate: 10 min
    commands:
    - purpose: Get file change counts
      command: |
        git log --format= --name-only --since="90 days ago" | \
          sort | uniq -c | sort -rn | head -30
    - purpose: Get change counts by author
      command: |
        git shortlog -sn --since="90 days ago"
    expected_findings:
    - Per-file change counts
    - Change distribution
  - id: '2'
    name: Identify High-Churn Files
    description: |
      Find files with the highest change frequency and
      calculate statistical measures.
    duration_estimate: 10 min
    expected_findings:
    - Top 20 most changed files
    - Average and median change counts
  - id: '3'
    name: Analyze Change Patterns
    description: |
      Look for patterns in when and why files change,
      including correlation with bugs or features.
    duration_estimate: 10 min
    expected_findings:
    - Change pattern analysis
    - Correlation with issue types
output:
  deliverables:
  - type: metrics
    format: structured
    content:
    - file_change_counts
    - avg_change_frequency
    - high_churn_files
    - change_trend
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Change Frequency Analysis
    - Pattern Insights
    - Recommendations
  confidence_guidance:
    high: 90+ days of commit history
    medium: 30-90 days of history
    low: Less than 30 days
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: your-code-change
      priority: required
profiles:
  membership:
    quick:
      included: true
      priority: 3
    full:
      included: true
      priority: 2
    quality:
      included: true
      priority: 1
closeout_checklist:
- id: cf-001
  item: Change frequency calculated
  level: BLOCKING
  verification: Per-file counts available
  expected: Frequency metrics generated
- id: cf-002
  item: High-churn files identified
  level: WARNING
  verification: Top changers listed
  expected: Priority attention areas
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: DORA Metrics
    controls:
    - Change Failure Rate
relationships:
  commonly_combined:
  - code-quality.maintainability.code-churn
  - code-quality.maintainability.hotspot-analysis
  - code-quality.testing.test-coverage
