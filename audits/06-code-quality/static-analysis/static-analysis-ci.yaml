audit:
  id: code-quality.static-analysis.static-analysis-ci
  name: Static Analysis CI
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: code-quality
  category_number: 6
  subcategory: static-analysis
  tier: expert
  estimated_duration: 1-2 hours  # median: 1h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: 'yes'
  severity: high
  scope: config
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the integration of static analysis tools into the CI/CD
    pipeline. Checks that linting, type checking, security scanning, and
    other quality gates are properly configured, run on every PR, and
    block merges when violations are detected.
  why_it_matters: |
    Static analysis is only effective if consistently enforced. Without
    CI integration, quality gates become optional suggestions that are
    easily bypassed. Proper CI setup ensures every code change is
    validated before merge.
  when_to_run:
  - Initial project setup review
  - After CI/CD pipeline changes
  - When adding new analysis tools
  - Periodic infrastructure review
prerequisites:
  required_artifacts:
  - type: ci_config
    description: CI/CD configuration files (.github/workflows, .gitlab-ci.yml, etc.)
  access_requirements:
  - Read access to CI/CD configuration
  - Understanding of project's quality requirements
discovery:
  file_patterns:
  - glob: .github/workflows/*.yml
    purpose: GitHub Actions workflows
  - glob: .github/workflows/*.yaml
    purpose: GitHub Actions workflows
  - glob: .gitlab-ci.yml
    purpose: GitLab CI configuration
  - glob: Jenkinsfile
    purpose: Jenkins pipeline
  - glob: .circleci/config.yml
    purpose: CircleCI configuration
  - glob: azure-pipelines.yml
    purpose: Azure DevOps pipeline
  - glob: .travis.yml
    purpose: Travis CI configuration
  code_patterns:
  - pattern: eslint|pylint|rubocop|golangci
    type: keyword
    scope: config
    purpose: Identify linting steps
  - pattern: tsc|mypy|pyright|typecheck
    type: keyword
    scope: config
    purpose: Identify type checking steps
  - pattern: semgrep|bandit|snyk|security
    type: keyword
    scope: config
    purpose: Identify security scanning steps
knowledge_sources:
  guides:
  - id: github-actions
    name: GitHub Actions Documentation
    url: https://docs.github.com/en/actions
    offline_cache: true
  - id: gitlab-ci
    name: GitLab CI/CD Documentation
    url: https://docs.gitlab.com/ee/ci/
    offline_cache: true
  - id: nist-800-218
    name: NIST SP 800-218 - Secure Software Development Framework
    url: https://csrc.nist.gov/publications/detail/sp/800-218/final
    offline_cache: false
tooling:
  static_analysis:
  - tool: actionlint
    purpose: GitHub Actions workflow linting
    offline_capable: true
  scripts:
  - id: ci-analysis-check
    language: bash
    purpose: Check for static analysis in CI
    source: inline
    code: |
      #!/bin/bash
      echo "Checking for static analysis steps in CI..."
      grep -rn 'lint\|eslint\|pylint\|tsc\|mypy\|security\|semgrep' .github/workflows/ 2>/dev/null
signals:
  critical:
  - id: SACI-CRIT-001
    signal: No static analysis in CI pipeline
    evidence_pattern: Absence of lint/type/security steps in CI config
    explanation: |
      Without CI-enforced static analysis, quality gates are
      optional and violations will continuously enter the codebase.
    remediation: Add linting, type checking, and security scanning to CI workflow
  high:
  - id: SACI-HIGH-001
    signal: Static analysis runs but does not block PRs
    evidence_pattern: 'continue-on-error: true or allow_failure: true'
    explanation: |
      Non-blocking analysis is easily ignored and provides
      little practical quality enforcement.
    remediation: Configure analysis steps to fail the build on violations
  - id: SACI-HIGH-002
    signal: Security scanning missing from CI
    evidence_pattern: No security scan steps in workflow
    explanation: |
      Without automated security scanning, vulnerabilities
      can be merged without detection.
    remediation: Add security scanning (semgrep, bandit, etc.) to CI
  medium:
  - id: SACI-MED-001
    signal: Inconsistent analysis across branches
    remediation: Apply same analysis to all branches, especially main/master
  - id: SACI-MED-002
    signal: Analysis results not cached for performance
    remediation: Enable caching for node_modules, pip cache, etc.
  low:
  - id: SACI-LOW-001
    signal: Analysis job names unclear
  positive:
  - id: SACI-POS-001
    signal: Comprehensive static analysis enforced in CI
  - id: SACI-POS-002
    signal: All PRs require passing analysis before merge
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Identify CI configuration
    description: |
      Locate CI/CD configuration files to understand which
      platform is in use.
    duration_estimate: 5 min
    commands:
    - purpose: Find CI config files
      command: ls -la .github/workflows/ .gitlab-ci.yml Jenkinsfile .circleci/ 2>/dev/null
    expected_findings:
    - CI platform in use
    - Configuration file locations
  - id: '2'
    name: Review linting configuration
    description: |
      Check that linting tools are configured to run in CI
      and block on failures.
    duration_estimate: 15 min
    commands:
    - purpose: Find linting steps
      command: grep -rn 'lint\|eslint\|pylint\|rubocop' .github/workflows/ 2>/dev/null
    expected_findings:
    - Linting steps present
    - Blocking configuration
  - id: '3'
    name: Review type checking configuration
    description: |
      Verify type checking is included in the CI pipeline
      for typed languages.
    duration_estimate: 10 min
    commands:
    - purpose: Find type checking steps
      command: grep -rn 'tsc\|typecheck\|mypy\|pyright' .github/workflows/ 2>/dev/null
    expected_findings:
    - Type checking steps
    - Configuration details
  - id: '4'
    name: Review security scanning configuration
    description: |
      Check for security scanning tools in the CI pipeline.
    duration_estimate: 10 min
    commands:
    - purpose: Find security scanning steps
      command: grep -rn 'security\|semgrep\|bandit\|snyk\|codeql' .github/workflows/ 2>/dev/null
    expected_findings:
    - Security scanning present
    - Scan configuration
  - id: '5'
    name: Verify blocking behavior
    description: |
      Ensure analysis failures actually block PR merges
      rather than being advisory.
    duration_estimate: 15 min
    commands:
    - purpose: Check for non-blocking config
      command: grep -rn 'continue-on-error\|allow_failure' .github/workflows/ 2>/dev/null
    expected_findings:
    - Blocking vs advisory settings
    - Branch protection rules
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - CI Analysis Coverage
    - Configuration Review
    - Recommendations
  - type: metrics
    format: table
    fields:
    - linting_enabled
    - type_checking_enabled
    - security_scanning_enabled
    - blocking_on_failure
  confidence_guidance:
    high: CI configuration directly examined and verified
    medium: Configuration present but behavior unclear
    low: Inferred from partial configuration
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: github-actions
      priority: recommended
profiles:
  membership:
    quick:
      included: true
      priority: 2
    full:
      included: true
      priority: 1
closeout_checklist:
- id: static-analysis-ci-001
  item: Linting configured in CI
  level: BLOCKING
  verification: grep -rq 'lint\|eslint\|pylint' .github/workflows/ && echo PASS || echo FAIL
  expected: PASS
- id: static-analysis-ci-002
  item: Security scanning configured in CI
  level: BLOCKING
  verification: grep -rq 'security\|semgrep\|bandit\|snyk' .github/workflows/ && echo PASS || echo FAIL
  expected: PASS
- id: static-analysis-ci-003
  item: Analysis steps block on failure
  level: WARNING
  verification: 'grep -rq ''continue-on-error: true'' .github/workflows/ && echo FAIL || echo PASS'
  expected: PASS
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: ISO 25010
    controls:
    - Maintainability
  - framework: SOC 2
    controls:
    - CC8.1
relationships:
  commonly_combined:
  - code-quality.static-analysis.linting-coverage
  - code-quality.static-analysis.security-scanning
  - code-quality.testing.unit-test-coverage
