audit:
  id: code-quality.static-analysis.code-style-consistency
  name: Code Style Consistency
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: code-quality
  category_number: 6
  subcategory: static-analysis
  tier: expert
  estimated_duration: 1-2 hours  # median: 1h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: 'yes'
  severity: low
  scope: codebase
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates code formatting and style consistency across the codebase.
    Checks for consistent indentation, naming conventions, import ordering,
    line lengths, and adherence to language-specific style guides.
  why_it_matters: |
    Consistent code style reduces cognitive load during code review,
    makes the codebase easier to navigate, and prevents style debates.
    Inconsistent formatting creates noise in diffs and can mask actual
    logic changes.
  when_to_run:
  - Initial codebase assessment
  - After onboarding new team members
  - When introducing formatting tools
  - Periodic quality checks
prerequisites:
  required_artifacts:
  - type: source_code
    description: Complete source code repository
  - type: configuration
    description: Style configuration files (prettier, black, etc.)
  access_requirements:
  - Read access to source code
discovery:
  file_patterns:
  - glob: '**/.prettierrc*'
    purpose: Prettier configuration
  - glob: '**/.editorconfig'
    purpose: Editor configuration
  - glob: '**/pyproject.toml'
    purpose: Python black/isort configuration
  - glob: '**/.eslintrc*'
    purpose: ESLint style rules
  - glob: '**/.rubocop.yml'
    purpose: RuboCop style configuration
  - glob: '**/.clang-format'
    purpose: C/C++ formatting
knowledge_sources:
  guides:
  - id: prettier-docs
    name: Prettier Documentation
    url: https://prettier.io/docs/en/index.html
    offline_cache: true
  - id: pep8
    name: PEP 8 - Style Guide for Python Code
    url: https://www.python.org/dev/peps/pep-0008/
    offline_cache: true
  - id: google-style
    name: Google Style Guides
    url: https://google.github.io/styleguide/
    offline_cache: true
  - id: nist-800-218
    name: NIST SP 800-218 - Secure Software Development Framework
    url: https://csrc.nist.gov/publications/detail/sp/800-218/final
    offline_cache: false
tooling:
  static_analysis:
  - tool: prettier
    purpose: JavaScript/TypeScript/CSS formatting
    offline_capable: true
  - tool: black
    purpose: Python code formatting
    offline_capable: true
  - tool: isort
    purpose: Python import sorting
    offline_capable: true
  - tool: gofmt
    purpose: Go code formatting
    offline_capable: true
  - tool: rubocop
    purpose: Ruby style checking
    offline_capable: true
  scripts:
  - id: style-check
    language: bash
    purpose: Check formatting violations
    source: inline
    code: |
      #!/bin/bash
      npx prettier --check . 2>/dev/null
      black --check . 2>/dev/null
signals:
  critical:
  - id: STYLE-CRIT-001
    signal: No code formatting tools configured
    evidence_pattern: Absence of formatting configuration files
    explanation: |
      Without formatting tools, style will inevitably diverge
      and create ongoing friction in code reviews.
    remediation: Configure Prettier, Black, or appropriate formatter for each language
  high:
  - id: STYLE-HIGH-001
    signal: Formatting not enforced in CI/CD
    evidence_pattern: No format check in CI configuration
    explanation: |
      Without CI enforcement, formatting violations will
      continuously enter the codebase.
    remediation: Add format checking as CI step that blocks on violations
  medium:
  - id: STYLE-MED-001
    signal: Significant formatting violations present
    remediation: Run formatter across codebase; commit formatting changes
  - id: STYLE-MED-002
    signal: Inconsistent naming conventions
    remediation: Document naming conventions; enable linter rules to enforce
  low:
  - id: STYLE-LOW-001
    signal: Minor style inconsistencies in older code
  positive:
  - id: STYLE-POS-001
    signal: Formatting tools configured and enforced
  - id: STYLE-POS-002
    signal: No formatting violations detected
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Identify formatting configuration
    description: |
      Locate formatting tool configuration files to understand
      what style rules are defined.
    duration_estimate: 10 min
    commands:
    - purpose: Find formatting config files
      command: find . -name '.prettierrc*' -o -name '.editorconfig' -o -name '.clang-format' 2>/dev/null
    expected_findings:
    - Formatting tools in use
    - Configuration details
  - id: '2'
    name: Check for formatting violations
    description: |
      Run formatters in check mode to identify files that
      don't match the configured style.
    duration_estimate: 15 min
    commands:
    - purpose: Check Prettier formatting
      command: npx prettier --check . 2>&1 | head -30
    - purpose: Check Black formatting
      command: black --check . 2>&1 | head -30
    expected_findings:
    - Files with formatting violations
    - Violation counts
  - id: '3'
    name: Analyze naming conventions
    description: |
      Review code for consistent naming conventions across
      functions, classes, and variables.
    duration_estimate: 15 min
    expected_findings:
    - Naming convention patterns
    - Inconsistencies between modules
  - id: '4'
    name: Verify CI/CD formatting checks
    description: |
      Ensure formatting is checked in the CI/CD pipeline
      to prevent violations from being merged.
    duration_estimate: 10 min
    commands:
    - purpose: Check for formatting in CI
      command: grep -rn 'prettier\|black\|format' .github/workflows/ 2>/dev/null
    expected_findings:
    - CI formatting configuration
    - Blocking vs advisory behavior
  - id: '5'
    name: Review EditorConfig consistency
    description: |
      Check that EditorConfig or similar is configured for
      consistent editor behavior across the team.
    duration_estimate: 10 min
    commands:
    - purpose: Review EditorConfig
      command: cat .editorconfig 2>/dev/null
    expected_findings:
    - EditorConfig settings
    - Consistency with formatter config
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Formatting Tool Review
    - Violation Summary
    - Recommendations
  - type: metrics
    format: table
    fields:
    - files_with_violations
    - formatting_tools_configured
    - ci_enforcement_enabled
  confidence_guidance:
    high: Formatters executed, violations counted programmatically
    medium: Partial formatting check, some languages not covered
    low: Manual style review without tooling
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: prettier-docs
      priority: recommended
profiles:
  membership:
    quick:
      included: true
      priority: 3
    full:
      included: true
      priority: 2
closeout_checklist:
- id: code-style-001
  item: Formatting tool configured
  level: BLOCKING
  verification: test -f .prettierrc -o -f .prettierrc.json -o -f pyproject.toml && echo PASS || echo FAIL
  expected: PASS
- id: code-style-002
  item: No formatting violations
  level: WARNING
  verification: npx prettier --check . 2>&1 | grep -c 'error' | xargs test 0 -eq && echo PASS || echo
    FAIL
  expected: PASS
- id: code-style-003
  item: Formatting enforced in CI
  level: BLOCKING
  verification: grep -rq 'prettier\|black\|format' .github/workflows/ && echo PASS || echo FAIL
  expected: PASS
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: ISO 25010
    controls:
    - Maintainability
relationships:
  commonly_combined:
  - code-quality.static-analysis.linting-coverage
  - code-quality.static-analysis.static-analysis-ci
