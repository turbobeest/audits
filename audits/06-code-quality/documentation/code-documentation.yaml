audit:
  id: code-quality.documentation.code-documentation
  name: Code Documentation Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: code-quality
  category_number: 6
  subcategory: documentation
  tier: expert
  estimated_duration: 1.5 hours
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: codebase
  default_profiles:
  - full
  - maintenance
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates inline code documentation including comments, docstrings, JSDoc,
    JavaDoc, and similar documentation within source files. Assesses coverage
    of public APIs, explanation of complex logic, and balance between
    self-documenting code and necessary commentary.
  why_it_matters: |
    Code documentation enables maintainability and knowledge transfer. While
    clean code should be self-documenting for the "what," documentation explains
    the "why" behind decisions. Robert Martin notes that comments should explain
    intent, not duplicate code. Proper documentation reduces onboarding time
    and prevents knowledge silos when team members change.
  when_to_run:
  - Code reviews
  - Onboarding preparation
  - Maintenance planning
  - Library releases
prerequisites:
  required_artifacts:
  - type: source_code
    description: Complete codebase access
  access_requirements:
  - Read access to source code
discovery:
  code_patterns:
  - pattern: /\*\*|'''|"""|\/\/\/
    type: regex
    scope: source
    purpose: Find documentation blocks
  - pattern: '@param|@returns|@throws|:param|:return'
    type: regex
    scope: source
    purpose: Find parameter documentation
  - pattern: '@example|@see|@deprecated'
    type: regex
    scope: source
    purpose: Find additional doc tags
  file_patterns:
  - glob: '**/*.js'
    purpose: JavaScript files
  - glob: '**/*.ts'
    purpose: TypeScript files
  - glob: '**/*.py'
    purpose: Python files
  - glob: '**/*.java'
    purpose: Java files
knowledge_sources:
  specifications:
  - id: jsdoc
    name: JSDoc Documentation
    url: https://jsdoc.app/
    offline_cache: true
    priority: recommended
  guides:
  - id: clean-code
    name: 'Clean Code: Comments'
    url: https://www.oreilly.com/library/view/clean-code-a/9780136083238/
    offline_cache: false
  - id: pragmatic-programmer
    name: The Pragmatic Programmer
    url: https://pragprog.com/titles/tpp20/the-pragmatic-programmer-20th-anniversary-edition/
    offline_cache: false
tooling:
  static_analysis:
  - tool: jsdoc
    purpose: JSDoc coverage analysis
    offline_capable: true
  - tool: pydocstyle
    purpose: Python docstring linting
    offline_capable: true
  - tool: javadoc
    purpose: JavaDoc generation
    offline_capable: true
  scripts:
  - id: doc-coverage
    language: bash
    purpose: Estimate documentation coverage
    source: inline
    code: |
      # Count documented vs undocumented functions
      grep -rn --include="*.{js,ts}" -E "^\s*(export\s+)?(function|const\s+\w+\s*=)" . | wc -l
      grep -rn --include="*.{js,ts}" -B1 -E "^\s*(export\s+)?(function|const\s+\w+\s*=)" . | grep "/\*\*" | wc -l
signals:
  critical:
  - id: CODE-DOC-CRIT-001
    signal: Public API without documentation
    evidence_pattern: exported functions without docstrings
    explanation: |
      Public API functions lack documentation, making library
      usage difficult and error-prone for consumers.
    remediation: Add comprehensive documentation for all public APIs
  high:
  - id: CODE-DOC-HIGH-001
    signal: Complex logic without explanation
    evidence_pattern: complex code without comments
    explanation: |
      Complex algorithms or business logic lack explanatory
      comments, making maintenance difficult.
    remediation: Add comments explaining intent and reasoning for complex code
  - id: CODE-DOC-HIGH-002
    signal: Missing parameter documentation
    evidence_pattern: functions without @param tags
    explanation: |
      Function parameters lack type and purpose documentation,
      requiring code reading to understand usage.
    remediation: Document all parameters with types and descriptions
  medium:
  - id: CODE-DOC-MED-001
    signal: Outdated documentation
    evidence_pattern: docs don't match implementation
    remediation: Update documentation to match current implementation
  - id: CODE-DOC-MED-002
    signal: Missing return value documentation
    evidence_pattern: functions without @returns tags
    remediation: Document return values with types and descriptions
  low:
  - id: CODE-DOC-LOW-001
    signal: Inconsistent documentation style
    evidence_pattern: mixed doc styles
    remediation: Standardize documentation style across codebase
  positive:
  - id: CODE-DOC-POS-001
    signal: Comprehensive API documentation
    evidence_pattern: all public functions documented
  - id: CODE-DOC-POS-002
    signal: Usage examples in docs
    evidence_pattern: '@example tags present'
  - id: CODE-DOC-POS-003
    signal: Intent-focused comments
    evidence_pattern: why-focused comments
procedure:
  context:
    cognitive_mode: thorough
    ensemble_role: documentation-auditor
  steps:
  - id: '1'
    name: Assess Documentation Coverage
    description: |
      Measure documentation coverage across
      the codebase.
    duration_estimate: 20 min
    commands:
    - purpose: Count functions
      command: |
        grep -rn --include="*.{js,ts,py,java,go}" \
          -E "^\s*(export\s+)?(function|def|func|public)" . | wc -l
    - purpose: Count documented functions
      command: |
        grep -rn --include="*.{js,ts}" -B2 "^\s*function\|^\s*export\s+function" . | \
          grep "/\*\*\|///" | wc -l
    expected_findings:
    - Coverage percentage
    - Undocumented locations
  - id: '2'
    name: Review Public API Documentation
    description: |
      Examine documentation quality for
      exported/public interfaces.
    duration_estimate: 25 min
    commands:
    - purpose: Find exported functions
      command: |
        grep -rn --include="*.{js,ts}" "^\s*export\s+" . | head -30
    - purpose: Check for JSDoc
      command: |
        grep -rn --include="*.{js,ts}" -B3 "^\s*export\s+function" . | \
          grep -E "/\*\*|@param|@returns" | head -20
    expected_findings:
    - Public API coverage
    - Documentation quality
  - id: '3'
    name: Check Parameter Documentation
    description: |
      Verify function parameters are
      properly documented.
    duration_estimate: 15 min
    commands:
    - purpose: Find @param tags
      command: |
        grep -rn --include="*.{js,ts,java}" "@param" . | wc -l
    - purpose: Find undocumented params
      command: |
        grep -rn --include="*.{js,ts}" -E "function\s+\w+\s*\([^)]+\)" . | \
          head -20
    expected_findings:
    - Parameter coverage
    - Type documentation
  - id: '4'
    name: Review Complex Code Comments
    description: |
      Examine comments in complex code
      sections for quality.
    duration_estimate: 20 min
    commands:
    - purpose: Find complex functions
      command: |
        # Look for long functions or nested logic
        grep -rn --include="*.{js,ts,py}" -E "(if.*if|for.*for|while.*while)" . | head -20
    - purpose: Check for explanatory comments
      command: |
        grep -rn --include="*.{js,ts,py}" -E "//.*because|//.*note|#.*reason" . | head -20
    expected_findings:
    - Complex code coverage
    - Intent documentation
  - id: '5'
    name: Evaluate Documentation Quality
    description: |
      Assess overall quality and usefulness
      of existing documentation.
    duration_estimate: 10 min
    commands:
    - purpose: Find usage examples
      command: |
        grep -rn --include="*.{js,ts,java}" "@example" . | wc -l
    - purpose: Check for deprecation docs
      command: |
        grep -rn --include="*.{js,ts,java,py}" "@deprecated\|deprecated" . | wc -l
    expected_findings:
    - Example coverage
    - Deprecation documentation
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Coverage Analysis
    - Quality Assessment
    - Gap Analysis
    - Recommendations
  confidence_guidance:
    high: Comprehensive documentation with examples
    medium: Partial coverage with quality docs
    low: Minimal or outdated documentation
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: jsdoc
      priority: recommended
profiles:
  membership:
    quick:
      included: true
      priority: 3
    full:
      included: true
      priority: 2
    maintenance:
      included: true
      priority: 1
closeout_checklist:
- id: code-doc-001
  item: Public APIs documented
  level: REQUIRED
  verification: |
    grep -rn --include="*.{js,ts}" -B2 "export\s+function" . | grep "/\*\*" | wc -l
  expected: Coverage above 80%
- id: code-doc-002
  item: Parameters documented
  level: WARNING
  verification: |
    grep -rn --include="*.{js,ts}" "@param" . | wc -l
  expected: Matches parameter count
- id: code-doc-003
  item: Complex logic explained
  level: WARNING
  verification: Manual review of complex sections
  agent_alternative: Use static analysis tools to generate metrics; check for existing code review comments
  expected: Intent documented
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: ISO 25010
    controls:
    - Maintainability
relationships:
  commonly_combined:
  - code-quality.documentation.api-documentation
  - code-quality.maintainability.code-complexity
  - code-quality.documentation.documentation-freshness
