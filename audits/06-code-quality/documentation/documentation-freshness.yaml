audit:
  id: code-quality.documentation.documentation-freshness
  name: Documentation Freshness Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: code-quality
  category_number: 6
  subcategory: documentation
  tier: expert
  estimated_duration: 1.5 hours
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: documentation
  default_profiles:
  - full
  - maintenance
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates whether documentation is up to date with the current codebase.
    Identifies stale documentation that references outdated code, removed
    features, or deprecated APIs. Reviews documentation update processes
    and automation for keeping docs in sync.
  why_it_matters: |
    Stale documentation is often worse than no documentation because it
    actively misleads users and developers. When documentation diverges from
    implementation, users lose trust and may ignore all documentation.
    Keeping documentation fresh requires processes and automation to ensure
    updates accompany code changes.
  when_to_run:
  - Quarterly documentation reviews
  - After major releases
  - Before onboarding new team members
  - When documentation issues reported
prerequisites:
  required_artifacts:
  - type: documentation
    description: All documentation files
  - type: source_code
    description: Current codebase
  - type: git_history
    description: Version control history
  access_requirements:
  - Read access to documentation
  - Read access to source code
  - Access to git history
discovery:
  code_patterns:
  - pattern: deprecated|removed|obsolete
    type: regex
    scope: documentation
    purpose: Find potentially stale references
  file_patterns:
  - glob: '**/docs/**/*.md'
    purpose: Documentation files
  - glob: '**/README.md'
    purpose: README files
  - glob: '**/*.md'
    purpose: All markdown files
knowledge_sources:
  specifications:
  - id: docs-as-code
    name: Docs as Code
    url: https://www.writethedocs.org/guide/docs-as-code/
    offline_cache: true
    priority: recommended
  guides:
  - id: doc-maintenance
    name: Documentation Maintenance
    url: https://www.writethedocs.org/guide/
    offline_cache: true
  - id: clean-code
    name: Robert C. Martin - Clean Code
    url: https://www.oreilly.com/library/view/clean-code-a/9780136083238/
    offline_cache: false
  - id: pragmatic-programmer
    name: The Pragmatic Programmer
    url: https://pragprog.com/titles/tpp20/the-pragmatic-programmer-20th-anniversary-edition/
    offline_cache: false
tooling:
  static_analysis:
  - tool: vale
    purpose: Documentation linting
    offline_capable: true
  - tool: markdown-link-check
    purpose: Link validation
    offline_capable: false
  scripts:
  - id: freshness-check
    language: bash
    purpose: Check documentation freshness
    source: inline
    code: |
      # Find recently modified docs
      find . -name "*.md" -mtime -30 2>/dev/null | wc -l
      # Find old docs
      find . -name "*.md" -mtime +180 2>/dev/null | wc -l
signals:
  critical:
  - id: FRESH-CRIT-001
    signal: Documentation references removed code
    evidence_pattern: docs reference non-existent files/functions
    explanation: |
      Documentation references code, APIs, or features that
      no longer exist, actively misleading users.
    remediation: Update or remove references to deleted code
  - id: FRESH-CRIT-002
    signal: API documentation contradicts implementation
    evidence_pattern: documented API differs from actual
    explanation: |
      API documentation describes different behavior than
      current implementation, causing integration failures.
    remediation: Sync API documentation with implementation
  high:
  - id: FRESH-HIGH-001
    signal: No docs updated in 6+ months
    evidence_pattern: all docs older than 6 months
    explanation: |
      No documentation has been updated recently despite
      active code changes, indicating drift.
    remediation: Review and update all documentation
  - id: FRESH-HIGH-002
    signal: Broken documentation links
    evidence_pattern: links to non-existent resources
    explanation: |
      Documentation contains broken internal or external
      links that frustrate users.
    remediation: Fix or remove broken links; add link checking to CI
  medium:
  - id: FRESH-MED-001
    signal: Screenshots outdated
    evidence_pattern: UI screenshots don't match current UI
    remediation: Update screenshots to reflect current state
  - id: FRESH-MED-002
    signal: Version numbers outdated
    evidence_pattern: old version numbers in docs
    remediation: Update version references to current versions
  low:
  - id: FRESH-LOW-001
    signal: No automated freshness checks
    evidence_pattern: no doc validation in CI
    remediation: Add documentation validation to CI pipeline
  positive:
  - id: FRESH-POS-001
    signal: Documentation updated with code
    evidence_pattern: docs commits accompany code changes
  - id: FRESH-POS-002
    signal: Automated link checking
    evidence_pattern: link validation in CI
  - id: FRESH-POS-003
    signal: Generated documentation
    evidence_pattern: docs generated from code
procedure:
  context:
    cognitive_mode: investigative
    ensemble_role: freshness-auditor
  steps:
  - id: '1'
    name: Analyze Documentation Age
    description: |
      Examine modification dates of all
      documentation files.
    duration_estimate: 20 min
    commands:
    - purpose: Find old documentation
      command: |
        find . -name "*.md" -mtime +180 2>/dev/null | head -20
    - purpose: Check doc git history
      command: |
        git log --oneline --since="6 months ago" -- "*.md" 2>/dev/null | head -20
    expected_findings:
    - Age distribution
    - Update frequency
  - id: '2'
    name: Check Code-Doc Correlation
    description: |
      Verify documentation updates accompany
      related code changes.
    duration_estimate: 25 min
    commands:
    - purpose: Find code changes without docs
      command: |
        git log --oneline --since="3 months ago" -- "*.{js,ts,py}" 2>/dev/null | wc -l
    - purpose: Find doc changes
      command: |
        git log --oneline --since="3 months ago" -- "*.md" 2>/dev/null | wc -l
    expected_findings:
    - Code-doc ratio
    - Correlation analysis
  - id: '3'
    name: Validate Documentation Links
    description: |
      Check for broken internal and
      external links.
    duration_estimate: 20 min
    commands:
    - purpose: Find internal links
      command: |
        grep -rn --include="*.md" "\]\(\./" . 2>/dev/null | head -20
    - purpose: Find external links
      command: |
        grep -rn --include="*.md" "](http" . 2>/dev/null | head -20
    expected_findings:
    - Link inventory
    - Potential broken links
  - id: '4'
    name: Check Code References
    description: |
      Verify code examples and references
      match current implementation.
    duration_estimate: 25 min
    commands:
    - purpose: Find code references in docs
      command: |
        grep -rn --include="*.md" '```' . 2>/dev/null | wc -l
    - purpose: Find function references
      command: |
        grep -rn --include="*.md" -E '\`[a-zA-Z_]+\(' . 2>/dev/null | head -20
    expected_findings:
    - Code reference inventory
    - Verification candidates
  - id: '5'
    name: Review Automation
    description: |
      Check for automated documentation
      freshness maintenance.
    duration_estimate: 20 min
    commands:
    - purpose: Check CI for doc validation
      command: |
        grep -r "markdown\|doc\|link" .github/workflows/*.yml 2>/dev/null | head -10
    - purpose: Check for generated docs
      command: |
        find . -name "typedoc*" -o -name "jsdoc*" -o -name "sphinx*" 2>/dev/null
    expected_findings:
    - Automation level
    - Generation tools
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Freshness Assessment
    - Staleness Inventory
    - Automation Review
    - Recommendations
  confidence_guidance:
    high: Docs regularly updated with automation
    medium: Some docs current, some stale
    low: Documentation significantly outdated
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: docs-as-code
      priority: recommended
profiles:
  membership:
    quick:
      included: false
      reason: Requires thorough analysis
    full:
      included: true
      priority: 2
    maintenance:
      included: true
      priority: 1
closeout_checklist:
- id: fresh-001
  item: No stale documentation
  level: WARNING
  verification: |
    find . -name "*.md" -mtime +180 2>/dev/null | wc -l
  expected: Minimal count
- id: fresh-002
  item: No broken links
  level: REQUIRED
  verification: Run link checker
  expected: 0 broken links
- id: fresh-003
  item: Doc validation in CI
  level: WARNING
  verification: |
    grep -r "markdown\|link" .github/workflows/*.yml 2>/dev/null | wc -l
  expected: Greater than 0
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: Docs as Code
    controls:
    - Continuous Documentation
relationships:
  commonly_combined:
  - code-quality.documentation.api-documentation
  - code-quality.documentation.code-documentation
  - code-quality.documentation.architecture-documentation
