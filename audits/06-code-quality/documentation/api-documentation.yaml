audit:
  id: code-quality.documentation.api-documentation
  name: API Documentation Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: code-quality
  category_number: 6
  subcategory: documentation
  tier: expert
  estimated_duration: 2 hours
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: codebase
  default_profiles:
  - full
  - api
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the completeness, accuracy, and usability of API documentation
    including REST APIs, GraphQL schemas, RPC interfaces, and library APIs.
    Reviews endpoint documentation, request/response schemas, authentication
    requirements, error codes, rate limits, and usage examples.
  why_it_matters: |
    API documentation is the primary interface for API consumers. Studies show
    developers spend significant time on documentation, and poor documentation
    leads to integration errors, support burden, and reduced adoption. OpenAPI
    and similar standards enable automation, but quality documentation requires
    complete and accurate content beyond mere schema definition.
  when_to_run:
  - Before API releases
  - After API changes
  - During integration audits
  - Consumer onboarding reviews
prerequisites:
  required_artifacts:
  - type: source_code
    description: API implementation code
  - type: api_spec
    description: OpenAPI/Swagger or GraphQL schema
  - type: documentation
    description: Existing API documentation
  access_requirements:
  - Read access to API code
  - Access to API specifications
  - Access to documentation
discovery:
  code_patterns:
  - pattern: '@api|@route|@endpoint'
    type: regex
    scope: source
    purpose: Find API definitions
  - pattern: swagger|openapi
    type: regex
    scope: source
    purpose: Find OpenAPI references
  - pattern: graphql|typeDefs|schema
    type: regex
    scope: source
    purpose: Find GraphQL definitions
  file_patterns:
  - glob: '**/openapi.yaml'
    purpose: OpenAPI specifications
  - glob: '**/swagger.json'
    purpose: Swagger specifications
  - glob: '**/*.graphql'
    purpose: GraphQL schemas
  - glob: '**/docs/api/**'
    purpose: API documentation
knowledge_sources:
  specifications:
  - id: openapi
    name: OpenAPI Specification 3.1
    url: https://spec.openapis.org/oas/latest.html
    offline_cache: true
    priority: required
  guides:
  - id: api-docs-best
    name: API Documentation Best Practices
    url: https://swagger.io/blog/api-documentation/best-practices-in-api-documentation/
    offline_cache: true
  - id: clean-code
    name: Robert C. Martin - Clean Code
    url: https://www.oreilly.com/library/view/clean-code-a/9780136083238/
    offline_cache: false
  - id: pragmatic-programmer
    name: The Pragmatic Programmer
    url: https://pragprog.com/titles/tpp20/the-pragmatic-programmer-20th-anniversary-edition/
    offline_cache: false
tooling:
  static_analysis:
  - tool: spectral
    purpose: OpenAPI linting
    offline_capable: true
  - tool: redocly
    purpose: API documentation validation
    offline_capable: true
  scripts:
  - id: api-doc-scan
    language: bash
    purpose: Find API documentation
    source: inline
    code: |
      # Find API specs
      find . -name "openapi.*" -o -name "swagger.*" -o -name "*.graphql" 2>/dev/null
signals:
  critical:
  - id: API-DOC-CRIT-001
    signal: No API documentation exists
    evidence_pattern: absence of API docs
    explanation: |
      API has no documentation, making it unusable for
      external consumers and difficult for internal teams.
    remediation: Create comprehensive API documentation with OpenAPI spec
  - id: API-DOC-CRIT-002
    signal: Documentation contradicts implementation
    evidence_pattern: documented behavior differs from actual
    explanation: |
      API documentation describes behavior that differs from
      actual implementation, causing integration failures.
    remediation: Sync documentation with implementation; automate validation
  high:
  - id: API-DOC-HIGH-001
    signal: Missing authentication documentation
    evidence_pattern: auth required but not documented
    explanation: |
      API requires authentication but documentation doesn't
      explain authentication methods or requirements.
    remediation: Document all authentication requirements and methods
  - id: API-DOC-HIGH-002
    signal: Error responses not documented
    evidence_pattern: missing error code documentation
    explanation: |
      API can return errors but error codes and messages
      are not documented for consumer handling.
    remediation: Document all error responses with codes and messages
  medium:
  - id: API-DOC-MED-001
    signal: Missing request/response examples
    evidence_pattern: schemas without examples
    remediation: Add realistic examples for all endpoints
  - id: API-DOC-MED-002
    signal: Rate limits not documented
    evidence_pattern: rate limiting without docs
    remediation: Document rate limits and throttling behavior
  low:
  - id: API-DOC-LOW-001
    signal: Inconsistent documentation format
    evidence_pattern: mixed documentation styles
    remediation: Standardize documentation format across APIs
  positive:
  - id: API-DOC-POS-001
    signal: Complete OpenAPI specification
    evidence_pattern: validated openapi.yaml
  - id: API-DOC-POS-002
    signal: Interactive documentation
    evidence_pattern: Swagger UI or similar
  - id: API-DOC-POS-003
    signal: Request/response examples
    evidence_pattern: examples in schemas
procedure:
  context:
    cognitive_mode: thorough
    ensemble_role: documentation-auditor
  steps:
  - id: '1'
    name: Inventory API Endpoints
    description: |
      Create inventory of all API endpoints from
      code and compare with documentation.
    duration_estimate: 25 min
    commands:
    - purpose: Find API route definitions
      command: |
        grep -rn --include="*.{js,ts,py,java,go,rb}" \
          -E "(@route|@api|app\.(get|post|put|delete)|router\.)" .
    - purpose: Find OpenAPI specs
      command: |
        find . -name "openapi.*" -o -name "swagger.*" 2>/dev/null
    expected_findings:
    - Endpoint inventory
    - Spec file locations
  - id: '2'
    name: Validate API Specifications
    description: |
      Validate OpenAPI/Swagger specifications
      for completeness and correctness.
    duration_estimate: 20 min
    commands:
    - purpose: Validate OpenAPI spec
      command: |
        # If spectral is available
        npx @stoplight/spectral-cli lint openapi.yaml 2>/dev/null || echo "Spectral not available"
    - purpose: Check spec completeness
      command: |
        cat openapi.yaml 2>/dev/null | grep -c "description:" || echo "No openapi.yaml"
    expected_findings:
    - Validation results
    - Completeness metrics
  - id: '3'
    name: Check Authentication Documentation
    description: |
      Verify authentication requirements are
      fully documented.
    duration_estimate: 20 min
    commands:
    - purpose: Find security definitions
      command: |
        grep -A5 "securitySchemes\|security:" openapi.yaml 2>/dev/null
    - purpose: Check auth in docs
      command: |
        find . -path "*docs*" -name "*.md" -exec grep -l -i "auth" {} \; 2>/dev/null
    expected_findings:
    - Security documentation
    - Auth requirements
  - id: '4'
    name: Review Error Documentation
    description: |
      Verify error responses and codes are
      documented for all endpoints.
    duration_estimate: 20 min
    commands:
    - purpose: Find error responses in spec
      command: |
        grep -E "4[0-9]{2}:|5[0-9]{2}:" openapi.yaml 2>/dev/null | head -20
    - purpose: Check error documentation
      command: |
        find . -path "*docs*" -name "*.md" -exec grep -l -i "error\|status" {} \; 2>/dev/null
    expected_findings:
    - Error code coverage
    - Error documentation
  - id: '5'
    name: Assess Examples and Usability
    description: |
      Review quality of examples and overall
      documentation usability.
    duration_estimate: 25 min
    commands:
    - purpose: Check for examples
      command: |
        grep -c "example:" openapi.yaml 2>/dev/null || echo "No examples found"
    - purpose: Find sample code
      command: |
        find . -path "*docs*" -name "*.md" -exec grep -l "curl\|fetch\|request" {} \; 2>/dev/null
    expected_findings:
    - Example coverage
    - Sample code availability
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Coverage Analysis
    - Accuracy Assessment
    - Usability Review
    - Recommendations
  confidence_guidance:
    high: Complete spec with validated accuracy
    medium: Partial coverage with gaps
    low: Minimal or outdated documentation
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: openapi
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Requires thorough review
    full:
      included: true
      priority: 2
    api:
      included: true
      priority: 1
closeout_checklist:
- id: api-doc-001
  item: API specification exists
  level: CRITICAL
  verification: |
    find . -name "openapi.*" -o -name "swagger.*" 2>/dev/null | wc -l
  expected: Greater than 0
- id: api-doc-002
  item: All endpoints documented
  level: BLOCKING
  verification: Compare endpoints to spec
  expected: 100% coverage
- id: api-doc-003
  item: Authentication documented
  level: BLOCKING
  verification: |
    grep -c "securitySchemes" openapi.yaml 2>/dev/null
  expected: Greater than 0 if auth required
governance:
  applicable_to:
    archetypes:
    - api
    - platform
    - service
  compliance_frameworks:
  - framework: OpenAPI
    controls:
    - Specification Completeness
relationships:
  commonly_combined:
  - code-quality.documentation.code-documentation
  - code-quality.documentation.onboarding-documentation
  - code-quality.technical-debt.deprecation-management
