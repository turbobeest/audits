audit:
  id: code-quality.code-review.review-metrics
  name: Review Metrics Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: code-quality
  category_number: 6
  subcategory: code-review
  tier: expert
  estimated_duration: 45 minutes
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: full
  severity: medium
  scope: repository
  default_profiles:
  - full
  - quality
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Comprehensive assessment of code review process health through quantitative
    metrics. Aggregates key indicators including coverage, turnaround time,
    depth, and outcomes into a review health dashboard. Tracks trends over
    time to identify process improvements or degradations.
  why_it_matters: |
    You can't improve what you don't measure. Organizations tracking review
    metrics show 25% improvement in review effectiveness within 6 months.
    Metrics provide objective basis for process improvement decisions and
    help identify issues before they become crises. DORA research links
    review metrics to overall engineering performance.
  when_to_run:
  - Weekly/monthly reporting cycles
  - Sprint retrospectives
  - Engineering leadership reviews
  - Continuous monitoring dashboards
prerequisites:
  required_artifacts:
  - type: pr_metadata
    description: Historical PR data with review information
  - type: git_history
    description: Commit and merge history
  access_requirements:
  - Access to PR/MR platform API
  - Historical data for trend analysis
discovery:
  file_patterns:
  - glob: .github/workflows/*metrics*.yml
    purpose: Automated metrics collection
  - glob: scripts/*review*metrics*
    purpose: Custom metrics scripts
knowledge_sources:
  specifications:
  - id: dora-metrics
    name: DORA State of DevOps Metrics
    url: https://dora.dev/
    offline_cache: true
    priority: required
  guides:
  - id: review-metrics-guide
    name: Engineering Metrics Best Practices
    url: https://newsletter.pragmaticengineer.com/p/engineering-metrics
    offline_cache: true
tooling:
  scripts:
  - id: review-metrics-dashboard
    language: bash
    purpose: Generate review metrics summary
    source: inline
    code: |
      gh pr list --state merged --limit 100 --json number,createdAt,mergedAt,reviews,additions,deletions,comments
signals:
  critical:
  - id: RM-CRIT-001
    signal: No review metrics being collected
    evidence_pattern: no_metrics_system
    explanation: |
      Without metrics, there's no visibility into review process health
      and no way to identify or address problems systematically.
    remediation: Implement basic review metrics collection
  high:
  - id: RM-HIGH-001
    signal: Negative trend in review coverage
    evidence_pattern: coverage_trend < -10%
    explanation: |
      Declining review coverage indicates process degradation that
      will lead to increased defect escape rate.
    remediation: Investigate root cause and reinforce review requirements
  - id: RM-HIGH-002
    signal: Review cycle time increasing significantly
    evidence_pattern: cycle_time_trend > 50%
    explanation: |
      Growing review times indicate bottlenecks or process issues
      that slow delivery and frustrate developers.
    remediation: Analyze bottlenecks and optimize reviewer allocation
  medium:
  - id: RM-MED-001
    signal: Metrics not visible to team
    evidence_pattern: no_dashboard
    remediation: Create visible metrics dashboard for team
  - id: RM-MED-002
    signal: Metrics collected but not acted upon
    evidence_pattern: stale_action_items
    remediation: Establish regular metrics review cadence
  low:
  - id: RM-LOW-001
    signal: Limited historical data
    evidence_pattern: history < 30 days
    remediation: Build historical dataset for trend analysis
  positive:
  - id: RM-POS-001
    signal: Comprehensive metrics tracking in place
    evidence_pattern: coverage && time && depth && outcomes
  - id: RM-POS-002
    signal: Positive trends across key metrics
    evidence_pattern: all_trends_positive
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Collect Raw Metrics Data
    description: |
      Gather PR data for metrics calculation including timestamps,
      review counts, comment counts, and outcomes.
    duration_estimate: 10 min
    commands:
    - purpose: Extract comprehensive PR data
      command: |
        gh pr list --state merged --limit 100 \
          --json number,createdAt,mergedAt,reviews,additions,deletions,comments,author
    expected_findings:
    - PR lifecycle timestamps
    - Review activity data
  - id: '2'
    name: Calculate Core Metrics
    description: |
      Compute primary review health metrics including coverage,
      cycle time, and review depth.
    duration_estimate: 15 min
    expected_findings:
    - Review coverage percentage
    - Median cycle time
    - Average review depth
    - Approval rate
  - id: '3'
    name: Analyze Trends
    description: |
      Compare current metrics to historical baselines to identify
      improving or degrading trends.
    duration_estimate: 10 min
    expected_findings:
    - Week-over-week changes
    - Month-over-month trends
    - Anomaly detection
  - id: '4'
    name: Generate Dashboard Summary
    description: |
      Compile metrics into a comprehensive dashboard view with
      key insights and recommended actions.
    duration_estimate: 10 min
    expected_findings:
    - Metrics summary dashboard
    - Health indicators
    - Action recommendations
output:
  deliverables:
  - type: dashboard
    format: structured
    content:
    - review_coverage_pct
    - median_cycle_time_hours
    - avg_review_depth
    - approval_rate
    - change_request_rate
    - trend_indicators
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Metrics Dashboard
    - Trend Analysis
    - Recommendations
  confidence_guidance:
    high: 90+ days of historical data with complete metrics
    medium: 30-90 days of data with most metrics
    low: Less than 30 days or incomplete data
offline:
  capability: minimal
  cache_manifest:
    knowledge:
    - source_id: dora-metrics
      priority: required
profiles:
  membership:
    quick:
      included: true
      priority: 2
    full:
      included: true
      priority: 1
    quality:
      included: true
      priority: 1
closeout_checklist:
- id: rm-001
  item: Core metrics calculated
  level: BLOCKING
  verification: Coverage, time, depth values available
  expected: All primary metrics computed
- id: rm-002
  item: Trend analysis completed
  level: WARNING
  verification: Historical comparison available
  expected: Trend direction identified
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: DORA Metrics
    controls:
    - Lead Time
    - Change Failure Rate
relationships:
  commonly_combined:
  - code-quality.code-review.pr-review-coverage
  - code-quality.code-review.review-turnaround-time
  - code-quality.code-review.review-depth
