audit:
  id: machine-learning-ai.model-deployment.progressive-rollout
  name: Progressive Rollout Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: machine-learning-ai
  category_number: 37
  subcategory: model-deployment
  tier: expert
  estimated_duration: 3-5 hours  # median: 4h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: ml-systems
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates progressive rollout strategies for ML models including canary deployments,
    gradual traffic shifting, rollback mechanisms, and success criteria. Examines whether
    new models are deployed safely with appropriate safeguards.
  why_it_matters: |
    Deploying new models directly to all traffic risks widespread harm if issues arise.
    Progressive rollout limits blast radius, enables early detection of problems, and
    provides safe rollback options. Proper rollout practices protect users and business
    from deployment failures.
  when_to_run:
  - When establishing deployment practices
  - Before critical model deployments
  - After deployment incidents
  - During deployment process reviews
prerequisites:
  required_artifacts:
  - type: deployment_configs
    description: Rollout configuration files
  - type: monitoring_setup
    description: Deployment monitoring infrastructure
  - type: rollback_procedures
    description: Documented rollback procedures
  access_requirements:
  - Access to deployment configurations
  - Access to traffic management
  - Access to deployment monitoring
  - Access to rollback systems
discovery:
  file_patterns:
  - glob: '**/deployment/**/*.yaml'
    purpose: Find deployment configs
  - glob: '**/rollout/**'
    purpose: Find rollout configurations
  - glob: '**/canary/**'
    purpose: Find canary deployment configs
  - glob: '**/traffic_split/**'
    purpose: Find traffic management
knowledge_sources:
  guides:
  - id: argo-rollouts
    name: Argo Rollouts Documentation
    url: https://argoproj.github.io/argo-rollouts/
  - id: istio-traffic
    name: Istio Traffic Management
    url: https://istio.io/latest/docs/concepts/traffic-management/
  standards:
  - id: progressive-delivery
    name: Progressive Delivery Best Practices
    relevance: Safe deployment strategies
tooling:
  analysis_tools:
  - tool: argo-rollouts
    purpose: Kubernetes progressive delivery
  - tool: istio
    purpose: Service mesh traffic management
  - tool: flagger
    purpose: Automated canary deployments
  - tool: seldon
    purpose: ML deployment with canary
signals:
  critical:
  - id: PR-CRIT-001
    signal: No progressive rollout for production deployments
    evidence_indicators:
    - Models deployed to 100% traffic immediately
    - No canary or staged deployment
    - All-or-nothing deployments
    explanation: |
      Immediate full deployments risk exposing all users to problems with new models,
      potentially causing widespread harm before issues are detected.
    remediation: Implement progressive rollout with staged traffic increases
  - id: PR-CRIT-002
    signal: No automated rollback capability
    evidence_indicators:
    - Manual rollback required
    - Rollback procedures untested
    - Long rollback time
    explanation: |
      Slow or unreliable rollback extends the duration of issues, increasing user
      impact and business damage.
    remediation: Implement automated rollback triggers and test regularly
  high:
  - id: PR-HIGH-001
    signal: No success criteria for rollout stages
    remediation: Define metrics and thresholds for each rollout stage
  - id: PR-HIGH-002
    signal: Rollout monitoring insufficient
    remediation: Implement comprehensive monitoring during rollout
  - id: PR-HIGH-003
    signal: Traffic splitting not granular
    remediation: Enable fine-grained traffic control
  medium:
  - id: PR-MED-001
    signal: Rollout stages too aggressive
    remediation: Slow down rollout progression
  - id: PR-MED-002
    signal: No bake time between stages
    remediation: Add observation periods between traffic increases
  - id: PR-MED-003
    signal: Rollback criteria not defined
    remediation: Define clear rollback triggers
  low:
  - id: PR-LOW-001
    signal: Rollout process not documented
    remediation: Document rollout procedures and decision points
  - id: PR-LOW-002
    signal: No rollout post-mortems
    remediation: Conduct post-mortems for problematic deployments
  positive:
  - id: PR-POS-001
    signal: Automated progressive rollout with health checks
  - id: PR-POS-002
    signal: Quick automated rollback capability
  - id: PR-POS-003
    signal: Clear success criteria at each stage
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Review Rollout Strategy
    description: Examine progressive rollout configuration
    duration_estimate: 45 minutes
  - id: '2'
    name: Assess Traffic Management
    description: Evaluate traffic splitting capabilities
    duration_estimate: 30 minutes
  - id: '3'
    name: Check Success Criteria
    description: Review metrics and thresholds for progression
    duration_estimate: 30 minutes
  - id: '4'
    name: Test Rollback
    description: Verify rollback mechanisms work
    duration_estimate: 45 minutes
  - id: '5'
    name: Review Monitoring
    description: Assess rollout monitoring coverage
    duration_estimate: 30 minutes
  - id: '6'
    name: Analyze Historical Rollouts
    description: Review past deployments for patterns
    duration_estimate: 30 minutes
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Rollout Strategy Analysis
    - Rollback Assessment
    - Monitoring Review
    - Recommendations
closeout_checklist:
- id: pr-001
  item: Progressive rollout verified
  level: CRITICAL
  verification: manual
- id: pr-002
  item: Rollback tested
  level: CRITICAL
  verification: manual
- id: pr-003
  item: Success criteria defined
  level: HIGH
  verification: manual
governance:
  applicable_to:
    archetypes:
    - ml-systems
    - ai-applications
  compliance_mappings:
  - framework: SOC 2
    control: Change Management
    description: Controlled deployment practices
relationships:
  commonly_combined:
  - machine-learning-ai.model-deployment.ab-testing
  - machine-learning-ai.model-monitoring.performance-monitoring
  depends_on:
  - machine-learning-ai.model-deployment.model-versioning
  feeds_into:
  - machine-learning-ai.model-monitoring.alerting-configuration
