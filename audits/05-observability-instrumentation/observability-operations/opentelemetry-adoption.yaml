audit:
  id: observability-instrumentation.observability-operations.opentelemetry-adoption
  name: OpenTelemetry Adoption Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: observability-instrumentation
  category_number: 5
  subcategory: observability-operations
  tier: phd
  estimated_duration: 4-6 hours  # median: 5h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: codebase
  default_profiles:
  - full
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the organization's adoption of OpenTelemetry for observability
    instrumentation. Examines SDK usage, collector deployment, semantic
    convention adherence, and migration status from proprietary instrumentation.
    Assesses readiness for vendor-neutral observability.
  why_it_matters: |
    OpenTelemetry is the CNCF standard for observability instrumentation, enabling
    vendor-neutral telemetry collection. Adoption reduces vendor lock-in, ensures
    consistent instrumentation patterns, and provides flexibility in backend
    choices. Organizations not adopting OTel risk technical debt as proprietary
    instrumentation becomes increasingly costly to maintain.
  when_to_run:
  - When evaluating observability strategy
  - Before vendor migrations or renewals
  - During standardization initiatives
  - When onboarding new services
  - Annual technology review cycles
prerequisites:
  required_artifacts:
  - type: source_code
    description: Access to service codebases to audit instrumentation
  - type: infrastructure_config
    description: OpenTelemetry Collector configurations if deployed
  - type: service_inventory
    description: List of services and their current instrumentation
  access_requirements:
  - Read access to service repositories
  - Access to collector deployment configurations
  - Access to CI/CD pipelines for instrumentation integration
discovery:
  code_patterns:
  - pattern: opentelemetry|otel
    type: keyword
    scope: source
    purpose: Identify OpenTelemetry SDK usage
  - pattern: from opentelemetry|import.*otel|@opentelemetry
    type: regex
    scope: source
    purpose: Find OTel imports in code
  - pattern: TracerProvider|MeterProvider|LoggerProvider
    type: keyword
    scope: source
    purpose: Identify OTel provider initialization
  - pattern: OTEL_|opentelemetry\.sdk
    type: regex
    scope: config
    purpose: Find OTel configuration
  file_patterns:
  - glob: '**/otel*.yaml'
    purpose: OpenTelemetry Collector configurations
  - glob: '**/opentelemetry*.json'
    purpose: OTel SDK configurations
  - glob: '**/requirements.txt'
    purpose: Python dependencies for OTel packages
  - glob: '**/package.json'
    purpose: Node.js dependencies for OTel packages
  - glob: '**/go.mod'
    purpose: Go dependencies for OTel packages
  - glob: '**/pom.xml'
    purpose: Java dependencies for OTel packages
  metrics_queries:
  - system: Prometheus
    query: otelcol_receiver_accepted_spans_total
    purpose: Verify collector is receiving OTel traces
    threshold: Should be > 0 if services are instrumented
knowledge_sources:
  specifications:
  - id: otel-spec
    name: OpenTelemetry Specification
    url: https://opentelemetry.io/docs/specs/otel/
    offline_cache: true
    priority: required
  - id: otel-semconv
    name: OpenTelemetry Semantic Conventions
    url: https://opentelemetry.io/docs/specs/semconv/
    offline_cache: true
    priority: required
  guides:
  - id: otel-getting-started
    name: OpenTelemetry Getting Started
    url: https://opentelemetry.io/docs/getting-started/
    offline_cache: true
  - id: otel-collector-guide
    name: OpenTelemetry Collector Documentation
    url: https://opentelemetry.io/docs/collector/
    offline_cache: true
  learning_resources:
  - id: otel-migration
    title: Migrating to OpenTelemetry
    type: article
    reference: OpenTelemetry migration guides and case studies
tooling:
  static_analysis:
  - tool: grep/ripgrep
    purpose: Search for OTel SDK usage patterns in codebase
    offline_capable: true
  - tool: dependency scanners
    purpose: Identify OTel packages in dependency files
    offline_capable: true
  infrastructure_tools:
  - tool: otelcol
    purpose: Validate collector configurations
    command: otelcol validate --config=config.yaml
  - tool: kubectl
    purpose: Check OTel collector deployments
    command: kubectl get pods -l app=otel-collector
  scripts:
  - id: otel-adoption-scanner
    language: bash
    purpose: Scan repositories for OTel adoption
    source: inline
    code: |
      #!/bin/bash
      # Scan for OpenTelemetry adoption indicators

      echo "=== OpenTelemetry Adoption Scan ==="

      # Python
      echo -e "\n--- Python OTel packages ---"
      grep -r "opentelemetry" --include="requirements*.txt" --include="pyproject.toml" . 2>/dev/null

      # Node.js
      echo -e "\n--- Node.js OTel packages ---"
      grep -r "@opentelemetry" --include="package.json" . 2>/dev/null

      # Go
      echo -e "\n--- Go OTel packages ---"
      grep -r "go.opentelemetry.io" --include="go.mod" . 2>/dev/null

      # Java
      echo -e "\n--- Java OTel packages ---"
      grep -r "opentelemetry" --include="pom.xml" --include="build.gradle" . 2>/dev/null

      # Configuration
      echo -e "\n--- OTel configuration files ---"
      find . -name "*otel*.yaml" -o -name "*opentelemetry*.json" 2>/dev/null
signals:
  critical:
  - id: OTEL-CRIT-001
    signal: No OpenTelemetry adoption with vendor lock-in risk
    evidence_indicators:
    - 100% proprietary instrumentation
    - No OTel SDK or collector usage
    - Custom or legacy tracing implementations
    explanation: |
      Complete absence of OpenTelemetry creates vendor lock-in and
      makes future migrations extremely costly. Proprietary instrumentation
      requires significant rework for any backend changes.
    remediation: Develop OTel adoption roadmap; start with new services
  high:
  - id: OTEL-HIGH-001
    signal: Inconsistent semantic convention usage
    explanation: Telemetry data lacks standardized attributes, reducing correlation
    remediation: Adopt and enforce OpenTelemetry semantic conventions
  - id: OTEL-HIGH-002
    signal: OTel Collector not deployed in production
    explanation: Missing collector limits flexibility and adds SDK complexity
    remediation: Deploy OTel Collector as standard infrastructure
  - id: OTEL-HIGH-003
    signal: Mixed proprietary and OTel instrumentation without migration plan
    explanation: Dual instrumentation increases overhead and complexity
    remediation: Create migration plan to consolidate on OTel
  medium:
  - id: OTEL-MED-001
    signal: OTel SDK versions inconsistent across services
    remediation: Standardize SDK versions; implement dependency management
  - id: OTEL-MED-002
    signal: Manual instrumentation where auto-instrumentation is available
    remediation: Adopt auto-instrumentation agents where applicable
  - id: OTEL-MED-003
    signal: Context propagation not fully implemented
    remediation: Ensure W3C Trace Context propagation across all services
  low:
  - id: OTEL-LOW-001
    signal: OTel documentation gaps for developers
  positive:
  - id: OTEL-POS-001
    signal: Consistent OTel SDK adoption across services
  - id: OTEL-POS-002
    signal: OTel Collector deployed with proper configuration
  - id: OTEL-POS-003
    signal: Semantic conventions consistently applied
  - id: OTEL-POS-004
    signal: Auto-instrumentation adopted where available
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory current instrumentation
    description: |
      Catalog all observability instrumentation across services.
      Identify which services use OTel vs proprietary SDKs.
    duration_estimate: 60 min
    commands:
    - purpose: Find OTel imports in Python
      command: grep -r 'from opentelemetry' --include='*.py' .
    - purpose: Find OTel imports in JavaScript
      command: grep -r '@opentelemetry' --include='*.js' --include='*.ts' .
    - purpose: Find proprietary SDK usage
      command: grep -r 'datadog\|newrelic\|ddtrace' --include='*.py' --include='*.js' .
    expected_findings:
    - Inventory of OTel-instrumented services
    - Inventory of proprietary-instrumented services
  - id: '2'
    name: Assess OTel SDK configuration
    description: |
      For services using OTel, review SDK configuration for best practices.
      Check provider setup, exporter configuration, and resource attributes.
    duration_estimate: 45 min
    commands:
    - purpose: Find OTel configuration
      command: grep -r 'TracerProvider\|MeterProvider' --include='*.py' --include='*.java' --include='*.go'
        .
    questions:
    - Are SDK versions consistent across services?
    - Are resource attributes properly configured?
    - Is batching configured for exporters?
    expected_findings:
    - SDK configuration patterns
    - Consistency assessment across services
  - id: '3'
    name: Evaluate collector deployment
    description: |
      Review OpenTelemetry Collector deployment if present.
      Assess configuration, pipeline setup, and reliability.
    duration_estimate: 45 min
    commands:
    - purpose: Check collector configuration
      command: find . -name 'otel*.yaml' -exec cat {} \;
    - purpose: Check collector deployment
      command: kubectl get deployment -l app.kubernetes.io/name=opentelemetry-collector
    expected_findings:
    - Collector deployment status
    - Pipeline configuration assessment
  - id: '4'
    name: Check semantic convention adherence
    description: |
      Evaluate adherence to OpenTelemetry semantic conventions.
      Check for standard attribute usage in spans, metrics, and logs.
    duration_estimate: 30 min
    questions:
    - Are standard HTTP semantic conventions used?
    - Are database semantic conventions followed?
    - Are custom attributes namespaced properly?
    expected_findings:
    - Semantic convention compliance level
    - Custom attribute patterns
  - id: '5'
    name: Develop adoption recommendations
    description: |
      Based on findings, develop recommendations for OTel adoption
      or improving existing adoption.
    duration_estimate: 30 min
    expected_findings:
    - Adoption roadmap recommendations
    - Priority services for migration
    - Quick wins and low-hanging fruit
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: adoption_assessment
    format: structured
    sections:
    - Current State Summary
    - Service Instrumentation Matrix
    - Collector Assessment
    - Semantic Convention Compliance
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Key Findings
    - Adoption Roadmap
    - Recommendations
  confidence_guidance:
    high: Verified through code analysis and configuration review
    medium: Based on partial codebase access or sampling
    low: Inferred from documentation or limited evidence
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: otel-spec
      priority: required
    - source_id: otel-semconv
      priority: required
    - source_id: otel-collector-guide
      priority: recommended
  offline_notes: |
    This audit is primarily code and configuration analysis.
    Can be completed fully offline with access to source code.
profiles:
  membership:
    quick:
      included: false
      reason: Requires comprehensive codebase analysis
    full:
      included: true
      priority: 2
closeout_checklist:
- id: opentelemetry-adoption-001
  item: Service instrumentation inventory completed
  level: CRITICAL
  verification: manual
  verification_notes: All services cataloged with instrumentation type (OTel/proprietary/none)
  expected: Confirmed by reviewer
- id: opentelemetry-adoption-002
  item: OTel SDK usage patterns assessed
  level: BLOCKING
  verification: manual
  verification_notes: SDK versions and configuration patterns documented
  expected: Confirmed by reviewer
- id: opentelemetry-adoption-003
  item: Collector deployment evaluated
  level: BLOCKING
  verification: manual
  verification_notes: Collector presence and configuration reviewed
  expected: Confirmed by reviewer
- id: opentelemetry-adoption-004
  item: Semantic convention compliance checked
  level: WARNING
  verification: manual
  verification_notes: Standard attribute usage evaluated
  expected: Confirmed by reviewer
- id: opentelemetry-adoption-005
  item: Adoption recommendations provided
  level: WARNING
  verification: manual
  verification_notes: Clear roadmap for adoption or improvement
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: CNCF
    controls:
    - Observability Best Practices
relationships:
  commonly_combined:
  - observability-instrumentation.observability-operations.observability-tool-sprawl
  - observability-instrumentation.observability-operations.data-pipeline-reliability
