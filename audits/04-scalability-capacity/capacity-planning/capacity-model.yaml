audit:
  id: scalability-capacity.capacity-planning.capacity-model
  name: Capacity Model Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: scalability-capacity
  category_number: 4
  subcategory: capacity-planning
  tier: expert
  estimated_duration: 6 hours
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: infrastructure
  default_profiles:
  - full
  - production
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the existence, accuracy, and comprehensiveness of capacity
    models used to predict system resource requirements. Reviews how
    traffic, load, and resource consumption are modeled, the assumptions
    made, validation against actual usage, and the model's ability to
    predict capacity needs.
  why_it_matters: |
    Accurate capacity models enable proactive scaling decisions, budget
    planning, and infrastructure investment. Without models, teams react
    to capacity issues rather than preventing them. Inaccurate models
    lead to over-provisioning costs or under-provisioning outages.
  when_to_run:
  - During annual capacity planning cycles
  - After significant architecture changes
  - When actual usage deviates from predictions
  - Before major traffic growth events
prerequisites:
  required_artifacts:
  - type: documentation
    description: Existing capacity planning documentation
  - type: metrics
    description: Historical resource utilization data
  - type: metrics
    description: Traffic and load patterns
  access_requirements:
  - Capacity planning documentation access
  - Historical metrics access (12+ months)
  - Budget and cost data access
discovery:
  documents_to_review:
  - type: Capacity planning documentation
    purpose: Understand existing capacity models
  - type: Architecture documents
    purpose: Identify components to model
  - type: Performance test results
    purpose: Extract capacity characteristics
  metrics_queries:
  - system: Prometheus
    query: avg_over_time(cpu_usage_percent[30d]) by (service)
    purpose: Historical utilization patterns
  - system: Custom
    query: Traffic to resource correlation analysis
    purpose: Model traffic-resource relationships
  file_patterns:
  - glob: '**/*.md'
    purpose: Documentation files
  - glob: '**/*.yaml'
    purpose: Configuration files
  - glob: '**/*.json'
    purpose: JSON configuration
knowledge_sources:
  guides:
  - id: google-capacity
    name: Google SRE Book - Capacity Planning
    url: https://sre.google/sre-book/capacity-planning/
    offline_cache: true
  - id: aws-capacity
    name: AWS Capacity Planning
    url: https://docs.aws.amazon.com/whitepapers/latest/running-containerized-microservices/capacity-planning.html
    offline_cache: true
  learning_resources:
  - id: capacity-book
    title: The Art of Capacity Planning
    type: book
    reference: O'Reilly Media, John Allspaw
tooling:
  monitoring_queries:
  - system: Prometheus
    query: predict_linear(resource_usage[7d], 86400 * 30)
    purpose: Linear prediction model for resource usage
  - system: Custom
    query: Regression analysis of traffic vs. resources
    purpose: Build traffic-resource correlation model
  assessment_tools:
  - tool: Spreadsheet modeling
    purpose: Build and validate capacity models
  - tool: Statistical analysis tools
    purpose: Regression and correlation analysis
signals:
  critical:
  - id: SCALE-CM-CRIT-001
    signal: No capacity model exists
    evidence_indicators:
    - No documented capacity planning
    - Reactive-only scaling decisions
    explanation: |
      Without capacity models, the organization cannot predict resource
      needs, plan budgets, or make proactive scaling decisions. This
      leads to either costly over-provisioning or risky under-provisioning.
    remediation: Develop capacity models for critical services
  high:
  - id: SCALE-CM-HIGH-001
    signal: Capacity model significantly diverges from reality
    explanation: Predictions off by >30% from actual usage
    remediation: Recalibrate model with current data; review assumptions
  - id: SCALE-CM-HIGH-002
    signal: Model missing critical components
    explanation: Key services not included in capacity planning
    remediation: Expand model coverage to include all critical services
  medium:
  - id: SCALE-CM-MED-001
    signal: Model assumptions not documented
    remediation: Document all model assumptions explicitly
  - id: SCALE-CM-MED-002
    signal: Model not regularly validated
    remediation: Implement quarterly model validation process
  low:
  - id: SCALE-CM-LOW-001
    signal: Minor prediction variance for edge cases
  positive:
  - id: SCALE-CM-POS-001
    signal: Accurate capacity models with regular validation
  - id: SCALE-CM-POS-002
    signal: Models successfully predicted capacity needs
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Existing Capacity Models
    description: |
      Document all existing capacity models, their scope, and
      current usage in planning processes.
    duration_estimate: 60 min
    questions:
    - What capacity models exist?
    - Who maintains them?
    - How are they used in decision-making?
    expected_findings:
    - Inventory of capacity models
    - Model ownership and maintenance status
  - id: '2'
    name: Analyze Model Methodology
    description: |
      Review the methodology used in capacity models, including
      inputs, formulas, and assumptions.
    duration_estimate: 90 min
    expected_findings:
    - Model methodology documentation
    - Input parameters and data sources
    - Assumptions and limitations
  - id: '3'
    name: Validate Against Historical Data
    description: |
      Compare model predictions against actual historical usage
      to assess accuracy.
    duration_estimate: 90 min
    expected_findings:
    - Prediction vs. actual comparison
    - Accuracy metrics (MAPE, etc.)
    - Systematic bias identification
  - id: '4'
    name: Assess Model Coverage
    description: |
      Evaluate whether models cover all critical system components
      and resource types.
    duration_estimate: 60 min
    questions:
    - Are all critical services modeled?
    - Are all resource types covered?
    - Are dependencies accounted for?
    expected_findings:
    - Coverage gap analysis
    - Recommendations for model expansion
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Model Inventory
    - Methodology Assessment
    - Accuracy Validation
    - Recommendations
  confidence_guidance:
    high: Model validation with 12+ months of historical data
    medium: Model review with limited historical validation
    low: Model documentation review only
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: google-capacity
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Requires comprehensive analysis
    full:
      included: true
      priority: 1
closeout_checklist:
- id: capacity-model-001
  item: Existing models inventoried
  level: BLOCKING
  verification: manual
  verification_notes: Confirm all capacity models documented
  expected: Confirmed by reviewer
- id: capacity-model-002
  item: Model accuracy validated
  level: CRITICAL
  verification: manual
  verification_notes: Verify prediction vs. actual comparison completed
  expected: Confirmed by reviewer
- id: capacity-model-003
  item: Coverage gaps identified
  level: WARNING
  verification: manual
  verification_notes: Confirm coverage assessment completed
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: SOC2
    controls:
    - CC7.1
    - CC7.5
relationships:
  commonly_combined:
  - scalability-capacity.capacity-planning.growth-projection
  - scalability-capacity.capacity-planning.headroom-analysis
