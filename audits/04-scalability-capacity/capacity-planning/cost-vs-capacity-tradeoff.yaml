audit:
  id: scalability-capacity.capacity-planning.cost-vs-capacity-tradeoff
  name: Cost vs Capacity Tradeoff Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: scalability-capacity
  category_number: 4
  subcategory: capacity-planning
  tier: expert
  estimated_duration: 5 hours
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: infrastructure
  default_profiles:
  - full
  - production
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Analyzes the relationship between infrastructure costs and capacity
    to optimize resource allocation. Evaluates cost efficiency metrics,
    identifies over-provisioned and under-provisioned resources, and
    models the cost implications of different capacity strategies.
  why_it_matters: |
    Infrastructure represents a significant operational expense. Without
    analyzing cost-capacity tradeoffs, organizations either waste money
    on unused capacity or incur risk from insufficient capacity. Optimal
    balance maximizes performance per dollar spent while maintaining
    appropriate reliability margins.
  when_to_run:
  - During budget planning cycles
  - When infrastructure costs increase unexpectedly
  - Before major capacity investments
  - As part of cost optimization initiatives
prerequisites:
  required_artifacts:
  - type: billing
    description: Cloud or infrastructure billing data
  - type: metrics
    description: Resource utilization metrics
  - type: documentation
    description: Capacity requirements documentation
  access_requirements:
  - Cloud billing console access
  - Cost allocation tags and reports
  - Resource utilization metrics
discovery:
  metrics_queries:
  - system: CloudWatch
    query: Cost per service over time
    purpose: Track infrastructure costs
  - system: Prometheus
    query: avg(container_cpu_usage_seconds_total) / avg(kube_pod_container_resource_requests{resource='cpu'})
    purpose: Calculate CPU utilization efficiency
  - system: AWS Cost Explorer
    query: Unused Reserved Instances
    purpose: Identify wasted reserved capacity
  documents_to_review:
  - type: Cloud billing reports
    purpose: Understand cost breakdown
  - type: Reserved instance inventory
    purpose: Review committed capacity
  file_patterns:
  - glob: '**/*.md'
    purpose: Documentation files
  - glob: '**/*.yaml'
    purpose: Configuration files
  - glob: '**/*.json'
    purpose: JSON configuration
knowledge_sources:
  guides:
  - id: aws-cost-optimization
    name: AWS Cost Optimization
    url: https://docs.aws.amazon.com/whitepapers/latest/cost-optimization-laying-the-foundation/welcome.html
    offline_cache: true
  - id: finops-framework
    name: FinOps Framework
    url: https://www.finops.org/framework/
    offline_cache: true
  learning_resources:
  - id: cloud-cost-management
    title: Cloud FinOps
    type: book
    reference: O'Reilly Media, J.R. Storment and Mike Fuller
tooling:
  infrastructure_tools:
  - tool: aws-cli
    purpose: Cost and usage analysis
    command: aws ce get-cost-and-usage --time-period Start=2024-01-01,End=2024-01-31 --granularity MONTHLY
  - tool: kubectl
    purpose: Resource requests vs actual usage
    command: kubectl top pods vs resource requests
  monitoring_queries:
  - system: Custom
    query: Cost per request calculation
    purpose: Measure cost efficiency
  - system: AWS Cost Explorer
    query: Rightsizing recommendations
    purpose: Identify optimization opportunities
signals:
  critical:
  - id: SCALE-CC-CRIT-001
    signal: Significant capacity shortfall at current budget
    evidence_indicators:
    - Unable to meet SLOs within budget constraints
    - Critical services under-provisioned
    explanation: |
      The current budget is insufficient to maintain required service
      levels. Either budget must increase or requirements must be
      revised to avoid service degradation.
    remediation: Revise budget or optimize costs; align expectations with resources
  high:
  - id: SCALE-CC-HIGH-001
    signal: Major over-provisioning waste
    explanation: Resources consistently utilized below 30%
    remediation: Right-size instances; implement auto-scaling
  - id: SCALE-CC-HIGH-002
    signal: No cost visibility by service
    explanation: Cannot attribute costs to specific services
    remediation: Implement cost allocation tags; deploy cost tracking
  medium:
  - id: SCALE-CC-MED-001
    signal: Suboptimal pricing model
    remediation: Evaluate reserved instances, savings plans, or spot instances
  - id: SCALE-CC-MED-002
    signal: Cost-capacity relationship not modeled
    remediation: Develop cost models for capacity planning
  low:
  - id: SCALE-CC-LOW-001
    signal: Minor cost optimization opportunities
  positive:
  - id: SCALE-CC-POS-001
    signal: Cost-efficient capacity with clear unit economics
  - id: SCALE-CC-POS-002
    signal: Proactive cost optimization practices in place
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Gather Cost Data
    description: |
      Collect infrastructure cost data broken down by service,
      resource type, and time period.
    duration_estimate: 60 min
    commands:
    - purpose: Get monthly costs
      command: aws ce get-cost-and-usage --time-period Start=$(date -d '30 days ago' +%Y-%m-%d),End=$(date
        +%Y-%m-%d) --granularity DAILY --group-by Type=TAG,Key=Service
    expected_findings:
    - Cost breakdown by service
    - Cost trends over time
  - id: '2'
    name: Calculate Utilization Efficiency
    description: |
      Measure resource utilization to identify over-provisioned
      and under-provisioned resources.
    duration_estimate: 60 min
    expected_findings:
    - Utilization efficiency metrics
    - Over-provisioned resources
    - Under-provisioned resources
  - id: '3'
    name: Model Cost-Capacity Relationship
    description: |
      Develop models showing how costs change with capacity changes
      for different scaling scenarios.
    duration_estimate: 60 min
    expected_findings:
    - Cost per unit capacity
    - Scaling cost curves
    - Break-even analysis
  - id: '4'
    name: Identify Optimization Opportunities
    description: |
      Find specific actions to improve cost efficiency without
      sacrificing required capacity.
    duration_estimate: 60 min
    questions:
    - Which resources can be right-sized?
    - Would reserved capacity reduce costs?
    - Are there architectural optimizations?
    expected_findings:
    - Prioritized optimization opportunities
    - Projected savings
  - id: '5'
    name: Assess Tradeoff Decisions
    description: |
      Evaluate where cost savings would require accepting capacity
      or reliability tradeoffs.
    duration_estimate: 45 min
    expected_findings:
    - Tradeoff analysis
    - Risk assessment for cost reductions
    - Recommendations
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Cost Analysis
    - Efficiency Assessment
    - Optimization Opportunities
    - Tradeoff Recommendations
  - type: visualization
    format: chart
    sections:
    - Cost Breakdown
    - Utilization Efficiency
    - Cost-Capacity Curves
  confidence_guidance:
    high: Detailed cost data with accurate utilization metrics
    medium: Cost data with estimated utilization
    low: Limited cost visibility
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: finops-framework
      priority: recommended
profiles:
  membership:
    quick:
      included: false
      reason: Requires comprehensive cost analysis
    full:
      included: true
      priority: 3
closeout_checklist:
- id: cost-vs-capacity-tradeoff-001
  item: Cost data collected
  level: BLOCKING
  verification: manual
  verification_notes: Confirm cost breakdown available
  expected: Confirmed by reviewer
- id: cost-vs-capacity-tradeoff-002
  item: Utilization efficiency calculated
  level: CRITICAL
  verification: manual
  verification_notes: Verify efficiency metrics computed
  expected: Confirmed by reviewer
- id: cost-vs-capacity-tradeoff-003
  item: Optimization opportunities identified
  level: WARNING
  verification: manual
  verification_notes: Confirm optimization recommendations documented
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - cloud-native
    - enterprise
    - startup
  compliance_frameworks:
  - framework: SOC2
    controls:
    - CC7.5
relationships:
  commonly_combined:
  - scalability-capacity.capacity-planning.capacity-model
  - scalability-capacity.capacity-planning.headroom-analysis
