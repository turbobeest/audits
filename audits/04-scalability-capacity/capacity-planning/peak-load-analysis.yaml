audit:
  id: scalability-capacity.capacity-planning.peak-load-analysis
  name: Peak Load Analysis Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: scalability-capacity
  category_number: 4
  subcategory: capacity-planning
  tier: expert
  estimated_duration: 4 hours
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: metrics
  default_profiles:
  - full
  - production
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Analyzes historical and expected peak load patterns to ensure
    the system can handle maximum expected demand. Reviews peak-to-average
    ratios, peak timing patterns, burst characteristics, and system
    behavior under peak conditions.
  why_it_matters: |
    Systems must be provisioned to handle peak loads, not average loads.
    Failure to plan for peaks results in degraded performance or outages
    during the most critical traffic periods, often when business impact
    is highest (sales events, launches, etc.).
  when_to_run:
  - Before known peak events (holidays, promotions)
  - During capacity planning cycles
  - After experiencing unexpected peaks
  - When implementing auto-scaling
prerequisites:
  required_artifacts:
  - type: metrics
    description: Historical traffic data showing peak patterns
  - type: documentation
    description: Business calendar with expected peak events
  - type: metrics
    description: System performance metrics during past peaks
  access_requirements:
  - Monitoring system with historical data
  - Business event calendar
  - Performance test results
discovery:
  metrics_queries:
  - system: Prometheus
    query: max_over_time(rate(http_requests_total[5m])[30d:5m])
    purpose: Identify historical peak request rates
  - system: Prometheus
    query: max_over_time(rate(http_requests_total[5m])[30d:5m]) / avg_over_time(rate(http_requests_total[5m])[30d:5m])
    purpose: Calculate peak-to-average ratio
  - system: CloudWatch
    query: Maximum of RequestCount over 30 days
    purpose: Historical peak traffic
  documents_to_review:
  - type: Marketing calendar
    purpose: Identify planned promotions and events
  - type: Post-incident reviews
    purpose: Learn from past peak-related incidents
  file_patterns:
  - glob: '**/*.md'
    purpose: Documentation files
  - glob: '**/*.yaml'
    purpose: Configuration files
  - glob: '**/*.json'
    purpose: JSON configuration
knowledge_sources:
  guides:
  - id: aws-peak-planning
    name: AWS Best Practices for Traffic Spikes
    url: https://docs.aws.amazon.com/whitepapers/latest/best-practices-managing-spiky-traffic/welcome.html
    offline_cache: true
  - id: netflix-load-testing
    name: Netflix Chaos Engineering for Peak
    url: https://netflixtechblog.com/
    offline_cache: true
tooling:
  monitoring_queries:
  - system: Prometheus
    query: histogram_quantile(0.99, rate(http_request_duration_seconds_bucket[5m]))
    purpose: P99 latency during peaks
  - system: Prometheus
    query: rate(http_requests_total{status=~'5..'}[5m]) / rate(http_requests_total[5m])
    purpose: Error rate during peaks
  assessment_tools:
  - tool: Load testing tools
    purpose: Simulate peak loads
  - tool: Capacity calculator
    purpose: Project peak resource requirements
signals:
  critical:
  - id: SCALE-PL-CRIT-001
    signal: System cannot handle historical peak loads
    evidence_threshold: Errors or degradation at previous peak levels
    explanation: |
      If the system struggled with past peaks, future peaks will likely
      cause outages. This indicates capacity has not kept pace with
      demand or has regressed.
    remediation: Immediately increase capacity; implement performance optimizations
  high:
  - id: SCALE-PL-HIGH-001
    signal: Peak capacity not tested
    explanation: No load testing to validate peak handling capability
    remediation: Conduct load testing at expected peak levels
  - id: SCALE-PL-HIGH-002
    signal: Peak-to-average ratio increasing
    explanation: Traffic becoming more spiky, requiring more peak headroom
    remediation: Implement auto-scaling; increase peak capacity
  medium:
  - id: SCALE-PL-MED-001
    signal: Peak patterns not analyzed
    remediation: Implement peak pattern analysis and documentation
  - id: SCALE-PL-MED-002
    signal: Auto-scaling too slow for peak ramp
    remediation: Pre-scale before expected peaks; tune scaling parameters
  low:
  - id: SCALE-PL-LOW-001
    signal: Peak timing predictions approximate
  positive:
  - id: SCALE-PL-POS-001
    signal: System successfully handled peaks with headroom
  - id: SCALE-PL-POS-002
    signal: Peak load testing regularly performed
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Identify Historical Peak Patterns
    description: |
      Analyze historical traffic data to identify peak patterns,
      timing, and characteristics.
    duration_estimate: 60 min
    expected_findings:
    - Historical peak magnitudes
    - Peak timing patterns
    - Peak-to-average ratios
  - id: '2'
    name: Analyze Peak Event Correlation
    description: |
      Correlate peaks with business events, promotions, or
      external factors to understand drivers.
    duration_estimate: 45 min
    questions:
    - What causes peak traffic?
    - Are peaks predictable?
    - What is the peak ramp rate?
    expected_findings:
    - Peak event correlation
    - Predictability assessment
  - id: '3'
    name: Review System Behavior During Peaks
    description: |
      Examine system performance metrics during historical peaks
      to identify bottlenecks and degradation.
    duration_estimate: 60 min
    expected_findings:
    - Performance during peaks
    - Bottleneck identification
    - Error rate analysis
  - id: '4'
    name: Project Future Peak Requirements
    description: |
      Estimate future peak loads based on growth projections
      and planned events.
    duration_estimate: 45 min
    expected_findings:
    - Projected peak levels
    - Capacity gap analysis
    - Scaling recommendations
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Historical Peak Analysis
    - Peak Drivers
    - Capacity Assessment
    - Recommendations
  - type: visualization
    format: chart
    sections:
    - Traffic Pattern with Peaks
    - Peak-to-Average Trend
  confidence_guidance:
    high: 12+ months of peak data with load testing validation
    medium: Limited historical peak data
    low: Estimated peaks without historical validation
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: aws-peak-planning
      priority: recommended
profiles:
  membership:
    quick:
      included: false
      reason: Requires comprehensive historical analysis
    full:
      included: true
      priority: 2
closeout_checklist:
- id: peak-load-analysis-001
  item: Historical peaks identified
  level: BLOCKING
  verification: manual
  verification_notes: Confirm peak patterns documented
  expected: Confirmed by reviewer
- id: peak-load-analysis-002
  item: Peak behavior analyzed
  level: CRITICAL
  verification: manual
  verification_notes: Verify system behavior during peaks reviewed
  expected: Confirmed by reviewer
- id: peak-load-analysis-003
  item: Future peak projections created
  level: WARNING
  verification: manual
  verification_notes: Confirm future peak estimates documented
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - web-application
    - e-commerce
    - media-streaming
  compliance_frameworks:
  - framework: SOC2
    controls:
    - CC7.1
relationships:
  commonly_combined:
  - scalability-capacity.capacity-planning.headroom-analysis
  - scalability-capacity.capacity-planning.seasonal-pattern
