audit:
  id: sensors-physical-systems.power-management.battery-systems
  name: Battery Systems Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: sensors-physical-systems
  category_number: 38
  subcategory: power-management
  tier: expert
  estimated_duration: 4-6 hours  # median: 5h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: physical-systems
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates battery backup systems including battery health monitoring, charging
    systems, capacity testing, temperature management, and battery management
    system (BMS) configuration. Reviews runtime calculations, replacement planning,
    and safety features.
  why_it_matters: |
    Battery systems provide critical backup power for UPS, control systems, and
    remote sensors. Battery failures often provide little warning. Proper monitoring
    and maintenance ensures batteries perform when needed and prevents safety
    hazards from battery failures.
  when_to_run:
  - During battery system design
  - After battery replacement
  - During UPS maintenance
  - When capacity issues arise
  - After battery failures
prerequisites:
  required_artifacts:
  - type: battery_specs
    description: Battery specifications and ratings
  - type: bms_config
    description: Battery management configuration
  - type: maintenance_records
    description: Battery maintenance history
  access_requirements:
  - Battery room access
  - BMS system access
  - Battery test equipment
  - Maintenance records access
discovery:
  file_patterns:
  - glob: '**/*battery*.c'
    purpose: Find battery management code
  - glob: '**/*bms*.c'
    purpose: Find BMS code
  - glob: '**/*charger*.c'
    purpose: Find charger code
  - glob: '**/config/*battery*.yaml'
    purpose: Find battery configuration
knowledge_sources:
  guides:
  - id: ieee-battery
    name: IEEE Battery Standards
    url: https://www.ieee.org/
  - id: battery-management
    name: Battery Management Guide
    url: https://www.batteryuniversity.com/
  standards:
  - id: ieee-1188
    name: IEEE 1188 Battery Maintenance
    relevance: VRLA battery maintenance
  - id: ieee-450
    name: IEEE 450 Lead-Acid Testing
    relevance: Battery testing practices
  - id: ul-1973
    name: UL 1973 Battery Safety
    relevance: Battery safety requirements
tooling:
  analysis_tools:
  - tool: battery-analyzer
    purpose: Capacity testing
  - tool: impedance-tester
    purpose: Cell impedance measurement
  - tool: thermal-camera
    purpose: Hot spot detection
  - tool: hydrometer
    purpose: Electrolyte testing
signals:
  critical:
  - id: SPS-BAT-CRIT-001
    signal: Battery capacity significantly degraded
    evidence_indicators:
    - Capacity below 80% of rated
    - Runtime insufficient for load
    - Cannot support shutdown
    explanation: |
      Batteries with degraded capacity may not provide sufficient runtime
      during power outages, potentially causing uncontrolled shutdowns
      or data loss.
    remediation: Replace degraded batteries
  - id: SPS-BAT-CRIT-002
    signal: Battery thermal runaway risk
    evidence_indicators:
    - Elevated cell temperatures
    - Uneven temperature distribution
    - Charging not temperature-limited
    explanation: |
      Battery thermal runaway can cause fires and explosions. Warning
      signs include elevated temperatures and swelling cells.
    remediation: Address thermal issues immediately
  high:
  - id: SPS-BAT-HIGH-001
    signal: Cell imbalance detected
    evidence_indicators:
    - Voltage difference between cells
    - Some cells failing faster
    - String voltage low despite charging
    remediation: Identify and replace failing cells
  - id: SPS-BAT-HIGH-002
    signal: Charging system fault
    evidence_indicators:
    - Batteries not fully charging
    - Float voltage incorrect
    - Equalization not performed
    remediation: Repair charging system and verify settings
  medium:
  - id: SPS-BAT-MED-001
    signal: Battery monitoring incomplete
    evidence_indicators:
    - Not all cells monitored
    - Temperature not tracked
    - State of charge unknown
    remediation: Implement comprehensive monitoring
  - id: SPS-BAT-MED-002
    signal: Capacity testing overdue
    evidence_indicators:
    - No recent capacity test
    - Actual runtime unknown
    - Capacity assumed not verified
    remediation: Perform capacity testing
  low:
  - id: SPS-BAT-LOW-001
    signal: Battery system not documented
    evidence_indicators:
    - Installation date unknown
    - Specifications not recorded
    - Maintenance history missing
    remediation: Document battery system
  - id: SPS-BAT-LOW-002
    signal: No replacement planning
    evidence_indicators:
    - End of life not projected
    - Budget not allocated
    - Procurement lead time unknown
    remediation: Develop replacement plan
  positive:
  - id: SPS-BAT-POS-001
    signal: Comprehensive battery management
    evidence_indicators:
    - All cells monitored
    - Temperature controlled
    - Health trending active
  - id: SPS-BAT-POS-002
    signal: Proactive battery maintenance
    evidence_indicators:
    - Regular capacity testing
    - Replacement schedule maintained
    - Failures prevented
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Review Battery Specifications
    description: Understand battery system configuration
    duration_estimate: 20 min
  - id: '2'
    name: Inspect Physical Condition
    description: Visual and thermal inspection
    duration_estimate: 45 min
  - id: '3'
    name: Test Cell Voltages
    description: Measure individual cell voltages
    duration_estimate: 30 min
  - id: '4'
    name: Review Monitoring Data
    description: Analyze BMS trending
    duration_estimate: 30 min
  - id: '5'
    name: Verify Charging System
    description: Check charger operation
    duration_estimate: 30 min
  - id: '6'
    name: Review Capacity Testing
    description: Assess last capacity test results
    duration_estimate: 30 min
  - id: '7'
    name: Document Findings
    description: Compile findings and recommendations
    duration_estimate: 20 min
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Battery Condition Assessment
    - Monitoring Review
    - Capacity Analysis
    - Recommendations
closeout_checklist:
- id: sps-bat-001
  item: Battery capacity adequate
  level: CRITICAL
  verification: manual
- id: sps-bat-002
  item: No thermal issues
  level: CRITICAL
  verification: manual
- id: sps-bat-003
  item: Monitoring functional
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - data-centers
    - critical-infrastructure
    - industrial-automation
    - remote-systems
  compliance_mappings:
  - framework: IEEE 1188
    control: Battery Maintenance
    description: VRLA maintenance
  - framework: IEEE 450
    control: Battery Testing
    description: Lead-acid testing
  - framework: NFPA 111
    control: Emergency Power
    description: Emergency power requirements
relationships:
  commonly_combined:
  - sensors-physical-systems.power-management.ups-systems
  - sensors-physical-systems.power-management.power-supply-monitoring
  depends_on:
  - facilities.hvac-cooling
  feeds_into:
  - reliability.backup-power
  - maintenance.preventive-maintenance
