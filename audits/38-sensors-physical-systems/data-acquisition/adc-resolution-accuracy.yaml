# ============================================================
# AUDIT: ADC Resolution and Accuracy
# Category: 38 - Sensors & Physical Systems
# Subcategory: data-acquisition
# ============================================================

audit:
  id: "sensors-physical-systems.data-acquisition.adc-resolution-accuracy"
  name: "ADC Resolution and Accuracy Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "sensors-physical-systems"
  category_number: 38
  subcategory: "data-acquisition"

  tier: "expert"
  estimated_duration: "4-6 hours"  # median: 5h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  requires_physical_access: true
  severity: "high"
  scope: "physical-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates analog-to-digital converter (ADC) selection, configuration, and
    performance. Reviews resolution adequacy, accuracy specifications (INL, DNL,
    offset, gain error), noise performance (SNR, ENOB), reference voltage integrity,
    and environmental sensitivity. Assesses whether ADC performance meets measurement
    requirements.

  why_it_matters: |
    ADC performance fundamentally limits measurement system accuracy. Insufficient
    resolution, poor linearity, or excessive noise degrades all downstream
    measurements regardless of sensor quality. Proper ADC selection and configuration
    is essential for meeting measurement accuracy requirements.

  when_to_run:
    - "During hardware design reviews"
    - "When measurement accuracy issues arise"
    - "After ADC or reference changes"
    - "Before system qualification"
    - "During periodic verification"

prerequisites:
  required_artifacts:
    - type: "adc_datasheets"
      description: "ADC specifications and characterization"
    - type: "schematic"
      description: "ADC circuit schematic"
    - type: "accuracy_requirements"
      description: "Measurement accuracy requirements"

  access_requirements:
    - "Access to ADC hardware"
    - "Precision voltage source"
    - "Data acquisition for characterization"
    - "Temperature control capability"

discovery:
  file_patterns:
    - glob: "**/adc/**"
      purpose: "Find ADC configuration code"
    - glob: "**/*adc*.c"
      purpose: "Find ADC driver code"
    - glob: "**/analog/**"
      purpose: "Find analog interface code"
    - glob: "**/hardware/*.yaml"
      purpose: "Find hardware configuration"

knowledge_sources:
  guides:
    - id: "adc-fundamentals"
      name: "ADC Fundamentals"
      url: "https://www.analog.com/en/education.html"
    - id: "precision-measurement"
      name: "Precision Measurement"
      url: "https://www.ti.com/precision-labs"

  standards:
    - id: "ieee-1057"
      name: "IEEE 1057 Digitizing Waveform Recorders"
      relevance: "ADC testing standards"
    - id: "ieee-1241"
      name: "IEEE 1241 ADC Testing"
      relevance: "ADC characterization methods"

tooling:
  analysis_tools:
    - tool: "precision-source"
      purpose: "Reference signal generation"
    - tool: "spectrum-analyzer"
      purpose: "Noise and distortion analysis"
    - tool: "histogram-analyzer"
      purpose: "DNL/INL measurement"
    - tool: "temperature-chamber"
      purpose: "Temperature characterization"

signals:
  critical:
    - id: "SPS-ADC-CRIT-001"
      signal: "ADC resolution insufficient for measurement requirements"
      evidence_indicators:
        - "Quantization error exceeds tolerance"
        - "ENOB below minimum required"
        - "Cannot resolve required precision"
      explanation: |
        Insufficient ADC resolution creates quantization noise that cannot be
        removed by signal processing. This fundamentally limits measurement
        precision regardless of sensor or circuit quality.
      remediation: "Select ADC with adequate resolution or implement oversampling"

    - id: "SPS-ADC-CRIT-002"
      signal: "ADC accuracy specifications not met in application"
      evidence_indicators:
        - "Measured accuracy worse than datasheet"
        - "Environmental conditions exceed spec"
        - "Reference voltage unstable"
      explanation: |
        ADC specifications assume specific operating conditions. Operating
        outside these conditions degrades accuracy, potentially beyond
        acceptable limits for the application.
      remediation: "Address root cause of accuracy degradation"

  high:
    - id: "SPS-ADC-HIGH-001"
      signal: "Reference voltage integrity compromised"
      evidence_indicators:
        - "Reference noise excessive"
        - "Reference drift out of specification"
        - "Reference loading affects voltage"
      remediation: "Improve reference voltage design and stability"

    - id: "SPS-ADC-HIGH-002"
      signal: "ADC input circuit degrades performance"
      evidence_indicators:
        - "Input impedance mismatch"
        - "Settling time insufficient"
        - "Crosstalk between channels"
      remediation: "Optimize ADC input circuitry design"

  medium:
    - id: "SPS-ADC-MED-001"
      signal: "ADC calibration not performed"
      evidence_indicators:
        - "No offset calibration"
        - "No gain calibration"
        - "Factory calibration only"
      remediation: "Implement periodic ADC calibration"

    - id: "SPS-ADC-MED-002"
      signal: "ADC performance not characterized for environment"
      evidence_indicators:
        - "Temperature effects unknown"
        - "No environmental testing"
        - "Drift not measured"
      remediation: "Characterize ADC performance across operating environment"

  low:
    - id: "SPS-ADC-LOW-001"
      signal: "ADC selection rationale not documented"
      evidence_indicators:
        - "No justification for ADC choice"
        - "Requirements traceability missing"
        - "Alternative analysis not recorded"
      remediation: "Document ADC selection rationale"

    - id: "SPS-ADC-LOW-002"
      signal: "No ongoing ADC performance monitoring"
      evidence_indicators:
        - "Accuracy not periodically verified"
        - "Degradation not detected"
        - "No performance trending"
      remediation: "Implement ADC performance monitoring"

  positive:
    - id: "SPS-ADC-POS-001"
      signal: "ADC performance verified and documented"
      evidence_indicators:
        - "INL/DNL characterized"
        - "ENOB verified"
        - "Temperature performance documented"

    - id: "SPS-ADC-POS-002"
      signal: "Automatic ADC calibration implemented"
      evidence_indicators:
        - "Periodic auto-calibration"
        - "Built-in reference checking"
        - "Calibration verification"

procedure:
  context:
    cognitive_mode: "analytical"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Review Requirements"
      description: "Understand measurement accuracy requirements"
      duration_estimate: "20 min"

    - id: "2"
      name: "Assess ADC Selection"
      description: "Verify ADC specifications meet requirements"
      duration_estimate: "30 min"

    - id: "3"
      name: "Review Circuit Design"
      description: "Evaluate ADC circuit implementation"
      duration_estimate: "45 min"

    - id: "4"
      name: "Measure Static Performance"
      description: "Characterize INL, DNL, offset, gain"
      duration_estimate: "60 min"

    - id: "5"
      name: "Evaluate Noise Performance"
      description: "Measure SNR and ENOB"
      duration_estimate: "45 min"

    - id: "6"
      name: "Test Environmental Sensitivity"
      description: "Assess temperature and supply effects"
      duration_estimate: "45 min"

    - id: "7"
      name: "Document Findings"
      description: "Compile findings and recommendations"
      duration_estimate: "30 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "ADC Selection Review"
        - "Performance Characterization"
        - "Environmental Analysis"
        - "Recommendations"

closeout_checklist:
  - id: "sps-adc-001"
    item: "ADC resolution meets requirements"
    level: "CRITICAL"
    verification: "manual"

  - id: "sps-adc-002"
    item: "ADC accuracy verified"
    level: "WARNING"
    verification: "manual"

  - id: "sps-adc-003"
    item: "Reference voltage stability verified"
    level: "WARNING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["instrumentation", "industrial-automation", "medical-devices", "test-equipment"]

  compliance_mappings:
    - framework: "IEEE 1057"
      control: "ADC Requirements"
      description: "Waveform digitizing standards"
    - framework: "IEEE 1241"
      control: "ADC Testing"
      description: "ADC characterization methods"
    - framework: "IEC 61326"
      control: "EMC Requirements"
      description: "Measurement equipment EMC"

relationships:
  commonly_combined:
    - "sensors-physical-systems.data-acquisition.signal-processing"
    - "sensors-physical-systems.sensor-integration.sensor-calibration"
  depends_on:
    - "hardware.analog-design"
  feeds_into:
    - "sensors-physical-systems.data-acquisition.data-quality-validation"
    - "measurement.accuracy-verification"
