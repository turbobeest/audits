# ============================================================
# AUDIT: Pressure Sensing
# Category: 38 - Sensors & Physical Systems
# Subcategory: environmental-monitoring
# ============================================================

audit:
  id: "sensors-physical-systems.environmental-monitoring.pressure-sensing"
  name: "Pressure Sensing Audit"
  version: "1.0.0"
  last_updated: "2025-01-22"
  status: "active"

  category: "sensors-physical-systems"
  category_number: 38
  subcategory: "environmental-monitoring"

  tier: "expert"
  estimated_duration: "4-6 hours"  # median: 5h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "physical-systems"

  default_profiles:
    - "full"
    - "quick"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates pressure sensing systems including sensor technology selection
    (piezoresistive, capacitive, strain gauge), range selection, accuracy,
    overpressure protection, process connections, and reference pressure
    management. Reviews gauge, absolute, and differential pressure measurements.

  why_it_matters: |
    Pressure measurements are critical for safety, process control, and equipment
    protection. Overpressure can cause catastrophic failures, while underpressure
    may indicate leaks or process issues. Accurate pressure sensing ensures safe
    operation within design limits.

  when_to_run:
    - "During system design"
    - "When pressure issues arise"
    - "After sensor replacement"
    - "During safety reviews"
    - "Before vessel certification"

prerequisites:
  required_artifacts:
    - type: "sensor_specs"
      description: "Pressure sensor specifications"
    - type: "piping_diagrams"
      description: "Process connection diagrams"
    - type: "calibration_records"
      description: "Calibration history"

  access_requirements:
    - "Physical access to sensors"
    - "Pressure calibration equipment"
    - "Process data access"
    - "Configuration access"

discovery:
  file_patterns:
    - glob: "**/*pressure*.c"
      purpose: "Find pressure code"
    - glob: "**/*psi*.c"
      purpose: "Find pressure unit code"
    - glob: "**/*transducer*.c"
      purpose: "Find transducer code"
    - glob: "**/config/*pressure*.yaml"
      purpose: "Find pressure configuration"

knowledge_sources:
  guides:
    - id: "pressure-measurement"
      name: "Pressure Measurement Handbook"
      url: "https://www.omega.com/"
    - id: "asme-pressure"
      name: "ASME Pressure Standards"
      url: "https://www.asme.org/"

  standards:
    - id: "iec-61518"
      name: "IEC 61518 Pressure Transmitters"
      relevance: "Pressure transmitter requirements"
    - id: "asme-b31"
      name: "ASME B31 Piping Codes"
      relevance: "Pressure piping requirements"
    - id: "isa-37"
      name: "ISA-37 Pressure Standards"
      relevance: "Pressure measurement standards"

tooling:
  analysis_tools:
    - tool: "pressure-calibrator"
      purpose: "Pressure calibration"
    - tool: "deadweight-tester"
      purpose: "Reference pressure"
    - tool: "leak-tester"
      purpose: "Connection integrity"
    - tool: "data-logger"
      purpose: "Response analysis"

signals:
  critical:
    - id: "SPS-PRS-CRIT-001"
      signal: "Safety pressure measurement out of tolerance"
      evidence_indicators:
        - "Relief valve setpoint incorrect"
        - "Pressure safety limit inaccurate"
        - "Overpressure protection compromised"
      explanation: |
        Safety-critical pressure measurements protect against catastrophic
        overpressure events. Inaccurate readings can allow dangerous conditions
        or cause unnecessary process interruptions.
      remediation: "Recalibrate or replace sensor, verify safety limits"

    - id: "SPS-PRS-CRIT-002"
      signal: "Overpressure protection inadequate"
      evidence_indicators:
        - "Sensor can be damaged by process pressure"
        - "No overpressure protection installed"
        - "Protection device malfunctioning"
      explanation: |
        Sensors exposed to overpressure can fail suddenly or drift, providing
        incorrect readings that may mask dangerous conditions or cause false
        alarms.
      remediation: "Install appropriate overpressure protection"

  high:
    - id: "SPS-PRS-HIGH-001"
      signal: "Process connection issues"
      evidence_indicators:
        - "Impulse line plugged"
        - "Leaks at connections"
        - "Condensation in lines"
      remediation: "Clean and maintain process connections"

    - id: "SPS-PRS-HIGH-002"
      signal: "Reference pressure error"
      evidence_indicators:
        - "Atmospheric reference blocked"
        - "Reference leg incorrect"
        - "Barometric compensation missing"
      remediation: "Correct reference pressure configuration"

  medium:
    - id: "SPS-PRS-MED-001"
      signal: "Range selection not optimal"
      evidence_indicators:
        - "Operating near full scale"
        - "Operating at low end of range"
        - "Resolution insufficient"
      remediation: "Select sensor with appropriate range"

    - id: "SPS-PRS-MED-002"
      signal: "Temperature compensation inadequate"
      evidence_indicators:
        - "Readings drift with temperature"
        - "No temperature compensation"
        - "Process temperature exceeds sensor rating"
      remediation: "Implement temperature compensation"

  low:
    - id: "SPS-PRS-LOW-001"
      signal: "Pressure system not documented"
      evidence_indicators:
        - "Sensor types not recorded"
        - "Ranges not documented"
        - "Calibration procedures missing"
      remediation: "Document pressure measurement system"

    - id: "SPS-PRS-LOW-002"
      signal: "No pressure trending"
      evidence_indicators:
        - "Historical data not retained"
        - "Patterns not analyzed"
        - "Predictive maintenance not possible"
      remediation: "Implement pressure trending"

  positive:
    - id: "SPS-PRS-POS-001"
      signal: "Comprehensive pressure monitoring"
      evidence_indicators:
        - "All critical points monitored"
        - "Appropriate sensor selection"
        - "Overpressure protection verified"

    - id: "SPS-PRS-POS-002"
      signal: "Pressure sensors properly maintained"
      evidence_indicators:
        - "Regular calibration"
        - "Process connections maintained"
        - "Health monitoring active"

procedure:
  context:
    cognitive_mode: "analytical"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Inventory Pressure Sensors"
      description: "Catalog all pressure sensors"
      duration_estimate: "30 min"

    - id: "2"
      name: "Review Sensor Selection"
      description: "Verify appropriate sensor types and ranges"
      duration_estimate: "30 min"

    - id: "3"
      name: "Inspect Process Connections"
      description: "Check impulse lines and fittings"
      duration_estimate: "45 min"

    - id: "4"
      name: "Verify Calibration"
      description: "Check calibration status"
      duration_estimate: "60 min"

    - id: "5"
      name: "Test Overpressure Protection"
      description: "Verify protection devices"
      duration_estimate: "30 min"

    - id: "6"
      name: "Review Safety Limits"
      description: "Verify pressure alarm settings"
      duration_estimate: "30 min"

    - id: "7"
      name: "Document Findings"
      description: "Compile findings and recommendations"
      duration_estimate: "30 min"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Sensor Inventory"
        - "Calibration Assessment"
        - "Safety Review"
        - "Recommendations"

closeout_checklist:
  - id: "sps-prs-001"
    item: "Safety pressure sensors calibrated"
    level: "CRITICAL"
    verification: "manual"

  - id: "sps-prs-002"
    item: "Overpressure protection verified"
    level: "CRITICAL"
    verification: "manual"

  - id: "sps-prs-003"
    item: "Process connections inspected"
    level: "WARNING"
    verification: "manual"

governance:
  applicable_to:
    archetypes: ["process-industries", "hvac-systems", "oil-gas", "manufacturing"]

  compliance_mappings:
    - framework: "ASME BPVC"
      control: "Pressure Vessel"
      description: "Pressure vessel code"
    - framework: "API 520"
      control: "Pressure Relief"
      description: "Relief device sizing"
    - framework: "IEC 61511"
      control: "SIS Requirements"
      description: "Safety instrumented systems"

relationships:
  commonly_combined:
    - "sensors-physical-systems.safety-systems.overpressure-protection"
    - "sensors-physical-systems.sensor-integration.sensor-calibration"
  depends_on:
    - "sensors-physical-systems.hardware-interfaces.analog-signal-conditioning"
  feeds_into:
    - "control-systems.pressure-control"
    - "safety.pressure-safety"
