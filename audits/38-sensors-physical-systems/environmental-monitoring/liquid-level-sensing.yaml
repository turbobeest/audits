audit:
  id: sensors-physical-systems.environmental-monitoring.liquid-level-sensing
  name: Liquid Level Sensing Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: sensors-physical-systems
  category_number: 38
  subcategory: environmental-monitoring
  tier: expert
  estimated_duration: 4-5 hours  # median: 4h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: physical-systems
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates liquid level sensing systems including technology selection (ultrasonic,
    radar, pressure, capacitive, float), mounting configuration, tank geometry
    compensation, accuracy, and safety interlocks. Reviews level switches, continuous
    level transmitters, and inventory management applications.
  why_it_matters: |
    Level measurement is critical for process control, inventory management, and
    safety. Overfill can cause spills and environmental damage, while low levels
    can damage pumps or interrupt processes. Accurate level sensing ensures safe
    operation and efficient inventory management.
  when_to_run:
  - During system design
  - After level issues arise
  - During tank inspections
  - Before inventory reconciliation
  - During safety reviews
prerequisites:
  required_artifacts:
  - type: tank_specs
    description: Tank geometry and specifications
  - type: sensor_specs
    description: Level sensor specifications
  - type: calibration_records
    description: Calibration history
  access_requirements:
  - Physical access to tanks
  - Level calibration equipment
  - Process data access
  - Safety interlock access
discovery:
  file_patterns:
  - glob: '**/*level*.c'
    purpose: Find level code
  - glob: '**/*tank*.c'
    purpose: Find tank code
  - glob: '**/*radar*.c'
    purpose: Find radar level code
  - glob: '**/config/*level*.yaml'
    purpose: Find level configuration
knowledge_sources:
  guides:
  - id: level-measurement
    name: Level Measurement Handbook
    url: https://www.emerson.com/
  - id: api-tank
    name: API Tank Standards
    url: https://www.api.org/
  standards:
  - id: api-2350
    name: API 2350 Overfill Protection
    relevance: Overfill prevention requirements
  - id: iec-61511
    name: IEC 61511 SIS for Process
    relevance: Safety level requirements
  - id: api-2545
    name: API 2545 Tank Calibration
    relevance: Tank strapping and calibration
tooling:
  analysis_tools:
  - tool: level-calibrator
    purpose: Level verification
  - tool: tank-strapping
    purpose: Tank volume calibration
  - tool: dip-tape
    purpose: Reference measurement
  - tool: radar-diagnostic
    purpose: Radar sensor diagnostics
signals:
  critical:
  - id: SPS-LVL-CRIT-001
    signal: Overfill protection system failure
    evidence_indicators:
    - High-high level switch failed
    - Overfill prevention bypassed
    - Independent protection not independent
    explanation: |
      Overfill protection systems prevent tank overflow, which can cause
      environmental spills, fire hazards, and regulatory violations. System
      failures must be addressed immediately.
    remediation: Restore overfill protection immediately
  - id: SPS-LVL-CRIT-002
    signal: Level measurement causing safety hazard
    evidence_indicators:
    - Actual level different from indicated
    - Pump cavitation from low level
    - Overflow despite indication below limit
    explanation: |
      Inaccurate level measurement can lead to equipment damage from
      running pumps dry, overfilling tanks, or incorrect inventory
      management causing safety and environmental issues.
    remediation: Verify level accuracy, correct calibration or replace sensor
  high:
  - id: SPS-LVL-HIGH-001
    signal: Level sensor affected by process conditions
    evidence_indicators:
    - Foam causing false readings
    - Turbulence affecting measurement
    - Product buildup on sensor
    remediation: Address process effects or select different technology
  - id: SPS-LVL-HIGH-002
    signal: Tank geometry compensation incorrect
    evidence_indicators:
    - Volume calculation errors
    - Strapping table incorrect
    - Tank deformation not accounted
    remediation: Verify and correct tank calibration
  medium:
  - id: SPS-LVL-MED-001
    signal: Level switch testing inadequate
    evidence_indicators:
    - Switches not regularly tested
    - No proof testing program
    - Test procedures missing
    remediation: Implement switch testing program
  - id: SPS-LVL-MED-002
    signal: Inventory reconciliation discrepancies
    evidence_indicators:
    - Measured vs calculated differences
    - Unexplained gains or losses
    - Closing inventory errors
    remediation: Investigate and resolve discrepancies
  low:
  - id: SPS-LVL-LOW-001
    signal: Level system not documented
    evidence_indicators:
    - Sensor types not recorded
    - Tank calibrations not filed
    - Interlock logic not documented
    remediation: Document level measurement systems
  - id: SPS-LVL-LOW-002
    signal: No level trending
    evidence_indicators:
    - Historical data not retained
    - Rate of change not monitored
    - Leak detection not possible
    remediation: Implement level trending and analysis
  positive:
  - id: SPS-LVL-POS-001
    signal: Comprehensive level monitoring
    evidence_indicators:
    - Continuous level measurement
    - Independent high-level switches
    - Overfill protection verified
  - id: SPS-LVL-POS-002
    signal: Level systems properly maintained
    evidence_indicators:
    - Regular calibration
    - Switch testing documented
    - Tank calibration current
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Level Instruments
    description: Catalog all level sensors and switches
    duration_estimate: 30 min
  - id: '2'
    name: Review Sensor Selection
    description: Verify appropriate technology for application
    duration_estimate: 30 min
  - id: '3'
    name: Verify Calibration
    description: Check level calibration accuracy
    duration_estimate: 60 min
  - id: '4'
    name: Test Level Switches
    description: Verify high and low level switch operation
    duration_estimate: 45 min
  - id: '5'
    name: Review Overfill Protection
    description: Assess overfill prevention systems
    duration_estimate: 30 min
  - id: '6'
    name: Check Tank Calibration
    description: Verify strapping table accuracy
    duration_estimate: 30 min
  - id: '7'
    name: Document Findings
    description: Compile findings and recommendations
    duration_estimate: 30 min
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Level Instrument Inventory
    - Calibration Assessment
    - Overfill Protection Review
    - Recommendations
closeout_checklist:
- id: sps-lvl-001
  item: Overfill protection functional
  level: CRITICAL
  verification: manual
- id: sps-lvl-002
  item: Level calibration verified
  level: WARNING
  verification: manual
- id: sps-lvl-003
  item: Level switches tested
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - tank-farms
    - process-industries
    - water-treatment
    - chemical-processing
  compliance_mappings:
  - framework: API 2350
    control: Overfill Prevention
    description: Tank overfill protection
  - framework: EPA SPCC
    control: Spill Prevention
    description: Spill prevention requirements
  - framework: IEC 61511
    control: SIF Requirements
    description: Safety instrumented functions
relationships:
  commonly_combined:
  - sensors-physical-systems.safety-systems.overfill-protection
  - sensors-physical-systems.sensor-integration.sensor-calibration
  depends_on:
  - sensors-physical-systems.hardware-interfaces.analog-signal-conditioning
  feeds_into:
  - inventory.tank-gauging
  - safety.spill-prevention
