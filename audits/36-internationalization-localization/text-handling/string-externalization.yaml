audit:
  id: internationalization-localization.text-handling.string-externalization
  name: String Externalization Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: internationalization-localization
  category_number: 36
  subcategory: text-handling
  tier: expert
  estimated_duration: 3-5 hours  # median: 4h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: full
  severity: high
  scope: localization
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates whether all user-facing text strings are properly externalized
    to translation files rather than hardcoded in source code. Identifies
    inline strings, concatenated strings, and strings embedded in templates
    that cannot be translated.
  why_it_matters: |
    Hardcoded strings cannot be translated without code changes, making
    localization expensive and error-prone. Proper externalization is the
    foundation of any localization effort and enables translation workflows.
  when_to_run:
  - Before starting localization effort
  - After adding new features
  - During code review processes
  - When auditing i18n readiness
prerequisites:
  required_artifacts:
  - type: source_code
    description: Application source code
  - type: i18n_config
    description: i18n library configuration
  - type: translation_files
    description: Current translation resource files
  access_requirements:
  - Read access to source code
  - Access to i18n configuration
discovery:
  file_patterns:
  - glob: '**/*.{js,jsx,ts,tsx}'
    purpose: Find JavaScript/TypeScript files
  - glob: '**/*.{vue,svelte}'
    purpose: Find Vue/Svelte components
  - glob: '**/*.{html,htm}'
    purpose: Find HTML templates
  - glob: '**/*.{py,rb,java,go}'
    purpose: Find backend source files
knowledge_sources:
  guides:
  - id: i18next-best
    name: i18next Best Practices
    url: https://www.i18next.com/principles/best-practices
  - id: formatjs-guide
    name: FormatJS Extraction
    url: https://formatjs.io/docs/getting-started/message-extraction
  standards:
  - id: icu-message
    name: ICU Message Format
    relevance: Standard message format
tooling:
  analysis_tools:
  - tool: i18next-parser
    purpose: Extract strings from code
    install: npm install -g i18next-parser
  - tool: formatjs-extract
    purpose: Extract react-intl messages
    install: npm install -D @formatjs/cli
  - tool: i18n-ally
    purpose: Find hardcoded strings in VSCode
    install: VSCode marketplace
  - tool: eslint-plugin-i18next
    purpose: Lint for hardcoded strings
    install: npm install -D eslint-plugin-i18next
signals:
  critical:
  - id: I18N-EXT-CRIT-001
    signal: Large portions of UI text hardcoded
    evidence_indicators:
    - More than 20% of strings not externalized
    - Entire sections with no translation keys
    explanation: |
      Significant hardcoded text makes localization impossible without
      major refactoring, delaying international launches.
    remediation: Extract all hardcoded strings to translation files
  - id: I18N-EXT-CRIT-002
    signal: Error messages hardcoded in code
    evidence_indicators:
    - User-facing errors not using translation functions
    - Alert and notification text inline
    explanation: |
      Hardcoded error messages prevent users from understanding errors
      in their language, degrading support experience.
    remediation: Extract all error messages to translation keys
  high:
  - id: I18N-EXT-HIGH-001
    signal: String concatenation instead of parameterization
    evidence_indicators:
    - Using + or template literals to build messages
    - Sentences built from multiple pieces
    remediation: Use ICU message format with parameters
  - id: I18N-EXT-HIGH-002
    signal: Strings in component attributes not externalized
    evidence_indicators:
    - title, placeholder, alt attributes hardcoded
    - Accessibility text inline
    remediation: Externalize all attribute strings
  medium:
  - id: I18N-EXT-MED-001
    signal: Inconsistent translation key naming
    evidence_indicators:
    - Mixed naming conventions (camelCase, snake_case)
    - No hierarchical key structure
    remediation: Establish and enforce key naming conventions
  - id: I18N-EXT-MED-002
    signal: Plural forms not using proper i18n syntax
    evidence_indicators:
    - Conditional logic for singular/plural
    - Not using ICU plural syntax
    remediation: Use ICU plural message format
  low:
  - id: I18N-EXT-LOW-001
    signal: Developer comments in translation files
    remediation: Use proper context mechanisms instead
  - id: I18N-EXT-LOW-002
    signal: Unused translation keys in files
    remediation: Clean up unused keys regularly
  positive:
  - id: I18N-EXT-POS-001
    signal: 100% string externalization
  - id: I18N-EXT-POS-002
    signal: Automated linting prevents hardcoded strings
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Configure Detection Tools
    description: Set up string detection tooling
    duration_estimate: 20 min
  - id: '2'
    name: Scan for Hardcoded Strings
    description: Run automated detection across codebase
    duration_estimate: 30 min
    tools:
    - name: i18next-parser
      command: i18next-parser --fail-on-warnings
    - name: eslint
      command: 'eslint --rule ''i18next/no-literal-string: error'' src/'
  - id: '3'
    name: Analyze String Patterns
    description: Review detected hardcoded strings
    duration_estimate: 45 min
  - id: '4'
    name: Check Concatenation Patterns
    description: Find improper string building
    duration_estimate: 30 min
  - id: '5'
    name: Review Plural Handling
    description: Verify proper plural/gender handling
    duration_estimate: 30 min
  - id: '6'
    name: Document Findings
    description: Compile externalization audit report
    duration_estimate: 30 min
output:
  deliverables:
  - type: hardcoded_strings_list
    format: tabular
    description: All hardcoded strings with locations
  - type: extraction_statistics
    format: structured
    description: Externalization coverage metrics
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Externalization Coverage
    - Hardcoded String Inventory
    - Concatenation Issues
    - Remediation Plan
closeout_checklist:
- id: i18n-ext-001
  item: All user-facing strings externalized
  level: ERROR
  verification: automated
- id: i18n-ext-002
  item: No string concatenation for messages
  level: WARNING
  verification: automated
- id: i18n-ext-003
  item: Linting rules enforced in CI
  level: INFO
  verification: automated
governance:
  applicable_to:
    archetypes:
    - global-applications
    - all-web-applications
    company_sizes:
    - startup
    - scaleup
    - enterprise
  compliance_mappings:
  - framework: i18n-Readiness
    control: String Management
    description: Foundation for localization
relationships:
  commonly_combined:
  - internationalization-localization.translation-management.translation-completeness
  - code-quality.static-analysis
  depends_on:
  - architecture.i18n-framework-selection
  feeds_into:
  - internationalization-localization.translation-management.workflow-efficiency
