audit:
  id: internationalization-localization.text-handling.text-expansion
  name: Text Expansion Handling Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: internationalization-localization
  category_number: 36
  subcategory: text-handling
  tier: expert
  estimated_duration: 3-4 hours  # median: 3h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: localization
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates how the application UI handles text expansion that occurs during
    translation. Text in languages like German, Finnish, or Russian can expand
    30-300% compared to English. Examines layout flexibility, truncation
    handling, and responsive design for translated content.
  why_it_matters: |
    Fixed-width layouts break when translations expand, causing truncated text,
    broken buttons, overlapping elements, and unusable interfaces. Planning for
    expansion is essential for global-ready UI design.
  when_to_run:
  - Before UI design finalization
  - During localization testing
  - When adding new languages
  - After receiving translations
prerequisites:
  required_artifacts:
  - type: ui_components
    description: Component library and design system
  - type: translations
    description: Translations in expansion-prone languages
  - type: design_specs
    description: UI design specifications
  access_requirements:
  - Access to running application
  - Access to component library
  - Translations in German/Finnish/Russian
discovery:
  file_patterns:
  - glob: '**/*.css'
    purpose: Find stylesheet files
  - glob: '**/components/**/*.{js,jsx,ts,tsx,vue}'
    purpose: Find UI components
  - glob: '**/styles/**/*.{css,scss,less}'
    purpose: Find style definitions
knowledge_sources:
  guides:
  - id: ibm-expansion
    name: IBM Text Expansion Guidelines
    url: https://www.ibm.com/design/language/typography/
  - id: w3c-expansion
    name: W3C Text Size in Translation
    url: https://www.w3.org/International/articles/text-size/
  standards:
  - id: cldr-expansion
    name: CLDR Expansion Estimates
    relevance: Standard expansion factors
tooling:
  analysis_tools:
  - tool: pseudo-localization
    purpose: Simulate text expansion
    install: npm install pseudo-localization
  - tool: i18n-ally
    purpose: Preview translations in context
  - tool: chromatic
    purpose: Visual regression testing
signals:
  critical:
  - id: I18N-EXP-CRIT-001
    signal: Critical UI elements truncate without indication
    evidence_indicators:
    - Button text cut off
    - Navigation labels incomplete
    explanation: |
      Truncated critical text makes features inaccessible or
      incomprehensible to users in affected languages.
    remediation: Redesign with flexible layouts or text wrapping
  high:
  - id: I18N-EXP-HIGH-001
    signal: Fixed-width containers cause overflow
    evidence_indicators:
    - Text overflowing containers
    - Horizontal scrollbars appearing
    remediation: Use flexible layouts and min/max widths
  - id: I18N-EXP-HIGH-002
    signal: No ellipsis or indication of truncation
    evidence_indicators:
    - Text just stops mid-word
    - No tooltip for full text
    remediation: Add ellipsis and tooltips for truncated content
  medium:
  - id: I18N-EXP-MED-001
    signal: Layout breaks at common expansion levels
    evidence_indicators:
    - UI issues at 130% text expansion
    - Problems with German translations
    remediation: Design for 200% expansion minimum
  - id: I18N-EXP-MED-002
    signal: Icon-only buttons without text flexibility
    evidence_indicators:
    - Icons that need text labels for some locales
    - No space allocated for longer labels
    remediation: Plan space for icon + text combinations
  low:
  - id: I18N-EXP-LOW-001
    signal: Minor alignment issues with expanded text
    remediation: Fine-tune spacing and alignment
  - id: I18N-EXP-LOW-002
    signal: Inconsistent truncation behavior
    remediation: Standardize truncation patterns
  positive:
  - id: I18N-EXP-POS-001
    signal: UI handles 200%+ text expansion gracefully
  - id: I18N-EXP-POS-002
    signal: Pseudo-localization testing in CI/CD
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Enable Pseudo-localization
    description: Configure pseudo-loc with expansion
    duration_estimate: 20 min
  - id: '2'
    name: Visual Walkthrough
    description: Review all screens with expanded text
    duration_estimate: 60 min
  - id: '3'
    name: Test Critical Paths
    description: Verify key user flows work with expansion
    duration_estimate: 45 min
  - id: '4'
    name: CSS Analysis
    description: Identify fixed dimensions in styles
    duration_estimate: 30 min
    tools:
    - name: grep
      command: grep -r 'width:\s*[0-9]' --include='*.css'
  - id: '5'
    name: Component Review
    description: Assess component flexibility
    duration_estimate: 30 min
  - id: '6'
    name: Document Findings
    description: Compile text expansion audit report
    duration_estimate: 30 min
output:
  deliverables:
  - type: expansion_issues
    format: tabular
    description: UI elements with expansion problems
  - type: screenshot_comparison
    format: visual
    description: Before/after expansion comparisons
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Expansion Analysis
    - Critical Issues
    - Component Assessment
    - Recommendations
closeout_checklist:
- id: i18n-exp-001
  item: Critical UI handles 200% expansion
  level: ERROR
  verification: manual
- id: i18n-exp-002
  item: Truncation includes ellipsis and tooltips
  level: WARNING
  verification: manual
- id: i18n-exp-003
  item: Pseudo-localization testing enabled
  level: INFO
  verification: automated
governance:
  applicable_to:
    archetypes:
    - global-applications
    - ui-heavy-applications
    company_sizes:
    - startup
    - scaleup
    - enterprise
  compliance_mappings:
  - framework: UX-Standards
    control: International Design
    description: UI flexibility requirements
relationships:
  commonly_combined:
  - internationalization-localization.testing-validation.pseudo-localization
  - frontend-architecture.responsive-design
  depends_on:
  - design-system.component-flexibility
  feeds_into:
  - internationalization-localization.testing-validation.visual-testing
