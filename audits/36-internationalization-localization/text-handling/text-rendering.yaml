audit:
  id: internationalization-localization.text-handling.text-rendering
  name: International Text Rendering Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: internationalization-localization
  category_number: 36
  subcategory: text-handling
  tier: expert
  estimated_duration: 2-4 hours  # median: 3h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: localization
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates how the application renders text across different writing
    systems and scripts including font support, line breaking, text shaping,
    ligatures, and complex script rendering for languages like Arabic,
    Thai, Hindi, and CJK languages.
  why_it_matters: |
    Poor text rendering makes content unreadable or visually incorrect.
    Missing fonts show as tofu boxes, improper line breaking splits words
    incorrectly, and complex scripts without proper shaping appear broken.
  when_to_run:
  - Before adding new language support
  - When changing fonts or typography
  - During visual QA testing
  - After frontend framework updates
prerequisites:
  required_artifacts:
  - type: font_configuration
    description: Font stack and web font setup
  - type: css_styles
    description: Typography CSS
  - type: test_content
    description: Sample text in target languages
  access_requirements:
  - Access to running application
  - Font licenses and files
  - Test devices/browsers
discovery:
  file_patterns:
  - glob: '**/*.{woff,woff2,ttf,otf}'
    purpose: Find web font files
  - glob: '**/fonts/**'
    purpose: Find font directory
  - glob: '**/*.css'
    purpose: Find font-family declarations
knowledge_sources:
  guides:
  - id: google-fonts-i18n
    name: Google Fonts International
    url: https://fonts.google.com/knowledge/choosing_type/support_for_other_languages
  - id: mdn-fonts
    name: MDN Web Fonts Guide
    url: https://developer.mozilla.org/en-US/docs/Learn/CSS/Styling_text/Web_fonts
  standards:
  - id: opentype
    name: OpenType Specification
    relevance: Font features for complex scripts
  - id: css-fonts
    name: CSS Fonts Module
    relevance: Web font specification
tooling:
  analysis_tools:
  - tool: fonttools
    purpose: Analyze font character coverage
    install: pip install fonttools
  - tool: wakamai-fondue
    purpose: Font capability inspection
    url: https://wakamaifondue.com/
  - tool: subfont
    purpose: Font subsetting and optimization
    install: npm install -g subfont
signals:
  critical:
  - id: I18N-REND-CRIT-001
    signal: Font missing characters for supported languages
    evidence_indicators:
    - Tofu boxes (.notdef) appearing
    - System fallback fonts displaying
    explanation: |
      Missing font coverage makes text literally unreadable, completely
      blocking users from using the application.
    remediation: Add fonts with full character coverage
  - id: I18N-REND-CRIT-002
    signal: Complex script rendering broken
    evidence_indicators:
    - Arabic letters not connecting
    - Hindi conjuncts not forming
    - Thai tones mispositioned
    explanation: |
      Broken complex script rendering produces incorrect or unreadable
      text in affected languages.
    remediation: Use fonts and engines supporting complex scripts
  high:
  - id: I18N-REND-HIGH-001
    signal: Line breaking splits words incorrectly
    evidence_indicators:
    - Thai words broken mid-word (no word boundaries)
    - CJK text breaking at wrong points
    remediation: Implement proper line breaking for script types
  - id: I18N-REND-HIGH-002
    signal: Font fallback chain inadequate
    evidence_indicators:
    - Jarring font style changes in mixed content
    - Poor quality system fallbacks
    remediation: Configure appropriate fallback fonts per script
  medium:
  - id: I18N-REND-MED-001
    signal: Vertical text not supported for CJK
    evidence_indicators:
    - Japanese/Chinese vertical text displays horizontally
    - No writing-mode CSS support
    remediation: Add vertical text mode support
  - id: I18N-REND-MED-002
    signal: Ruby annotations not rendering
    evidence_indicators:
    - Japanese furigana not displayed
    - Chinese pinyin missing
    remediation: Implement proper ruby markup support
  low:
  - id: I18N-REND-LOW-001
    signal: Inconsistent font weights across scripts
    remediation: Select fonts with matching weights
  - id: I18N-REND-LOW-002
    signal: Font loading causes layout shift
    remediation: Implement font loading optimization
  positive:
  - id: I18N-REND-POS-001
    signal: Full character coverage for all languages
  - id: I18N-REND-POS-002
    signal: Complex scripts render correctly
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Font Stack
    description: Document current font configuration
    duration_estimate: 20 min
  - id: '2'
    name: Character Coverage Analysis
    description: Check font coverage for target languages
    duration_estimate: 30 min
    tools:
    - name: fonttools
      command: pyftsubset font.ttf --text-file=sample.txt --no-subset-tables+=
  - id: '3'
    name: Complex Script Testing
    description: Test Arabic, Hindi, Thai rendering
    duration_estimate: 45 min
  - id: '4'
    name: Line Breaking Testing
    description: Verify proper line breaking by script
    duration_estimate: 30 min
  - id: '5'
    name: Cross-Browser Testing
    description: Test rendering across browsers/devices
    duration_estimate: 30 min
  - id: '6'
    name: Document Findings
    description: Compile text rendering audit report
    duration_estimate: 30 min
output:
  deliverables:
  - type: rendering_assessment
    format: structured
    description: Text rendering status by language/script
  - type: screenshot_samples
    format: visual
    description: Rendering samples across scripts
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Font Coverage Analysis
    - Complex Script Status
    - Line Breaking Assessment
    - Recommendations
closeout_checklist:
- id: i18n-rend-001
  item: Fonts cover all target language characters
  level: ERROR
  verification: automated
- id: i18n-rend-002
  item: Complex scripts render correctly
  level: ERROR
  verification: manual
- id: i18n-rend-003
  item: Line breaking appropriate for scripts
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - global-applications
    - content-platforms
    company_sizes:
    - startup
    - scaleup
    - enterprise
  compliance_mappings:
  - framework: WCAG
    control: 1.4.4
    description: Resize Text
  - framework: Accessibility
    control: Text Readability
    description: Readable text requirements
relationships:
  commonly_combined:
  - internationalization-localization.text-handling.unicode-support
  - frontend-architecture.typography
  depends_on:
  - design-system.typography
  feeds_into:
  - accessibility-inclusion.visual-accessibility
