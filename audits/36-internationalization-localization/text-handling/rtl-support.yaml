audit:
  id: internationalization-localization.text-handling.rtl-support
  name: Right-to-Left Language Support Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: internationalization-localization
  category_number: 36
  subcategory: text-handling
  tier: expert
  estimated_duration: 4-6 hours  # median: 5h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: localization
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the application's support for right-to-left (RTL) languages
    including Arabic, Hebrew, Persian, and Urdu. Examines layout mirroring,
    bidirectional text handling, CSS/styling approach, and mixed-direction
    content scenarios.
  why_it_matters: |
    RTL languages represent over 400 million native speakers. Poor RTL
    support creates unusable interfaces, damages brand perception, and
    excludes significant markets including the Middle East and North Africa.
  when_to_run:
  - Before launching in RTL markets
  - After major UI redesigns
  - When adding RTL language support
  - During accessibility audits
prerequisites:
  required_artifacts:
  - type: source_code
    description: Application source code and stylesheets
  - type: ui_components
    description: Component library and design system
  - type: rtl_translations
    description: Translations in RTL languages
  access_requirements:
  - Read access to source code
  - Access to running application
  - RTL language test content
discovery:
  file_patterns:
  - glob: '**/*.css'
    purpose: Find stylesheets for RTL analysis
  - glob: '**/*.scss'
    purpose: Find SCSS files
  - glob: '**/rtl*.css'
    purpose: Find RTL-specific styles
  - glob: '**/*-rtl.css'
    purpose: Find RTL style overrides
knowledge_sources:
  guides:
  - id: material-rtl
    name: Material Design RTL Guidelines
    url: https://material.io/design/usability/bidirectionality.html
  - id: w3c-bidi
    name: W3C Bidirectional Text
    url: https://www.w3.org/International/articles/inline-bidi-markup/
  standards:
  - id: unicode-bidi
    name: Unicode Bidirectional Algorithm
    relevance: Text direction handling
  - id: css-logical
    name: CSS Logical Properties
    relevance: Direction-agnostic styling
tooling:
  analysis_tools:
  - tool: rtl-detect
    purpose: Detect RTL script in text
    install: npm install rtl-detect
  - tool: stylelint-no-physical
    purpose: Lint for physical properties
    install: npm install stylelint-use-logical
  - tool: rtlcss
    purpose: Convert LTR CSS to RTL
    install: npm install -g rtlcss
signals:
  critical:
  - id: I18N-RTL-CRIT-001
    signal: Application completely broken in RTL mode
    evidence_indicators:
    - Layout completely unusable
    - Critical functionality inaccessible
    explanation: |
      Broken RTL support makes the application unusable for RTL users,
      completely blocking access to these markets.
    remediation: Implement comprehensive RTL support
  - id: I18N-RTL-CRIT-002
    signal: No RTL text direction support
    evidence_indicators:
    - No dir attribute handling
    - RTL text displayed left-to-right
    explanation: |
      Without text direction support, RTL content is unreadable,
      appearing backwards to users.
    remediation: Add dir='rtl' support throughout application
  high:
  - id: I18N-RTL-HIGH-001
    signal: Layout not mirrored for RTL
    evidence_indicators:
    - Navigation still on left in RTL
    - Icons and graphics not mirrored
    remediation: Implement logical CSS properties or RTL stylesheet
  - id: I18N-RTL-HIGH-002
    signal: Bidirectional text handling issues
    evidence_indicators:
    - Mixed LTR/RTL content garbled
    - Numbers or English words misplaced in RTL text
    remediation: Use Unicode bidi controls and proper markup
  medium:
  - id: I18N-RTL-MED-001
    signal: Physical CSS properties used instead of logical
    evidence_indicators:
    - Using left/right instead of start/end
    - Hardcoded margin-left/padding-right
    remediation: Migrate to CSS logical properties
  - id: I18N-RTL-MED-002
    signal: Icons not mirrored appropriately
    evidence_indicators:
    - Directional icons point wrong way in RTL
    - Back arrow still points left in RTL
    remediation: Mirror directional icons for RTL
  low:
  - id: I18N-RTL-LOW-001
    signal: Minor alignment issues in RTL
    remediation: Fine-tune RTL styling for edge cases
  - id: I18N-RTL-LOW-002
    signal: RTL testing not automated
    remediation: Add RTL visual regression tests
  positive:
  - id: I18N-RTL-POS-001
    signal: Comprehensive RTL support with proper mirroring
  - id: I18N-RTL-POS-002
    signal: CSS logical properties used throughout
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Enable RTL Mode
    description: Configure application for RTL testing
    duration_estimate: 15 min
  - id: '2'
    name: Visual Layout Review
    description: Review all major screens in RTL mode
    duration_estimate: 60 min
  - id: '3'
    name: CSS Analysis
    description: Analyze stylesheet for RTL compatibility
    duration_estimate: 45 min
    tools:
    - name: grep
      command: grep -r 'margin-left\|padding-right' --include='*.css'
  - id: '4'
    name: Bidirectional Text Testing
    description: Test mixed LTR/RTL content scenarios
    duration_estimate: 45 min
  - id: '5'
    name: Icon and Image Review
    description: Check directional elements for mirroring
    duration_estimate: 30 min
  - id: '6'
    name: Document Findings
    description: Compile RTL support audit report
    duration_estimate: 30 min
output:
  deliverables:
  - type: rtl_assessment
    format: structured
    description: RTL support status by component
  - type: screenshot_comparison
    format: visual
    description: LTR vs RTL layout comparisons
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Layout Mirroring Assessment
    - Bidirectional Text Analysis
    - CSS Compatibility
    - Recommendations
closeout_checklist:
- id: i18n-rtl-001
  item: Layout properly mirrors for RTL
  level: ERROR
  verification: manual
- id: i18n-rtl-002
  item: Bidirectional text renders correctly
  level: ERROR
  verification: manual
- id: i18n-rtl-003
  item: Directional icons mirror appropriately
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - global-applications
    - middle-east-expansion
    company_sizes:
    - startup
    - scaleup
    - enterprise
  compliance_mappings:
  - framework: WCAG
    control: 1.3.2
    description: Meaningful Sequence
  - framework: Market-Requirements
    control: RTL Markets
    description: Arabic, Hebrew market requirements
relationships:
  commonly_combined:
  - internationalization-localization.text-handling.unicode-support
  - accessibility-inclusion.screen-reader-support
  depends_on:
  - frontend-architecture.css-methodology
  feeds_into:
  - internationalization-localization.testing-validation.rtl-testing
