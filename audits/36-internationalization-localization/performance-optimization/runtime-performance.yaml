audit:
  id: internationalization-localization.performance-optimization.runtime-performance
  name: i18n Runtime Performance Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: internationalization-localization
  category_number: 36
  subcategory: performance-optimization
  tier: expert
  estimated_duration: 2-4 hours  # median: 3h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: localization
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates runtime performance of internationalization including translation
    lookup speed, date/number formatting overhead, string interpolation
    efficiency, and re-rendering behavior. Examines whether i18n operations
    cause performance bottlenecks.
  why_it_matters: |
    i18n operations happen frequently during rendering. Slow translation
    lookups, expensive formatting functions, or unnecessary re-renders
    can impact application responsiveness, especially on lower-end devices
    or with large translation sets.
  when_to_run:
  - When experiencing performance issues
  - After adding many translations
  - During performance optimization
  - When scaling to many locales
prerequisites:
  required_artifacts:
  - type: source_code
    description: Application source code
  - type: running_application
    description: Application for profiling
  - type: profiling_tools
    description: Performance profiling access
  access_requirements:
  - Read access to source code
  - Access to running application
  - Browser profiling tools
discovery:
  file_patterns:
  - glob: '**/*.{js,ts,tsx}'
    purpose: Find source files
  - glob: '**/i18n*.{js,ts}'
    purpose: Find i18n implementation
  - glob: '**/format*.{js,ts}'
    purpose: Find formatting utilities
knowledge_sources:
  guides:
  - id: react-profiler
    name: React Profiler
    url: https://reactjs.org/docs/profiler.html
  - id: chrome-profiler
    name: Chrome Performance Profiler
    url: https://developer.chrome.com/docs/devtools/performance/
  standards:
  - id: web-vitals
    name: Core Web Vitals
    relevance: Runtime performance metrics
tooling:
  analysis_tools:
  - tool: react-devtools
    purpose: React component profiling
  - tool: chrome-devtools
    purpose: JavaScript profiling
  - tool: why-did-you-render
    purpose: Re-render detection
    install: npm install @welldone-software/why-did-you-render
signals:
  critical:
  - id: I18N-PERF-CRIT-001
    signal: Translation lookup blocking main thread
    evidence_indicators:
    - Long tasks during rendering
    - Synchronous translation loading
    explanation: |
      Blocking translation operations cause jank and poor
      responsiveness, degrading user experience.
    remediation: Make translation operations non-blocking
  high:
  - id: I18N-PERF-HIGH-001
    signal: Excessive re-renders from i18n
    evidence_indicators:
    - Components re-render on every translation
    - Context causing cascading renders
    remediation: Optimize translation context and memoization
  - id: I18N-PERF-HIGH-002
    signal: Formatting operations expensive
    evidence_indicators:
    - Intl object creation in render
    - No formatter caching
    remediation: Cache formatters, move creation out of render
  medium:
  - id: I18N-PERF-MED-001
    signal: Translation lookup not optimized
    evidence_indicators:
    - Linear search through translations
    - Deep object traversal for keys
    remediation: Use flat key structure or optimized lookup
  - id: I18N-PERF-MED-002
    signal: ICU message parsing at runtime
    evidence_indicators:
    - Messages parsed on every render
    - No compilation step
    remediation: Pre-compile ICU messages
  low:
  - id: I18N-PERF-LOW-001
    signal: No translation memoization
    remediation: Memoize translation results
  - id: I18N-PERF-LOW-002
    signal: Locale change causes full re-render
    remediation: Optimize locale change handling
  positive:
  - id: I18N-PERF-POS-001
    signal: Optimized i18n runtime performance
  - id: I18N-PERF-POS-002
    signal: Minimal re-render on translation access
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Profile Render Performance
    description: Analyze component rendering with i18n
    duration_estimate: 45 min
  - id: '2'
    name: Measure Translation Lookup
    description: Profile translation access speed
    duration_estimate: 30 min
  - id: '3'
    name: Analyze Formatting
    description: Profile date/number formatting
    duration_estimate: 30 min
  - id: '4'
    name: Check Re-renders
    description: Identify unnecessary re-renders
    duration_estimate: 30 min
  - id: '5'
    name: Test on Low-end Device
    description: Profile on constrained hardware
    duration_estimate: 30 min
  - id: '6'
    name: Document Findings
    description: Compile runtime performance report
    duration_estimate: 25 min
output:
  deliverables:
  - type: performance_profile
    format: visual
    description: Performance profiling results
  - type: metrics
    format: tabular
    description: i18n operation timings
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Rendering Analysis
    - Formatting Performance
    - Re-render Assessment
    - Recommendations
closeout_checklist:
- id: i18n-perf-001
  item: No blocking i18n operations
  level: ERROR
  verification: automated
- id: i18n-perf-002
  item: Formatters cached appropriately
  level: WARNING
  verification: manual
- id: i18n-perf-003
  item: No excessive re-renders
  level: WARNING
  verification: automated
governance:
  applicable_to:
    archetypes:
    - global-applications
    - performance-sensitive
    company_sizes:
    - startup
    - scaleup
    - enterprise
  compliance_mappings:
  - framework: Web-Vitals
    control: INP
    description: Interaction to Next Paint
  - framework: Performance
    control: Runtime
    description: Runtime performance
relationships:
  commonly_combined:
  - internationalization-localization.performance-optimization.bundle-size
  - frontend-performance.rendering-performance
  depends_on:
  - frontend-architecture.state-management
  feeds_into:
  - frontend-performance.responsiveness
