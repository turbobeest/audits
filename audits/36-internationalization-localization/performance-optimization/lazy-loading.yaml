audit:
  id: internationalization-localization.performance-optimization.lazy-loading
  name: i18n Lazy Loading Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: internationalization-localization
  category_number: 36
  subcategory: performance-optimization
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: localization
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates lazy loading strategies for translation files and locale data.
    Examines whether translations are loaded on-demand, how namespace
    splitting is used, and whether locale changes trigger efficient
    incremental loads.
  why_it_matters: |
    Loading all translations upfront delays initial render and wastes
    bandwidth. Lazy loading ensures users only download translations for
    screens they visit, improving performance especially for large
    applications with many translations.
  when_to_run:
  - When optimizing initial load
  - After adding many translations
  - During performance audits
  - When restructuring i18n
prerequisites:
  required_artifacts:
  - type: source_code
    description: Application source code
  - type: i18n_config
    description: i18n configuration
  - type: network_analysis
    description: Network request analysis
  access_requirements:
  - Read access to source code
  - Access to running application
  - Network debugging tools
discovery:
  file_patterns:
  - glob: '**/i18n*.{js,ts}'
    purpose: Find i18n configuration
  - glob: '**/locales/**/*.json'
    purpose: Find locale files
  - glob: '**/*namespace*'
    purpose: Find namespace configuration
knowledge_sources:
  guides:
  - id: i18next-lazy
    name: i18next Lazy Loading
    url: https://www.i18next.com/how-to/add-or-load-translations#lazy-load-in-memory-translations
  - id: react-intl-lazy
    name: React-Intl Lazy Loading
    url: https://formatjs.io/docs/guides/advanced-usage#lazy-loading-translations
  standards:
  - id: performance
    name: Web Performance
    relevance: Performance best practices
tooling:
  analysis_tools:
  - tool: chrome-devtools
    purpose: Network analysis
  - tool: lighthouse
    purpose: Performance audit
  - tool: webpack-bundle-analyzer
    purpose: Chunk analysis
signals:
  critical:
  - id: I18N-LAZY-CRIT-001
    signal: All translations loaded on initial page
    evidence_indicators:
    - Single large translation request
    - All locales loaded at startup
    explanation: |
      Loading all translations blocks rendering and wastes bandwidth
      for content users may never see.
    remediation: Implement lazy loading by namespace/route
  high:
  - id: I18N-LAZY-HIGH-001
    signal: Namespace splitting not implemented
    evidence_indicators:
    - Monolithic translation files
    - No route-based translation loading
    remediation: Split translations by namespace/feature
  - id: I18N-LAZY-HIGH-002
    signal: Locale switch loads entire locale
    evidence_indicators:
    - Full reload on locale change
    - No incremental locale loading
    remediation: Load only needed namespaces on locale switch
  medium:
  - id: I18N-LAZY-MED-001
    signal: Translation loading blocks render
    evidence_indicators:
    - White screen while loading translations
    - No loading state for translations
    remediation: Implement non-blocking translation load
  - id: I18N-LAZY-MED-002
    signal: No prefetching of likely needed translations
    evidence_indicators:
    - Translations loaded on navigation
    - No anticipatory loading
    remediation: Prefetch translations for likely next pages
  low:
  - id: I18N-LAZY-LOW-001
    signal: No preloading of above-the-fold translations
    remediation: Preload critical path translations
  - id: I18N-LAZY-LOW-002
    signal: Translation loading not optimized for repeat visits
    remediation: Leverage caching for translations
  positive:
  - id: I18N-LAZY-POS-001
    signal: Efficient lazy loading implemented
  - id: I18N-LAZY-POS-002
    signal: Smart prefetching of translations
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Analyze Initial Load
    description: Examine what's loaded on first visit
    duration_estimate: 20 min
  - id: '2'
    name: Review Configuration
    description: Analyze lazy loading setup
    duration_estimate: 30 min
  - id: '3'
    name: Test Navigation
    description: Check translation loading during navigation
    duration_estimate: 30 min
  - id: '4'
    name: Test Locale Switch
    description: Analyze locale change behavior
    duration_estimate: 20 min
  - id: '5'
    name: Measure Impact
    description: Quantify loading performance
    duration_estimate: 20 min
  - id: '6'
    name: Document Findings
    description: Compile lazy loading audit report
    duration_estimate: 20 min
output:
  deliverables:
  - type: loading_analysis
    format: structured
    description: Translation loading patterns
  - type: performance_metrics
    format: tabular
    description: Loading time measurements
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Loading Strategy Analysis
    - Performance Impact
    - Optimization Opportunities
    - Recommendations
closeout_checklist:
- id: i18n-lazy-001
  item: Translations lazy loaded appropriately
  level: WARNING
  verification: automated
- id: i18n-lazy-002
  item: Namespace splitting implemented
  level: INFO
  verification: automated
- id: i18n-lazy-003
  item: Initial load optimized
  level: INFO
  verification: automated
governance:
  applicable_to:
    archetypes:
    - global-applications
    - large-scale-apps
    company_sizes:
    - startup
    - scaleup
    - enterprise
  compliance_mappings:
  - framework: Web-Vitals
    control: LCP
    description: Largest Contentful Paint
  - framework: Performance
    control: Initial Load
    description: Performance requirements
relationships:
  commonly_combined:
  - internationalization-localization.performance-optimization.bundle-size
  - internationalization-localization.performance-optimization.caching
  depends_on:
  - frontend-architecture.code-splitting
  feeds_into:
  - frontend-performance.initial-load
