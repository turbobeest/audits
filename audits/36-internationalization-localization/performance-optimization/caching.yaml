audit:
  id: internationalization-localization.performance-optimization.caching
  name: Translation Caching Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: internationalization-localization
  category_number: 36
  subcategory: performance-optimization
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: localization
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates caching strategies for translation files and locale data
    including browser caching, service worker caching, CDN caching, and
    cache invalidation strategies. Examines how effectively translations
    are cached to reduce repeat loading.
  why_it_matters: |
    Translations rarely change but may be requested frequently. Effective
    caching reduces server load, decreases load times for repeat visits,
    and enables offline functionality. Poor caching wastes bandwidth on
    unchanged content.
  when_to_run:
  - When optimizing repeat visit performance
  - After deploying translation updates
  - During caching strategy review
  - When implementing service workers
prerequisites:
  required_artifacts:
  - type: source_code
    description: Application source code
  - type: server_config
    description: Server caching configuration
  - type: running_application
    description: Access to test caching
  access_requirements:
  - Read access to source code
  - Access to server configuration
  - Browser developer tools
discovery:
  file_patterns:
  - glob: '**/sw*.{js,ts}'
    purpose: Find service worker
  - glob: '**/workbox*'
    purpose: Find Workbox configuration
  - glob: '**/nginx*.conf'
    purpose: Find server config
  - glob: '**/.htaccess'
    purpose: Find Apache config
knowledge_sources:
  guides:
  - id: cache-guide
    name: HTTP Caching Guide
    url: https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching
  - id: workbox
    name: Workbox Documentation
    url: https://developers.google.com/web/tools/workbox
  standards:
  - id: http-cache
    name: HTTP Caching Headers
    relevance: Cache-Control, ETag
  - id: service-worker
    name: Service Worker API
    relevance: Offline caching
tooling:
  analysis_tools:
  - tool: chrome-devtools
    purpose: Cache inspection
  - tool: lighthouse
    purpose: Caching analysis
  - tool: webpagetest
    purpose: Repeat visit analysis
signals:
  critical:
  - id: I18N-CACHE-CRIT-001
    signal: No caching for translation files
    evidence_indicators:
    - No Cache-Control headers
    - Translations reload every visit
    explanation: |
      Without caching, translations are re-downloaded on every page
      load, wasting bandwidth and slowing experience.
    remediation: Implement proper caching headers
  high:
  - id: I18N-CACHE-HIGH-001
    signal: Cache invalidation broken
    evidence_indicators:
    - Users see old translations
    - No cache busting on updates
    remediation: Implement content-based cache busting
  - id: I18N-CACHE-HIGH-002
    signal: Cache duration too short
    evidence_indicators:
    - Translations expire quickly
    - Frequent re-downloads
    remediation: Extend cache duration with proper invalidation
  medium:
  - id: I18N-CACHE-MED-001
    signal: No service worker caching
    evidence_indicators:
    - No offline support
    - No service worker for translations
    remediation: Implement service worker caching
  - id: I18N-CACHE-MED-002
    signal: CDN not used for translations
    evidence_indicators:
    - Translations served from origin
    - No edge caching
    remediation: Serve translations from CDN
  low:
  - id: I18N-CACHE-LOW-001
    signal: No localStorage fallback
    remediation: Consider localStorage for offline
  - id: I18N-CACHE-LOW-002
    signal: No cache prewarming
    remediation: Consider prewarming common translations
  positive:
  - id: I18N-CACHE-POS-001
    signal: Effective multi-layer caching
  - id: I18N-CACHE-POS-002
    signal: Smart cache invalidation
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Check HTTP Headers
    description: Analyze caching headers for translations
    duration_estimate: 20 min
  - id: '2'
    name: Test Repeat Visits
    description: Verify caching on repeat visits
    duration_estimate: 30 min
  - id: '3'
    name: Review Service Worker
    description: Check service worker caching strategy
    duration_estimate: 30 min
  - id: '4'
    name: Test Cache Invalidation
    description: Verify updates propagate correctly
    duration_estimate: 30 min
  - id: '5'
    name: Measure Performance
    description: Quantify caching impact
    duration_estimate: 20 min
  - id: '6'
    name: Document Findings
    description: Compile caching audit report
    duration_estimate: 20 min
output:
  deliverables:
  - type: caching_analysis
    format: structured
    description: Caching strategy assessment
  - type: performance_comparison
    format: tabular
    description: First vs repeat visit performance
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Caching Strategy
    - Invalidation Review
    - Performance Impact
    - Recommendations
closeout_checklist:
- id: i18n-cache-001
  item: Translation caching implemented
  level: WARNING
  verification: automated
- id: i18n-cache-002
  item: Cache invalidation working
  level: WARNING
  verification: manual
- id: i18n-cache-003
  item: Repeat visit performance optimized
  level: INFO
  verification: automated
governance:
  applicable_to:
    archetypes:
    - global-applications
    - high-traffic-sites
    company_sizes:
    - startup
    - scaleup
    - enterprise
  compliance_mappings:
  - framework: Performance
    control: Caching
    description: Caching requirements
  - framework: Web-Vitals
    control: Speed Index
    description: Page speed metrics
relationships:
  commonly_combined:
  - internationalization-localization.performance-optimization.lazy-loading
  - frontend-performance.caching-strategy
  depends_on:
  - infrastructure.cdn-configuration
  feeds_into:
  - frontend-performance.repeat-visit
