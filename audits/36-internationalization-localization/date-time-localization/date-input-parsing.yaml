audit:
  id: internationalization-localization.date-time-localization.date-input-parsing
  name: Date Input and Parsing Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: internationalization-localization
  category_number: 36
  subcategory: date-time-localization
  tier: expert
  estimated_duration: 2-4 hours  # median: 3h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: localization
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates how the application handles date input from users including
    date pickers, manual text entry, and date parsing. Examines locale-aware
    input formats, validation, error handling, and the parsing of ambiguous
    dates.
  why_it_matters: |
    Date input is a major source of i18n bugs. Users expect to enter dates
    in their locale's format (DD/MM/YYYY vs MM/DD/YYYY). Parsing 01/02/2024
    incorrectly swaps the month and day, causing significant data errors.
  when_to_run:
  - Before international launches
  - When implementing date input forms
  - After updating date picker libraries
  - During form usability testing
prerequisites:
  required_artifacts:
  - type: source_code
    description: Application source code
  - type: form_components
    description: Date input components
  - type: running_application
    description: Access to test forms
  access_requirements:
  - Read access to source code
  - Access to running application
  - Ability to test in different locales
discovery:
  file_patterns:
  - glob: '**/*datepicker*'
    purpose: Find date picker components
  - glob: '**/*date*input*'
    purpose: Find date input components
  - glob: '**/forms/**/*.{js,ts,tsx}'
    purpose: Find form components
knowledge_sources:
  guides:
  - id: w3c-date-input
    name: W3C Date Input
    url: https://www.w3.org/International/questions/qa-date-format
  - id: mdn-input-date
    name: MDN input type=date
    url: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date
  standards:
  - id: iso-8601
    name: ISO 8601
    relevance: Unambiguous date format
  - id: cldr
    name: CLDR Date Patterns
    relevance: Locale input patterns
tooling:
  analysis_tools:
  - tool: react-datepicker
    purpose: React date picker component
    install: npm install react-datepicker
  - tool: flatpickr
    purpose: Lightweight date picker
    install: npm install flatpickr
  - tool: date-fns
    purpose: Date parsing utilities
    install: npm install date-fns
signals:
  critical:
  - id: I18N-INP-CRIT-001
    signal: Date parsing assumes US format globally
    evidence_indicators:
    - parse('01/02/2024') always creates January 2
    - No locale consideration in parsing
    explanation: |
      Parsing dates with US format assumption causes data corruption
      for international users entering dates in their format.
    remediation: Use locale-aware date parsing
  - id: I18N-INP-CRIT-002
    signal: Date picker ignores user locale
    evidence_indicators:
    - Date picker always shows MM/DD/YYYY
    - Week starts on Sunday regardless of locale
    explanation: |
      Non-localized date pickers confuse users and lead to
      incorrect date entry.
    remediation: Configure date picker for user's locale
  high:
  - id: I18N-INP-HIGH-001
    signal: No validation of date format on input
    evidence_indicators:
    - Accepts any date format
    - No format guidance for users
    remediation: Validate and provide format hints
  - id: I18N-INP-HIGH-002
    signal: Error messages don't show expected format
    evidence_indicators:
    - Generic 'Invalid date' error
    - No example of correct format
    remediation: Show locale-appropriate format in error messages
  medium:
  - id: I18N-INP-MED-001
    signal: Manual date entry doesn't match locale
    evidence_indicators:
    - Placeholder shows wrong format for locale
    - Input mask uses US format
    remediation: Localize placeholder and input mask
  - id: I18N-INP-MED-002
    signal: Date picker month/day names not localized
    evidence_indicators:
    - English month names in all locales
    - Day abbreviations not translated
    remediation: Localize all date picker text
  low:
  - id: I18N-INP-LOW-001
    signal: Keyboard navigation not localized
    remediation: Support locale keyboard shortcuts
  - id: I18N-INP-LOW-002
    signal: Today/Clear buttons not translated
    remediation: Translate all date picker UI text
  positive:
  - id: I18N-INP-POS-001
    signal: Fully localized date input experience
  - id: I18N-INP-POS-002
    signal: Native date input used where supported
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Date Inputs
    description: Find all date input fields in application
    duration_estimate: 20 min
  - id: '2'
    name: Test Format Parsing
    description: Test date parsing with different formats
    duration_estimate: 45 min
  - id: '3'
    name: Evaluate Date Pickers
    description: Test date picker localization
    duration_estimate: 45 min
  - id: '4'
    name: Check Error Handling
    description: Test invalid date handling
    duration_estimate: 20 min
  - id: '5'
    name: Review Accessibility
    description: Check date input accessibility
    duration_estimate: 20 min
  - id: '6'
    name: Document Findings
    description: Compile date input audit report
    duration_estimate: 25 min
output:
  deliverables:
  - type: input_inventory
    format: tabular
    description: All date inputs with localization status
  - type: parsing_test_results
    format: structured
    description: Date parsing test results by locale
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Date Input Analysis
    - Parsing Behavior
    - Date Picker Assessment
    - Recommendations
closeout_checklist:
- id: i18n-inp-001
  item: Date parsing respects user locale
  level: ERROR
  verification: automated
- id: i18n-inp-002
  item: Date pickers localized
  level: WARNING
  verification: manual
- id: i18n-inp-003
  item: Error messages show expected format
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - global-applications
    - form-heavy-applications
    company_sizes:
    - startup
    - scaleup
    - enterprise
  compliance_mappings:
  - framework: Data-Quality
    control: Date Accuracy
    description: Accurate date data capture
  - framework: UX-Standards
    control: Form Usability
    description: International form usability
relationships:
  commonly_combined:
  - internationalization-localization.date-time-localization.date-format-consistency
  - accessibility-inclusion.form-accessibility
  depends_on:
  - internationalization-localization.locale-detection.user-locale-detection
  feeds_into:
  - data-quality.data-accuracy
