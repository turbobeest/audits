audit:
  id: internationalization-localization.date-time-localization.date-format-consistency
  name: Date Format Consistency Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: internationalization-localization
  category_number: 36
  subcategory: date-time-localization
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: localization
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates consistency and correctness of date and time formatting
    across the application. Examines whether locale-appropriate formats
    are used (MM/DD/YYYY vs DD/MM/YYYY), whether formatting is consistent
    across screens, and whether the Intl API or proper libraries are used.
  why_it_matters: |
    Date format confusion causes real problems: 01/02/2024 means January 2
    in the US but February 1 in Europe. Inconsistent formats reduce trust
    and can cause data entry errors, missed deadlines, and scheduling issues.
  when_to_run:
  - Before international launches
  - After adding new locales
  - During UI consistency audits
  - When updating date libraries
prerequisites:
  required_artifacts:
  - type: source_code
    description: Application source code
  - type: i18n_config
    description: Date formatting configuration
  - type: running_application
    description: Access to running app for visual review
  access_requirements:
  - Read access to source code
  - Access to running application
  - Ability to switch locales
discovery:
  file_patterns:
  - glob: '**/*.{js,ts,tsx,jsx}'
    purpose: Find JavaScript/TypeScript files
  - glob: '**/date*.{js,ts}'
    purpose: Find date utility modules
  - glob: '**/format*.{js,ts}'
    purpose: Find formatting utilities
knowledge_sources:
  guides:
  - id: cldr-date
    name: CLDR Date/Time Patterns
    url: https://cldr.unicode.org/translation/date-time/date-time-patterns
  - id: mdn-intl
    name: MDN Intl.DateTimeFormat
    url: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat
  standards:
  - id: cldr
    name: Unicode CLDR
    relevance: Locale date patterns
  - id: iso-8601
    name: ISO 8601
    relevance: Machine-readable date format
tooling:
  analysis_tools:
  - tool: intl
    purpose: Built-in JavaScript Intl API
  - tool: date-fns
    purpose: Modern date utility library
    install: npm install date-fns
  - tool: luxon
    purpose: Immutable datetime library
    install: npm install luxon
signals:
  critical:
  - id: I18N-DATE-CRIT-001
    signal: Hardcoded date formats ignoring locale
    evidence_indicators:
    - format('MM/DD/YYYY') hardcoded
    - No locale parameter in formatting
    explanation: |
      Hardcoded date formats display incorrectly for users expecting
      their locale's format, causing confusion and errors.
    remediation: Use locale-aware Intl.DateTimeFormat or equivalent
  high:
  - id: I18N-DATE-HIGH-001
    signal: Inconsistent date formats across application
    evidence_indicators:
    - Different formats on different screens
    - Mix of short and long formats without pattern
    remediation: Standardize date format usage with consistent options
  - id: I18N-DATE-HIGH-002
    signal: Ambiguous date display (no year or abbreviated)
    evidence_indicators:
    - 01/02 without year context
    - Ambiguous month/day ordering
    remediation: Include year or use unambiguous formats
  medium:
  - id: I18N-DATE-MED-001
    signal: Relative dates not localized
    evidence_indicators:
    - Hardcoded 'yesterday', '2 hours ago'
    - Relative times in English only
    remediation: Use Intl.RelativeTimeFormat for relative dates
  - id: I18N-DATE-MED-002
    signal: Time format not matching locale (12h vs 24h)
    evidence_indicators:
    - 12-hour time in 24-hour locales
    - AM/PM in locales that don't use it
    remediation: Respect locale time format preferences
  low:
  - id: I18N-DATE-LOW-001
    signal: Month names not localized in some places
    remediation: Use locale-aware month name formatting
  - id: I18N-DATE-LOW-002
    signal: Date separators not matching locale
    remediation: Use locale-appropriate date separators
  positive:
  - id: I18N-DATE-POS-001
    signal: Consistent locale-aware date formatting
  - id: I18N-DATE-POS-002
    signal: Intl API used consistently throughout
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Date Displays
    description: Catalog all date/time displays in UI
    duration_estimate: 30 min
  - id: '2'
    name: Analyze Formatting Code
    description: Review date formatting implementation
    duration_estimate: 30 min
    tools:
    - name: grep
      command: grep -rn 'format\|DateTimeFormat' --include='*.{js,ts,tsx}'
  - id: '3'
    name: Test Multiple Locales
    description: Verify formatting in different locales
    duration_estimate: 45 min
  - id: '4'
    name: Check Consistency
    description: Compare formats across screens
    duration_estimate: 30 min
  - id: '5'
    name: Review Date Input
    description: Check date input field formats
    duration_estimate: 20 min
  - id: '6'
    name: Document Findings
    description: Compile date format audit report
    duration_estimate: 25 min
output:
  deliverables:
  - type: format_inventory
    format: tabular
    description: All date formats used across application
  - type: consistency_analysis
    format: structured
    description: Format consistency assessment
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Format Patterns Found
    - Locale Testing Results
    - Inconsistencies
    - Recommendations
closeout_checklist:
- id: i18n-date-001
  item: All dates use locale-aware formatting
  level: ERROR
  verification: automated
- id: i18n-date-002
  item: Format consistency across application
  level: WARNING
  verification: manual
- id: i18n-date-003
  item: Time format respects 12h/24h preference
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - global-applications
    - content-platforms
    company_sizes:
    - startup
    - scaleup
    - enterprise
  compliance_mappings:
  - framework: UX-Standards
    control: Date Display
    description: Locale-appropriate date display
  - framework: CLDR
    control: Date Patterns
    description: Standard date patterns
relationships:
  commonly_combined:
  - internationalization-localization.date-time-localization.timezone-handling
  - internationalization-localization.number-currency-formatting.number-formats
  depends_on:
  - internationalization-localization.locale-detection.user-locale-detection
  feeds_into:
  - internationalization-localization.testing-validation.locale-coverage
