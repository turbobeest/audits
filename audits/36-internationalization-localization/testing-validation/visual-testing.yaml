audit:
  id: internationalization-localization.testing-validation.visual-testing
  name: Localization Visual Testing Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: internationalization-localization
  category_number: 36
  subcategory: testing-validation
  tier: expert
  estimated_duration: 2-4 hours  # median: 3h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: full
  severity: medium
  scope: localization
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates visual regression testing for localized interfaces including
    screenshot comparisons across locales, layout verification, text
    truncation detection, and RTL mirroring validation. Examines automated
    visual testing coverage and baseline management.
  why_it_matters: |
    Localization often causes visual issues: German text overflows buttons,
    Arabic layouts need mirroring, Chinese characters need different fonts.
    Visual testing catches these issues before users see broken interfaces.
  when_to_run:
  - After translation updates
  - Before releases
  - When changing UI components
  - After CSS/styling changes
prerequisites:
  required_artifacts:
  - type: visual_tests
    description: Visual testing configuration
  - type: baselines
    description: Visual baseline images
  - type: running_application
    description: Access to test environment
  access_requirements:
  - Access to visual testing tools
  - Access to baseline management
  - Ability to capture screenshots
discovery:
  file_patterns:
  - glob: '**/visual*.{js,ts}'
    purpose: Find visual test files
  - glob: '**/__snapshots__/**'
    purpose: Find snapshot directories
  - glob: '**/chromatic*'
    purpose: Find Chromatic configuration
  - glob: '**/percy*'
    purpose: Find Percy configuration
knowledge_sources:
  guides:
  - id: chromatic
    name: Chromatic Visual Testing
    url: https://www.chromatic.com/docs/
  - id: percy
    name: Percy Visual Testing
    url: https://docs.percy.io/
  standards:
  - id: visual-testing
    name: Visual Testing Best Practices
    relevance: Visual regression methodology
tooling:
  analysis_tools:
  - tool: chromatic
    purpose: Visual testing for Storybook
  - tool: percy
    purpose: Visual testing platform
  - tool: backstopjs
    purpose: Visual regression testing
    install: npm install -g backstopjs
  - tool: playwright
    purpose: Screenshot comparison
signals:
  critical:
  - id: I18N-VIS-CRIT-001
    signal: No visual testing for localized content
    evidence_indicators:
    - Visual tests only in English
    - No locale-specific baselines
    explanation: |
      Without visual testing, layout issues in localized versions
      go undetected until reported by users.
    remediation: Implement visual testing for all locales
  high:
  - id: I18N-VIS-HIGH-001
    signal: Visual baselines outdated
    evidence_indicators:
    - Old baseline images
    - Many false positives in tests
    remediation: Update and maintain visual baselines
  - id: I18N-VIS-HIGH-002
    signal: RTL locales not visually tested
    evidence_indicators:
    - No baselines for Arabic, Hebrew
    - RTL layout issues not detected
    remediation: Add RTL visual testing
  medium:
  - id: I18N-VIS-MED-001
    signal: Visual tests not in CI/CD
    evidence_indicators:
    - Manual screenshot comparison
    - Visual tests run on demand
    remediation: Integrate visual tests into CI/CD
  - id: I18N-VIS-MED-002
    signal: Insufficient viewport coverage
    evidence_indicators:
    - Only desktop tested
    - No mobile visual tests
    remediation: Test multiple viewports per locale
  low:
  - id: I18N-VIS-LOW-001
    signal: Visual test execution slow
    remediation: Optimize or parallelize visual tests
  - id: I18N-VIS-LOW-002
    signal: No visual diff review process
    remediation: Establish visual diff review workflow
  positive:
  - id: I18N-VIS-POS-001
    signal: Comprehensive visual testing per locale
  - id: I18N-VIS-POS-002
    signal: Automated visual regression in CI/CD
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Review Visual Test Setup
    description: Analyze visual testing configuration
    duration_estimate: 20 min
  - id: '2'
    name: Check Locale Coverage
    description: Verify which locales have baselines
    duration_estimate: 30 min
  - id: '3'
    name: Run Visual Tests
    description: Execute visual tests across locales
    duration_estimate: 45 min
  - id: '4'
    name: Review Findings
    description: Analyze visual differences found
    duration_estimate: 30 min
  - id: '5'
    name: Check CI Integration
    description: Verify automated testing setup
    duration_estimate: 15 min
  - id: '6'
    name: Document Findings
    description: Compile visual testing audit report
    duration_estimate: 20 min
output:
  deliverables:
  - type: visual_coverage
    format: tabular
    description: Visual testing coverage by locale
  - type: issue_screenshots
    format: visual
    description: Visual issues found with screenshots
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Visual Testing Coverage
    - Issues Found
    - CI/CD Integration
    - Recommendations
closeout_checklist:
- id: i18n-vis-001
  item: Visual tests exist for all locales
  level: WARNING
  verification: automated
- id: i18n-vis-002
  item: Visual tests in CI/CD pipeline
  level: INFO
  verification: automated
- id: i18n-vis-003
  item: Baselines up to date
  level: INFO
  verification: automated
governance:
  applicable_to:
    archetypes:
    - global-applications
    - ui-heavy-applications
    company_sizes:
    - startup
    - scaleup
    - enterprise
  compliance_mappings:
  - framework: QA-Standards
    control: Visual Quality
    description: UI quality assurance
relationships:
  commonly_combined:
  - internationalization-localization.testing-validation.locale-coverage
  - testing-quality-assurance.visual-regression
  depends_on:
  - internationalization-localization.text-handling.text-expansion
  feeds_into:
  - release-management.release-readiness
