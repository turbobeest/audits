audit:
  id: compliance-governance.regulatory-compliance.ferpa-compliance
  name: FERPA Compliance Audit
  version: 1.0.0
  last_updated: '2025-01-19'
  status: active
  category: compliance-governance
  category_number: 24
  subcategory: regulatory-compliance
  tier: phd
  estimated_duration: 4-8 hours  # median: 6h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: process
  default_profiles:
  - full
  - security
  - production
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Comprehensive audit of Family Educational Rights and Privacy Act (FERPA)
    compliance for educational institutions and EdTech vendors handling student
    education records. Evaluates access controls over education records, consent
    and notification procedures, directory information policies, third-party
    vendor compliance, data security safeguards, audit logging, and AI/ML
    system compliance. Addresses 2025 updates including enhanced disclosure
    requirements and third-party vendor management.
  why_it_matters: |
    FERPA non-compliance carries significant consequences:
    - Loss of federal education funding
    - Legal action from individuals whose rights were violated
    - Reputational damage in education sector
    - 2025 updates emphasize AI/EdTech compliance
    - New 2025 DOE guidance on disclosure requirements
    - Third-party vendor data handling under scrutiny
    - Records must be protected for minimum 6 years
    - Parents and eligible students have enforceable rights
  when_to_run:
  - Before collecting student education records
  - Annual compliance assessment
  - When implementing new EdTech tools
  - After data breaches involving student records
  - When changing directory information policies
  - Before deploying AI systems with student data
prerequisites:
  required_artifacts:
  - type: ferpa_policy
    description: FERPA rights notification and policy
    location_hints:
    - policies/ferpa/
    - compliance/education/
    - docs/student-privacy/
  - type: education_records_inventory
    description: Inventory of education records maintained
    location_hints:
    - compliance/ferpa/data-inventory.xlsx
    - docs/data-mapping/student-data.md
  - type: vendor_agreements
    description: Agreements with EdTech vendors
    location_hints:
    - legal/vendor-agreements/
    - compliance/vendor-contracts/
  optional_artifacts:
  - type: consent_forms
    description: Consent form templates and records
    location_hints:
    - compliance/ferpa/consent/
    - forms/consent/
  - type: disclosure_log
    description: Record of disclosures made
    location_hints:
    - compliance/ferpa/disclosures/
    - audit/disclosure-log/
  - type: directory_information_policy
    description: Directory information designation policy
    location_hints:
    - policies/directory-information.md
  access_requirements:
  - Access to student information systems
  - Access to FERPA policy documentation
  - Access to vendor agreements
  - Access to consent management system
  - Access to audit logs
discovery:
  file_patterns:
  - glob: '**/ferpa/**/*'
    purpose: FERPA-specific documentation
  - glob: '**/student*.{ts,js,py,yaml}'
    purpose: Student data handling code
  - glob: '**/education*.{yaml,json}'
    purpose: Education records configuration
  - glob: '**/consent*.{yaml,json,ts}'
    purpose: Consent management configuration
  code_patterns:
  - pattern: student|education.?record|transcript|grade
    type: regex
    scope: source
    purpose: Identify student data handling
  - pattern: ferpa|eligible.?student|parent.?consent
    type: regex
    scope: source
    purpose: Identify FERPA-specific code
  - pattern: directory.?info|opt.?out
    type: regex
    scope: source
    purpose: Identify directory information handling
  documents_to_review:
  - type: Annual FERPA Notification
    purpose: Verify notification requirements met
    analysis_checklist:
    - Right to inspect and review records
    - Right to seek amendment
    - Right to consent to disclosures
    - Complaint filing procedures
    - Directory information policy
  - type: Vendor Agreements
    purpose: Verify third-party compliance
    analysis_checklist:
    - School official exception requirements
    - Direct control provisions
    - Use limitations
    - Re-disclosure restrictions
    - Data destruction requirements
knowledge_sources:
  specifications:
  - id: ferpa-statute
    name: Family Educational Rights and Privacy Act (20 USC 1232g)
    url: https://www.law.cornell.edu/uscode/text/20/1232g
    offline_cache: true
    priority: required
  - id: ferpa-regulations
    name: FERPA Regulations (34 CFR Part 99)
    url: https://www.ecfr.gov/current/title-34/subtitle-A/part-99
    offline_cache: true
    priority: required
  guides:
  - id: doe-ferpa-guidance
    name: U.S. Department of Education FERPA Guidance
    url: https://studentprivacy.ed.gov/
    offline_cache: true
    priority: required
  - id: ptac-guidance
    name: Privacy Technical Assistance Center Resources
    url: https://studentprivacy.ed.gov/resources
    offline_cache: true
    priority: recommended
  learning_resources:
  - id: ferpa-training
    title: FERPA Compliance Training
    type: course
    reference: U.S. Department of Education
tooling:
  assessment_tools:
  - tool: FERPA Compliance Checklist
    purpose: Evaluate against FERPA requirements
    description: |
      Assess compliance with key FERPA provisions:
      - Right to inspect and review (99.10-12)
      - Right to amend records (99.20-22)
      - Consent requirements (99.30)
      - Exceptions to consent (99.31)
      - Directory information (99.37)
      - Recordkeeping (99.32)
      - Security safeguards
  scripts:
  - id: student-data-scan
    language: bash
    purpose: Scan for student education record handling
    source: inline
    code: |
      #!/bin/bash
      echo "=== FERPA Student Data Scan ==="

      # Search for student data patterns
      echo "Searching for student data handling..."
      patterns=(
        "student.?id"
        "education.?record"
        "transcript"
        "grade|gpa"
        "enrollment"
        "disciplin"
        "attendance"
      )

      for pattern in "${patterns[@]}"; do
        echo ""
        echo "--- Pattern: $pattern ---"
        grep -r -l -i "$pattern" --include="*.ts" --include="*.js" \
          --include="*.py" --include="*.java" . 2>/dev/null | head -10
      done
    offline_capable: true
  - id: consent-workflow-check
    language: bash
    purpose: Verify consent workflow implementation
    source: inline
    code: |
      #!/bin/bash
      echo "=== FERPA Consent Workflow Check ==="

      # Search for consent management
      echo "Searching for consent implementation..."
      grep -r -l "consent\|parent.?auth\|guardian" \
        --include="*.ts" --include="*.js" --include="*.py" . 2>/dev/null | head -15

      # Search for opt-out mechanisms
      echo ""
      echo "Searching for opt-out mechanisms..."
      grep -r -l "opt.?out\|directory.?info" \
        --include="*.ts" --include="*.js" --include="*.html" . 2>/dev/null | head -15
    offline_capable: true
signals:
  critical:
  - id: FERPA-CRIT-001
    signal: Education records disclosed without proper consent
    evidence_indicators:
    - Student data shared without written consent
    - No consent workflow for third-party disclosures
    - Exceptions not properly documented
    - Parent/eligible student not notified
    explanation: |
      FERPA requires written consent before disclosing personally
      identifiable information from education records, except for
      specific enumerated exceptions. Unauthorized disclosure is
      the most serious FERPA violation.
    remediation: |
      1. Implement consent workflow for non-exception disclosures
      2. Document all applicable exceptions when used
      3. Maintain disclosure records per 99.32
      4. Train staff on consent requirements
      5. Audit disclosure practices regularly
  - id: FERPA-CRIT-002
    signal: Third-party vendors not properly managed
    evidence_indicators:
    - EdTech vendors access student data without agreements
    - Contracts lack FERPA-required provisions
    - No school official exception documentation
    - Vendors using data beyond educational purpose
    explanation: |
      Third-party vendors accessing student data must either have
      consent or qualify under the school official exception.
      Contracts must meet specific FERPA requirements.
    remediation: |
      1. Inventory all vendors with student data access
      2. Execute FERPA-compliant agreements
      3. Document school official exception criteria met
      4. Include use limitations and re-disclosure prohibitions
      5. Require data destruction after contract ends
  - id: FERPA-CRIT-003
    signal: Annual notification not provided
    evidence_indicators:
    - Parents/students not notified of FERPA rights
    - Notification missing required elements
    - Notification not provided annually
    - No documentation of notification
    explanation: |
      Educational agencies must annually notify parents and
      eligible students of their FERPA rights. This is a
      foundational compliance requirement.
    remediation: |
      1. Create compliant annual notification
      2. Include all required right descriptions
      3. Distribute at start of each school year
      4. Document notification distribution
      5. Make policy available on request
  high:
  - id: FERPA-HIGH-001
    signal: Access to education records not properly controlled
    evidence_indicators:
    - No role-based access to student data
    - Access not limited to legitimate need
    - No access logging
    - Former staff retain access
    explanation: |
      Access to education records must be limited to those with
      legitimate educational interest. Broad access increases
      risk of unauthorized disclosure.
    remediation: |
      1. Implement role-based access control
      2. Limit access to legitimate educational interest
      3. Enable comprehensive audit logging
      4. Remove access promptly for departing staff
      5. Conduct regular access reviews
  - id: FERPA-HIGH-002
    signal: Records amendment process not implemented
    evidence_indicators:
    - No process for parents to request amendments
    - Amendment requests not tracked
    - No hearing process for denied amendments
    explanation: |
      FERPA grants parents and eligible students the right to
      request amendment of inaccurate or misleading records.
      A process must exist to handle such requests.
    remediation: |
      1. Document amendment request process
      2. Create request intake mechanism
      3. Establish timeline for responses
      4. Implement formal hearing process for denials
      5. Allow statement in record if amendment denied
  - id: FERPA-HIGH-003
    signal: Directory information policy inadequate
    evidence_indicators:
    - Directory information not properly designated
    - No opt-out mechanism provided
    - Opt-out period insufficient
    - Directory information disclosed after opt-out
    explanation: |
      Schools may designate certain information as directory
      information, but must provide opt-out opportunity.
      Disclosing opted-out information violates FERPA.
    remediation: |
      1. Designate directory information categories clearly
      2. Include in annual notification
      3. Provide reasonable opt-out period
      4. Track and honor opt-out requests
      5. Train staff on directory information rules
  - id: FERPA-HIGH-004
    signal: Security safeguards inadequate
    evidence_indicators:
    - Education records not encrypted
    - No access logging
    - Physical security lacking
    - No incident response plan
    explanation: |
      While FERPA does not prescribe specific security measures,
      schools must maintain reasonable safeguards to protect
      education records from unauthorized access.
    remediation: |
      1. Implement encryption for stored records
      2. Enable access logging
      3. Secure physical records storage
      4. Create incident response procedures
      5. Regular security assessments
  medium:
  - id: FERPA-MED-001
    signal: Disclosure records not maintained
    evidence_indicators:
    - No log of disclosures made
    - Disclosures not linked to consent or exception
    - Records not retained appropriately
    explanation: |
      Section 99.32 requires maintaining records of each disclosure
      request and disclosure made, except for certain exceptions.
    remediation: |
      1. Implement disclosure logging
      2. Document exception or consent basis
      3. Retain records with education record
      4. Make available for inspection
  - id: FERPA-MED-002
    signal: AI/ML systems not assessed for FERPA compliance
    evidence_indicators:
    - AI processing student data without assessment
    - No purpose limitation for AI use
    - Training data includes education records
    explanation: |
      2025 guidance emphasizes AI/EdTech compliance. AI systems
      processing education records must meet FERPA requirements.
    remediation: |
      1. Inventory AI systems using student data
      2. Assess each for FERPA compliance
      3. Limit use to educational purposes
      4. Document safeguards for AI processing
      5. Ensure vendor contracts address AI
  - id: FERPA-MED-003
    signal: Complaint process not documented
    evidence_indicators:
    - No complaint filing information provided
    - Internal complaint process lacking
    explanation: |
      Annual notification must inform of right to file complaints
      with the Department of Education.
    remediation: |
      1. Include complaint information in annual notice
      2. Provide FPCO contact information
      3. Document internal complaint handling
  low:
  - id: FERPA-LOW-001
    signal: Training not documented
    evidence_indicators:
    - Staff FERPA training not recorded
    - No refresher training provided
    remediation: |
      Implement documented FERPA training program.
  - id: FERPA-LOW-002
    signal: Records retention policy unclear
    evidence_indicators:
    - Retention periods not defined
    - Destruction procedures not documented
    remediation: |
      Document retention periods (minimum 6 years for most records).
  positive:
  - id: FERPA-POS-001
    signal: Comprehensive access controls implemented
    evidence_indicators:
    - Role-based access control
    - Comprehensive audit logging
    - Regular access reviews
  - id: FERPA-POS-002
    signal: Vendor compliance well-managed
    evidence_indicators:
    - All vendors with compliant agreements
    - Regular vendor assessments
    - Data flow documentation
procedure:
  context:
    cognitive_mode: critical
    ensemble_role: auditor
  preparation:
  - step: Identify all education records maintained
  - step: Gather FERPA policies and procedures
  - step: Inventory third-party vendors
  - step: Obtain annual notification materials
  steps:
  - id: '1'
    name: Notification and Policy Review
    description: |
      Evaluate annual notification and FERPA policies for
      completeness and compliance.
    duration_estimate: 1 hour
    questions:
    - Is annual notification provided to all parents/students?
    - Does notification include all required elements?
    - Is directory information policy clear?
    - Is complaint process documented?
    expected_findings:
    - Notification completeness
    - Policy gaps
  - id: '2'
    name: Consent and Disclosure Assessment
    description: |
      Evaluate consent workflows and disclosure practices.
    duration_estimate: 1-2 hours
    questions:
    - Is written consent obtained for non-exception disclosures?
    - Are exceptions properly documented?
    - Are disclosure records maintained?
    expected_findings:
    - Consent process adequacy
    - Disclosure documentation status
  - id: '3'
    name: Access Control Review
    description: |
      Assess access controls over education records systems.
    duration_estimate: 1-2 hours
    commands:
    - purpose: Check access control configuration
      command: grep -r 'rbac\|permission\|role' --include='*.yaml' --include='*.tf' . | head -20
    expected_findings:
    - Access control adequacy
    - Audit logging status
  - id: '4'
    name: Third-Party Vendor Assessment
    description: |
      Review vendor agreements and compliance practices.
    duration_estimate: 1-2 hours
    questions:
    - Are all vendors with student data access identified?
    - Do contracts meet FERPA requirements?
    - Is school official exception properly documented?
    - Are use limitations in place?
    expected_findings:
    - Vendor compliance status
    - Contract gaps
  - id: '5'
    name: Security Safeguards Review
    description: |
      Evaluate security measures protecting education records.
    duration_estimate: 1-2 hours
    questions:
    - Is data encrypted at rest and in transit?
    - Are access logs maintained?
    - Is incident response documented?
    expected_findings:
    - Security posture
    - Safeguard gaps
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: compliance_matrix
    format: table
    description: FERPA requirements compliance
    columns:
    - Requirement
    - Citation
    - Status
    - Evidence
    - Gap
    - Remediation
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Notification Compliance
    - Consent and Disclosure Assessment
    - Access Control Assessment
    - Vendor Compliance
    - Remediation Plan
  confidence_guidance:
    high: Documentation and implementation verified
    medium: Documentation reviewed, limited verification
    low: Based on interviews only
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: ferpa-statute
      priority: required
    - source_id: ferpa-regulations
      priority: required
    - source_id: doe-ferpa-guidance
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Comprehensive assessment required
    security:
      included: true
      priority: 10
    production:
      included: true
      priority: 8
    full:
      included: true
      priority: 5
closeout_checklist:
- id: ferpa-001
  item: Annual notification provided with all required elements
  level: CRITICAL
  verification: manual
  verification_notes: Notification includes all rights and is provided annually
  expected: Confirmed by reviewer
- id: ferpa-002
  item: Consent workflow implemented for non-exception disclosures
  level: CRITICAL
  verification: manual
  verification_notes: Written consent obtained or exception documented
  expected: Confirmed by reviewer
- id: ferpa-003
  item: Third-party vendors have compliant agreements
  level: CRITICAL
  verification: manual
  verification_notes: All vendors with FERPA-compliant contracts or proper consent
  expected: Confirmed by reviewer
- id: ferpa-004
  item: Access controls limit to legitimate educational interest
  level: BLOCKING
  verification: manual
  verification_notes: Role-based access with appropriate limitations
  expected: Confirmed by reviewer
- id: ferpa-005
  item: Directory information policy with opt-out mechanism
  level: BLOCKING
  verification: manual
  verification_notes: Directory information designated with opt-out provided
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - education
    - edtech
    - k12
    - higher-ed
    maturity:
    - growing
    - mature
    industry_scope:
    - education
    - educational-technology
  compliance_frameworks:
  - framework: FERPA
    controls:
    - All Provisions
  - framework: COPPA
    controls:
    - When applicable to children under 13
  - framework: State Student Privacy Laws
    controls:
    - Various
relationships:
  commonly_combined:
  - compliance-governance.regulatory-compliance.coppa-compliance
  - compliance-governance.data-privacy.consent-management
  - compliance-governance.third-party-compliance.vendor-compliance
  - compliance-governance.audit-trails.access-log
