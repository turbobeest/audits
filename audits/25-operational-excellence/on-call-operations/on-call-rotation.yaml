audit:
  id: operational-excellence.on-call-operations.on-call-rotation
  name: On-Call Rotation Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: operational-excellence
  category_number: 25
  subcategory: on-call-operations
  tier: phd
  estimated_duration: 2-3 hours  # median: 2h
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: organizational
  default_profiles:
  - full
  - production
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit examines on-call rotation practices including:
    - Rotation schedule fairness and sustainability
    - Team size and coverage adequacy
    - Shift length and frequency
    - Geographic distribution for follow-the-sun
    - Compensation and time-off policies
    - Training requirements for on-call
    - Rotation management tools
    - Coverage gap identification
  why_it_matters: |
    Sustainable on-call rotations are essential for reliability and retention:
    - Unsustainable rotations lead to burnout and attrition
    - Inadequate coverage causes delayed incident response
    - Unfair distribution creates resentment and reduces engagement
    - Untrained responders cannot effectively handle incidents

    Google SRE emphasizes that on-call should be "a sustainable and
    valuable experience." Mature organizations treat on-call as a
    skill to develop, not a burden to endure.
  when_to_run:
  - Quarterly operational reviews
  - When rotation complaints increase
  - After team size changes
  - During hiring planning
  - When considering follow-the-sun
prerequisites:
  required_artifacts:
  - type: rotation_schedule
    description: On-call rotation configurations
  - type: team_roster
    description: Team membership and availability
  - type: policy_documentation
    description: On-call policies and compensation
  access_requirements:
  - On-call scheduling tool access
  - Team roster access
  - Policy documentation access
  - Historical rotation data
discovery:
  code_patterns:
  - pattern: (on-?call|rotation|schedule|shift)
    type: regex
    scope: config
    purpose: Detect on-call rotation configurations
  - pattern: (pagerduty|opsgenie|victorops).*(schedule|rotation)
    type: regex
    scope: config
    purpose: Detect on-call tool configurations
  - pattern: (coverage|handoff|escalation).*(schedule|time)
    type: regex
    scope: config
    purpose: Detect coverage patterns
  file_patterns:
  - glob: '**/oncall*.{yaml,yml,json}'
    purpose: On-call configurations
  - glob: '**/schedule*.{yaml,yml,json}'
    purpose: Schedule configurations
  - glob: '**/rotation*.{yaml,yml}'
    purpose: Rotation definitions
knowledge_sources:
  specifications:
  - id: google-sre-oncall
    name: Google SRE - Being On-Call
    url: https://sre.google/sre-book/being-on-call/
    offline_cache: true
    priority: required
  guides:
  - id: pagerduty-oncall
    name: PagerDuty On-Call Best Practices
    url: https://www.pagerduty.com/resources/learn/on-call-schedule-best-practices/
    offline_cache: true
tooling:
  infrastructure_tools:
  - tool: pagerduty
    purpose: On-call schedule management
    command: pd schedule list
  - tool: opsgenie
    purpose: On-call rotation management
    command: opsgenie schedule list
  scripts:
  - id: rotation-scanner
    language: bash
    purpose: Find on-call rotation configurations
    source: inline
    code: |
      #!/bin/bash
      echo "=== On-Call Rotation Configuration Scan ==="
      find . -type f \( -name "*oncall*" -o -name "*schedule*" -o -name "*rotation*" \) \
        \( -name "*.yaml" -o -name "*.json" \) 2>/dev/null | head -30
signals:
  critical:
  - id: OCR-CRIT-001
    signal: Insufficient team size for sustainable rotation
    evidence_indicators:
    - Fewer than 5 people in rotation
    - Same person on-call more than 25% of time
    - Coverage gaps during PTO
    explanation: |
      Google SRE recommends at least 8 people for a single-site team
      to maintain sustainable rotations. Teams with fewer than 5 people
      cannot sustain 24/7 coverage without burnout. Each person should
      be on-call no more than 25% of the time.
    remediation: |
      - Expand team to minimum viable size
      - Consider shared rotations across teams
      - Implement follow-the-sun with other locations
      - Reduce on-call scope if team cannot grow
      - Automate to reduce on-call burden
  - id: OCR-CRIT-002
    signal: No backup coverage defined
    evidence_indicators:
    - Single person on-call at any time
    - No escalation for unavailability
    - No secondary on-call
    explanation: |
      Single-person coverage fails when the on-call is unavailable,
      unreachable, or overwhelmed. Backup coverage ensures continuous
      response capability even when primary responders cannot respond.
    remediation: |
      - Define secondary on-call role
      - Configure automatic escalation
      - Establish manager escalation path
      - Implement cross-team backup
      - Test backup coverage regularly
  high:
  - id: OCR-HIGH-001
    signal: On-call shifts too long
    evidence_indicators:
    - Shifts longer than 1 week
    - No rotation within week
    - Extended continuous coverage
    explanation: |
      Long on-call shifts lead to fatigue and reduced effectiveness.
      Google SRE recommends shifts no longer than 1 week, with many
      organizations using shorter shifts (3-4 days) for high-volume
      services.
    remediation: |
      - Limit shifts to 1 week maximum
      - Consider shorter shifts for high-volume
      - Implement mid-week handoffs
      - Allow shift swaps
      - Monitor shift length compliance
  - id: OCR-HIGH-002
    signal: Rotation distribution unfair
    evidence_indicators:
    - Some team members consistently overloaded
    - Weekend/holiday coverage uneven
    - New team members avoid on-call
    explanation: |
      Unfair distribution creates resentment and accelerates burnout
      for overloaded members. Rotation should distribute burden evenly,
      including weekends and holidays, across all qualified team members.
    remediation: |
      - Audit rotation distribution
      - Implement fair scheduling algorithm
      - Balance weekend/holiday coverage
      - Include all qualified members
      - Track and report distribution metrics
  - id: OCR-HIGH-003
    signal: No on-call training or qualification
    evidence_indicators:
    - New members added without training
    - No shadowing period required
    - Skills verification not conducted
    explanation: |
      Untrained on-call responders cannot effectively handle incidents.
      Training and shadowing ensure responders have the knowledge and
      confidence to manage situations before taking primary responsibility.
    remediation: |
      - Define on-call training curriculum
      - Require shadowing before primary on-call
      - Implement skills verification
      - Provide ongoing training
      - Pair new responders with experienced mentors
  medium:
  - id: OCR-MED-001
    signal: No compensation or time-off policy
    evidence_indicators:
    - On-call is expected without recognition
    - No comp time for off-hours work
    - Incidents during on-call not acknowledged
    explanation: |
      On-call represents real work outside normal hours. Without
      compensation or time-off policies, on-call feels punitive rather
      than valued, reducing willingness to participate effectively.
    remediation: |
      - Establish on-call compensation policy
      - Provide comp time for off-hours incidents
      - Recognize on-call contributions
      - Align policy with local labor laws
      - Review policy annually
  - id: OCR-MED-002
    signal: Coverage gaps during transitions
    evidence_indicators:
    - Handoff times have no owner
    - Timezone transitions unclear
    - Holiday coverage gaps
    explanation: |
      Coverage gaps during transitions leave incidents unresponded.
      Clear handoff times, overlapping coverage, and explicit holiday
      coverage prevent gaps.
    remediation: |
      - Define explicit handoff times
      - Implement 30-minute overlap windows
      - Document holiday coverage explicitly
      - Automate handoff notifications
      - Monitor for coverage gaps
  low:
  - id: OCR-LOW-001
    signal: Rotation metrics not tracked
    evidence_indicators:
    - Distribution statistics unknown
    - Incident volume per shift not measured
    - Rotation health not monitored
    explanation: |
      Without metrics, rotation problems go unnoticed until they cause
      visible issues. Tracking distribution, incident volume, and
      satisfaction enables proactive adjustment.
    remediation: |
      - Track incidents per on-call shift
      - Monitor distribution fairness
      - Measure on-call satisfaction
      - Report rotation metrics monthly
      - Set rotation health targets
  positive:
  - id: OCR-POS-001
    signal: Sustainable on-call rotation with trained responders
    evidence_indicators:
    - Adequate team size (8+ for single-site)
    - Even distribution of on-call burden
    - Training and shadowing required
  - id: OCR-POS-002
    signal: Fair and compensated on-call program
    evidence_indicators:
    - Compensation or time-off policy in place
    - Fair distribution tracked and maintained
    - Rotation satisfaction regularly assessed
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Rotation Configuration Review
    description: |
      Examine on-call rotation configurations and schedules.
    duration_estimate: 30 min
    commands:
    - purpose: Find on-call configurations
      command: |
        find . -type f \( -name "*oncall*" -o -name "*schedule*" -o -name "*rotation*" \) \
          \( -name "*.yaml" -o -name "*.json" \) 2>/dev/null | head -20
    - purpose: Search for rotation definitions
      command: |
        grep -rniE "(rotation|schedule|shift).*(length|duration|week)" \
          --include="*.yaml" --include="*.json" . 2>/dev/null | head -30
    expected_findings:
    - Rotation configurations
    - Shift definitions
    - Coverage settings
  - id: '2'
    name: Team Coverage Assessment
    description: |
      Evaluate team size and coverage adequacy.
    duration_estimate: 30 min
    commands:
    - purpose: Find team roster configurations
      command: |
        grep -rniE "(team|user|member|participant)" \
          --include="*oncall*.yaml" --include="*schedule*.yaml" . 2>/dev/null | head -30
    - purpose: Search for coverage definitions
      command: |
        grep -rniE "(coverage|24x7|24/7|follow.the.sun)" \
          --include="*.yaml" --include="*.md" . 2>/dev/null | head -20
    expected_findings:
    - Team member lists
    - Coverage requirements
    - Team size
  - id: '3'
    name: Policy Review
    description: |
      Assess on-call policies and compensation.
    duration_estimate: 30 min
    commands:
    - purpose: Find on-call policy documentation
      command: |
        find . -type f \( -name "*oncall*" -o -name "*on-call*" \) \
          -name "*.md" 2>/dev/null | head -20
    - purpose: Search for compensation references
      command: |
        grep -rniE "(compensat|comp.time|time.off|payment)" \
          --include="*.md" . 2>/dev/null | head -20
    expected_findings:
    - Policy documentation
    - Compensation information
    - Time-off policies
  - id: '4'
    name: Training and Qualification Review
    description: |
      Examine on-call training and qualification requirements.
    duration_estimate: 30 min
    commands:
    - purpose: Find training documentation
      command: |
        grep -rniE "(train|shadow|qualification|onboard).*(oncall|on-call)" \
          --include="*.md" . 2>/dev/null | head -20
    - purpose: Search for shadowing requirements
      command: |
        grep -rniE "(shadow|mentor|buddy|pair)" \
          --include="*.md" . 2>/dev/null | head -20
    expected_findings:
    - Training requirements
    - Shadowing procedures
    - Qualification criteria
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Rotation Configuration Assessment
    - Coverage Analysis
    - Policy Review
    - Recommendations
  - type: rotation_matrix
    format: table
    description: On-call rotations and their configuration status
  confidence_guidance:
    high: Rotation configurations and policies fully documented
    medium: Partial documentation, some runtime verification needed
    low: Rotation practices unclear, requires interviews
offline:
  capability: partial
  runtime_required_for:
  - Schedule verification
  - Distribution analysis
  - Coverage gap identification
  cache_manifest:
    knowledge:
    - source_id: google-sre-oncall
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Rotation audit requires comprehensive review
    full:
      included: true
      priority: 2
    production:
      included: true
      priority: 1
closeout_checklist:
- id: ocr-001
  item: On-call rotation is defined and configured
  level: CRITICAL
  verification: |
    find . -type f \( -name "*oncall*" -o -name "*schedule*" \) \
      -name "*.yaml" 2>/dev/null | wc -l | \
      xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
- id: ocr-002
  item: Team size supports sustainable rotation
  level: CRITICAL
  verification: manual
  verification_notes: Verify at least 5 people in rotation, 8+ preferred
  expected: Confirmed by reviewer
- id: ocr-003
  item: Backup coverage is defined
  level: BLOCKING
  verification: manual
  verification_notes: Verify secondary on-call or escalation exists
  expected: Confirmed by reviewer
- id: ocr-004
  item: On-call training is required
  level: WARNING
  verification: |
    grep -rniE "(train|shadow).*(oncall|on-call)" \
      --include="*.md" . 2>/dev/null | wc -l | \
      xargs -I{} test {} -gt 0 && echo "PASS" || echo "NEEDS_REVIEW"
  expected: PASS
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: SOC 2
    controls:
    - CC7.4
  - framework: ISO 27001
    controls:
    - A.16.1.1
relationships:
  commonly_combined:
  - operational-excellence.on-call-operations.alert-fatigue
  - operational-excellence.on-call-operations.escalation-paths
  - operational-excellence.incident-management.incident-response-process
