audit:
  id: operational-excellence.runbook-procedures.runbook-testing
  name: Runbook Testing Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: operational-excellence
  category_number: 25
  subcategory: runbook-procedures
  tier: phd
  estimated_duration: 2-3 hours  # median: 2h
  completeness: complete
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: process
  default_profiles:
  - full
  - production
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit examines runbook testing practices including:
    - Scheduled runbook validation exercises
    - Game day and disaster recovery testing
    - Dry run capabilities and usage
    - Command validation in test environments
    - New runbook verification before deployment
    - Runbook change testing
    - Test coverage tracking
    - Testing documentation and results
  why_it_matters: |
    Untested runbooks fail when needed most:
    - Procedures that work in theory may fail in practice
    - System changes may invalidate existing procedures
    - Responders need practice before real incidents
    - Testing reveals gaps and ambiguities

    Google SRE recommends regular "wheel of misfortune" exercises to
    validate runbooks and train responders. Testing transforms runbooks
    from theoretical documentation into proven procedures.
  when_to_run:
  - Quarterly operational reviews
  - Before major releases
  - After significant system changes
  - When planning game days
  - During disaster recovery planning
prerequisites:
  required_artifacts:
  - type: runbook_documentation
    description: Runbooks to be tested
  - type: test_documentation
    description: Previous test results and schedules
  - type: test_environment
    description: Environment for safe testing
  access_requirements:
  - Read access to runbook documentation
  - Test environment access
  - Previous test results access
  - Testing schedule access
discovery:
  code_patterns:
  - pattern: (test|validat|verif|dry.run).*(runbook|procedure)
    type: regex
    scope: docs
    purpose: Detect runbook testing documentation
  - pattern: (game.day|disaster.recovery|dr.test|wheel.of.misfortune)
    type: regex
    scope: docs
    purpose: Detect exercise documentation
  - pattern: (test.result|validation.report|exercise.summary)
    type: regex
    scope: docs
    purpose: Detect test result documentation
  file_patterns:
  - glob: '**/test*/**/*runbook*.md'
    purpose: Runbook test documentation
  - glob: '**/game-day*/**/*.md'
    purpose: Game day documentation
  - glob: '**/dr-test*/**/*.md'
    purpose: DR test documentation
knowledge_sources:
  specifications:
  - id: google-sre-testing
    name: Google SRE - Testing for Reliability
    url: https://sre.google/sre-book/testing-reliability/
    offline_cache: true
    priority: required
  - id: google-sre-gameday
    name: Google SRE - Disaster Role Playing
    url: https://sre.google/workbook/non-production-failures/
    offline_cache: true
    priority: required
  guides:
  - id: chaos-engineering
    name: Principles of Chaos Engineering
    url: https://principlesofchaos.org/
    offline_cache: true
tooling:
  infrastructure_tools:
  - tool: chaos-monkey
    purpose: Chaos engineering for runbook testing
    command: chaos-monkey --list-experiments
  - tool: gremlin
    purpose: Failure injection platform
    command: gremlin attacks list
  scripts:
  - id: runbook-test-scanner
    language: bash
    purpose: Find runbook testing documentation
    source: inline
    code: |
      #!/bin/bash
      echo "=== Runbook Testing Documentation Scan ==="
      find . -type f \( -name "*test*" -o -name "*game-day*" -o -name "*exercise*" \) \
        -name "*.md" 2>/dev/null | head -30
signals:
  critical:
  - id: RT-CRIT-001
    signal: Runbooks never tested before production use
    evidence_indicators:
    - No testing process exists
    - Runbooks used only during actual incidents
    - No validation environment available
    explanation: |
      Runbooks used only during real incidents are high risk. Untested
      procedures may contain errors, omissions, or outdated information
      that only become apparent during critical situations.
    remediation: |
      - Establish runbook testing process
      - Require testing before runbook publication
      - Create safe testing environment
      - Document testing results
      - Include testing in runbook lifecycle
  - id: RT-CRIT-002
    signal: No disaster recovery testing conducted
    evidence_indicators:
    - DR procedures never exercised
    - Recovery runbooks untested
    - No game day program exists
    explanation: |
      Disaster recovery procedures are among the most critical runbooks.
      Without testing, organizations cannot verify they can actually
      recover from disasters, potentially discovering gaps during
      actual emergencies.
    remediation: |
      - Implement annual DR testing program
      - Start with tabletop exercises
      - Progress to live failover testing
      - Document and address findings
      - Update runbooks based on test results
  high:
  - id: RT-HIGH-001
    signal: Testing not conducted after system changes
    evidence_indicators:
    - Major changes without runbook validation
    - No link between deployments and runbook testing
    - Drift between systems and documentation
    explanation: |
      System changes can invalidate existing runbooks. Testing should
      be triggered by significant changes to ensure procedures remain
      valid. Otherwise, runbook accuracy degrades over time.
    remediation: |
      - Link runbook testing to change management
      - Test affected runbooks after changes
      - Include runbook validation in release process
      - Track runbook-system version alignment
      - Automate regression testing where possible
  - id: RT-HIGH-002
    signal: No game day or incident simulation program
    evidence_indicators:
    - No scheduled practice exercises
    - Responders only learn during real incidents
    - No wheel of misfortune exercises
    explanation: |
      Regular practice builds muscle memory and confidence. Game days
      reveal runbook gaps, train responders, and validate processes
      in low-stakes environments. Google SRE recommends regular
      disaster role-playing exercises.
    remediation: |
      - Implement quarterly game day program
      - Start with simple scenarios
      - Rotate team members through exercises
      - Document findings and improvements
      - Gradually increase complexity
  medium:
  - id: RT-MED-001
    signal: Test results not documented
    evidence_indicators:
    - Testing occurs but results not recorded
    - No test result repository
    - Findings not tracked to resolution
    explanation: |
      Undocumented test results lose value over time. Recording test
      outcomes enables tracking improvement, demonstrating due diligence,
      and avoiding repeated failures.
    remediation: |
      - Create test result documentation template
      - Record all test outcomes
      - Track findings to resolution
      - Build test history for each runbook
      - Report testing metrics
  - id: RT-MED-002
    signal: No dry-run capability for runbooks
    evidence_indicators:
    - Commands can only be run live
    - No simulation mode available
    - Testing requires production impact
    explanation: |
      Dry-run capabilities enable safe testing without production impact.
      Commands and procedures should have modes that validate syntax
      and logic without making changes.
    remediation: |
      - Implement dry-run flags in scripts
      - Create test environments that mirror production
      - Add simulation modes to automation
      - Document dry-run procedures
      - Validate dry-run equivalence to live execution
  low:
  - id: RT-LOW-001
    signal: Testing coverage not tracked
    evidence_indicators:
    - Unknown which runbooks have been tested
    - No testing metrics maintained
    - Test coverage percentage unknown
    explanation: |
      Without coverage tracking, organizations cannot prioritize testing
      or demonstrate thoroughness. Coverage metrics enable systematic
      improvement and risk management.
    remediation: |
      - Track last test date per runbook
      - Calculate coverage percentage
      - Identify never-tested runbooks
      - Set coverage targets
      - Report testing metrics quarterly
  positive:
  - id: RT-POS-001
    signal: Comprehensive runbook testing program
    evidence_indicators:
    - Regular game day exercises conducted
    - Testing integrated with change management
    - Test results documented and tracked
  - id: RT-POS-002
    signal: Continuous runbook validation
    evidence_indicators:
    - Automated testing for scripted runbooks
    - Dry-run validation enabled
    - High testing coverage maintained
procedure:
  context:
    cognitive_mode: analytical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Testing Process Assessment
    description: |
      Evaluate runbook testing processes and documentation.
    duration_estimate: 30 min
    commands:
    - purpose: Find testing documentation
      command: |
        find . -type f \( -name "*test*" -o -name "*validat*" \) \
          -path "*runbook*" -name "*.md" 2>/dev/null | head -20
    - purpose: Find game day documentation
      command: |
        find . -type f \( -name "*game*day*" -o -name "*exercise*" -o -name "*drill*" \) \
          -name "*.md" 2>/dev/null | head -20
    expected_findings:
    - Testing process documentation
    - Game day schedules
    - Exercise records
  - id: '2'
    name: Test Result Review
    description: |
      Examine historical test results and findings.
    duration_estimate: 30 min
    commands:
    - purpose: Find test result records
      command: |
        find . -type f \( -name "*result*" -o -name "*report*" \) \
          -path "*test*" -name "*.md" 2>/dev/null | head -20
    - purpose: Search for test findings
      command: |
        grep -rniE "(finding|issue|gap|fail|pass)" \
          --include="*test*.md" --include="*exercise*.md" . 2>/dev/null | head -30
    expected_findings:
    - Test result documentation
    - Findings and resolutions
    - Pass/fail outcomes
  - id: '3'
    name: DR Testing Assessment
    description: |
      Evaluate disaster recovery testing practices.
    duration_estimate: 30 min
    commands:
    - purpose: Find DR test documentation
      command: |
        find . -type f \( -name "*dr*" -o -name "*disaster*" -o -name "*recovery*" \) \
          -path "*test*" -name "*.md" 2>/dev/null | head -20
    - purpose: Search for DR testing references
      command: |
        grep -rniE "(disaster.recovery|dr.test|failover.test|rto|rpo)" \
          --include="*.md" . 2>/dev/null | head -30
    expected_findings:
    - DR test documentation
    - Failover test results
    - RTO/RPO validation
  - id: '4'
    name: Testing Coverage Analysis
    description: |
      Assess testing coverage across runbooks.
    duration_estimate: 30 min
    commands:
    - purpose: Find runbook test status
      command: |
        grep -rniE "(last.tested|test.date|validated)" \
          --include="*runbook*.md" . 2>/dev/null | head -30
    - purpose: Count tested vs untested runbooks
      command: |
        find . -name "*runbook*.md" -exec grep -l -iE "(last.tested|validated)" {} \; 2>/dev/null | wc -l
    expected_findings:
    - Testing dates
    - Coverage percentage
    - Untested runbooks
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Testing Process Assessment
    - DR Testing Review
    - Coverage Analysis
    - Recommendations
  - type: coverage_matrix
    format: table
    description: Runbooks and their testing status
  confidence_guidance:
    high: Testing process documented and results available
    medium: Partial testing records, some practices informal
    low: Testing practices unclear, requires interviews
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: google-sre-testing
      priority: required
    - source_id: google-sre-gameday
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Testing audit requires comprehensive review
    full:
      included: true
      priority: 2
    production:
      included: true
      priority: 2
closeout_checklist:
- id: rt-001
  item: Runbook testing process exists
  level: CRITICAL
  verification: manual
  verification_notes: Verify formal runbook testing process is documented
  expected: Confirmed by reviewer
- id: rt-002
  item: DR testing conducted at least annually
  level: CRITICAL
  verification: manual
  verification_notes: Verify DR tests have been conducted within 12 months
  expected: Confirmed by reviewer
- id: rt-003
  item: Test results are documented
  level: BLOCKING
  verification: |
    find . -type f \( -name "*result*" -o -name "*report*" \) \
      -path "*test*" 2>/dev/null | wc -l | \
      xargs -I{} test {} -gt 0 && echo "PASS" || echo "FAIL"
  expected: PASS
- id: rt-004
  item: Game day exercises scheduled regularly
  level: WARNING
  verification: manual
  verification_notes: Verify game day program exists with schedule
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: SOC 2
    controls:
    - CC7.5
  - framework: ISO 27001
    controls:
    - A.17.1.3
  - framework: ISO 22301
    controls:
    - '8.5'
relationships:
  commonly_combined:
  - operational-excellence.runbook-procedures.runbook-accuracy
  - operational-excellence.runbook-procedures.emergency-procedures
  - operational-excellence.production-readiness.readiness-review
