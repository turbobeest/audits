audit:
  id: operational-excellence.production-readiness.rollback-readiness
  name: Rollback Readiness Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: operational-excellence
  category_number: 25
  subcategory: production-readiness
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: critical
  scope: deployment
  default_profiles:
  - full
  - production
  - launch
description:
  what: |
    This audit examines rollback readiness including:
    - Rollback procedure documentation
    - Rollback automation and tooling
    - Data migration rollback capabilities
    - Database rollback strategies
    - Feature flag rollback options
    - Rollback testing practices
    - Rollback time objectives
    - Rollback decision criteria
  why_it_matters: |
    Rollback capability is essential for safe deployments:
    - Enables fast recovery from bad releases
    - Reduces deployment risk
    - Provides confidence to deploy frequently
    - Limits user impact from failures

    Without reliable rollback, teams become afraid to deploy,
    leading to larger, riskier releases and slower iteration.
  when_to_run:
  - Before major deployments
  - After deployment failures
  - When changing deployment process
  - During DR planning
  - Quarterly reviews
prerequisites:
  required_access:
  - Deployment documentation
  - Rollback procedures
  - Deployment tooling
  - Historical deployment records
  required_knowledge:
  - Deployment architecture
  - Data migration patterns
  - Database versioning
  - Feature flag usage
discovery:
  documentation_review:
  - Review rollback procedures
  - Examine deployment runbooks
  - Check data migration docs
  - Analyze feature flag strategy
  technical_analysis:
  - Test rollback capabilities
  - Review deployment tooling
  - Check database migration tools
  - Assess automation coverage
  file_patterns:
  - glob: '**/runbook*.md'
    purpose: Runbook documentation
  - glob: '**/playbook*.md'
    purpose: Playbook documentation
  - glob: '**/sop*.md'
    purpose: Standard operating procedures
  - glob: '**/oncall*.yaml'
    purpose: On-call configuration
  code_patterns:
  - pattern: runbook|playbook|incident|escalation|sla
    type: regex
    scope: all
    purpose: Operations references
knowledge_sources:
  authoritative:
  - Continuous Delivery by Jez Humble
  - Accelerate by Nicole Forsgren
  - DevOps Handbook
  - Release It! by Michael Nygard
  supplementary:
  - Blue-green deployment patterns
  - Canary release strategies
  - Database migration patterns
tooling:
  assessment:
  - name: Deployment Platforms
    purpose: Review rollback capabilities
  - name: Database Migration Tools
    purpose: Assess migration reversibility
  automation:
  - name: CI/CD Systems
    purpose: Automated rollback
  - name: Feature Flag Platforms
    purpose: Feature-level rollback
signals:
  critical:
  - id: RBR-CRIT-001
    signal: No rollback capability exists
    evidence_indicators:
    - Cannot revert deployments
    - No previous version available
    - Manual intervention required
    remediation: |
      - Implement deployment versioning
      - Enable automated rollback
      - Maintain previous versions
      - Test rollback capability
      - Document rollback procedures
  - id: RBR-CRIT-002
    signal: Rollback not tested
    evidence_indicators:
    - Rollback assumed to work
    - No rollback testing
    - Rollback failures in production
    remediation: |
      - Implement rollback testing
      - Test in staging environment
      - Include in deployment process
      - Verify data rollback
      - Document test results
  high:
  - id: RBR-HIGH-001
    signal: Data migrations not rollback-compatible
    evidence_indicators:
    - Destructive migrations
    - No backward compatibility
    - Data loss on rollback
    remediation: |
      - Design reversible migrations
      - Implement expand-contract pattern
      - Test migration rollback
      - Maintain data compatibility
      - Plan multi-phase migrations
  - id: RBR-HIGH-002
    signal: Rollback takes too long
    evidence_indicators:
    - Extended outage during rollback
    - Hours to complete rollback
    - Manual steps slow rollback
    remediation: |
      - Set rollback time objectives
      - Automate rollback process
      - Reduce manual steps
      - Test rollback performance
      - Optimize slow operations
  medium:
  - id: RBR-MED-001
    signal: Rollback procedures not documented
    evidence_indicators:
    - Tribal knowledge for rollback
    - Different people do it differently
    - No runbook for rollback
    remediation: |
      - Document rollback procedures
      - Create rollback runbooks
      - Train team on procedures
      - Keep documentation updated
      - Review after each use
  - id: RBR-MED-002
    signal: No rollback decision criteria
    evidence_indicators:
    - Unclear when to rollback
    - Delayed rollback decisions
    - Inconsistent rollback thresholds
    remediation: |
      - Define rollback criteria
      - Set automated triggers
      - Document decision process
      - Train on criteria
      - Track rollback decisions
  low:
  - id: RBR-LOW-001
    signal: Rollback metrics not tracked
    evidence_indicators:
    - Rollback frequency unknown
    - Rollback time not measured
    - No rollback trend analysis
    remediation: |
      - Track rollback events
      - Measure rollback time
      - Analyze rollback causes
      - Report rollback metrics
      - Use data to improve
  positive:
  - id: RBR-POS-001
    signal: Comprehensive rollback capability
    evidence_indicators:
    - Automated rollback available
    - Rollback regularly tested
    - Clear decision criteria
    - Fast rollback execution
    validation: Review rollback testing and metrics
procedure:
  step_1:
    name: Review rollback capabilities
    actions:
    - Examine deployment system
    - Check version management
    - Review automation level
    - Assess tooling support
  step_2:
    name: Evaluate data rollback
    actions:
    - Review migration patterns
    - Check backward compatibility
    - Assess data preservation
    - Test rollback scenarios
  step_3:
    name: Analyze procedures
    actions:
    - Review rollback documentation
    - Check decision criteria
    - Assess training level
    - Interview operators
  step_4:
    name: Test rollback
    actions:
    - Execute rollback in staging
    - Measure rollback time
    - Verify system state
    - Document findings
output:
  artifacts:
  - Rollback capability assessment
  - Data migration analysis
  - Procedure review
  - Improvement recommendations
  metrics:
  - Rollback automation level
  - Mean time to rollback
  - Rollback test coverage
  - Rollback success rate
closeout_checklist:
- id: rbr-001
  item: Rollback capability verified
  level: CRITICAL
  verification: technical
  verification_notes: Test rollback in non-production
  expected: Successful rollback demonstrated
- id: rbr-002
  item: Data rollback strategy documented
  level: BLOCKING
  verification: manual
  verification_notes: Verify data migration rollback plan
  expected: Documented strategy exists
governance:
  applicable_to:
    archetypes:
    - all
relationships:
  commonly_combined:
  - operational-excellence.change-management.change-rollback-procedures
  - operational-excellence.production-readiness.launch-criteria
