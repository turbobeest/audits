audit:
  id: ethical-societal.sustainability.green-coding-practice
  name: Green Coding Practice
  version: 1.0.0
  last_updated: '2026-01-19'
  status: active
  category: ethical-societal
  category_number: 18
  subcategory: sustainability
  tier: expert
  estimated_duration: 2-4 hours  # median: 3h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: low
  scope: codebase
  default_profiles:
  - full
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates software development practices for environmental efficiency
    including algorithmic efficiency, dependency management, asset optimization,
    data transfer minimization, and sustainable CI/CD practices. Assesses
    adherence to green software principles and patterns that reduce the
    energy footprint of software execution.
  why_it_matters: |
    Code efficiency directly impacts energy consumption. Inefficient algorithms,
    bloated dependencies, and unoptimized assets waste compute cycles and
    bandwidth. While individual optimizations seem small, at scale they
    significantly impact carbon footprint. Green coding also improves
    performance and reduces costs, creating multiple benefits.
  when_to_run:
  - During code reviews
  - Before performance optimization
  - During sustainability assessments
  - When establishing coding standards
prerequisites:
  required_artifacts:
  - type: source_code
    description: Access to application source code
  - type: build_configuration
    description: CI/CD and build configurations
  access_requirements:
  - Source code repository
  - CI/CD pipeline configuration
  - Dependency manifests
discovery:
  code_patterns:
  - pattern: (O\(n\^2\)|O\(n\^3\)|nested.*loop)
    type: regex
    scope: source
    purpose: Find potentially inefficient algorithms
  - pattern: (unused|dead.*code|TODO.*remove)
    type: regex
    scope: source
    purpose: Locate dead code
  - pattern: (cache|memoize|lazy|defer)
    type: regex
    scope: source
    purpose: Find efficiency patterns
  file_patterns:
  - glob: '**/package.json'
    purpose: Find JavaScript dependencies
  - glob: '**/requirements.txt'
    purpose: Locate Python dependencies
  - glob: '**/.github/workflows/**'
    purpose: Find CI/CD workflows
knowledge_sources:
  guides:
  - id: green-patterns
    name: Green Software Patterns
    url: https://patterns.greensoftware.foundation/
    offline_cache: true
  - id: sustainable-web
    name: Sustainable Web Manifesto
    url: https://www.sustainablewebmanifesto.com/
    offline_cache: true
  - id: web-vitals
    name: Web Vitals
    url: https://web.dev/vitals/
    offline_cache: true
  learning_resources:
  - id: green-software-course
    title: Green Software for Practitioners
    type: course
    reference: Linux Foundation, https://training.linuxfoundation.org/training/green-software-for-practitioners-lfc131/
tooling:
  static_analysis:
  - tool: lighthouse
    purpose: Web performance and efficiency auditing
    offline_capable: true
  - tool: bundlephobia
    purpose: Analyze npm package size impact
    offline_capable: false
  - tool: depcheck
    purpose: Find unused dependencies
    offline_capable: true
  scripts:
  - id: green-code-checker
    language: bash
    purpose: Check for green coding patterns
    source: inline
    code: |
      #!/bin/bash
      echo "=== Unused Dependencies Check ==="
      npx depcheck 2>/dev/null | head -30 || echo "depcheck not available"

      echo "=== Large Dependencies ==="
      find . -name "package.json" -exec jq -r '.dependencies // {} | keys[]' {} \; 2>/dev/null | \
        sort -u | head -20

      echo "=== Image Optimization ==="
      find . -type f \( -name "*.png" -o -name "*.jpg" -o -name "*.gif" \) -size +100k 2>/dev/null | head -20

      echo "=== Potential Dead Code (TODO remove) ==="
      grep -r "TODO.*remove\|FIXME.*delete\|dead.*code" --include="*.py" --include="*.ts" --include="*.js" . 2>/dev/null | head -20
signals:
  critical:
  - id: GCODE-CRIT-001
    signal: Exponential or factorial algorithms in hot paths
    evidence_pattern: (O\(n!\)|O\(2\^n\)|exponential)
    explanation: |
      Exponential algorithms are extremely energy-intensive. Even small
      inputs can cause massive compute requirements, wasting energy.
    remediation: Replace with polynomial-time algorithms where possible
  high:
  - id: GCODE-HIGH-001
    signal: Significant unused dependencies
    explanation: Unused dependencies increase bundle size and build time
    remediation: Remove unused dependencies
  - id: GCODE-HIGH-002
    signal: Unoptimized images and assets
    explanation: Large assets increase bandwidth and storage usage
    remediation: Optimize and compress assets appropriately
  medium:
  - id: GCODE-MED-001
    signal: No caching for expensive operations
    remediation: Implement caching for repeated expensive computations
  - id: GCODE-MED-002
    signal: Inefficient CI/CD pipelines
    remediation: Optimize CI/CD for efficiency (caching, parallelization)
  low:
  - id: GCODE-LOW-001
    signal: Dead code present in codebase
    remediation: Remove dead code to reduce cognitive and build overhead
  positive:
  - id: GCODE-POS-001
    signal: Efficient algorithms used consistently
  - id: GCODE-POS-002
    signal: Assets optimized and compressed
  - id: GCODE-POS-003
    signal: CI/CD optimized with caching
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Audit dependencies
    description: |
      Review dependency list for unused, duplicate, or oversized
      packages. Identify opportunities to reduce bundle size.
    duration_estimate: 45 min
    commands:
    - purpose: Check for unused dependencies
      command: npx depcheck 2>/dev/null || pip-check -u 2>/dev/null || echo 'Dependency checker not available'
    expected_findings:
    - Unused dependency identification
    - Size optimization opportunities
  - id: '2'
    name: Review algorithmic efficiency
    description: |
      Assess critical code paths for algorithmic efficiency.
      Identify opportunities for optimization.
    duration_estimate: 60 min
    commands:
    - purpose: Find nested loops
      command: grep -r -n 'for.*for\|while.*while' --include='*.py' --include='*.ts' --include='*.js'
        . | head -20
    expected_findings:
    - Algorithmic efficiency assessment
    - Optimization opportunities
  - id: '3'
    name: Analyze assets
    description: |
      Review image and media assets for optimization
      opportunities including compression and format.
    duration_estimate: 30 min
    commands:
    - purpose: Find large images
      command: find . -type f \( -name '*.png' -o -name '*.jpg' \) -size +100k 2>/dev/null | head -20
    expected_findings:
    - Asset optimization opportunities
    - Format improvement suggestions
  - id: '4'
    name: Review CI/CD efficiency
    description: |
      Assess CI/CD pipelines for efficiency including caching,
      parallelization, and unnecessary builds.
    duration_estimate: 30 min
    expected_findings:
    - CI/CD efficiency assessment
    - Build optimization opportunities
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: green_code_report
    format: structured
    sections:
    - Dependency Audit
    - Algorithmic Review
    - Asset Analysis
    - CI/CD Assessment
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Key Findings
    - Recommendations
  confidence_guidance:
    high: Full code review with profiling
    medium: Static analysis and dependency review
    low: Automated tool output only
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: green-patterns
      priority: required
profiles:
  membership:
    quick:
      included: true
      priority: 4
    full:
      included: true
      priority: 3
closeout_checklist:
- id: gcode-001
  item: Dependencies audited for unused packages
  level: BLOCKING
  verification: manual
  verification_notes: Dependency audit completed
  expected: Confirmed by reviewer
- id: gcode-002
  item: Critical paths reviewed for efficiency
  level: BLOCKING
  verification: manual
  verification_notes: Hot paths assessed for algorithmic efficiency
  expected: Confirmed by reviewer
- id: gcode-003
  item: Assets optimized
  level: WARNING
  verification: find . -type f \( -name '*.png' -o -name '*.jpg' \) -size +500k | wc -l | xargs -I{} test
    {} -eq 0 && echo PASS || echo FAIL
  expected: PASS
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: Green Software Foundation
    controls:
    - Green Software Patterns
relationships:
  commonly_combined:
  - ethical-societal.sustainability.energy-efficiency
  - ethical-societal.sustainability.e-waste-consideration
