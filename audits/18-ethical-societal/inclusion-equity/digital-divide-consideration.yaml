# ============================================================
# AUDIT: Digital Divide Consideration
# ============================================================
# Evaluates whether technology products and services consider
# users across different levels of technological access, literacy,
# and infrastructure availability.
# ============================================================

audit:
  id: "ethical-societal.inclusion-equity.digital-divide-consideration"

  name: "Digital Divide Consideration"

  version: "1.0.0"
  last_updated: "2026-01-19"
  status: "active"

  category: "ethical-societal"
  category_number: 18
  subcategory: "inclusion-equity"

  tier: "expert"
  estimated_duration: "4-6 hours"  # median: 5h

  completeness: "complete"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "qualitative"

  default_profiles:
    - "full"
    - "production"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Examines how well a technology product or service accommodates users
    who face digital divide barriers including:
    - Limited or no broadband access (dial-up, mobile-only, satellite)
    - Older or lower-powered devices
    - Low digital literacy or technology familiarity
    - Intermittent connectivity or data caps
    - Lack of access to technical support

    Reviews application performance, offline capabilities, data efficiency,
    progressive enhancement strategies, and accessibility for users with
    varying technological resources.

  why_it_matters: |
    The digital divide affects billions globally and creates systemic exclusion
    from digital services. Products designed only for high-bandwidth, modern
    devices, and technically proficient users:
    - Exclude rural, elderly, and economically disadvantaged populations
    - Reinforce existing socioeconomic inequalities
    - Miss significant market opportunities in developing regions
    - May violate accessibility mandates in public sector contracts
    - Create barriers to essential services increasingly delivered digitally

  when_to_run:
    - "Before launching in new geographic markets"
    - "When designing core user experience flows"
    - "During accessibility and inclusion reviews"
    - "When evaluating public sector or NGO deployments"

prerequisites:
  required_artifacts:
    - type: "application"
      description: "Running application or service to evaluate"
    - type: "performance_data"
      description: "Performance metrics across various conditions"

  access_requirements:
    - "Access to staging/production environment"
    - "Network throttling tools for simulation"
    - "Device testing lab or emulators"
    - "Analytics data on user device/network demographics"

discovery:
  code_patterns:
    - pattern: "progressive.?enhancement|graceful.?degradation"
      type: "regex"
      scope: "source"
      purpose: "Identify progressive enhancement patterns"
    - pattern: "offline|service.?worker|cache.?first"
      type: "regex"
      scope: "source"
      purpose: "Find offline capability implementations"
    - pattern: "lazy.?load|defer|async"
      type: "regex"
      scope: "source"
      purpose: "Identify performance optimization patterns"

  file_patterns:
    - glob: "**/service-worker.{js,ts}"
      purpose: "Service worker implementations for offline support"
    - glob: "**/manifest.json"
      purpose: "PWA manifest for offline capabilities"
    - glob: "**/.lighthouserc.*"
      purpose: "Lighthouse performance configuration"

  interviews:
    - role: "Product managers"
      questions:
        - "What percentage of users are on mobile vs desktop?"
        - "What network conditions do your users typically experience?"
        - "Have you conducted usability testing with low-literacy users?"
      purpose: "Understand user demographics and design considerations"
    - role: "Frontend engineers"
      questions:
        - "What offline capabilities does the application support?"
        - "How does the application behave on 2G/3G connections?"
        - "What progressive enhancement strategies are implemented?"
      purpose: "Assess technical implementation of inclusive design"

  documents_to_review:
    - type: "User research reports"
      purpose: "Review user demographics and technology access patterns"
    - type: "Performance budgets"
      purpose: "Assess constraints on page weight and load times"
    - type: "Accessibility audit reports"
      purpose: "Review existing accessibility evaluations"

knowledge_sources:
  specifications:
    - id: "wcag-21"
      name: "Web Content Accessibility Guidelines (WCAG) 2.1"
      url: "https://www.w3.org/TR/WCAG21/"
      offline_cache: true
      priority: "required"

  guides:
    - id: "web-dev-perf"
      name: "Web.dev Performance Guide"
      url: "https://web.dev/performance/"
      offline_cache: true
    - id: "a11y-project"
      name: "The A11Y Project"
      url: "https://www.a11yproject.com/"
      offline_cache: true

  papers:
    - id: "digital-divide-research"
      title: "The Digital Divide: Addressing the Gap"
      url: "https://www.pewresearch.org/internet/fact-sheet/internet-broadband/"

  learning_resources:
    - id: "inclusive-design"
      title: "Inclusive Design Principles"
      type: "article"
      reference: "https://inclusivedesignprinciples.org/"

tooling:
  static_analysis:
    - tool: "Lighthouse"
      purpose: "Performance and accessibility scoring"
      offline_capable: true
    - tool: "WebPageTest"
      purpose: "Performance testing across network conditions"
      offline_capable: false

  infrastructure_tools:
    - tool: "Chrome DevTools Network Throttling"
      purpose: "Simulate various network conditions"
      command: "DevTools > Network > Throttling dropdown"
    - tool: "BrowserStack"
      purpose: "Test across real devices and conditions"
      command: "browserstack.com device lab"

  scripts:
    - id: "check-bundle-size"
      language: "bash"
      purpose: "Verify JavaScript bundle sizes are reasonable"
      source: "inline"
      code: |
        #!/bin/bash
        # Check for large JavaScript bundles
        find . -name "*.js" -size +500k -type f | while read file; do
          size=$(du -h "$file" | cut -f1)
          echo "Large bundle found: $file ($size)"
        done

signals:
  critical:
    - id: "DIVIDE-CRIT-001"
      signal: "Application completely non-functional without JavaScript"
      evidence_indicators:
        - "Blank page when JavaScript is disabled"
        - "No server-side rendering for core content"
        - "No progressive enhancement fallbacks"
      explanation: |
        Applications that require JavaScript for all functionality exclude
        users on older devices, those with JavaScript disabled for security,
        and create barriers when scripts fail to load on poor connections.
      remediation: "Implement progressive enhancement with server-side rendering for core functionality"

    - id: "DIVIDE-CRIT-002"
      signal: "Application requires more than 5MB initial download on mobile"
      evidence_indicators:
        - "Large initial payload without code splitting"
        - "Unoptimized images loading on first view"
        - "No lazy loading for below-fold content"
      explanation: |
        Large initial downloads are prohibitive for users with data caps,
        slow connections, or pay-per-megabyte plans common in developing regions.
      remediation: "Implement aggressive code splitting, image optimization, and lazy loading"

  high:
    - id: "DIVIDE-HIGH-001"
      signal: "No offline capability for core user journeys"
      explanation: |
        Users with intermittent connectivity cannot complete important tasks
        when the application requires constant network access.
      remediation: "Implement service workers with offline-first caching for critical paths"

    - id: "DIVIDE-HIGH-002"
      signal: "Performance degrades severely on 3G connections"
      explanation: |
        3G is still common in many regions; applications that become unusable
        on slower networks exclude significant user populations.
      remediation: "Optimize for 3G performance as a baseline, not an edge case"

  medium:
    - id: "DIVIDE-MED-001"
      signal: "No data-saver mode or reduced data option"
      remediation: "Provide user preference to reduce data usage and load lighter versions"

    - id: "DIVIDE-MED-002"
      signal: "Complex interactions require precise touch or mouse control"
      remediation: "Design larger touch targets and simpler interaction patterns"

  low:
    - id: "DIVIDE-LOW-001"
      signal: "No lite version or basic HTML alternative available"

  positive:
    - id: "DIVIDE-POS-001"
      signal: "Progressive Web App with full offline support"
    - id: "DIVIDE-POS-002"
      signal: "Performance budget enforced in CI/CD pipeline"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Performance Baseline Assessment"
      description: |
        Establish performance baselines across various network conditions
        and device capabilities to understand current state.
      duration_estimate: "60 min"

      commands:
        - purpose: "Run Lighthouse audit"
          command: "lighthouse --output=json --output-path=./lighthouse-report.json https://[target-url]"
        - purpose: "Check for service worker"
          command: "curl -s [target-url] | grep -i 'service.?worker\\|navigator.serviceWorker'"

      expected_findings:
        - "Performance scores across metrics (LCP, FID, CLS)"
        - "Bundle sizes and loading waterfall"
        - "Offline capability status"

    - id: "2"
      name: "Network Condition Testing"
      description: |
        Test application behavior under constrained network conditions
        including 2G, 3G, and intermittent connectivity.
      duration_estimate: "90 min"

      questions:
        - "Does the application load within 10 seconds on 3G?"
        - "What functionality is available during network interruptions?"
        - "How does the app communicate network status to users?"

      expected_findings:
        - "Load times under various throttled conditions"
        - "Graceful degradation behavior"
        - "Error handling for network failures"

    - id: "3"
      name: "Device Compatibility Assessment"
      description: |
        Evaluate functionality on older and lower-powered devices
        to ensure broad accessibility.
      duration_estimate: "60 min"

      questions:
        - "Does the application work on devices 5+ years old?"
        - "What is the minimum required browser version?"
        - "How does the app perform with limited RAM?"

      expected_findings:
        - "Minimum viable device requirements"
        - "Performance on budget smartphones"
        - "Memory usage patterns"

    - id: "4"
      name: "Digital Literacy Assessment"
      description: |
        Review user interface for accessibility to users with
        varying levels of digital literacy.
      duration_estimate: "45 min"

      questions:
        - "Are instructions clear without technical jargon?"
        - "Can core tasks be completed without prior training?"
        - "Is there contextual help and error guidance?"

      expected_findings:
        - "Clarity of user interface elements"
        - "Availability of help and support resources"
        - "Error message helpfulness"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Performance Analysis"
        - "Connectivity Assessment"
        - "Device Compatibility"
        - "Recommendations"

  confidence_guidance:
    high: "Performance metrics measured, functionality tested across conditions"
    medium: "Some conditions simulated, limited device testing"
    low: "Review based on code analysis without runtime testing"

offline:
  capability: "partial"

  cache_manifest:
    knowledge:
      - source_id: "wcag-21"
        priority: "required"
      - source_id: "web-dev-perf"
        priority: "recommended"

profiles:
  membership:
    quick:
      included: false
      reason: "Requires comprehensive performance testing"
    full:
      included: true
      priority: 1

closeout_checklist:
  - id: "divide-001"
    item: "Performance tested on 3G network conditions"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "Confirm Lighthouse tests run with 3G throttling"
    expected: "Confirmed by reviewer"

  - id: "divide-002"
    item: "Offline capabilities documented"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Verify service worker and caching strategy reviewed"
    expected: "Confirmed by reviewer"

  - id: "divide-003"
    item: "Bundle size analysis completed"
    level: "WARNING"
    verification: "manual"
    verification_notes: "Confirm JavaScript bundle sizes documented"
    expected: "Confirmed by reviewer"

governance:
  applicable_to:
    archetypes: ["web-application", "mobile-app", "public-service"]

  compliance_frameworks:
    - framework: "WCAG 2.1"
      controls: ["1.4.10", "2.2.1"]
    - framework: "Section 508"
      controls: ["1194.22"]

relationships:
  commonly_combined:
    - "performance.frontend.load-time"
    - "accessibility.wcag.compliance"
    - "ux.usability.mobile-experience"
