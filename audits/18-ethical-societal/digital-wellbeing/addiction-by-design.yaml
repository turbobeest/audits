# ============================================================
# AUDIT: Addiction by Design
# ============================================================
# Evaluates whether product design exploits psychological
# vulnerabilities to create compulsive usage patterns.

audit:
  id: "ethical-societal.digital-wellbeing.addiction-by-design"

  name: "Addiction by Design"

  version: "1.0.0"
  last_updated: "2026-01-19"
  status: "active"

  category: "ethical-societal"
  category_number: 18
  subcategory: "digital-wellbeing"

  tier: "expert"
  estimated_duration: "4-6 hours"  # median: 5h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "codebase"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    Evaluates product design for patterns that exploit psychological
    vulnerabilities to encourage compulsive usage. Examines variable reward
    mechanisms, infinite scroll, social comparison features, FOMO-inducing
    notifications, streaks and loss aversion, and other techniques derived
    from behavioral psychology and gambling design. Assesses whether design
    prioritizes engagement metrics over user wellbeing.

  why_it_matters: |
    Digital addiction harms mental health, relationships, and productivity.
    Children and adolescents are especially vulnerable. Regulatory attention
    is increasing - EU DSA addresses addictive design for minors, and children's
    protection laws globally restrict manipulative features. Beyond regulation,
    designing for addiction erodes trust and creates backlash. Ethical companies
    differentiate through humane design.

  when_to_run:
    - "When designing engagement features"
    - "Before launching products targeting young users"
    - "During ethical product reviews"
    - "Following concerns about compulsive usage"

prerequisites:
  required_artifacts:
    - type: "product_design"
      description: "Product feature documentation and user flows"
    - type: "engagement_metrics"
      description: "Documentation of engagement KPIs and optimization"

  access_requirements:
    - "Product design documentation"
    - "Feature implementation code"
    - "Engagement analytics configuration"

discovery:
  code_patterns:
    - pattern: "(infinite.?scroll|endless|load.?more|auto.?play)"
      type: "regex"
      scope: "source"
      purpose: "Find infinite content patterns"
    - pattern: "(streak|daily.?bonus|consecutive|miss|lose)"
      type: "regex"
      scope: "source"
      purpose: "Locate streak mechanics"
    - pattern: "(notification|push|alert|badge|dot)"
      type: "regex"
      scope: "source"
      purpose: "Find notification systems"
    - pattern: "(random|variable|slot|gamif)"
      type: "regex"
      scope: "source"
      purpose: "Locate variable reward mechanisms"

  file_patterns:
    - glob: "**/notifications/**"
      purpose: "Find notification systems"
    - glob: "**/engagement/**"
      purpose: "Locate engagement features"
    - glob: "**/gamification/**"
      purpose: "Find gamification code"

  interviews:
    - role: "Product managers"
      questions:
        - "What engagement metrics are you optimizing for?"
        - "How do you balance engagement with user wellbeing?"
        - "What features are designed to increase time-on-site?"
      purpose: "Understand product goals and values"

knowledge_sources:
  guides:
    - id: "center-humane-tech"
      name: "Center for Humane Technology Guidelines"
      url: "https://www.humanetech.com/"
      offline_cache: true
    - id: "time-well-spent"
      name: "Time Well Spent Design Principles"
      url: "https://www.humanetech.com/technologists"
      offline_cache: true

  papers:
    - id: "hooked-model"
      title: "Hooked: How to Build Habit-Forming Products (Critique)"
      url: "https://www.goodreads.com/book/show/22668729-hooked"
    - id: "persuasive-tech"
      title: "Captology and Persuasive Technology Ethics"
      url: "https://captology.stanford.edu/"

  learning_resources:
    - id: "digital-minimalism"
      title: "Digital Minimalism"
      type: "book"
      reference: "Cal Newport, ISBN 978-0525536512"

tooling:
  assessment_tools:
    - tool: "Humane design checklist"
      purpose: "Evaluate design against wellbeing principles"
    - tool: "Dark pattern / addiction pattern taxonomy"
      purpose: "Systematic identification of harmful patterns"

  scripts:
    - id: "addiction-pattern-finder"
      language: "bash"
      purpose: "Find potential addictive design patterns in code"
      source: "inline"
      code: |
        #!/bin/bash
        echo "=== Infinite Scroll/Autoplay ==="
        grep -r -E "(infinite|endless|autoplay|auto_play|loadMore)" \
          --include="*.tsx" --include="*.jsx" --include="*.ts" . 2>/dev/null | head -20

        echo "=== Streak Mechanics ==="
        grep -r -E "(streak|consecutive|daily.*bonus|miss.*day)" \
          --include="*.py" --include="*.ts" --include="*.tsx" . 2>/dev/null | head -20

        echo "=== Variable Rewards ==="
        grep -r -E "(random|shuffle|slot|spin|surprise)" \
          --include="*.py" --include="*.ts" . 2>/dev/null | head -20

        echo "=== Social Validation ==="
        grep -r -E "(like.*count|follower.*count|view.*count)" \
          --include="*.tsx" --include="*.jsx" . 2>/dev/null | head -20

signals:
  critical:
    - id: "ADD-CRIT-001"
      signal: "Variable reward mechanism mimicking gambling"
      evidence_indicators:
        - "Random rewards for user actions"
        - "Slot machine style interfaces"
        - "Loot box mechanics"
      explanation: |
        Variable ratio reinforcement schedules are the most addictive
        psychological mechanism, derived from gambling design. Using these
        techniques, especially with minors, is ethically problematic and
        increasingly regulated.
      remediation: "Replace variable rewards with predictable value delivery"

    - id: "ADD-CRIT-002"
      signal: "Streak mechanics with loss aversion"
      evidence_indicators:
        - "Daily streaks that reset on missed day"
        - "Emphasis on maintaining streaks"
        - "Penalty for breaking streaks"
      explanation: |
        Streaks exploit loss aversion to create obligation rather than
        genuine engagement. Users feel compelled to return even when they
        don't want to, damaging relationship with product.
      remediation: "Remove streak mechanics or add grace periods without penalty"

  high:
    - id: "ADD-HIGH-001"
      signal: "Infinite scroll without natural stopping points"
      explanation: "Removes natural boundaries, enabling compulsive consumption"
      remediation: "Add pagination, session limits, or natural break points"

    - id: "ADD-HIGH-002"
      signal: "Autoplay exploiting inertia"
      explanation: "Automatic continuation bypasses intentional choice"
      remediation: "Require affirmative action to continue; default to stop"

  medium:
    - id: "ADD-MED-001"
      signal: "Social comparison features (follower counts, likes)"
      remediation: "Consider hiding vanity metrics or making them optional"

    - id: "ADD-MED-002"
      signal: "FOMO-inducing notifications"
      remediation: "Reduce notification frequency; make notifications optional"

  low:
    - id: "ADD-LOW-001"
      signal: "No usage dashboard or time awareness features"
      remediation: "Provide users visibility into their usage patterns"

  positive:
    - id: "ADD-POS-001"
      signal: "Built-in usage limits and reminders"
    - id: "ADD-POS-002"
      signal: "User control over engagement features"
    - id: "ADD-POS-003"
      signal: "Natural ending points in content consumption"

procedure:
  context:
    cognitive_mode: "critical"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Identify engagement mechanisms"
      description: |
        Map all features designed to drive engagement including notifications,
        rewards, social features, and content delivery patterns.
      duration_estimate: "60 min"
      commands:
        - purpose: "Find engagement-related code"
          command: "grep -r -E '(engagement|retention|daily_active|time_spent)' --include='*.py' --include='*.ts' ."
      expected_findings:
        - "Complete engagement mechanism inventory"
        - "Feature purpose documentation"

    - id: "2"
      name: "Evaluate reward structures"
      description: |
        Analyze reward mechanisms for variable reinforcement schedules
        and gambling-derived design patterns.
      duration_estimate: "60 min"
      questions:
        - "Are rewards predictable or variable?"
        - "Do rewards use random/slot-machine mechanics?"
        - "Is there artificial scarcity or FOMO?"
      expected_findings:
        - "Reward structure analysis"
        - "Gambling pattern identification"

    - id: "3"
      name: "Assess content delivery"
      description: |
        Evaluate content consumption patterns for infinite scroll,
        autoplay, and other bottomless bowl designs.
      duration_estimate: "45 min"
      commands:
        - purpose: "Find infinite scroll patterns"
          command: "grep -r -E '(infinite|endless|loadMore|autoplay)' --include='*.tsx' --include='*.jsx' ."
      expected_findings:
        - "Content delivery pattern assessment"
        - "Natural stopping point analysis"

    - id: "4"
      name: "Review notification strategy"
      description: |
        Evaluate notification frequency, timing, and content for
        manipulation of user attention.
      duration_estimate: "45 min"
      expected_findings:
        - "Notification strategy assessment"
        - "FOMO and urgency analysis"

    - id: "5"
      name: "Assess user control and wellbeing features"
      description: |
        Evaluate tools provided to users for managing their engagement
        including usage limits, notification controls, and time awareness.
      duration_estimate: "45 min"
      questions:
        - "Can users set usage limits?"
        - "Are usage statistics available to users?"
        - "Can users disable engagement features?"
      expected_findings:
        - "User control assessment"
        - "Wellbeing feature gaps"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "addiction_assessment"
      format: "structured"
      sections:
        - "Engagement Mechanism Inventory"
        - "Reward Structure Analysis"
        - "Content Delivery Assessment"
        - "Notification Strategy Review"
        - "User Control Evaluation"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Ethical Concerns"
        - "User Wellbeing Impact"
        - "Recommendations"

  confidence_guidance:
    high: "Full product review with user research"
    medium: "Expert evaluation of design and code"
    low: "Code review only"

offline:
  capability: "full"

  cache_manifest:
    knowledge:
      - source_id: "center-humane-tech"
        priority: "required"

profiles:
  membership:
    quick:
      included: false
      reason: "Requires comprehensive product analysis"
    full:
      included: true
      priority: 2

closeout_checklist:
  - id: "add-001"
    item: "Engagement mechanisms inventoried"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "All engagement features documented"
    expected: "Confirmed by reviewer"

  - id: "add-002"
    item: "No variable-ratio gambling mechanics"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "No slot-machine or loot-box patterns"
    expected: "Confirmed by reviewer"

  - id: "add-003"
    item: "Natural stopping points exist"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Content has boundaries; no infinite scroll"
    expected: "Confirmed by reviewer"

  - id: "add-004"
    item: "Users can control engagement features"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Usage limits and notification controls available"
    expected: "Confirmed by reviewer"

governance:
  applicable_to:
    archetypes: ["consumer-facing", "social-media", "gaming", "children-focused"]

  compliance_frameworks:
    - framework: "EU Digital Services Act"
      controls: ["Article 28 - Protection of Minors"]
    - framework: "COPPA"
      controls: ["Children's Online Privacy"]
    - framework: "UK Age Appropriate Design Code"
      controls: ["Standard 10 - Nudge Techniques"]

relationships:
  commonly_combined:
    - "ethical-societal.digital-wellbeing.notification-ethics"
    - "ethical-societal.digital-wellbeing.screen-time-consideration"
