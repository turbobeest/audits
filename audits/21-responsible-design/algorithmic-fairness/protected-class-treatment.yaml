audit:
  id: responsible-design.algorithmic-fairness.protected-class-treatment
  name: Protected Class Treatment Audit
  version: 1.0.0
  last_updated: '2025-01-19'
  status: active
  category: ethical-societal
  category_number: 21
  subcategory: algorithmic-fairness
  tier: phd
  estimated_duration: 3-5 hours  # median: 4h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: critical
  scope: qualitative
  default_profiles:
  - full
  - security
  blocks_phase: true
  parallelizable: false
description:
  what: |
    Assesses how algorithmic systems handle protected class characteristics
    under civil rights law. Evaluates whether systems inappropriately use,
    collect, store, or infer protected characteristics including race, color,
    religion, sex (including pregnancy, gender identity, sexual orientation),
    national origin, age (40+), disability, and genetic information.

    Examines data collection practices, feature engineering, model inputs,
    and whether systems attempt to infer protected characteristics from
    other data points.
  why_it_matters: |
    Protected class treatment violations carry severe legal consequences:

    - Title VII prohibits discrimination in employment based on protected class
    - Fair Housing Act prohibits discrimination in housing
    - Equal Credit Opportunity Act prohibits discrimination in lending
    - ADA prohibits discrimination based on disability
    - ADEA prohibits age discrimination

    Beyond direct use, inferring protected characteristics or using highly
    correlated proxies can constitute illegal discrimination. Organizations
    must understand what protected class data exists in their systems and
    how it flows through algorithmic decisions.
  when_to_run:
  - Before deploying any customer-facing algorithm
  - During data inventory and classification exercises
  - When expanding to new demographic markets
  - After incidents suggesting discrimination
  - Annually for regulated systems
prerequisites:
  required_artifacts:
  - type: data_inventory
    description: Inventory of data elements including those related to protected characteristics
  - type: system_architecture
    description: Documentation of data flows through algorithmic systems
  - type: feature_documentation
    description: List of features used by algorithmic models
  optional_artifacts:
  - type: data_lineage
    description: Documentation of data sources and transformations
  access_requirements:
  - Access to data dictionaries and schemas
  - Access to ML model feature lists
  - Ability to interview data and ML teams
  - Access to privacy and legal teams
discovery:
  interviews:
  - role: Data Privacy/Protection Officer
    questions:
    - What protected class data is collected and stored?
    - What is the lawful basis for processing this data?
    - How is protected class data access controlled?
    - Are there policies on using protected characteristics in algorithms?
    purpose: Understand data governance for protected characteristics
    duration: 45 min
  - role: ML/Data Science Lead
    questions:
    - Do any models use protected characteristics as features?
    - Are protected characteristics available to models even if not directly used?
    - How do you ensure models don't infer protected characteristics?
    - What proxy variable analysis has been performed?
    purpose: Assess model-level protected class handling
    duration: 45 min
  - role: Legal/Compliance
    questions:
    - What regulations govern protected class treatment in your domain?
    - Are there approved uses for protected class data?
    - What documentation is required for lawful use?
    purpose: Clarify legal requirements and approved uses
    duration: 30 min
  documents_to_review:
  - type: Data Classification Policy
    purpose: Review how protected class data is classified
    look_for:
    - Definition of protected class data
    - Classification levels and handling requirements
    - Access control requirements
  - type: Privacy Policy
    purpose: Assess disclosed collection and use of protected data
    look_for:
    - What protected characteristics are collected
    - How they are used
    - Consent mechanisms
  - type: Model Feature Documentation
    purpose: Identify protected class features
    look_for:
    - Direct protected class features
    - Features that may encode protected characteristics
    - Features with access to protected data
  - type: Data Retention Policy
    purpose: Assess protected class data lifecycle
    look_for:
    - Retention periods for protected data
    - Deletion procedures
    - Special handling requirements
  file_patterns:
  - glob: '**/ETHICS.md'
    purpose: Ethics documentation
  - glob: '**/PRIVACY*.md'
    purpose: Privacy documentation
  - glob: '**/terms*.md'
    purpose: Terms of service
  - glob: '**/policy*.md'
    purpose: Policy documentation
  code_patterns:
  - pattern: consent|privacy|gdpr|ccpa|cookie
    type: regex
    scope: all
    purpose: Privacy/consent references
knowledge_sources:
  specifications:
  - id: title-vii
    name: Title VII of the Civil Rights Act of 1964
    url: https://www.eeoc.gov/statutes/title-vii-civil-rights-act-1964
    offline_cache: true
    priority: required
  - id: ecoa
    name: Equal Credit Opportunity Act
    url: https://www.consumerfinance.gov/rules-policy/regulations/1002/
    offline_cache: true
    priority: required
  - id: fha
    name: Fair Housing Act
    url: https://www.justice.gov/crt/fair-housing-act-2
    offline_cache: true
    priority: required
  - id: ada
    name: Americans with Disabilities Act
    url: https://www.ada.gov/
    offline_cache: true
    priority: required
  guides:
  - id: eeoc-protected-classes
    name: EEOC Protected Classes Overview
    url: https://www.eeoc.gov/employers/small-business/3-who-protected-employment-discrimination
    offline_cache: true
    priority: required
  learning_resources:
  - id: proxy-discrimination
    title: Proxy Discrimination in the Age of AI and Big Data
    type: article
    reference: Iowa Law Review Vol. 105
    relevance: Legal analysis of proxy discrimination
tooling:
  assessment_tools:
  - tool: Protected Class Data Inventory Matrix
    purpose: Map protected class data across systems
    description: |
      Matrix documenting:
      - Protected characteristics collected
      - Systems storing each type
      - Purpose and lawful basis
      - Access controls
      - Model availability
    offline_capable: true
  - tool: Feature-Protected Class Correlation Analysis
    purpose: Identify features correlated with protected characteristics
    description: |
      Statistical analysis of correlation between model features
      and protected characteristics to identify proxy risk
    offline_capable: true
  infrastructure_tools:
  - tool: Data lineage tools
    purpose: Trace protected class data flow
    description: |
      Track how protected class data moves through systems
      and into algorithmic decision points
signals:
  critical:
  - id: PROTCLASS-CRIT-001
    signal: Protected characteristics used as direct model features
    evidence_indicators:
    - Race, gender, religion in model feature list
    - Age used in contexts where prohibited
    - Disability status as model input
    - National origin in decision algorithm
    explanation: |
      Direct use of protected characteristics is illegal in most
      regulated contexts (employment, credit, housing). Even where
      technically legal, it creates significant discrimination risk.
    remediation: |
      - Remove protected characteristics from model features
      - Implement feature access controls
      - Audit all models for protected class inputs
      - Document any legitimate uses with legal approval
  - id: PROTCLASS-CRIT-002
    signal: System infers protected characteristics for decision-making
    evidence_indicators:
    - Model component predicts race, gender, religion
    - Protected characteristics inferred from photos, names
    - Demographic inference used in downstream decisions
    - Third-party data enrichment adds inferred demographics
    explanation: |
      Inferring protected characteristics and using them in decisions
      has the same legal effect as using actual data. This practice
      is increasingly scrutinized by regulators.
    remediation: |
      - Remove demographic inference components
      - Audit third-party data for demographic inference
      - Block inferred demographics from decision systems
      - Review legitimate research uses separately
  high:
  - id: PROTCLASS-HIGH-001
    signal: Protected class data accessible to models without controls
    evidence_indicators:
    - Protected data in same tables as model features
    - No access controls separating protected data from models
    - Engineers can query protected data alongside features
    - Data warehouse combines protected and feature data
    explanation: |
      Even if not intentionally used, accessible protected class data
      can inadvertently enter models through feature engineering or
      data exploration. Lack of access controls is a significant risk.
    remediation: |
      - Implement data access controls for protected characteristics
      - Separate protected data from ML feature stores
      - Audit access logs for protected data queries
      - Require explicit approval for protected data access
  - id: PROTCLASS-HIGH-002
    signal: No inventory of protected class data across systems
    evidence_indicators:
    - Cannot identify all systems storing protected data
    - No data classification for protected characteristics
    - Unknown scope of protected data collection
    explanation: |
      Without a complete inventory, organizations cannot ensure
      proper handling of protected class data or prevent unauthorized
      use in algorithmic systems.
    remediation: |
      - Conduct comprehensive data inventory
      - Classify protected class data elements
      - Document all systems storing protected data
      - Implement data discovery tools
  - id: PROTCLASS-HIGH-003
    signal: Collecting protected characteristics without lawful basis
    evidence_indicators:
    - Protected data collected without documented purpose
    - No legal review of protected data collection
    - Overcollection of protected characteristics
    explanation: |
      Collecting protected class data requires lawful basis and
      documented purpose. Excessive collection creates compliance
      risk and potential misuse.
    remediation: |
      - Review legal basis for all protected data collection
      - Minimize collection to documented purposes
      - Implement data minimization principles
      - Delete unnecessarily collected protected data
  medium:
  - id: PROTCLASS-MED-001
    signal: Protected class data retained longer than necessary
    evidence_indicators:
    - No specific retention policy for protected data
    - Protected data retained indefinitely
    - Retention exceeds documented purpose
    remediation: |
      - Define retention periods for protected class data
      - Implement automated deletion
      - Audit compliance with retention policies
  - id: PROTCLASS-MED-002
    signal: Third-party data sources may contain protected characteristics
    evidence_indicators:
    - External data enrichment without demographic audit
    - Vendor data with potential protected class information
    - No review of third-party data for protected characteristics
    remediation: |
      - Audit third-party data sources
      - Require vendor certification on protected data
      - Review contracts for protected data provisions
  positive:
  - id: PROTCLASS-POS-001
    signal: Comprehensive protected class data governance
    evidence_indicators:
    - Complete inventory of protected class data
    - Access controls prevent unauthorized model use
    - Regular audits of protected data handling
    - Legal review of all protected data uses
  - id: PROTCLASS-POS-002
    signal: Proxy variable analysis performed
    evidence_indicators:
    - Regular correlation analysis with protected characteristics
    - Features audited for protected class encoding
    - Proxy risks documented and mitigated
procedure:
  context:
    cognitive_mode: critical
    ensemble_role: auditor
  preparation:
  - step: Identify all protected classes relevant to jurisdiction and domain
  - step: Gather data inventories and system documentation
  - step: Obtain model feature lists and data dictionaries
  - step: Schedule stakeholder interviews
  steps:
  - id: '1'
    name: Protected Class Inventory
    description: |
      Create comprehensive inventory of protected class data
      collected, stored, and processed by the organization.
    duration_estimate: 1-2 hours
    questions:
    - What protected characteristics are collected?
    - Where is this data stored?
    - What is the purpose of collection?
    expected_findings:
    - Complete protected class data inventory
    - Storage and processing locations
  - id: '2'
    name: Data Flow Analysis
    description: |
      Trace protected class data through systems to identify
      where it may enter algorithmic decision processes.
    duration_estimate: 1-2 hours
    expected_findings:
    - Data flow map for protected characteristics
    - Intersection points with algorithmic systems
  - id: '3'
    name: Model Feature Audit
    description: |
      Review all model features for direct protected class
      use or high correlation with protected characteristics.
    duration_estimate: 1 hour
    expected_findings:
    - Direct protected class features identified
    - Proxy feature candidates identified
  - id: '4'
    name: Access Control Assessment
    description: |
      Evaluate access controls preventing protected class data
      from entering algorithmic systems inappropriately.
    duration_estimate: 45 min
    expected_findings:
    - Access control adequacy assessment
    - Gap identification
  - id: '5'
    name: Legal Compliance Review
    description: |
      Assess compliance with applicable civil rights laws
      for protected class treatment.
    duration_estimate: 1 hour
    expected_findings:
    - Compliance status by regulation
    - Documentation gaps
  - id: '6'
    name: Synthesize Findings
    description: |
      Compile findings into prioritized recommendations.
    duration_estimate: 30 min
    expected_findings:
    - Prioritized findings list
    - Remediation recommendations
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: protected_class_inventory
    format: structured
    description: Complete inventory of protected class data across systems
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Protected Class Data Inventory
    - Data Flow Analysis
    - Model Feature Assessment
    - Legal Compliance Status
    - Recommendations
  confidence_guidance:
    high: Complete data inventory, verified access controls, legal review completed
    medium: Partial inventory, some systems unassessed
    low: Limited visibility into data landscape
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: eeoc-protected-classes
      priority: required
    - source_id: title-vii
      priority: required
  degradation:
  - feature: Current regulatory guidance
    impact: Cannot verify latest interpretations
    mitigation: Cache key regulatory documents
profiles:
  membership:
    quick:
      included: false
      reason: Requires comprehensive data inventory
    security:
      included: true
      priority: 80
      reason: Legal and compliance risk
    full:
      included: true
      priority: 90
closeout_checklist:
- id: protclass-001
  item: Protected class data inventory completed
  level: CRITICAL
  verification: manual
  verification_notes: Reviewer confirms inventory covers all relevant protected characteristics
  expected: Confirmed by reviewer
- id: protclass-002
  item: Model features audited for protected class use
  level: CRITICAL
  verification: manual
  verification_notes: All algorithmic systems reviewed for protected class inputs
  expected: Confirmed by reviewer
- id: protclass-003
  item: Access controls assessed
  level: BLOCKING
  verification: manual
  verification_notes: Access control adequacy evaluated for protected class data
  expected: Confirmed by reviewer
- id: protclass-004
  item: Legal compliance reviewed
  level: BLOCKING
  verification: manual
  verification_notes: Applicable regulations identified and compliance assessed
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - all
    domains:
    - Employment
    - Credit/Lending
    - Housing
    - Insurance
    - Healthcare
    team_sizes:
    - small
    - medium
    - large
  compliance_frameworks:
  - framework: Title VII
    controls:
    - Protected class non-discrimination
  - framework: ECOA
    controls:
    - Prohibited bases
  - framework: Fair Housing Act
    controls:
    - Protected classes
  - framework: ADA
    controls:
    - Disability non-discrimination
  - framework: ADEA
    controls:
    - Age discrimination prohibition
relationships:
  commonly_combined:
  - responsible-design.algorithmic-fairness.bias-detection
  - responsible-design.algorithmic-fairness.proxy-variable
  - responsible-design.consent-transparency.data-usage-transparency
