audit:
  id: developer-experience.documentation-quality.code-comments
  name: Code Comments Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: developer-experience
  category_number: 35
  subcategory: documentation-quality
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: development
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the quality and appropriateness of inline code comments
    including JSDoc/docstrings, explanatory comments, and TODO/FIXME
    markers. Assesses whether comments aid understanding without being
    redundant or outdated.
  why_it_matters: |
    Good comments explain the 'why' behind non-obvious code, making
    maintenance easier. Poor comments either state the obvious, lie
    about the code, or are missing where needed. The right balance
    of comments improves code comprehension significantly.
  when_to_run:
  - During code quality reviews
  - When maintainability concerns arise
  - After team size changes
  - Quarterly documentation review
prerequisites:
  required_artifacts:
  - type: source_code
    description: Codebase to analyze
  access_requirements:
  - Source code access
  - Static analysis tools
discovery:
  file_patterns:
  - glob: '**/*.{ts,tsx,js,jsx}'
    purpose: Find JavaScript/TypeScript files
  - glob: '**/*.py'
    purpose: Find Python files
  - glob: '**/*.{java,kt}'
    purpose: Find Java/Kotlin files
  - glob: '**/*.go'
    purpose: Find Go files
  interview_questions:
  - role: Developer
    questions:
    - Are comments helpful for understanding code?
    - Have you found outdated comments?
    - What areas lack needed comments?
    - Are there too many obvious comments?
knowledge_sources:
  guides:
  - id: code-comments
    name: Art of Code Comments
    url: https://www.freecodecamp.org/news/code-comments-the-good-the-bad-and-the-ugly-be9cc65fbf83/
  - id: jsdoc
    name: JSDoc Documentation
    url: https://jsdoc.app/
  standards:
  - id: documentation-standards
    name: Code Documentation Standards
    relevance: Comment conventions
tooling:
  analysis_tools:
  - tool: jsdoc
    purpose: Check JSDoc coverage
    command: npx jsdoc -c jsdoc.json --explain
  - tool: pydocstyle
    purpose: Python docstring checker
    command: pydocstyle
  - tool: todo-tree
    purpose: Find TODO comments
  - tool: eslint-plugin-jsdoc
    purpose: JSDoc linting
signals:
  critical:
  - id: COMMENTS-CRIT-001
    signal: Complex logic has no explanatory comments
    evidence_indicators:
    - Difficult algorithms undocumented
    - Business rules unexplained
    - Workarounds without context
    explanation: |
      Uncommented complex code becomes unmaintainable as
      original context is lost.
    remediation: |
      Add comments explaining why complex code exists
      and what problem it solves.
  - id: COMMENTS-CRIT-002
    signal: Comments contradict the code
    evidence_indicators:
    - Comment says one thing, code does another
    - Outdated comments after refactoring
    explanation: |
      Incorrect comments are worse than no comments,
      actively misleading maintainers.
    remediation: |
      Review and update stale comments. Remove comments
      that duplicate obvious code.
  high:
  - id: COMMENTS-HIGH-001
    signal: Public APIs lack documentation
    remediation: |
      Add JSDoc/docstrings to all public functions,
      classes, and modules.
  - id: COMMENTS-HIGH-002
    signal: TODOs/FIXMEs accumulated without tracking
    remediation: |
      Review and either resolve or track TODOs in
      issue system.
  - id: COMMENTS-HIGH-003
    signal: Magic numbers/strings unexplained
    remediation: |
      Extract to named constants with explanatory
      comments or self-documenting names.
  medium:
  - id: COMMENTS-MED-001
    signal: Comment style inconsistent
    remediation: |
      Establish and enforce comment conventions
      through linting.
  - id: COMMENTS-MED-002
    signal: Comments state the obvious
    remediation: |
      Remove redundant comments that just restate
      the code. Focus on 'why' not 'what'.
  - id: COMMENTS-MED-003
    signal: No examples in function documentation
    remediation: |
      Add @example tags to JSDoc for complex functions.
  low:
  - id: COMMENTS-LOW-001
    signal: No automated comment checking
    remediation: |
      Add JSDoc/docstring linting to CI.
  - id: COMMENTS-LOW-002
    signal: Comment formatting inconsistent
    remediation: |
      Use documentation formatter or style guide.
  positive:
  - id: COMMENTS-POS-001
    signal: Complex logic clearly explained
  - id: COMMENTS-POS-002
    signal: Public APIs fully documented
  - id: COMMENTS-POS-003
    signal: Comments focused on 'why'
  - id: COMMENTS-POS-004
    signal: TODOs tracked in issue system
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Analyze Comment Coverage
    description: Measure documentation coverage
    duration_estimate: 30 min
  - id: '2'
    name: Review Comment Quality
    description: Sample and evaluate comment usefulness
    duration_estimate: 45 min
  - id: '3'
    name: Find Stale Comments
    description: Identify potentially outdated comments
    duration_estimate: 30 min
  - id: '4'
    name: Inventory TODOs
    description: Find and assess TODO/FIXME comments
    duration_estimate: 30 min
  - id: '5'
    name: Gather Developer Feedback
    description: Interview developers about comment usefulness
    duration_estimate: 30 min
output:
  deliverables:
  - type: comment_assessment
    format: structured
    sections:
    - Coverage analysis
    - Quality evaluation
    - Stale comment inventory
    - TODO analysis
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Comment Quality Analysis
    - Recommendations
closeout_checklist:
- id: comments-001
  item: Comment coverage analyzed
  level: ERROR
  verification: manual
- id: comments-002
  item: Comment quality evaluated
  level: WARNING
  verification: manual
- id: comments-003
  item: Developer feedback collected
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - all-software-projects
  compliance_mappings:
  - framework: ISO 27001
    control: A.12.1.1
    description: Documented operating procedures
relationships:
  commonly_combined:
  - developer-experience.code-navigation.code-documentation-display
  - code-quality.maintainability
  depends_on: []
  feeds_into:
  - developer-experience.documentation-quality.api-documentation
