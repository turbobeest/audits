audit:
  id: developer-experience.local-development.dev-server-performance
  name: Dev Server Performance Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: developer-experience
  category_number: 35
  subcategory: local-development
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: development
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the performance of local development servers including startup
    time, memory usage, CPU utilization, and stability. Assesses whether the
    development server provides a responsive experience without consuming
    excessive system resources.
  why_it_matters: |
    Slow or resource-hungry dev servers degrade productivity and can make
    development on standard hardware frustrating. Long startup times add up
    over multiple daily restarts. Excessive resource usage can cause system
    instability or prevent running multiple services simultaneously.
  when_to_run:
  - When developers report performance issues
  - After upgrading development tools
  - When adding new services to local stack
  - Quarterly performance baseline
prerequisites:
  required_artifacts:
  - type: development_environment
    description: Running local development environment
  - type: monitoring_tools
    description: System resource monitoring
  access_requirements:
  - Local development environment
  - System monitoring access
  - Development server logs
discovery:
  file_patterns:
  - glob: '**/package.json'
    purpose: Find dev server scripts
  - glob: '**/docker-compose*.yml'
    purpose: Find Docker-based dev servers
  - glob: '**/Procfile*'
    purpose: Find process definitions
  - glob: '**/Makefile'
    purpose: Find make-based dev commands
  interview_questions:
  - role: Developer
    questions:
    - How long does your dev server take to start?
    - Do you experience slowdowns during development?
    - Does the dev server crash or require restarts?
    - Can you run all necessary services on your machine?
knowledge_sources:
  guides:
  - id: vite-performance
    name: Vite Performance Guide
    url: https://vite.dev/guide/performance.html
  - id: webpack-optimization
    name: Webpack Performance Optimization
    url: https://webpack.js.org/guides/build-performance/
  standards:
  - id: performance-budgets
    name: Performance Budgets
    relevance: Setting dev server performance targets
tooling:
  analysis_tools:
  - tool: time
    purpose: Measure startup time
    command: time npm run dev
  - tool: htop
    purpose: Monitor system resources
    command: htop
  - tool: docker-stats
    purpose: Monitor container resources
    command: docker stats
  - tool: clinic
    purpose: Node.js performance profiling
    command: clinic doctor -- node server.js
signals:
  critical:
  - id: SERVER-CRIT-001
    signal: Dev server takes more than 2 minutes to start
    evidence_indicators:
    - Large bundle compilation
    - Sequential service startup
    - Heavy initialization
    explanation: |
      Long startup times significantly disrupt development flow,
      especially when frequent restarts are needed.
    remediation: |
      Profile startup to identify slow components. Consider
      lazy loading, parallel startup, or faster bundlers.
  - id: SERVER-CRIT-002
    signal: Dev server crashes frequently
    evidence_indicators:
    - Memory exhaustion
    - Unhandled exceptions
    - Resource leaks
    explanation: |
      Unstable dev servers force repeated restarts and context
      loss, severely impacting productivity.
    remediation: |
      Diagnose crash causes, implement proper error handling,
      and configure adequate resource limits.
  high:
  - id: SERVER-HIGH-001
    signal: Dev server consumes more than 8GB RAM
    remediation: |
      Profile memory usage to identify leaks or inefficiencies.
      Consider splitting services or optimizing build process.
  - id: SERVER-HIGH-002
    signal: Dev server startup takes 30-120 seconds
    remediation: |
      Identify and optimize slow startup phases. Consider
      dev server caching or pre-compilation.
  - id: SERVER-HIGH-003
    signal: Cannot run full local stack on standard hardware
    remediation: |
      Create lightweight development profiles or document
      minimum hardware requirements.
  medium:
  - id: SERVER-MED-001
    signal: Dev server startup takes 15-30 seconds
    remediation: |
      Look for quick wins in startup optimization. Consider
      parallel initialization.
  - id: SERVER-MED-002
    signal: High CPU usage during idle
    remediation: |
      Investigate file watchers and polling. Optimize or
      exclude unnecessary directories from watching.
  - id: SERVER-MED-003
    signal: Memory usage grows over time
    remediation: |
      Profile for memory leaks, especially in HMR or
      file watching components.
  low:
  - id: SERVER-LOW-001
    signal: Dev server performance not documented
    remediation: |
      Document expected startup times and resource usage.
  - id: SERVER-LOW-002
    signal: No performance regression tracking
    remediation: |
      Track dev server performance metrics over time.
  positive:
  - id: SERVER-POS-001
    signal: Dev server starts in under 10 seconds
  - id: SERVER-POS-002
    signal: Stable operation without crashes
  - id: SERVER-POS-003
    signal: Reasonable resource usage under 4GB RAM
  - id: SERVER-POS-004
    signal: Lightweight development profiles available
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Measure Startup Time
    description: Time dev server startup from cold start
    duration_estimate: 30 min
  - id: '2'
    name: Monitor Resource Usage
    description: Track memory and CPU during typical development
    duration_estimate: 30 min
  - id: '3'
    name: Test Stability
    description: Run extended session to check for crashes or leaks
    duration_estimate: 30 min
  - id: '4'
    name: Profile Hot Paths
    description: Identify performance bottlenecks
    duration_estimate: 30 min
  - id: '5'
    name: Gather Developer Feedback
    description: Interview developers about performance experience
    duration_estimate: 30 min
output:
  deliverables:
  - type: performance_report
    format: structured
    sections:
    - Startup time measurements
    - Resource usage profiles
    - Stability assessment
    - Bottleneck analysis
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Performance Analysis
    - Recommendations
closeout_checklist:
- id: server-001
  item: Startup time measured
  level: ERROR
  verification: manual
- id: server-002
  item: Resource usage profiled
  level: WARNING
  verification: manual
- id: server-003
  item: Stability assessed
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - all-software-projects
  compliance_mappings:
  - framework: ISO 27001
    control: A.12.1
    description: Operational procedures
relationships:
  commonly_combined:
  - developer-experience.local-development.hot-reload-performance
  - developer-experience.build-tooling.build-time-analysis
  depends_on:
  - devops-ci-cd.build-configuration
  feeds_into:
  - developer-experience.productivity-metrics.developer-velocity
