audit:
  id: developer-experience.local-development.hot-reload-performance
  name: Hot Reload Performance Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: developer-experience
  category_number: 35
  subcategory: local-development
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: development
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the performance and reliability of hot reload, hot module
    replacement (HMR), and live reload functionality in the development
    environment. Measures time from file save to updated application state,
    state preservation quality, and failure modes.
  why_it_matters: |
    Fast feedback loops are essential for developer productivity. When hot
    reload is slow or unreliable, developers lose context waiting for changes
    or resort to full refreshes that lose application state. Studies show
    that even 1-second delays significantly impact developer flow state.
  when_to_run:
  - When developers report slow feedback
  - After upgrading build tools
  - When adding new file types to the build
  - Quarterly performance baseline
prerequisites:
  required_artifacts:
  - type: development_environment
    description: Running local development environment
  - type: build_configuration
    description: Build tool configuration files
  access_requirements:
  - Local development environment
  - Build configuration access
  - Performance monitoring tools
discovery:
  file_patterns:
  - glob: '**/webpack.config.js'
    purpose: Find webpack configuration
  - glob: '**/vite.config.{js,ts}'
    purpose: Find Vite configuration
  - glob: '**/next.config.{js,mjs}'
    purpose: Find Next.js configuration
  - glob: '**/turbo.json'
    purpose: Find Turborepo configuration
  - glob: '**/metro.config.js'
    purpose: Find Metro bundler config
  - glob: '**/rspack.config.js'
    purpose: Find Rspack configuration
  interview_questions:
  - role: Developer
    questions:
    - How fast is hot reload in your typical workflow?
    - Does hot reload preserve application state?
    - How often does hot reload fail requiring full refresh?
    - What file types have the slowest reload times?
knowledge_sources:
  guides:
  - id: webpack-hmr
    name: Webpack Hot Module Replacement
    url: https://webpack.js.org/concepts/hot-module-replacement/
  - id: vite-hmr
    name: Vite HMR Documentation
    url: https://vite.dev/guide/features.html#hot-module-replacement
  standards:
  - id: fast-refresh
    name: React Fast Refresh
    relevance: React-specific hot reloading
tooling:
  analysis_tools:
  - tool: webpack-bundle-analyzer
    purpose: Analyze bundle for HMR blockers
    command: npx webpack-bundle-analyzer stats.json
  - tool: vite
    purpose: Modern fast HMR dev server
    command: vite --debug hmr
  - tool: browser-devtools
    purpose: Monitor network and console for HMR
  - tool: performance-api
    purpose: Measure reload times programmatically
signals:
  critical:
  - id: RELOAD-CRIT-001
    signal: Hot reload takes more than 5 seconds
    evidence_indicators:
    - Large bundle rebuilds on each change
    - No incremental compilation
    - Excessive dependency traversal
    explanation: |
      5+ second reload times severely disrupt developer flow and
      encourage context switching during builds.
    remediation: |
      Profile build process, implement incremental builds, and
      consider faster bundlers like Vite, Turbopack, or Rspack.
  - id: RELOAD-CRIT-002
    signal: Hot reload completely non-functional
    evidence_indicators:
    - Changes require full page refresh
    - HMR errors in console
    - WebSocket connection failures
    explanation: |
      Non-functional hot reload forces manual refreshes that lose
      application state and slow iteration speed dramatically.
    remediation: |
      Debug HMR configuration, ensure proper module.hot API usage,
      and verify WebSocket connectivity.
  high:
  - id: RELOAD-HIGH-001
    signal: Hot reload takes 2-5 seconds
    remediation: |
      Profile build process to identify slow steps. Consider
      code splitting and lazy loading to reduce rebuild scope.
  - id: RELOAD-HIGH-002
    signal: State not preserved during hot reload
    remediation: |
      Implement proper HMR boundaries and state preservation.
      For React, ensure React Fast Refresh is configured.
  - id: RELOAD-HIGH-003
    signal: Hot reload frequently requires full refresh
    remediation: |
      Identify and fix components that break HMR boundary.
      Add error recovery to HMR configuration.
  medium:
  - id: RELOAD-MED-001
    signal: Hot reload inconsistent across file types
    remediation: |
      Ensure all file types (CSS, JS, assets) have proper
      HMR handlers configured.
  - id: RELOAD-MED-002
    signal: HMR configuration not optimized
    remediation: |
      Review and optimize HMR configuration for the specific
      framework and build tool in use.
  - id: RELOAD-MED-003
    signal: No hot reload for styles
    remediation: |
      Configure CSS HMR through appropriate loader or plugin.
  low:
  - id: RELOAD-LOW-001
    signal: Hot reload metrics not tracked
    remediation: |
      Add instrumentation to track HMR performance over time.
  - id: RELOAD-LOW-002
    signal: No visual feedback during hot reload
    remediation: |
      Add progress indicators for longer reloads.
  positive:
  - id: RELOAD-POS-001
    signal: Hot reload completes in under 500ms
  - id: RELOAD-POS-002
    signal: State fully preserved during component updates
  - id: RELOAD-POS-003
    signal: Using modern fast bundler (Vite, Turbopack)
  - id: RELOAD-POS-004
    signal: HMR works reliably across all file types
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Identify Build Tool
    description: Determine the bundler and HMR technology in use
    duration_estimate: 15 min
  - id: '2'
    name: Measure Baseline Times
    description: Time hot reload for various file type changes
    duration_estimate: 30 min
  - id: '3'
    name: Test State Preservation
    description: Verify state is maintained during hot reload
    duration_estimate: 30 min
  - id: '4'
    name: Identify Failure Modes
    description: Document when hot reload fails
    duration_estimate: 30 min
  - id: '5'
    name: Review Configuration
    description: Audit HMR configuration for optimization opportunities
    duration_estimate: 30 min
output:
  deliverables:
  - type: performance_report
    format: structured
    sections:
    - Reload time measurements
    - State preservation results
    - Failure modes documented
    - Configuration analysis
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Performance Analysis
    - Reliability Assessment
    - Recommendations
closeout_checklist:
- id: reload-001
  item: Hot reload times measured
  level: ERROR
  verification: manual
- id: reload-002
  item: State preservation tested
  level: WARNING
  verification: manual
- id: reload-003
  item: Configuration reviewed
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - web-applications
    - frontend-projects
  compliance_mappings:
  - framework: ISO 27001
    control: A.12.1
    description: Operational procedures
relationships:
  commonly_combined:
  - developer-experience.build-tooling.build-time-analysis
  - developer-experience.local-development.dev-server-performance
  depends_on:
  - devops-ci-cd.build-configuration
  feeds_into:
  - developer-experience.productivity-metrics.developer-velocity
