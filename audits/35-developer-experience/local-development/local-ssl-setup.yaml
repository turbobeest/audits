audit:
  id: developer-experience.local-development.local-ssl-setup
  name: Local SSL Setup Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: developer-experience
  category_number: 35
  subcategory: local-development
  tier: expert
  estimated_duration: 1-2 hours  # median: 1h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: development
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the local HTTPS/SSL certificate setup for development,
    including certificate generation, trust configuration, and tooling
    support. Assesses whether developers can easily run local services
    over HTTPS without browser warnings or manual intervention.
  why_it_matters: |
    Many web features require secure contexts (HTTPS), including service
    workers, geolocation, and modern authentication flows. Without proper
    local SSL, developers cannot test these features or must deal with
    constant browser warnings. Production parity also requires HTTPS locally.
  when_to_run:
  - When setting up new projects
  - When developers report certificate issues
  - When adding features requiring secure contexts
  - After OS or browser updates
prerequisites:
  required_artifacts:
  - type: development_environment
    description: Local development environment
  - type: certificate_config
    description: Certificate generation configuration
  access_requirements:
  - Local development environment
  - System certificate store access
  - Browser configuration access
discovery:
  file_patterns:
  - glob: '**/certs/**'
    purpose: Find certificate directories
  - glob: '**/*.pem'
    purpose: Find PEM certificates
  - glob: '**/*.crt'
    purpose: Find certificate files
  - glob: '**/mkcert*'
    purpose: Find mkcert configuration
  - glob: '**/.ssl/**'
    purpose: Find SSL directories
  interview_questions:
  - role: Developer
    questions:
    - Can you run local development over HTTPS?
    - Do you see certificate warnings in your browser?
    - How did you set up local SSL certificates?
    - Have you had issues with features requiring secure contexts?
knowledge_sources:
  guides:
  - id: mkcert
    name: mkcert Documentation
    url: https://github.com/FiloSottile/mkcert
  - id: local-https
    name: How to use HTTPS for local development
    url: https://web.dev/articles/how-to-use-local-https
  standards:
  - id: secure-contexts
    name: Secure Contexts Specification
    relevance: Features requiring HTTPS
tooling:
  analysis_tools:
  - tool: mkcert
    purpose: Generate locally-trusted certificates
    command: mkcert -install && mkcert localhost
  - tool: openssl
    purpose: Certificate inspection
    command: openssl x509 -in cert.pem -text -noout
  - tool: security
    purpose: macOS keychain management
    command: security find-certificate -a -p /System/Library/Keychains/SystemRootCertificates.keychain
signals:
  critical:
  - id: SSL-CRIT-001
    signal: No local HTTPS capability
    evidence_indicators:
    - All local development over HTTP
    - Cannot test secure-context features
    - No certificate generation process
    explanation: |
      Without HTTPS, developers cannot test features requiring
      secure contexts and environment parity is broken.
    remediation: |
      Implement local SSL using mkcert or similar tooling.
      Document setup process in onboarding.
  - id: SSL-CRIT-002
    signal: Certificate setup prevents development
    evidence_indicators:
    - Browser blocks all HTTPS requests
    - Certificate errors crash applications
    - Complex manual setup required
    explanation: |
      SSL setup that blocks development defeats its purpose
      and causes developers to disable security features.
    remediation: |
      Simplify certificate setup with automated tooling
      and clear documentation.
  high:
  - id: SSL-HIGH-001
    signal: Persistent browser certificate warnings
    remediation: |
      Use mkcert to create properly trusted local certificates
      installed in system trust store.
  - id: SSL-HIGH-002
    signal: Certificate setup not automated
    remediation: |
      Add certificate generation to setup scripts with
      automatic trust store installation.
  medium:
  - id: SSL-MED-001
    signal: Self-signed certificates without trust
    remediation: |
      Replace self-signed certificates with mkcert-generated
      certificates that are properly trusted.
  - id: SSL-MED-002
    signal: Certificate setup not documented
    remediation: |
      Document SSL setup process including troubleshooting
      for common issues.
  - id: SSL-MED-003
    signal: Certificates expire and break development
    remediation: |
      Generate certificates with longer validity or
      automate renewal process.
  low:
  - id: SSL-LOW-001
    signal: Different SSL setup per developer
    remediation: |
      Standardize SSL configuration as part of setup automation.
  - id: SSL-LOW-002
    signal: No SSL for all local services
    remediation: |
      Extend SSL configuration to cover all local services
      for consistency.
  positive:
  - id: SSL-POS-001
    signal: One-command SSL setup with mkcert
  - id: SSL-POS-002
    signal: Certificates trusted system-wide without warnings
  - id: SSL-POS-003
    signal: SSL setup included in automated onboarding
  - id: SSL-POS-004
    signal: All local services accessible over HTTPS
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Assess Current SSL State
    description: Check if HTTPS is available locally
    duration_estimate: 15 min
  - id: '2'
    name: Review Certificate Setup
    description: Evaluate certificate generation and trust process
    duration_estimate: 30 min
  - id: '3'
    name: Test Browser Experience
    description: Verify no certificate warnings in browsers
    duration_estimate: 15 min
  - id: '4'
    name: Check Secure Context Features
    description: Verify secure context features work locally
    duration_estimate: 15 min
  - id: '5'
    name: Review Documentation
    description: Assess SSL setup documentation quality
    duration_estimate: 15 min
output:
  deliverables:
  - type: ssl_assessment
    format: structured
    sections:
    - Current SSL capability
    - Certificate setup process
    - Browser compatibility
    - Documentation quality
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Current State
    - Recommendations
closeout_checklist:
- id: ssl-001
  item: Local HTTPS capability assessed
  level: ERROR
  verification: manual
- id: ssl-002
  item: Certificate setup reviewed
  level: WARNING
  verification: manual
- id: ssl-003
  item: Browser experience tested
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - web-applications
    - api-services
  compliance_mappings:
  - framework: ISO 27001
    control: A.14.1.2
    description: Securing application services on public networks
relationships:
  commonly_combined:
  - developer-experience.local-development.dev-environment-parity
  - developer-experience.onboarding.setup-automation
  depends_on:
  - security-assessment.tls-configuration
  feeds_into:
  - developer-experience.onboarding.onboarding-checklist
