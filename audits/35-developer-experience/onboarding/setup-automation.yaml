audit:
  id: developer-experience.onboarding.setup-automation
  name: Setup Automation Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: developer-experience
  category_number: 35
  subcategory: onboarding
  tier: expert
  estimated_duration: 3-4 hours  # median: 3h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  requires_interviews: true
  severity: medium
  scope: development
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the automation level of development environment setup processes,
    including scripts, devcontainers, infrastructure-as-code, and dependency
    management. Assesses whether a new developer can go from zero to a working
    environment with minimal manual intervention.
  why_it_matters: |
    Manual environment setup is error-prone, time-consuming, and creates
    knowledge silos. Automated setup ensures consistency across developer
    machines, reduces onboarding time from days to hours, and eliminates
    "works on my machine" issues. It also enables rapid recovery from
    environment corruption.
  when_to_run:
  - Before major hiring initiatives
  - After infrastructure changes
  - Quarterly as maintenance check
  - When developers report environment issues
prerequisites:
  required_artifacts:
  - type: repository
    description: Source code repository
  - type: setup_scripts
    description: Existing setup automation
  - type: clean_machine
    description: Test environment for validation
  access_requirements:
  - Repository read access
  - Test machine or VM for validation
  - Package manager credentials if private
discovery:
  file_patterns:
  - glob: '**/Makefile'
    purpose: Find Make-based setup
  - glob: '**/.devcontainer/**'
    purpose: Find VS Code devcontainer configs
  - glob: '**/docker-compose*.yml'
    purpose: Find Docker Compose setup
  - glob: '**/Dockerfile*'
    purpose: Find Docker configurations
  - glob: '**/setup.sh'
    purpose: Find shell setup scripts
  - glob: '**/bootstrap.sh'
    purpose: Find bootstrap scripts
  - glob: '**/Vagrantfile'
    purpose: Find Vagrant configurations
  - glob: '**/.tool-versions'
    purpose: Find asdf version management
  - glob: '**/.nvmrc'
    purpose: Find Node version specification
  - glob: '**/.python-version'
    purpose: Find Python version specification
  - glob: '**/flake.nix'
    purpose: Find Nix flake configurations
  - glob: '**/shell.nix'
    purpose: Find Nix shell configurations
  interview_questions:
  - role: Developer
    questions:
    - How long does environment setup take?
    - What manual steps are required after running setup scripts?
    - Have you had to troubleshoot environment issues?
    - What tools or dependencies caused the most friction?
knowledge_sources:
  guides:
  - id: devcontainers-spec
    name: Development Containers Specification
    url: https://containers.dev/
  - id: twelve-factor
    name: Twelve-Factor App - Dev/Prod Parity
    url: https://12factor.net/dev-prod-parity
  standards:
  - id: oci-spec
    name: OCI Container Specification
    relevance: Container-based development environments
tooling:
  analysis_tools:
  - tool: docker
    purpose: Build and test containerized environments
    command: docker build -t dev-env .
  - tool: devcontainer
    purpose: Test devcontainer configurations
    command: devcontainer build --workspace-folder .
  - tool: vagrant
    purpose: Test Vagrant-based environments
    command: vagrant up && vagrant provision
  - tool: nix
    purpose: Test Nix-based environments
    command: nix develop
  - tool: asdf
    purpose: Version management validation
    command: asdf install
signals:
  critical:
  - id: SETUP-CRIT-001
    signal: No automated setup process exists
    evidence_indicators:
    - Setup relies on tribal knowledge
    - README has pages of manual steps
    - Different developers have different setups
    explanation: |
      Without automation, every developer experiences unique setup
      friction, leading to wasted time and environment drift.
    remediation: |
      Create a single-command setup script or devcontainer that
      handles all dependencies and configuration.
  - id: SETUP-CRIT-002
    signal: Setup scripts fail on clean machine
    evidence_indicators:
    - Assumes pre-installed dependencies
    - Hardcoded paths or credentials
    - Missing error handling
    explanation: |
      Setup automation that doesn't work defeats its purpose and
      creates false confidence in the onboarding process.
    remediation: |
      Test setup scripts on clean machines regularly and fix
      assumptions about pre-existing state.
  high:
  - id: SETUP-HIGH-001
    signal: Setup requires more than 5 manual steps
    remediation: |
      Consolidate manual steps into automated scripts. Each manual
      step should be explicitly justified.
  - id: SETUP-HIGH-002
    signal: Environment setup takes more than 2 hours
    remediation: |
      Profile setup process to identify slow steps. Consider
      pre-built images or caching strategies.
  - id: SETUP-HIGH-003
    signal: Setup documentation out of sync with scripts
    remediation: |
      Generate documentation from scripts or implement CI checks
      that validate documentation accuracy.
  medium:
  - id: SETUP-MED-001
    signal: No devcontainer or equivalent containerization
    remediation: |
      Consider adopting devcontainers for IDE integration and
      consistent environments across team.
  - id: SETUP-MED-002
    signal: Setup lacks idempotency - fails on re-run
    remediation: |
      Make setup scripts idempotent so they can be run multiple
      times without side effects.
  - id: SETUP-MED-003
    signal: No validation that setup completed successfully
    remediation: |
      Add health checks or smoke tests that verify the
      environment is correctly configured.
  low:
  - id: SETUP-LOW-001
    signal: Setup lacks progress indicators
    remediation: |
      Add logging and progress output so developers know what's
      happening during long setup processes.
  - id: SETUP-LOW-002
    signal: No troubleshooting guide for common issues
    remediation: |
      Document common setup failures and their resolutions.
  positive:
  - id: SETUP-POS-001
    signal: Single command gets developer to working state
  - id: SETUP-POS-002
    signal: Devcontainer with full IDE integration
  - id: SETUP-POS-003
    signal: Setup tested in CI on every change
  - id: SETUP-POS-004
    signal: Environment parity between local and CI/production
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Setup Artifacts
    description: Locate all setup scripts, configs, and documentation
    duration_estimate: 30 min
  - id: '2'
    name: Review Setup Documentation
    description: Read through documented setup process
    duration_estimate: 30 min
  - id: '3'
    name: Test on Clean Environment
    description: Execute setup on a clean machine or container
    duration_estimate: 1-2 hours
  - id: '4'
    name: Document Failures
    description: Record any manual interventions required
    duration_estimate: 30 min
  - id: '5'
    name: Measure Total Time
    description: Track wall-clock time from start to working environment
    duration_estimate: 15 min
output:
  deliverables:
  - type: setup_assessment
    format: structured
    sections:
    - Automation coverage
    - Manual steps required
    - Time to working environment
    - Failure points
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Current State Assessment
    - Gap Analysis
    - Recommendations
closeout_checklist:
- id: setup-001
  item: Setup tested on clean environment
  level: ERROR
  verification: manual
- id: setup-002
  item: All manual steps documented
  level: WARNING
  verification: manual
- id: setup-003
  item: Time to working environment measured
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - all-software-projects
  compliance_mappings:
  - framework: ISO 27001
    control: A.12.1.2
    description: Change management
relationships:
  commonly_combined:
  - developer-experience.onboarding.first-pr-time
  - developer-experience.local-development.dev-environment-parity
  depends_on:
  - devops-ci-cd.containerization
  feeds_into:
  - developer-experience.onboarding.onboarding-docs-quality
