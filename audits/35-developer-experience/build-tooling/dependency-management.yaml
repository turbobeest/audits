audit:
  id: developer-experience.build-tooling.dependency-management
  name: Dependency Management Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: developer-experience
  category_number: 35
  subcategory: build-tooling
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: development
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the developer experience of managing project dependencies
    including installation speed, version resolution, lockfile management,
    update workflows, and conflict resolution. Assesses whether dependency
    operations are fast, predictable, and well-documented.
  why_it_matters: |
    Poor dependency management creates daily friction for developers.
    Slow installs, confusing conflicts, or inconsistent versions waste
    time and cause hard-to-debug issues. Good dependency management
    enables predictable builds and smooth collaboration.
  when_to_run:
  - When dependency issues frequently occur
  - When upgrading package managers
  - When adding major dependencies
  - Quarterly DX review
prerequisites:
  required_artifacts:
  - type: package_manifests
    description: Package.json, requirements.txt, etc.
  - type: lockfiles
    description: Lock files for dependencies
  access_requirements:
  - Package manager access
  - Registry access
  - Build system access
discovery:
  file_patterns:
  - glob: '**/package.json'
    purpose: Find npm/yarn packages
  - glob: '**/package-lock.json'
    purpose: Find npm lockfile
  - glob: '**/yarn.lock'
    purpose: Find Yarn lockfile
  - glob: '**/pnpm-lock.yaml'
    purpose: Find pnpm lockfile
  - glob: '**/requirements.txt'
    purpose: Find Python requirements
  - glob: '**/Pipfile.lock'
    purpose: Find Pipenv lockfile
  - glob: '**/go.mod'
    purpose: Find Go modules
  - glob: '**/Cargo.lock'
    purpose: Find Rust lockfile
  interview_questions:
  - role: Developer
    questions:
    - How long does dependency installation take?
    - Do you experience dependency conflicts?
    - How do you update dependencies?
    - Have you had 'works on my machine' dependency issues?
knowledge_sources:
  guides:
  - id: npm-docs
    name: npm Documentation
    url: https://docs.npmjs.com/
  - id: pnpm-docs
    name: pnpm Documentation
    url: https://pnpm.io/
  standards:
  - id: semver
    name: Semantic Versioning
    relevance: Version specification
tooling:
  analysis_tools:
  - tool: npm
    purpose: npm package management
    command: npm ls --depth=0
  - tool: pnpm
    purpose: Fast npm alternative
    command: pnpm install --reporter=default
  - tool: yarn
    purpose: Yarn package management
    command: yarn install --verbose
  - tool: depcheck
    purpose: Find unused dependencies
    command: npx depcheck
  - tool: npm-check-updates
    purpose: Find outdated dependencies
    command: npx npm-check-updates
signals:
  critical:
  - id: DEP-CRIT-001
    signal: No lockfile committed
    evidence_indicators:
    - Lockfile in gitignore
    - Different versions across machines
    - Non-deterministic installs
    explanation: |
      Without lockfiles, every install can resolve to different
      versions, causing inconsistent behavior across environments.
    remediation: |
      Commit lockfiles and ensure all developers use them.
      Configure CI to fail on lockfile drift.
  - id: DEP-CRIT-002
    signal: Dependency installation takes more than 5 minutes
    evidence_indicators:
    - Large number of dependencies
    - No package caching
    - Slow network or registry
    explanation: |
      Long install times slow down CI, onboarding, and
      any environment recreation.
    remediation: |
      Consider pnpm for faster installs, implement caching,
      and audit dependency count.
  high:
  - id: DEP-HIGH-001
    signal: Frequent dependency conflicts
    remediation: |
      Audit dependency tree for conflicts. Use resolution
      overrides or update conflicting packages.
  - id: DEP-HIGH-002
    signal: Dependencies significantly outdated
    remediation: |
      Implement regular dependency update process.
      Consider Dependabot or Renovate for automation.
  - id: DEP-HIGH-003
    signal: Multiple package managers in use inconsistently
    remediation: |
      Standardize on one package manager and document
      the decision.
  medium:
  - id: DEP-MED-001
    signal: No automated dependency updates
    remediation: |
      Configure Dependabot, Renovate, or similar for
      automated update PRs.
  - id: DEP-MED-002
    signal: Large number of direct dependencies
    remediation: |
      Audit dependencies for unused or replaceable packages.
      Consider consolidation.
  - id: DEP-MED-003
    signal: CI doesn't validate lockfile consistency
    remediation: |
      Add CI check that fails if lockfile would change.
  low:
  - id: DEP-LOW-001
    signal: Dependency management not documented
    remediation: |
      Document how to add, update, and manage dependencies.
  - id: DEP-LOW-002
    signal: No dependency caching in CI
    remediation: |
      Configure CI to cache dependencies between runs.
  positive:
  - id: DEP-POS-001
    signal: Lockfile committed and enforced
  - id: DEP-POS-002
    signal: Fast installs with pnpm or similar
  - id: DEP-POS-003
    signal: Automated dependency updates configured
  - id: DEP-POS-004
    signal: Minimal, well-maintained dependency set
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Review Package Manager Setup
    description: Examine package manager configuration
    duration_estimate: 30 min
  - id: '2'
    name: Measure Install Time
    description: Time clean and cached dependency installation
    duration_estimate: 30 min
  - id: '3'
    name: Check Lockfile Health
    description: Verify lockfile presence and consistency
    duration_estimate: 30 min
  - id: '4'
    name: Audit Dependencies
    description: Review dependency count and health
    duration_estimate: 30 min
  - id: '5'
    name: Gather Developer Feedback
    description: Interview developers about dependency experience
    duration_estimate: 30 min
output:
  deliverables:
  - type: dependency_assessment
    format: structured
    sections:
    - Package manager review
    - Install time measurements
    - Lockfile health
    - Dependency audit
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Current State
    - Risk Assessment
    - Recommendations
closeout_checklist:
- id: dep-001
  item: Package manager configuration reviewed
  level: ERROR
  verification: manual
- id: dep-002
  item: Install times measured
  level: WARNING
  verification: manual
- id: dep-003
  item: Lockfile health verified
  level: ERROR
  verification: manual
governance:
  applicable_to:
    archetypes:
    - all-software-projects
  compliance_mappings:
  - framework: ISO 27001
    control: A.14.2.1
    description: Secure development policy
relationships:
  commonly_combined:
  - developer-experience.build-tooling.build-time-analysis
  - security-assessment.dependency-scanning
  depends_on:
  - devops-ci-cd.build-configuration
  feeds_into:
  - security-assessment.supply-chain-security
