audit:
  id: developer-experience.build-tooling.incremental-build-support
  name: Incremental Build Support Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: developer-experience
  category_number: 35
  subcategory: build-tooling
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: development
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the build system's ability to perform incremental builds,
    recompiling only what changed rather than rebuilding everything.
    Assesses dependency tracking accuracy, rebuild triggers, and the
    effectiveness of incremental compilation across different file types.
  why_it_matters: |
    Incremental builds are essential for fast iteration. Without them,
    developers wait for full rebuilds after every change, even trivial
    ones. Effective incremental builds can reduce iteration time from
    minutes to seconds, dramatically improving development velocity.
  when_to_run:
  - When developers report rebuild times
  - After build tool configuration changes
  - When adding new file types to build
  - Quarterly performance check
prerequisites:
  required_artifacts:
  - type: build_configuration
    description: Build tool configuration
  - type: development_environment
    description: Running development setup
  access_requirements:
  - Build system access
  - Source code access
  - Build tool documentation
discovery:
  file_patterns:
  - glob: '**/tsconfig.json'
    purpose: Check TypeScript incremental settings
  - glob: '**/webpack.config.js'
    purpose: Check webpack cache configuration
  - glob: '**/vite.config.{js,ts}'
    purpose: Check Vite configuration
  - glob: '**/.turbo/**'
    purpose: Find Turborepo cache
  - glob: '**/.gradle/**'
    purpose: Find Gradle cache
  interview_questions:
  - role: Developer
    questions:
    - How fast are rebuilds after small changes?
    - Do you notice unnecessary rebuilds?
    - Are certain file types slower to rebuild?
knowledge_sources:
  guides:
  - id: typescript-incremental
    name: TypeScript Incremental Compilation
    url: https://www.typescriptlang.org/tsconfig#incremental
  - id: webpack-cache
    name: Webpack Persistent Caching
    url: https://webpack.js.org/configuration/cache/
  standards:
  - id: build-system-design
    name: Build System Design Principles
    relevance: Incremental build architecture
tooling:
  analysis_tools:
  - tool: tsc
    purpose: TypeScript incremental compilation
    command: tsc --incremental --diagnostics
  - tool: webpack
    purpose: Webpack with cache
    command: webpack --env development
  - tool: turborepo
    purpose: Monorepo incremental builds
    command: turbo run build --dry-run
  - tool: bazel
    purpose: Hermetic incremental builds
    command: bazel build //... --explain=explain.log
signals:
  critical:
  - id: INCR-CRIT-001
    signal: No incremental build support
    evidence_indicators:
    - Full rebuild on every change
    - No build caching configured
    - Incremental flags disabled
    explanation: |
      Without incremental builds, every change triggers a full
      rebuild, wasting developer time proportionally to codebase size.
    remediation: |
      Enable incremental compilation in build configuration.
      For TypeScript, set incremental: true and configure tsBuildInfoFile.
  - id: INCR-CRIT-002
    signal: Incremental builds unreliable
    evidence_indicators:
    - Stale builds cause errors
    - Frequent 'clean and rebuild' needed
    - Incremental state corrupts
    explanation: |
      Unreliable incremental builds are worse than no incremental
      builds due to confusing errors and time debugging.
    remediation: |
      Investigate dependency tracking issues. Consider upgrading
      build tools or switching to more reliable alternatives.
  high:
  - id: INCR-HIGH-001
    signal: Incremental builds slower than expected
    remediation: |
      Profile incremental build to find unnecessary work.
      Review dependency graph for over-invalidation.
  - id: INCR-HIGH-002
    signal: Large portions rebuild unnecessarily
    remediation: |
      Review build boundaries and dependency declarations.
      Consider project references or workspace packages.
  medium:
  - id: INCR-MED-001
    signal: Some file types lack incremental support
    remediation: |
      Configure incremental processing for all file types
      or use appropriate loaders/plugins.
  - id: INCR-MED-002
    signal: Incremental cache not persistent across restarts
    remediation: |
      Configure persistent caching to preserve incremental
      state between dev server restarts.
  - id: INCR-MED-003
    signal: CI builds don't benefit from incremental
    remediation: |
      Configure CI cache to preserve incremental build state
      between pipeline runs.
  low:
  - id: INCR-LOW-001
    signal: Incremental build configuration not documented
    remediation: |
      Document incremental build setup and troubleshooting.
  - id: INCR-LOW-002
    signal: No metrics on incremental build effectiveness
    remediation: |
      Track rebuild times and cache hit rates.
  positive:
  - id: INCR-POS-001
    signal: Sub-second rebuilds for single file changes
  - id: INCR-POS-002
    signal: Accurate dependency tracking
  - id: INCR-POS-003
    signal: Persistent incremental cache configured
  - id: INCR-POS-004
    signal: CI benefits from incremental builds
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Review Build Configuration
    description: Check incremental build settings
    duration_estimate: 30 min
  - id: '2'
    name: Measure Incremental Build Time
    description: Time rebuilds after various changes
    duration_estimate: 45 min
  - id: '3'
    name: Test Dependency Tracking
    description: Verify correct files rebuild on changes
    duration_estimate: 30 min
  - id: '4'
    name: Check Cache Persistence
    description: Verify incremental state persists
    duration_estimate: 30 min
  - id: '5'
    name: Test Reliability
    description: Verify no stale build issues
    duration_estimate: 30 min
output:
  deliverables:
  - type: incremental_assessment
    format: structured
    sections:
    - Configuration review
    - Performance measurements
    - Dependency tracking accuracy
    - Reliability assessment
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Current State
    - Gap Analysis
    - Recommendations
closeout_checklist:
- id: incr-001
  item: Incremental configuration reviewed
  level: ERROR
  verification: manual
- id: incr-002
  item: Rebuild times measured
  level: WARNING
  verification: manual
- id: incr-003
  item: Reliability tested
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - all-software-projects
  compliance_mappings:
  - framework: ISO 27001
    control: A.12.1
    description: Operational procedures
relationships:
  commonly_combined:
  - developer-experience.build-tooling.build-time-analysis
  - developer-experience.build-tooling.cache-effectiveness
  depends_on:
  - devops-ci-cd.build-configuration
  feeds_into:
  - developer-experience.local-development.hot-reload-performance
