audit:
  id: developer-experience.code-navigation.refactoring-support
  name: Refactoring Support Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: developer-experience
  category_number: 35
  subcategory: code-navigation
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: development
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the automated refactoring capabilities available through IDEs
    and tooling including rename, extract method/variable, move file/symbol,
    and other code transformations. Assesses safety, coverage across file
    types, and cross-project refactoring support.
  why_it_matters: |
    Safe automated refactoring enables developers to improve code quality
    without fear of breaking things. Without it, refactoring becomes manual
    and risky, leading to either code rot or unintended breakages. Good
    refactoring support encourages continuous improvement.
  when_to_run:
  - Before major refactoring projects
  - When developers report refactoring difficulties
  - After IDE or tooling changes
  - Quarterly DX review
prerequisites:
  required_artifacts:
  - type: codebase
    description: Source code for refactoring testing
  - type: ide_configuration
    description: IDE refactoring settings
  access_requirements:
  - Repository access
  - IDE access
  - Test environment
discovery:
  file_patterns:
  - glob: '**/tsconfig.json'
    purpose: Find TypeScript for refactoring
  - glob: '**/.vscode/settings.json'
    purpose: Find VS Code refactoring settings
  - glob: '**/.idea/**'
    purpose: Find IntelliJ refactoring configs
  interview_questions:
  - role: Developer
    questions:
    - Do you trust IDE rename to update all references?
    - What refactorings do you do manually vs automated?
    - Have automated refactorings caused issues?
    - What refactoring features are missing?
knowledge_sources:
  guides:
  - id: vscode-refactoring
    name: VS Code Refactoring
    url: https://code.visualstudio.com/docs/editor/refactoring
  - id: intellij-refactoring
    name: IntelliJ Refactoring
    url: https://www.jetbrains.com/help/idea/refactoring-source-code.html
  standards:
  - id: refactoring-catalog
    name: Refactoring Catalog
    relevance: Standard refactoring patterns
tooling:
  analysis_tools:
  - tool: vscode
    purpose: IDE refactoring features
  - tool: typescript
    purpose: TypeScript refactoring support
  - tool: jscodeshift
    purpose: Programmatic code transformations
    command: npx jscodeshift --help
  - tool: ts-morph
    purpose: TypeScript AST manipulation
signals:
  critical:
  - id: REFACTOR-CRIT-001
    signal: Rename misses references
    evidence_indicators:
    - Rename leaves stale references
    - Dynamic references not updated
    - Cross-file updates incomplete
    explanation: |
      Incomplete rename creates runtime errors and erodes
      trust in automated refactoring.
    remediation: |
      Ensure language server is properly configured.
      Use TypeScript for safer renames with type checking.
  - id: REFACTOR-CRIT-002
    signal: No automated refactoring available
    evidence_indicators:
    - IDE offers no refactoring
    - Language server missing
    - Manual search and replace only
    explanation: |
      Without automated refactoring, code improvement is
      risky and time-consuming, leading to stagnation.
    remediation: |
      Configure appropriate language servers and IDE
      extensions for refactoring support.
  high:
  - id: REFACTOR-HIGH-001
    signal: Extract method/function unavailable
    remediation: |
      Ensure IDE supports extract refactorings.
      TypeScript and most language servers provide this.
  - id: REFACTOR-HIGH-002
    signal: Move file breaks imports
    remediation: |
      Configure auto-import updates on file move.
      Use TypeScript move file refactoring.
  - id: REFACTOR-HIGH-003
    signal: Refactoring slow for large projects
    remediation: |
      Optimize project configuration, use project
      references, or scope refactoring operations.
  medium:
  - id: REFACTOR-MED-001
    signal: Refactoring preview unavailable
    remediation: |
      Use IDE features that show refactoring preview
      before applying changes.
  - id: REFACTOR-MED-002
    signal: Cannot refactor across packages
    remediation: |
      Configure monorepo-aware refactoring or use
      cross-project refactoring tools.
  - id: REFACTOR-MED-003
    signal: Test updates manual after refactoring
    remediation: |
      Ensure tests use same import patterns so
      refactoring updates them too.
  low:
  - id: REFACTOR-LOW-001
    signal: Refactoring shortcuts not documented
    remediation: |
      Document common refactoring keyboard shortcuts.
  - id: REFACTOR-LOW-002
    signal: Codemod library unavailable
    remediation: |
      Consider jscodeshift for bulk refactoring needs.
  positive:
  - id: REFACTOR-POS-001
    signal: Rename reliably updates all references
  - id: REFACTOR-POS-002
    signal: Full refactoring menu available
  - id: REFACTOR-POS-003
    signal: Refactoring preview shows all changes
  - id: REFACTOR-POS-004
    signal: Cross-project refactoring works
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Refactoring Features
    description: Identify available refactoring operations
    duration_estimate: 30 min
  - id: '2'
    name: Test Rename Refactoring
    description: Verify rename updates all references
    duration_estimate: 30 min
  - id: '3'
    name: Test Extract Refactoring
    description: Verify extract method/variable works
    duration_estimate: 30 min
  - id: '4'
    name: Test Move Refactoring
    description: Verify file/symbol move updates imports
    duration_estimate: 30 min
  - id: '5'
    name: Gather Developer Feedback
    description: Interview developers about refactoring experience
    duration_estimate: 30 min
output:
  deliverables:
  - type: refactoring_assessment
    format: structured
    sections:
    - Feature inventory
    - Safety testing results
    - Coverage by file type
    - Developer feedback
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Refactoring Capabilities
    - Safety Assessment
    - Recommendations
closeout_checklist:
- id: refactor-001
  item: Refactoring features inventoried
  level: ERROR
  verification: manual
- id: refactor-002
  item: Safety testing completed
  level: WARNING
  verification: manual
- id: refactor-003
  item: Developer feedback collected
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - all-software-projects
  compliance_mappings:
  - framework: ISO 27001
    control: A.12.1
    description: Operational procedures
relationships:
  commonly_combined:
  - developer-experience.code-navigation.symbol-navigation
  - developer-experience.code-navigation.type-information-quality
  depends_on:
  - developer-experience.code-navigation.ide-integration
  feeds_into:
  - code-quality.maintainability
