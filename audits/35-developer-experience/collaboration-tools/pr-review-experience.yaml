audit:
  id: developer-experience.collaboration-tools.pr-review-experience
  name: PR Review Experience Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: developer-experience
  category_number: 35
  subcategory: collaboration-tools
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: false
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: development
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the pull request review experience including tooling,
    automation, review workflows, and feedback quality. Assesses how
    efficiently and effectively code reviews happen, from PR creation
    to merge.
  why_it_matters: |
    Code review is a critical quality gate and knowledge-sharing mechanism.
    Poor review experience leads to slow reviews, rubber-stamping, or
    reviews that don't catch issues. Good review tooling and processes
    enable thorough, efficient reviews that improve code quality.
  when_to_run:
  - When review cycle time is high
  - When code quality issues slip through
  - After tooling changes
  - Quarterly process review
prerequisites:
  required_artifacts:
  - type: pr_configuration
    description: PR template and automation
  - type: pr_history
    description: Historical PR data
  access_requirements:
  - Version control platform access
  - PR history and metrics
  - Team interviews
discovery:
  file_patterns:
  - glob: '**/.github/PULL_REQUEST_TEMPLATE.md'
    purpose: Find PR template
  - glob: '**/.github/CODEOWNERS'
    purpose: Find code ownership
  - glob: '**/.github/workflows/pr-*.yml'
    purpose: Find PR automation
  - glob: '**/.gitlab/merge_request_templates/**'
    purpose: Find GitLab MR templates
  interview_questions:
  - role: Developer
    questions:
    - How long do reviews typically take?
    - Is the review tooling helpful?
    - What makes reviews difficult?
    - Are reviews thorough enough?
knowledge_sources:
  guides:
  - id: google-code-review
    name: Google Code Review Guide
    url: https://google.github.io/eng-practices/review/
  - id: github-prs
    name: GitHub Pull Request Best Practices
    url: https://docs.github.com/en/pull-requests
  standards:
  - id: code-review-practices
    name: Code Review Best Practices
    relevance: Effective review process
tooling:
  analysis_tools:
  - tool: gh
    purpose: Query PR metrics
    command: gh pr list --state merged --json createdAt,mergedAt
  - tool: reviewdog
    purpose: Automated review comments
  - tool: danger
    purpose: PR automation
  - tool: codeowners
    purpose: Automatic reviewer assignment
signals:
  critical:
  - id: PR-CRIT-001
    signal: PRs regularly merge without review
    evidence_indicators:
    - No required reviewers configured
    - Admin bypasses common
    - Self-approved PRs
    explanation: |
      Unreviewed code bypasses quality checks and
      knowledge sharing benefits.
    remediation: |
      Configure branch protection requiring reviews.
      Enforce review requirements without exceptions.
  - id: PR-CRIT-002
    signal: Review cycle time exceeds 5 days
    evidence_indicators:
    - PRs waiting for days
    - Reviewers not responding
    - Large review queues
    explanation: |
      Long review times block delivery and encourage
      large, harder-to-review PRs.
    remediation: |
      Set review SLAs, assign reviewers automatically,
      and address reviewer capacity issues.
  high:
  - id: PR-HIGH-001
    signal: No PR template or guidelines
    remediation: |
      Create PR template with description sections,
      testing checklist, and review guidance.
  - id: PR-HIGH-002
    signal: No automated checks before review
    remediation: |
      Add CI checks for tests, linting, and type
      checking before human review.
  - id: PR-HIGH-003
    signal: CODEOWNERS not configured
    remediation: |
      Configure CODEOWNERS for automatic reviewer
      assignment based on changed files.
  medium:
  - id: PR-MED-001
    signal: Review comments hard to track
    remediation: |
      Use platform features for tracking comment
      resolution and re-review requests.
  - id: PR-MED-002
    signal: Large PRs common
    remediation: |
      Encourage smaller PRs through guidance and
      potentially PR size warnings.
  - id: PR-MED-003
    signal: No review feedback guidelines
    remediation: |
      Document expectations for constructive,
      specific, and actionable feedback.
  low:
  - id: PR-LOW-001
    signal: PR metrics not tracked
    remediation: |
      Track review cycle time, comment counts,
      and approval patterns.
  - id: PR-LOW-002
    signal: No stale PR handling
    remediation: |
      Implement process for addressing stale PRs.
  positive:
  - id: PR-POS-001
    signal: Reviews complete within 24 hours
  - id: PR-POS-002
    signal: Automated checks run before review
  - id: PR-POS-003
    signal: CODEOWNERS with clear ownership
  - id: PR-POS-004
    signal: Constructive review culture
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Review PR Configuration
    description: Check templates, CODEOWNERS, automation
    duration_estimate: 30 min
  - id: '2'
    name: Analyze Review Metrics
    description: Measure cycle time and patterns
    duration_estimate: 45 min
  - id: '3'
    name: Evaluate Review Quality
    description: Sample reviews for thoroughness
    duration_estimate: 30 min
  - id: '4'
    name: Check Automation
    description: Review CI and automation setup
    duration_estimate: 30 min
  - id: '5'
    name: Gather Team Feedback
    description: Interview team about review experience
    duration_estimate: 30 min
output:
  deliverables:
  - type: pr_assessment
    format: structured
    sections:
    - Configuration review
    - Metrics analysis
    - Quality evaluation
    - Team feedback
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Review Process Analysis
    - Recommendations
closeout_checklist:
- id: pr-001
  item: PR configuration reviewed
  level: ERROR
  verification: manual
- id: pr-002
  item: Review metrics analyzed
  level: WARNING
  verification: manual
- id: pr-003
  item: Team feedback collected
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - all-software-projects
  compliance_mappings:
  - framework: ISO 27001
    control: A.14.2.2
    description: System change control procedures
relationships:
  commonly_combined:
  - devops-ci-cd.continuous-integration
  - code-quality.code-review
  depends_on:
  - devops-ci-cd.source-control
  feeds_into:
  - developer-experience.productivity-metrics.developer-velocity
