audit:
  id: developer-experience.testing-experience.test-feedback-quality
  name: Test Feedback Quality Audit
  version: 1.0.0
  last_updated: '2025-01-22'
  status: active
  category: developer-experience
  category_number: 35
  subcategory: testing-experience
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: medium
  scope: development
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the quality and usefulness of feedback from test execution
    including assertion messages, failure diffs, coverage reports, and
    test result presentation. Assesses whether test output helps developers
    understand what failed and why.
  why_it_matters: |
    Test feedback is how developers learn about problems. Poor feedback
    requires additional investigation to understand failures. Good feedback
    immediately points to the issue, reducing mean time to resolution and
    making test-driven development more effective.
  when_to_run:
  - When developers report unclear test failures
  - After test framework changes
  - When assertion libraries change
  - Quarterly DX review
prerequisites:
  required_artifacts:
  - type: test_suite
    description: Existing test suite
  - type: test_configuration
    description: Test runner configuration
  access_requirements:
  - Test suite access
  - Test result access
  - CI test output access
discovery:
  file_patterns:
  - glob: '**/jest.config.{js,ts}'
    purpose: Find Jest configuration
  - glob: '**/vitest.config.{js,ts}'
    purpose: Find Vitest configuration
  - glob: '**/*.test.{js,ts,tsx}'
    purpose: Find test files
  interview_questions:
  - role: Developer
    questions:
    - Are test failure messages clear?
    - Can you tell what failed from the output?
    - Do assertion diffs help you understand failures?
    - Is coverage reporting useful?
knowledge_sources:
  guides:
  - id: jest-expect
    name: Jest Expect Documentation
    url: https://jestjs.io/docs/expect
  - id: testing-library
    name: Testing Library Best Practices
    url: https://testing-library.com/docs/
  standards:
  - id: assertion-messages
    name: Assertion Message Best Practices
    relevance: Writing helpful test assertions
tooling:
  analysis_tools:
  - tool: jest
    purpose: Test runner with detailed output
    command: jest --verbose
  - tool: jest-html-reporter
    purpose: HTML test reports
  - tool: vitest
    purpose: Test runner with modern output
    command: vitest run --reporter=verbose
  - tool: nyc
    purpose: Coverage reporting
    command: nyc report
signals:
  critical:
  - id: FEEDBACK-CRIT-001
    signal: Test failures show no useful message
    evidence_indicators:
    - Generic 'assertion failed'
    - No expected vs actual
    - Missing context
    explanation: |
      Without useful messages, developers must investigate
      every failure manually.
    remediation: |
      Add descriptive messages to assertions. Use
      assertion libraries with good diff output.
  - id: FEEDBACK-CRIT-002
    signal: Cannot identify which test failed
    evidence_indicators:
    - Test names not shown
    - File locations missing
    - Grouped without detail
    explanation: |
      Not knowing which test failed adds significant
      investigation overhead.
    remediation: |
      Configure verbose test output with full test
      names and file locations.
  high:
  - id: FEEDBACK-HIGH-001
    signal: Object/array diffs hard to read
    remediation: |
      Use assertion libraries with structured diff
      output. Consider jest-diff or similar.
  - id: FEEDBACK-HIGH-002
    signal: Coverage reports not actionable
    remediation: |
      Configure coverage thresholds and highlight
      uncovered lines in reports.
  - id: FEEDBACK-HIGH-003
    signal: CI test output hard to parse
    remediation: |
      Use reporters optimized for CI with summary
      sections and failure highlighting.
  medium:
  - id: FEEDBACK-MED-001
    signal: No visual test result presentation
    remediation: |
      Add HTML report generation for detailed
      browsable results.
  - id: FEEDBACK-MED-002
    signal: Snapshot diff output overwhelming
    remediation: |
      Configure snapshot serializers for readable
      output. Keep snapshots focused.
  - id: FEEDBACK-MED-003
    signal: Test timing not shown
    remediation: |
      Enable duration reporting to identify slow tests.
  low:
  - id: FEEDBACK-LOW-001
    signal: No color in test output
    remediation: |
      Enable colored output for better visual parsing.
  - id: FEEDBACK-LOW-002
    signal: Test result formatting inconsistent
    remediation: |
      Standardize reporter configuration across projects.
  positive:
  - id: FEEDBACK-POS-001
    signal: Clear assertion messages with context
  - id: FEEDBACK-POS-002
    signal: Helpful object diffs on failure
  - id: FEEDBACK-POS-003
    signal: Actionable coverage reports
  - id: FEEDBACK-POS-004
    signal: HTML reports available for deep investigation
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Review Reporter Configuration
    description: Check test output configuration
    duration_estimate: 30 min
  - id: '2'
    name: Evaluate Failure Messages
    description: Create failing tests and assess output
    duration_estimate: 30 min
  - id: '3'
    name: Assess Diff Quality
    description: Check diff output for complex objects
    duration_estimate: 30 min
  - id: '4'
    name: Review Coverage Reports
    description: Evaluate coverage report usefulness
    duration_estimate: 30 min
  - id: '5'
    name: Gather Developer Feedback
    description: Interview developers about feedback quality
    duration_estimate: 30 min
output:
  deliverables:
  - type: feedback_assessment
    format: structured
    sections:
    - Reporter configuration
    - Message quality evaluation
    - Diff quality assessment
    - Developer feedback
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Feedback Quality Analysis
    - Recommendations
closeout_checklist:
- id: feedback-001
  item: Reporter configuration reviewed
  level: ERROR
  verification: manual
- id: feedback-002
  item: Failure messages evaluated
  level: WARNING
  verification: manual
- id: feedback-003
  item: Developer feedback collected
  level: WARNING
  verification: manual
governance:
  applicable_to:
    archetypes:
    - all-software-projects
  compliance_mappings:
  - framework: ISO 27001
    control: A.14.2
    description: Security in development
relationships:
  commonly_combined:
  - developer-experience.testing-experience.test-debugging
  - developer-experience.testing-experience.test-execution-speed
  depends_on:
  - devops-ci-cd.test-automation
  feeds_into:
  - developer-experience.productivity-metrics.developer-velocity
