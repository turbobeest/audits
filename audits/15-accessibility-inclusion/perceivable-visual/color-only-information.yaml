audit:
  id: accessibility-inclusion.perceivable-visual.color-only-information
  name: Color-Only Information Audit
  version: 1.0.0
  last_updated: '2026-01-19'
  status: active
  category: accessibility-inclusion
  category_number: 15
  subcategory: perceivable-visual
  tier: expert
  estimated_duration: 2-3 hours  # median: 2h
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: codebase
  default_profiles:
  - full
  - accessibility
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit examines whether information, functionality, or meaning
    is conveyed through color alone, violating WCAG 2.1 SC 1.4.1
    (Use of Color - Level A).

    The audit covers:
    - Form validation and error states
    - Required field indicators
    - Link identification within text
    - Status indicators (online/offline, success/error)
    - Chart and graph legends
    - Navigation state (current/active items)
    - Data visualization elements
    - Interactive element states
    - Progress indicators
  why_it_matters: |
    Approximately 8% of men and 0.5% of women have some form of color
    vision deficiency (color blindness). Information conveyed only
    through color is invisible to these users:

    - Red/green color blindness is most common (deuteranopia, protanopia)
    - Users may not see required field asterisks if only colored
    - Error messages highlighted only in red are missed
    - Charts become indecipherable without patterns
    - Status indicators lose meaning entirely
  when_to_run:
  - When designing forms or validation
  - When creating charts or data visualizations
  - During UI/UX design review
  - When implementing status indicators
  - Before accessibility compliance audits
prerequisites:
  required_artifacts:
  - type: codebase
    description: Access to UI components and templates
  - type: running_application
    description: Deployed instance for visual verification
  - type: design_system
    description: Color usage guidelines
  access_requirements:
  - Read access to component code
  - Browser access to running application
  - Color blindness simulation tools
discovery:
  code_patterns:
  - pattern: color:\s*(red|#ff0000|#f00|rgb\(255,\s*0,\s*0\))
    type: regex
    scope: source
    purpose: Find red color usage (often error states)
  - pattern: color:\s*(green|#00ff00|#0f0|rgb\(0,\s*255,\s*0\))
    type: regex
    scope: source
    purpose: Find green color usage (often success states)
  - pattern: \.error|\[error\]|:error
    type: regex
    scope: source
    purpose: Find error state styling
  - pattern: \.success|\[success\]|:success
    type: regex
    scope: source
    purpose: Find success state styling
  - pattern: \.required|\[required\]|:required
    type: regex
    scope: source
    purpose: Find required field styling
  - pattern: aria-invalid
    type: regex
    scope: source
    purpose: Find invalid state markup
  file_patterns:
  - glob: '**/*.css'
    purpose: CSS stylesheets
  - glob: '**/form*.{jsx,tsx,vue}'
    purpose: Form components
  - glob: '**/chart*.{jsx,tsx,vue}'
    purpose: Chart components
  - glob: '**/status*.{jsx,tsx,vue}'
    purpose: Status indicator components
knowledge_sources:
  specifications:
  - id: wcag-21
    name: WCAG 2.1 Quick Reference
    url: https://www.w3.org/WAI/WCAG21/quickref/
    offline_cache: true
    priority: recommended
  - id: wcag-22
    name: WCAG 2.2 Specification
    url: https://www.w3.org/TR/WCAG22/
    offline_cache: true
    priority: recommended
  - id: wcag21-141
    name: WCAG 2.1 Success Criterion 1.4.1 Use of Color
    url: https://www.w3.org/WAI/WCAG21/Understanding/use-of-color.html
    offline_cache: true
    priority: required
  guides:
  - id: webaim-color
    name: 'WebAIM: Color and Accessibility'
    url: https://webaim.org/articles/visual/colorblind
    offline_cache: true
  - id: a11y-charts
    name: Accessible Data Visualization
    url: https://www.w3.org/WAI/tutorials/images/complex/
    offline_cache: true
tooling:
  static_analysis:
  - tool: axe-core
    purpose: Detect color-only link identification
    offline_capable: true
  assessment_tools:
  - tool: Colorblinding Chrome extension
    purpose: Simulate various color vision deficiencies
  - tool: NoCoffee Vision Simulator
    purpose: Comprehensive vision simulation
  - tool: Color Oracle
    purpose: Desktop color blindness simulator
  scripts:
  - id: find-color-only-states
    language: bash
    purpose: Find error/success states that may be color-only
    source: inline
    code: |
      #!/bin/bash
      grep -rn "\.error\|\.success\|\.warning" --include="*.css" . | \
        grep "color:" | grep -v "background\|border\|outline"
signals:
  critical:
  - id: A11Y-COLOR-CRIT-001
    signal: Form errors indicated only by red color
    evidence_pattern: Error states with only color:red, no icon or text change
    explanation: |
      Users with red-green color blindness cannot perceive error states
      when indicated only by red color changes.
    remediation: Add error icons, text labels, and/or border changes in addition to color
  - id: A11Y-COLOR-CRIT-002
    signal: Required fields marked only by red asterisk color
    explanation: |
      Red asterisks are invisible to color-blind users; required fields
      must be indicated through multiple means.
    remediation: Add '(required)' text or aria-required='true' in addition to visual indicator
    evidence_description: '* with only color styling, no aria-required'
  high:
  - id: A11Y-COLOR-HIGH-001
    signal: Links distinguishable only by color
    explanation: Links within text must have additional differentiation (underline, bold)
    remediation: 'Add text-decoration: underline or other visual distinction'
  - id: A11Y-COLOR-HIGH-002
    signal: Chart data series differentiated only by color
    explanation: Chart legends and data points need patterns or labels
    remediation: Add patterns, data labels, or directly label data series
  - id: A11Y-COLOR-HIGH-003
    signal: Status indicators use only color (green/red/yellow)
    explanation: Status must include icons, labels, or patterns
    remediation: Add checkmarks, X marks, or text labels alongside colors
  medium:
  - id: A11Y-COLOR-MED-001
    signal: Current navigation item indicated only by color
    remediation: Add underline, bold, or aria-current='page'
  - id: A11Y-COLOR-MED-002
    signal: Selected state shown only through background color
    remediation: Add border, checkmark icon, or pattern change
  - id: A11Y-COLOR-MED-003
    signal: Progress indicators use only color changes
    remediation: Add percentage text, icons, or pattern fills
  low:
  - id: A11Y-COLOR-LOW-001
    signal: Hover state relies primarily on color change
  positive:
  - id: A11Y-COLOR-POS-001
    signal: All states use multiple visual indicators
  - id: A11Y-COLOR-POS-002
    signal: Charts include patterns and direct labels
  - id: A11Y-COLOR-POS-003
    signal: Error messages include icons and text
procedure:
  context:
    cognitive_mode: critical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Identify Color-Dependent UI Elements
    description: |
      Catalog all UI elements that use color to convey
      information, status, or meaning.
    duration_estimate: 30 min
    commands:
    - purpose: Find error state styles
      command: grep -rn 'error\|invalid' --include='*.css' --include='*.scss' .
    - purpose: Find success state styles
      command: grep -rn 'success\|valid' --include='*.css' --include='*.scss' .
    - purpose: Find link styles
      command: grep -rn 'a\s*{\|a:link\|a:visited' --include='*.css' .
    expected_findings:
    - List of color-dependent elements
    - States that rely on color changes
  - id: '2'
    name: Simulate Color Vision Deficiencies
    description: |
      Use browser extensions or tools to view the application
      under various color blindness simulations.
    duration_estimate: 45 min
    questions:
    - Can error states be perceived with deuteranopia simulation?
    - Can success states be perceived with protanopia simulation?
    - Are links distinguishable in grayscale?
    - Can chart data be differentiated without color?
    expected_findings:
    - Elements that become indistinguishable
    - Information lost under simulation
  - id: '3'
    name: Evaluate Alternative Indicators
    description: |
      For each color-dependent element, verify alternative
      indicators exist (icons, text, patterns, borders).
    duration_estimate: 45 min
    questions:
    - Do error messages include error icons?
    - Do required fields have text indication?
    - Do links have underlines or other styling?
    - Do charts have patterns or labels?
    expected_findings:
    - Gaps in alternative indicators
    - Elements needing enhancement
  - id: '4'
    name: Document Findings and Recommendations
    description: |
      Compile all findings with specific recommendations
      for adding non-color indicators.
    duration_estimate: 30 min
    expected_findings:
    - Prioritized remediation list
    - Specific implementation recommendations
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Color-Dependent Elements Inventory
    - Color Blindness Simulation Results
    - Critical Violations
    - Remediation Recommendations
  confidence_guidance:
    high: Verified through color blindness simulation tools
    medium: Code analysis complete, simulation pending
    low: Inferred from CSS patterns
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: wcag21-141
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Requires thorough UI review and simulation
    full:
      included: true
      priority: 2
    accessibility:
      included: true
      priority: 1
closeout_checklist:
- id: color-only-001
  item: Links have non-color distinction (underline, bold)
  level: CRITICAL
  verification: manual
  verification_notes: View in grayscale and verify links are identifiable
  expected: Confirmed by reviewer
- id: color-only-002
  item: Error states have icons or text in addition to color
  level: CRITICAL
  verification: manual
  verification_notes: Test forms and verify errors visible with deuteranopia simulation
  expected: Confirmed by reviewer
- id: color-only-003
  item: Required fields indicated beyond color
  level: BLOCKING
  verification: manual
  verification_notes: Verify required fields have text or aria-required
  expected: Confirmed by reviewer
- id: color-only-004
  item: Charts/graphs use patterns or labels
  level: BLOCKING
  verification: manual
  verification_notes: Test data visualizations in grayscale
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: WCAG 2.1
    controls:
    - 1.4.1
  - framework: Section 508
    controls:
    - 1194.22(c)
  - framework: EN 301 549
    controls:
    - 9.1.4.1
relationships:
  commonly_combined:
  - accessibility-inclusion.perceivable-visual.color-contrast
  - accessibility-inclusion.perceivable-visual.focus-indicator-visibility
  - accessibility-inclusion.understandable-content.error-suggestion
