# ============================================================
# AUDIT: Abbreviation Explanation - WCAG 2.1 AAA Compliance
# ============================================================
# Verifies abbreviations and acronyms are explained per
# WCAG 2.1 SC 3.1.4.

audit:
  id: "accessibility-inclusion.understandable-content.abbreviation-explanation"
  name: "Abbreviation Explanation Audit"
  version: "1.0.0"
  last_updated: "2026-01-19"
  status: "active"

  category: "accessibility-inclusion"
  category_number: 15
  subcategory: "understandable-content"

  tier: "phd"
  estimated_duration: "2-3 hours"  # median: 2h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "codebase"

  default_profiles:
    - "full"
    - "accessibility"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    This audit verifies abbreviations and acronyms are explained
    per WCAG 2.1 SC 3.1.4 Abbreviations (Level AAA).

    The audit covers:
    - Technical acronyms (HTML, CSS, API)
    - Industry-specific abbreviations
    - Organization acronyms
    - Shortened words (e.g., "approx.")
    - Use of <abbr> element
    - Glossary or definition availability
    - First-use expansion patterns
    - Screen reader pronunciation

  why_it_matters: |
    Unexplained abbreviations create barriers for:

    - Users with cognitive disabilities
    - Non-native language speakers
    - Users unfamiliar with domain terminology
    - Screen reader users (abbreviations may be mispronounced)
    - New users to a field or industry

    Even common abbreviations like "FAQ" or "ASAP" are not
    universally understood.

  when_to_run:
    - "When writing technical content"
    - "During documentation review"
    - "For AAA compliance efforts"
    - "When targeting diverse audiences"
    - "During content audits"

prerequisites:
  required_artifacts:
    - type: "codebase"
      description: "Access to content and templates"
    - type: "running_application"
      description: "Deployed instance for verification"

  access_requirements:
    - "Read access to content files"
    - "Access to glossary or documentation"

discovery:
  code_patterns:
    - pattern: "\\b[A-Z]{2,}\\b"
      type: "regex"
      scope: "source"
      purpose: "Find uppercase abbreviations"
    - pattern: "<abbr"
      type: "regex"
      scope: "source"
      purpose: "Find abbr element usage"
    - pattern: "title=['\"][^'\"]+['\"]"
      type: "regex"
      scope: "source"
      purpose: "Find title attributes (potential expansions)"

  file_patterns:
    - glob: "**/*.md"
      purpose: "Documentation files"
    - glob: "**/content/**"
      purpose: "Content files"
    - glob: "**/glossary*"
      purpose: "Glossary files"

  documents_to_review:
    - type: "Glossary"
      purpose: "Check for abbreviation definitions"
    - type: "Style guide"
      purpose: "Check abbreviation guidelines"

knowledge_sources:
  specifications:
    - id: "wcag-21"
      name: "WCAG 2.1 Quick Reference"
      url: "https://www.w3.org/WAI/WCAG21/quickref/"
      offline_cache: true
      priority: "recommended"
    - id: "wcag21-314"
      name: "WCAG 2.1 Success Criterion 3.1.4 Abbreviations"
      url: "https://www.w3.org/WAI/WCAG21/Understanding/abbreviations.html"
      offline_cache: true
      priority: "required"

  guides:
    - id: "w3c-abbr"
      name: "W3C: Abbreviations Techniques"
      url: "https://www.w3.org/WAI/WCAG21/Techniques/general/G97"
      offline_cache: true
    - id: "mdn-abbr"
      name: "MDN: The Abbreviation Element"
      url: "https://developer.mozilla.org/en-US/docs/Web/HTML/Element/abbr"
      offline_cache: true

tooling:
  scripts:
    - id: "find-abbreviations"
      language: "bash"
      purpose: "Find potential abbreviations in content"
      source: "inline"
      code: |
        #!/bin/bash
        echo "=== Uppercase Abbreviations ==="
        grep -rno '\b[A-Z]\{2,\}\b' --include="*.md" --include="*.html" --include="*.jsx" . | \
          sort | uniq -c | sort -rn | head -30
        echo ""
        echo "=== abbr Element Usage ==="
        grep -rn '<abbr' --include="*.html" --include="*.jsx" --include="*.tsx" . | head -20

signals:
  critical:
    - id: "A11Y-ABBR-CRIT-001"
      signal: "Critical instructions use unexplained abbreviations"
      evidence_pattern: "Error messages or instructions with undefined acronyms"
      explanation: |
        Users cannot follow instructions that include abbreviations
        they don't understand.
      remediation: "Expand or define abbreviations in critical content"

  high:
    - id: "A11Y-ABBR-HIGH-001"
      signal: "Technical acronyms not expanded on first use"
      explanation: "First occurrence should expand the abbreviation"
      remediation: "Write 'Application Programming Interface (API)' on first use"
    - id: "A11Y-ABBR-HIGH-002"
      signal: "No glossary available for abbreviations"
      explanation: "Users need a reference for abbreviation meanings"
      remediation: "Create glossary or add <abbr> with title attributes"
    - id: "A11Y-ABBR-HIGH-003"
      signal: "Abbreviations mispronounced by screen readers"
      explanation: "Some abbreviations are read letter-by-letter incorrectly"
      remediation: "Use <abbr> element to provide pronunciation hint"

  medium:
    - id: "A11Y-ABBR-MED-001"
      signal: "<abbr> element missing title attribute"
      remediation: "Add title attribute with expansion to <abbr> elements"
    - id: "A11Y-ABBR-MED-002"
      signal: "Industry jargon used without context"
      remediation: "Provide definitions for domain-specific terms"
    - id: "A11Y-ABBR-MED-003"
      signal: "Abbreviations inconsistently expanded"
      remediation: "Standardize abbreviation handling across content"

  low:
    - id: "A11Y-ABBR-LOW-001"
      signal: "Common abbreviations could be expanded for clarity"

  positive:
    - id: "A11Y-ABBR-POS-001"
      signal: "Abbreviations expanded on first use"
    - id: "A11Y-ABBR-POS-002"
      signal: "Comprehensive glossary available"
    - id: "A11Y-ABBR-POS-003"
      signal: "<abbr> elements used with title attributes"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Inventory Abbreviations"
      description: |
        Find all abbreviations and acronyms used in the content.
      duration_estimate: "30 min"
      commands:
        - purpose: "Find uppercase abbreviations"
          command: "grep -rho '\\b[A-Z]\\{2,\\}\\b' --include='*.md' --include='*.html' --include='*.jsx' . | sort | uniq -c | sort -rn | head -50"
        - purpose: "Find abbr elements"
          command: "grep -rn '<abbr' --include='*.html' --include='*.jsx' --include='*.tsx' ."
      expected_findings:
        - "Abbreviation inventory"
        - "Frequency of use"

    - id: "2"
      name: "Check for Definitions"
      description: |
        Verify abbreviations are defined either inline,
        via glossary, or with <abbr> elements.
      duration_estimate: "30 min"
      questions:
        - "Is there a glossary page?"
        - "Are abbreviations expanded on first use?"
        - "Do <abbr> elements have title attributes?"
        - "Are definitions accessible to screen readers?"
      expected_findings:
        - "Definition availability"
        - "Undefined abbreviations"

    - id: "3"
      name: "Evaluate abbr Implementation"
      description: |
        Review how <abbr> elements are used and their
        accessibility.
      duration_estimate: "20 min"
      commands:
        - purpose: "Check abbr with titles"
          command: "grep -rn '<abbr.*title=' --include='*.html' --include='*.jsx' . | head -20"
      questions:
        - "Are <abbr> elements used correctly?"
        - "Do they have proper title attributes?"
        - "Are they styled to indicate they're interactive?"
      expected_findings:
        - "abbr implementation quality"
        - "Missing title attributes"

    - id: "4"
      name: "Test Screen Reader Pronunciation"
      description: |
        Verify abbreviations are pronounced correctly
        or provide pronunciation hints.
      duration_estimate: "20 min"
      questions:
        - "Does the screen reader read abbreviations correctly?"
        - "Are letter abbreviations (NASA vs N.A.S.A.) handled?"
        - "Do <abbr> title attributes provide pronunciation help?"
      expected_findings:
        - "Pronunciation issues"
        - "Screen reader behavior"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Abbreviation Inventory"
        - "Definition Coverage"
        - "abbr Implementation Review"
        - "Screen Reader Testing"
        - "Recommendations"

  confidence_guidance:
    high: "Complete abbreviation review with screen reader testing"
    medium: "Abbreviation inventory with spot-check definitions"
    low: "Automated abbreviation detection only"

offline:
  capability: "full"

  cache_manifest:
    knowledge:
      - source_id: "wcag21-314"
        priority: "required"

profiles:
  membership:
    quick:
      included: false
      reason: "AAA requirement, requires comprehensive content review"
    full:
      included: true
      priority: 3
    accessibility:
      included: true
      priority: 2

closeout_checklist:
  - id: "abbreviation-001"
    item: "Abbreviations expanded on first use (AAA target)"
    level: "WARNING"
    verification: "manual"
    verification_notes: "Check first occurrence of common abbreviations"
    expected: "Confirmed by reviewer"

  - id: "abbreviation-002"
    item: "<abbr> elements have title attributes"
    level: "WARNING"
    verification: "grep -r '<abbr' --include='*.html' --include='*.jsx' . | grep -v 'title='"
    expected: "0 results (all abbr have title)"

  - id: "abbreviation-003"
    item: "Glossary available for technical terms"
    level: "WARNING"
    verification: "manual"
    verification_notes: "Check for glossary page or section"
    expected: "Confirmed by reviewer"

  - id: "abbreviation-004"
    item: "Critical content avoids unexplained abbreviations"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Review error messages and instructions"
    expected: "Confirmed by reviewer"

governance:
  applicable_to:
    archetypes: ["technical", "government", "education"]

  compliance_frameworks:
    - framework: "WCAG 2.1"
      controls: ["3.1.4"]
    - framework: "EN 301 549"
      controls: ["9.3.1.4"]
    - framework: "Plain Writing Act"
      controls: ["Government content"]

relationships:
  commonly_combined:
    - "accessibility-inclusion.understandable-content.reading-level"
    - "accessibility-inclusion.understandable-content.language-identification"
