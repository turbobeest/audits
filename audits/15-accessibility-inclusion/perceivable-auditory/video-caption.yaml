audit:
  id: accessibility-inclusion.perceivable-auditory.video-caption
  name: Video Captioning Audit
  version: 1.0.0
  last_updated: '2026-01-19'
  status: active
  category: accessibility-inclusion
  category_number: 15
  subcategory: perceivable-auditory
  tier: phd
  estimated_duration: 3-5 hours  # median: 4h
  completeness: requires_discovery
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: critical
  scope: codebase
  default_profiles:
  - full
  - accessibility
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit verifies that all prerecorded and live video content
    with audio has synchronized captions per WCAG 2.1:
    - SC 1.2.2 Captions (Prerecorded) - Level A
    - SC 1.2.4 Captions (Live) - Level AA

    The audit covers:
    - Embedded video players
    - Third-party video embeds (YouTube, Vimeo)
    - Live streaming content
    - Video tutorials and instructions
    - Marketing and promotional videos
    - User-generated video content
    - Video conferencing recordings
    - WebRTC video content
  why_it_matters: |
    Approximately 466 million people worldwide have disabling hearing
    loss. Video without captions:

    - Completely excludes deaf users from video content
    - Prevents comprehension in noisy environments
    - Is inaccessible to users who cannot use audio
    - Violates Level A WCAG requirements
    - Creates significant legal liability

    Captions also benefit:
    - Non-native language speakers
    - Users in sound-sensitive environments
    - Users with cognitive or processing differences
    - SEO through searchable caption text
  when_to_run:
  - When adding video content
  - During content audits
  - Before accessibility compliance reviews
  - After video platform migrations
  - When implementing live streaming features
prerequisites:
  required_artifacts:
  - type: codebase
    description: Access to video embedding code
  - type: running_application
    description: Deployed instance with video content
  - type: content_inventory
    description: List of all video content
  access_requirements:
  - Read access to video files and embedding code
  - Access to video hosting platforms (YouTube, Vimeo)
  - Access to caption/subtitle files
discovery:
  code_patterns:
  - pattern: <video
    type: regex
    scope: source
    purpose: Find video elements
  - pattern: <track
    type: regex
    scope: source
    purpose: Find caption track elements
  - pattern: youtube\.com/embed|player\.vimeo\.com
    type: regex
    scope: source
    purpose: Find embedded video players
  - pattern: \.vtt|\.srt|\.sbv
    type: regex
    scope: source
    purpose: Find caption file references
  - pattern: kind="captions"|kind="subtitles"
    type: regex
    scope: source
    purpose: Find caption tracks
  file_patterns:
  - glob: '**/*.mp4'
    purpose: MP4 video files
  - glob: '**/*.webm'
    purpose: WebM video files
  - glob: '**/*.vtt'
    purpose: WebVTT caption files
  - glob: '**/*.srt'
    purpose: SRT caption files
knowledge_sources:
  specifications:
  - id: wcag-21
    name: WCAG 2.1 Quick Reference
    url: https://www.w3.org/WAI/WCAG21/quickref/
    offline_cache: true
    priority: recommended
  - id: wcag21-122
    name: WCAG 2.1 Success Criterion 1.2.2 Captions (Prerecorded)
    url: https://www.w3.org/WAI/WCAG21/Understanding/captions-prerecorded.html
    offline_cache: true
    priority: required
  - id: wcag21-124
    name: WCAG 2.1 Success Criterion 1.2.4 Captions (Live)
    url: https://www.w3.org/WAI/WCAG21/Understanding/captions-live.html
    offline_cache: true
    priority: required
  - id: webvtt-spec
    name: 'WebVTT: The Web Video Text Tracks Format'
    url: https://www.w3.org/TR/webvtt1/
    offline_cache: true
    priority: recommended
  guides:
  - id: w3c-captions
    name: 'W3C: Captions/Subtitles'
    url: https://www.w3.org/WAI/media/av/captions/
    offline_cache: true
  - id: dcmp-captioning
    name: DCMP Captioning Key
    url: https://dcmp.org/learn/captioningkey
    offline_cache: true
tooling:
  static_analysis:
  - tool: axe-core
    purpose: Detect videos without captions
    offline_capable: true
  assessment_tools:
  - tool: YouTube Auto-Captions
    purpose: Automated caption generation (requires review)
  - tool: 3Play Media
    purpose: Professional captioning service
  - tool: Rev.com
    purpose: Human captioning service
  - tool: Amara
    purpose: Collaborative captioning platform
  scripts:
  - id: find-video-content
    language: bash
    purpose: Find video files and elements
    source: inline
    code: |
      #!/bin/bash
      echo "=== Video Elements ==="
      grep -rn "<video" --include="*.html" --include="*.jsx" --include="*.tsx" . | head -20
      echo ""
      echo "=== Track Elements (Captions) ==="
      grep -rn "<track" --include="*.html" --include="*.jsx" --include="*.tsx" . | head -20
      echo ""
      echo "=== Third-party Embeds ==="
      grep -rn "youtube.com\|vimeo.com\|wistia" --include="*.html" --include="*.jsx" . | head -20
signals:
  critical:
  - id: A11Y-CAPTION-CRIT-001
    signal: Video with audio has no captions
    evidence_pattern: <video> with audio but no <track kind='captions'>
    explanation: |
      Deaf and hard of hearing users cannot access video content
      without synchronized captions. Level A violation.
    remediation: Add synchronized caption track using WebVTT format
  - id: A11Y-CAPTION-CRIT-002
    signal: Live video stream has no real-time captions
    evidence_pattern: Live streaming without CART or auto-captioning
    explanation: |
      Live video must have real-time captioning for Level AA compliance.
    remediation: Implement CART services or live auto-captioning with corrections
  high:
  - id: A11Y-CAPTION-HIGH-001
    signal: Captions not synchronized with audio
    explanation: Captions must be synchronized within 100ms of audio
    remediation: Re-time captions to match audio timing
  - id: A11Y-CAPTION-HIGH-002
    signal: Captions missing speaker identification
    explanation: Multi-speaker videos must identify speakers in captions
    remediation: Add speaker labels for all dialogue
  - id: A11Y-CAPTION-HIGH-003
    signal: Auto-generated captions not reviewed
    explanation: Auto-captions often have significant errors
    remediation: Review and correct auto-generated captions
  medium:
  - id: A11Y-CAPTION-MED-001
    signal: Sound effects and music not captioned
    remediation: Add descriptions for significant non-speech audio
  - id: A11Y-CAPTION-MED-002
    signal: Captions difficult to read (styling issues)
    remediation: Ensure caption contrast and sizing are accessible
  - id: A11Y-CAPTION-MED-003
    signal: Captions not available in user's language
    remediation: Provide captions in primary audience languages
  low:
  - id: A11Y-CAPTION-LOW-001
    signal: Caption timing could be improved
  positive:
  - id: A11Y-CAPTION-POS-001
    signal: All videos have synchronized captions
  - id: A11Y-CAPTION-POS-002
    signal: Captions include speaker ID and sound descriptions
  - id: A11Y-CAPTION-POS-003
    signal: Multiple language captions available
  - id: A11Y-CAPTION-POS-004
    signal: Caption styling is user-customizable
procedure:
  context:
    cognitive_mode: critical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory All Video Content
    description: |
      Create a comprehensive list of all video content,
      including embedded players and third-party sources.
    duration_estimate: 45 min
    commands:
    - purpose: Find video elements
      command: grep -rn '<video\|<iframe.*youtube\|<iframe.*vimeo' --include='*.html' --include='*.jsx'
        --include='*.tsx' .
    - purpose: Find video file references
      command: find . -name '*.mp4' -o -name '*.webm' -o -name '*.mov' 2>/dev/null | head -50
    - purpose: Find track elements
      command: grep -rn '<track' --include='*.html' --include='*.jsx' . | head -20
    expected_findings:
    - Complete video content inventory
    - Caption track availability
  - id: '2'
    name: Check Caption Availability
    description: |
      For each video, verify captions exist and are
      properly linked or embedded.
    duration_estimate: 45 min
    commands:
    - purpose: Find caption files
      command: find . -name '*.vtt' -o -name '*.srt' 2>/dev/null | head -30
    - purpose: Check track kind attributes
      command: grep -rn 'kind="captions"\|kind="subtitles"' --include='*.html' --include='*.jsx' . | head
        -20
    expected_findings:
    - Caption file inventory
    - Videos missing captions
  - id: '3'
    name: Evaluate Caption Quality
    description: |
      Review sample captions for accuracy, timing,
      and completeness.
    duration_estimate: 60 min
    questions:
    - Are captions synchronized with audio (within 100ms)?
    - Are speakers identified in dialogue?
    - Are sound effects and music described?
    - Are captions accurate (>99% accuracy)?
    - Is caption styling readable?
    expected_findings:
    - Quality assessment of captions
    - Timing and accuracy issues
  - id: '4'
    name: Test Third-Party Video Captions
    description: |
      Verify captions are enabled and accurate on
      YouTube, Vimeo, and other embedded videos.
    duration_estimate: 30 min
    questions:
    - Do embedded YouTube videos have captions enabled?
    - Are YouTube auto-captions reviewed for accuracy?
    - Do Vimeo videos have caption tracks?
    expected_findings:
    - Third-party caption status
    - Platform-specific requirements
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Video Content Inventory
    - Caption Coverage Report
    - Quality Assessment
    - Third-Party Video Status
    - Recommendations
  confidence_guidance:
    high: Manual review of videos and captions completed
    medium: Automated inventory with sample review
    low: File-based discovery only
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: wcag21-122
      priority: required
    - source_id: wcag21-124
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Requires comprehensive video content review
    full:
      included: true
      priority: 1
    accessibility:
      included: true
      priority: 1
closeout_checklist:
- id: video-caption-001
  item: All prerecorded videos with audio have captions
  level: CRITICAL
  verification: manual
  verification_notes: Review each video and verify captions are present
  expected: Confirmed by reviewer
- id: video-caption-002
  item: Captions are synchronized with audio
  level: CRITICAL
  verification: manual
  verification_notes: Spot-check caption timing against audio
  expected: Confirmed by reviewer
- id: video-caption-003
  item: Live video has real-time captioning
  level: BLOCKING
  verification: manual
  verification_notes: Verify live stream captioning capability
  expected: Confirmed by reviewer or N/A
- id: video-caption-004
  item: Captions include speaker ID and sound descriptions
  level: WARNING
  verification: manual
  verification_notes: Review caption files for speaker labels
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - all
  compliance_frameworks:
  - framework: WCAG 2.1
    controls:
    - 1.2.2
    - 1.2.4
  - framework: Section 508
    controls:
    - 1194.22(b)
  - framework: EN 301 549
    controls:
    - 9.1.2.2
    - 9.1.2.4
  - framework: FCC
    controls:
    - 21st Century Communications and Video Accessibility Act
relationships:
  commonly_combined:
  - accessibility-inclusion.perceivable-auditory.audio-transcript
  - accessibility-inclusion.perceivable-auditory.audio-description
  - accessibility-inclusion.perceivable-auditory.sign-language-interpretation
