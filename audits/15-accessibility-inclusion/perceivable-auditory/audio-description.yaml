# ============================================================
# AUDIT: Audio Description for Video - WCAG 2.1 Compliance
# ============================================================
# Verifies video content has audio descriptions for users
# who are blind or have low vision.

audit:
  id: "accessibility-inclusion.perceivable-auditory.audio-description"
  name: "Audio Description for Video Audit"
  version: "1.0.0"
  last_updated: "2026-01-19"
  status: "active"

  category: "accessibility-inclusion"
  category_number: 15
  subcategory: "perceivable-auditory"

  tier: "expert"
  estimated_duration: "3-5 hours"  # median: 4h

  completeness: "requires_discovery"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "codebase"

  default_profiles:
    - "full"
    - "accessibility"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    This audit verifies that video content with important visual
    information has audio descriptions per WCAG 2.1:
    - SC 1.2.3 Audio Description or Media Alternative (Prerecorded) - Level A
    - SC 1.2.5 Audio Description (Prerecorded) - Level AA
    - SC 1.2.7 Extended Audio Description (Prerecorded) - Level AAA

    The audit covers:
    - Video tutorials with visual demonstrations
    - Presentations and slide decks
    - Movies and entertainment content
    - Educational videos
    - Product demonstrations
    - Video content with on-screen text
    - Videos where action is not described by dialogue

  why_it_matters: |
    Approximately 285 million people worldwide are visually impaired.
    Video content often conveys critical information visually that
    is not apparent from the audio track alone:

    - On-screen demonstrations in tutorials
    - Visual context in films and shows
    - Charts and graphs in presentations
    - Physical actions not described verbally
    - On-screen text and captions
    - Scene changes and character identification

    Without audio description, blind users miss essential information.

  when_to_run:
    - "When adding video content"
    - "During content audits"
    - "Before accessibility compliance reviews"
    - "For educational or tutorial content"
    - "When required for Level AA compliance"

prerequisites:
  required_artifacts:
    - type: "codebase"
      description: "Access to video embedding code"
    - type: "running_application"
      description: "Deployed instance with video content"
    - type: "content_inventory"
      description: "List of all video content"

  access_requirements:
    - "Read access to video files"
    - "Access to audio description tracks"
    - "Video playback capability"

discovery:
  code_patterns:
    - pattern: "<video"
      type: "regex"
      scope: "source"
      purpose: "Find video elements"
    - pattern: "kind=\"descriptions\""
      type: "regex"
      scope: "source"
      purpose: "Find audio description tracks"
    - pattern: "audio-desc|audiodesc|described-video"
      type: "regex"
      scope: "source"
      purpose: "Find audio description implementations"

  file_patterns:
    - glob: "**/*.mp4"
      purpose: "Video files"
    - glob: "**/*-ad.mp4"
      purpose: "Audio described video versions"
    - glob: "**/*description*.vtt"
      purpose: "Description track files"

knowledge_sources:
  specifications:
    - id: "wcag-21"
      name: "WCAG 2.1 Quick Reference"
      url: "https://www.w3.org/WAI/WCAG21/quickref/"
      offline_cache: true
      priority: "recommended"
    - id: "wcag21-123"
      name: "WCAG 2.1 Success Criterion 1.2.3 Audio Description or Media Alternative"
      url: "https://www.w3.org/WAI/WCAG21/Understanding/audio-description-or-media-alternative-prerecorded.html"
      offline_cache: true
      priority: "required"
    - id: "wcag21-125"
      name: "WCAG 2.1 Success Criterion 1.2.5 Audio Description (Prerecorded)"
      url: "https://www.w3.org/WAI/WCAG21/Understanding/audio-description-prerecorded.html"
      offline_cache: true
      priority: "required"
    - id: "wcag21-127"
      name: "WCAG 2.1 Success Criterion 1.2.7 Extended Audio Description"
      url: "https://www.w3.org/WAI/WCAG21/Understanding/extended-audio-description-prerecorded.html"
      offline_cache: true
      priority: "recommended"

  guides:
    - id: "w3c-audio-desc"
      name: "W3C: Audio Description"
      url: "https://www.w3.org/WAI/media/av/description/"
      offline_cache: true
    - id: "acb-audio-desc"
      name: "American Council of the Blind: Audio Description"
      url: "https://www.acb.org/adp/"
      offline_cache: true

tooling:
  assessment_tools:
    - tool: "YouDescribe"
      purpose: "Free audio description platform"
    - tool: "3Play Media"
      purpose: "Professional audio description service"
    - tool: "CaptionMax"
      purpose: "Audio description production"

  scripts:
    - id: "find-ad-tracks"
      language: "bash"
      purpose: "Find audio description tracks"
      source: "inline"
      code: |
        #!/bin/bash
        echo "=== Audio Description Tracks ==="
        grep -rn "kind=\"descriptions\"" --include="*.html" --include="*.jsx" --include="*.tsx" . | head -20
        echo ""
        echo "=== Description Files ==="
        find . -name "*description*" -name "*.vtt" 2>/dev/null | head -20

signals:
  critical:
    - id: "A11Y-AD-CRIT-001"
      signal: "Video with essential visual content has no audio description or text alternative"
      evidence_pattern: "Tutorial/demo video without description track or transcript"
      explanation: |
        Blind users cannot understand visual demonstrations, actions,
        or on-screen information without audio description.
      remediation: "Add audio description track or provide full text transcript with visual descriptions"

  high:
    - id: "A11Y-AD-HIGH-001"
      signal: "Educational video missing audio description"
      explanation: "Educational content must be accessible to blind learners"
      remediation: "Create audio description for visual educational content"
    - id: "A11Y-AD-HIGH-002"
      signal: "On-screen text not described in audio"
      explanation: "Visible text must be spoken or described"
      remediation: "Describe on-screen text in audio description or integrate into dialogue"
    - id: "A11Y-AD-HIGH-003"
      signal: "Audio description conflicts with dialogue"
      explanation: "Descriptions should fit into natural pauses"
      remediation: "Time descriptions to avoid dialogue overlap, or use extended descriptions"

  medium:
    - id: "A11Y-AD-MED-001"
      signal: "Audio description could be more detailed"
      remediation: "Enhance descriptions with more visual context"
    - id: "A11Y-AD-MED-002"
      signal: "No option to enable/disable audio description"
      remediation: "Provide toggle for audio description track"
    - id: "A11Y-AD-MED-003"
      signal: "Audio description voice difficult to distinguish"
      remediation: "Use distinct voice for descriptions vs. original content"

  low:
    - id: "A11Y-AD-LOW-001"
      signal: "Audio description timing could be improved"

  positive:
    - id: "A11Y-AD-POS-001"
      signal: "All videos with visual content have audio descriptions"
    - id: "A11Y-AD-POS-002"
      signal: "Extended audio description available where needed"
    - id: "A11Y-AD-POS-003"
      signal: "User can toggle audio description on/off"

procedure:
  context:
    cognitive_mode: "critical"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Identify Videos Requiring Audio Description"
      description: |
        Review video inventory to identify content with
        important visual information not conveyed by audio.
      duration_estimate: "45 min"
      commands:
        - purpose: "Find video elements"
          command: "grep -rn '<video' --include='*.html' --include='*.jsx' --include='*.tsx' ."
        - purpose: "Find description tracks"
          command: "grep -rn 'kind=\"descriptions\"' --include='*.html' --include='*.jsx' . | head -20"
      questions:
        - "Does the video contain visual demonstrations?"
        - "Is there on-screen text not spoken?"
        - "Are there visual actions important to understanding?"
        - "Is the audio track alone sufficient to understand the content?"
      expected_findings:
        - "List of videos requiring audio description"
        - "Existing audio description availability"

    - id: "2"
      name: "Check for Alternatives (Transcripts)"
      description: |
        For Level A, either audio description OR a full text
        alternative (transcript with visual descriptions) is acceptable.
      duration_estimate: "30 min"
      commands:
        - purpose: "Find transcript links"
          command: "grep -rn 'transcript' --include='*.html' --include='*.jsx' . | head -20"
      questions:
        - "Do transcripts include descriptions of visual content?"
        - "Are transcripts available for all videos?"
      expected_findings:
        - "Alternative text descriptions"
        - "Transcript quality for visual content"

    - id: "3"
      name: "Evaluate Audio Description Quality"
      description: |
        Review existing audio descriptions for quality,
        timing, and completeness.
      duration_estimate: "60 min"
      questions:
        - "Are all important visual elements described?"
        - "Do descriptions fit into natural pauses?"
        - "Is the description voice distinguishable?"
        - "Is timing appropriate without rushing?"
      expected_findings:
        - "Quality assessment of audio descriptions"
        - "Timing and coverage gaps"

    - id: "4"
      name: "Document Prioritized Needs"
      description: |
        Create prioritized list of videos requiring
        audio description based on impact.
      duration_estimate: "30 min"
      expected_findings:
        - "Prioritized list for audio description creation"
        - "Effort estimates for production"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Video Inventory Analysis"
        - "Audio Description Coverage"
        - "Alternative Coverage (Transcripts)"
        - "Priority List"
        - "Recommendations"

  confidence_guidance:
    high: "Manual review of video content and descriptions"
    medium: "Automated inventory with sample review"
    low: "File-based discovery only"

offline:
  capability: "partial"

  cache_manifest:
    knowledge:
      - source_id: "wcag21-123"
        priority: "required"
      - source_id: "wcag21-125"
        priority: "required"

profiles:
  membership:
    quick:
      included: false
      reason: "Requires comprehensive video content analysis"
    full:
      included: true
      priority: 2
    accessibility:
      included: true
      priority: 1

closeout_checklist:
  - id: "audio-description-001"
    item: "Videos with visual content have audio description or text alternative"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "Review videos with visual content for description availability"
    expected: "Confirmed by reviewer"

  - id: "audio-description-002"
    item: "Audio description does not conflict with dialogue"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Verify description timing fits natural pauses"
    expected: "Confirmed by reviewer"

  - id: "audio-description-003"
    item: "On-screen text is described or spoken"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Check all visible text is accessible via audio"
    expected: "Confirmed by reviewer"

  - id: "audio-description-004"
    item: "User can enable/disable audio description"
    level: "WARNING"
    verification: "manual"
    verification_notes: "Verify toggle control for audio description"
    expected: "Confirmed by reviewer"

governance:
  applicable_to:
    archetypes: ["all"]

  compliance_frameworks:
    - framework: "WCAG 2.1"
      controls: ["1.2.3", "1.2.5", "1.2.7"]
    - framework: "Section 508"
      controls: ["1194.22(b)"]
    - framework: "EN 301 549"
      controls: ["9.1.2.3", "9.1.2.5"]
    - framework: "FCC"
      controls: ["CVAA"]

relationships:
  commonly_combined:
    - "accessibility-inclusion.perceivable-auditory.video-caption"
    - "accessibility-inclusion.perceivable-auditory.audio-transcript"
    - "accessibility-inclusion.perceivable-visual.non-text-content-alt"
