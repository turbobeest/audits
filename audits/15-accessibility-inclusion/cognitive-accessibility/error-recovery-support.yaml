audit:
  id: accessibility-inclusion.cognitive-accessibility.error-recovery-support
  name: Error Prevention and Recovery Support
  version: 1.0.0
  last_updated: '2026-01-19'
  status: active
  category: accessibility-inclusion
  category_number: 15
  subcategory: cognitive-accessibility
  tier: phd
  estimated_duration: 2-3 hours  # median: 2h
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: codebase
  default_profiles:
  - full
  - production
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit evaluates mechanisms for preventing, detecting, and recovering
    from user errors, with particular focus on supporting users with cognitive
    disabilities who may make more mistakes or have difficulty correcting them.

    Based on WCAG 3.3 (Input Assistance) guidelines and COGA design patterns,
    the audit examines:
    - Error prevention through clear instructions and constraints
    - Real-time validation with helpful feedback
    - Error messages that identify the problem and solution
    - Ability to undo or reverse actions
    - Confirmation for consequential actions
    - Review before final submission
    - Preservation of user input on errors
    - Recovery paths from error states
  why_it_matters: |
    Users with cognitive disabilities may:
    - Make more input errors due to attention or memory issues
    - Have difficulty understanding what went wrong
    - Struggle to remember what they entered
    - Feel overwhelmed by multiple errors at once
    - Need more time to review and correct

    Poor error handling causes:
    - Lost work and repeated effort
    - Frustration and abandonment
    - Financial or legal consequences from unnoticed errors
    - Exclusion from services requiring accurate data entry

    Good error support benefits all users, especially in stressful situations
    or when using unfamiliar interfaces.
  when_to_run:
  - When implementing forms
  - After adding transactional features
  - During accessibility audits
  - When user error rates are high
prerequisites:
  required_artifacts:
  - type: running_application
    description: Application with forms and interactive features
  - type: source_code
    description: Form validation and error handling code
  access_requirements:
  - Access to all forms and input features
  - Test accounts for transactions
discovery:
  code_patterns:
  - pattern: error|invalid|validation|required
    type: regex
    scope: source
    purpose: Find error handling code
  - pattern: undo|revert|cancel|back
    type: regex
    scope: source
    purpose: Find undo/revert functionality
  - pattern: confirm|review|submit
    type: regex
    scope: source
    purpose: Find confirmation mechanisms
  - pattern: onblur|onchange|onsubmit
    type: regex
    scope: source
    purpose: Find validation trigger points
  file_patterns:
  - glob: '**/forms/**'
    purpose: Form components
  - glob: '**/validation/**'
    purpose: Validation logic
  - glob: '**/checkout/**'
    purpose: Transactional flows
knowledge_sources:
  specifications:
  - id: wcag-22
    name: WCAG 2.2 Specification
    url: https://www.w3.org/TR/WCAG22/
    offline_cache: true
    priority: recommended
  - id: wcag-3.3
    name: 'WCAG 2.2 Guideline 3.3: Input Assistance'
    url: https://www.w3.org/WAI/WCAG22/Understanding/input-assistance.html
    offline_cache: true
    priority: required
  - id: wcag-3.3.4
    name: 'WCAG 2.2 SC 3.3.4: Error Prevention (Legal, Financial, Data)'
    url: https://www.w3.org/WAI/WCAG22/Understanding/error-prevention-legal-financial-data.html
    offline_cache: true
    priority: required
  - id: coga-error
    name: 'COGA: Help Users Avoid Mistakes'
    url: https://www.w3.org/TR/coga-usable/#help-users-avoid-mistakes
    offline_cache: true
    priority: required
  guides:
  - id: nngroup-errors
    name: 'Nielsen Norman Group: Error Message Guidelines'
    url: https://www.nngroup.com/articles/error-message-guidelines/
    offline_cache: true
  - id: webaim-forms
    name: 'WebAIM: Accessible Form Validation'
    url: https://webaim.org/techniques/formvalidation/
    offline_cache: true
tooling:
  static_analysis:
  - tool: axe-core
    purpose: Check form accessibility
    offline_capable: true
  scripts:
  - id: error-handling-finder
    language: bash
    purpose: Find error handling patterns
    source: inline
    code: |
      #!/bin/bash
      echo "=== Error Message Patterns ==="
      grep -rn --include="*.jsx" --include="*.tsx" --include="*.vue" \
        -i "error\|invalid\|required" . | head -30

      echo ""
      echo "=== Undo/Cancel Patterns ==="
      grep -rn --include="*.jsx" --include="*.tsx" --include="*.vue" \
        -i "undo\|cancel\|revert" . | head -15

      echo ""
      echo "=== Confirmation Dialogs ==="
      grep -rn --include="*.jsx" --include="*.tsx" --include="*.vue" \
        -i "confirm\|are you sure" . | head -15
signals:
  critical:
  - id: A11Y-ERROR-CRIT-001
    signal: Consequential actions have no confirmation
    evidence_indicators:
    - Delete actions execute immediately
    - Financial transactions without review
    - Data submission without preview
    explanation: |
      WCAG 3.3.4 requires that consequential actions (legal, financial,
      data deletion) be reversible, confirmed, or reviewable. Without this,
      users with cognitive disabilities may cause irreversible harm.
    remediation: |
      For consequential actions, implement at least one:
      1. Reversible: Undo/undelete functionality
      2. Checked: Review screen before final submission
      3. Confirmed: "Are you sure?" with clear consequences stated
  - id: A11Y-ERROR-CRIT-002
    signal: Errors not identified to user
    evidence_indicators:
    - Form fails silently
    - Errors shown only in console
    - No visible error indication
    explanation: |
      Users must be notified when errors occur. Silent failures leave users
      confused about whether their action succeeded.
    remediation: |
      Always show visible error feedback:
      - Display error messages near the problem
      - Use ARIA live regions for dynamic errors
      - Provide clear visual indication of error state
      - Announce errors to screen readers
  high:
  - id: A11Y-ERROR-HIGH-001
    signal: Error messages don't explain how to fix
    evidence_indicators:
    - Generic 'Invalid input' messages
    - Error codes without explanation
    - What's wrong stated but not how to fix
    explanation: |
      Per WCAG 3.3.3, error messages should provide suggestions for
      correction when known. Users with cognitive disabilities particularly
      need explicit guidance on how to fix errors.
    remediation: |
      Make error messages actionable:
      - "Email address must include @" not "Invalid email"
      - "Password needs 2 more characters" not "Password too short"
      - Provide examples of valid input where helpful
  - id: A11Y-ERROR-HIGH-002
    signal: User input lost on error
    evidence_indicators:
    - Form clears after validation error
    - Need to re-enter all data after one field fails
    - Navigation away loses unsaved work
    explanation: |
      Losing entered data after an error forces users to start over,
      which is especially frustrating for users who take longer to enter
      data or have memory difficulties.
    remediation: |
      Preserve user input:
      - Keep all valid data on validation errors
      - Only clear the specific invalid field if necessary
      - Use beforeunload warning for unsaved changes
      - Consider auto-save for long forms
  - id: A11Y-ERROR-HIGH-003
    signal: No way to undo destructive actions
    evidence_indicators:
    - Delete is permanent with no recovery
    - No edit after submission
    - Actions cannot be reversed
    explanation: |
      Irreversible actions are particularly problematic for users who may
      click impulsively or not fully understand consequences.
    remediation: |
      Implement undo mechanisms:
      - Soft delete with recovery period
      - Undo button for recent actions
      - Edit capability for submitted data
      - Clear indication of reversibility
  medium:
  - id: A11Y-ERROR-MED-001
    signal: Validation timing is suboptimal
    evidence_indicators:
    - Errors shown only on submit, not inline
    - Aggressive validation while typing
    - No immediate feedback for complex fields
    explanation: |
      Validation timing affects user experience. Only on submit means users
      may have many errors to fix at once. While typing may be distracting.
    remediation: |
      Use appropriate validation timing:
      - Real-time for format (as you type)
      - On blur for field validation
      - Show success indicators for complex requirements
      - Summarize errors on submit for review
  - id: A11Y-ERROR-MED-002
    signal: Error focus management missing
    evidence_indicators:
    - Focus doesn't move to first error on submit
    - Users must scroll to find errors
    - Error summary not linked to fields
    explanation: |
      Users may not notice errors if focus and scroll don't bring them
      into view, especially with many fields or long forms.
    remediation: |
      Implement error focus management:
      - Move focus to first error on submit
      - Scroll error into view
      - If using error summary, link to individual fields
      - Use aria-describedby for inline errors
  low:
  - id: A11Y-ERROR-LOW-001
    signal: Minor error handling improvements possible
    evidence_indicators:
    - Error messages could be clearer
    - Validation could be more helpful
    explanation: |
      Error handling works but could be enhanced for better user experience.
    remediation: |
      Refine based on user feedback and error analytics.
  positive:
  - id: A11Y-ERROR-POS-001
    signal: Comprehensive error prevention and recovery
    evidence_indicators:
    - Clear instructions prevent errors
    - Helpful inline validation
    - Undo available for actions
  - id: A11Y-ERROR-POS-002
    signal: Actionable error messages
    evidence_indicators:
    - Errors explain problem and solution
    - Examples provided for complex formats
    - Focus management implemented
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory forms and transactions
    description: |
      Identify all forms and transactional features that require
      error handling.
    duration_estimate: 20 min
    commands:
    - purpose: Find form components
      command: |
        grep -rln --include="*.jsx" --include="*.tsx" --include="*.vue" \
          '<form\|<Form' . | head -20
    expected_findings:
    - Form and transaction inventory
  - id: '2'
    name: Test error message quality
    description: |
      Trigger validation errors on each form and evaluate error message
      helpfulness.
    duration_estimate: 45 min
    questions:
    - Do error messages identify the specific problem?
    - Do they explain how to fix the error?
    - Are they written in plain language?
    - Is the error visually associated with the field?
    expected_findings:
    - Error message quality assessment
    - Messages needing improvement
  - id: '3'
    name: Test undo and recovery
    description: |
      Check for undo capabilities and recovery from destructive actions.
    duration_estimate: 25 min
    questions:
    - Can delete actions be undone?
    - Can submitted data be edited?
    - Is there warning before permanent actions?
    - Is user data preserved on errors?
    expected_findings:
    - Undo/recovery capabilities
    - Irreversible actions needing attention
  - id: '4'
    name: Test confirmation mechanisms
    description: |
      Verify consequential actions have appropriate confirmation or review.
    duration_estimate: 25 min
    questions:
    - Do financial transactions have review step?
    - Are delete actions confirmed?
    - Can users review data before final submission?
    - Are consequences clearly stated in confirmations?
    expected_findings:
    - Confirmation mechanism assessment
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: error_message_audit
    format: table
    description: All error messages with quality assessment
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Error Message Quality
    - Undo and Recovery
    - Confirmation Mechanisms
    - Recommendations
  confidence_guidance:
    high: All forms tested with multiple error scenarios
    medium: Major forms tested
    low: Sample testing only
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: wcag-3.3
      priority: required
    - source_id: coga-error
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Requires thorough form testing
    full:
      included: true
      priority: 1
    production:
      included: true
      priority: 1
closeout_checklist:
- id: error-001
  item: Consequential actions have confirmation or undo
  level: CRITICAL
  verification: manual
  verification_notes: Test delete, purchase, and submission flows
  expected: Confirmed by reviewer
- id: error-002
  item: All errors displayed to users
  level: CRITICAL
  verification: manual
  verification_notes: Trigger errors on each form and verify display
  expected: Confirmed by reviewer
- id: error-003
  item: Error messages explain how to fix
  level: BLOCKING
  verification: manual
  verification_notes: Review all error messages for actionability
  expected: Confirmed by reviewer
- id: error-004
  item: User input preserved on errors
  level: BLOCKING
  verification: manual
  verification_notes: Verify form data kept after validation errors
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - web-application
    - e-commerce
    - forms-heavy
    - financial
  compliance_frameworks:
  - framework: WCAG 2.2
    controls:
    - 3.3.1
    - 3.3.3
    - 3.3.4
  - framework: COGA
    controls:
    - help-users-avoid-mistakes
relationships:
  commonly_combined:
  - accessibility-inclusion.cognitive-accessibility.clear-language
  - accessibility-inclusion.understandable-predictable.on-input-behavior
  - accessibility-inclusion.robust-compatibility.aria-usage
