audit:
  id: accessibility-inclusion.understandable-predictable.navigation-consistency
  name: Navigation Consistency Across Pages
  version: 1.0.0
  last_updated: '2026-01-19'
  status: active
  category: accessibility-inclusion
  category_number: 15
  subcategory: understandable-predictable
  tier: phd
  estimated_duration: 3-5 hours  # median: 4h
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: codebase
  default_profiles:
  - full
  - production
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit examines navigation mechanisms that appear across multiple pages
    to verify they maintain consistent relative order and placement. Per WCAG
    Success Criterion 3.2.3 (Consistent Navigation), navigational mechanisms
    that are repeated on multiple pages must occur in the same relative order
    each time, unless the user initiates a change.

    The audit evaluates:
    - Primary navigation menus
    - Secondary/utility navigation
    - Breadcrumb trails
    - Footer navigation links
    - Search functionality placement
    - Logo/home link positioning
    - Skip navigation links

    Consistency is evaluated across page types (home, content, category, etc.)
    and across different user states (logged in, logged out, etc.).
  why_it_matters: |
    Consistent navigation is critical for:
    - Users who rely on spatial memory to locate navigation elements
    - Screen reader users who learn the page structure once and expect it
      to remain stable
    - Users with cognitive disabilities who may become confused by
      changing layouts
    - Low-vision users using screen magnification who navigate to
      remembered locations

    Inconsistent navigation forces users to relearn the interface on each
    page, dramatically increasing cognitive load and reducing efficiency.
    For users with disabilities, inconsistent navigation can make sites
    effectively unusable.
  when_to_run:
  - After adding new page templates
  - When modifying navigation components
  - During accessibility compliance reviews
  - After major design system updates
prerequisites:
  required_artifacts:
  - type: source_code
    description: Frontend templates and navigation components
  - type: running_application
    description: Multiple pages available for comparison
  access_requirements:
  - Source code repository access
  - Access to all page templates
  - Multiple user states (if applicable)
discovery:
  code_patterns:
  - pattern: <nav|role=['"]navigation['"]
    type: regex
    scope: source
    purpose: Identify navigation regions
  - pattern: class=['"][^'"]*nav[^'"]*['"]|className=['"][^'"]*nav[^'"]*['"]
    type: regex
    scope: source
    purpose: Identify navigation-related classes
  - pattern: <header|role=['"]banner['"]
    type: regex
    scope: source
    purpose: Identify header regions containing navigation
  - pattern: aria-label=['"][^'"]*navigation[^'"]*['"]
    type: regex
    scope: source
    purpose: Identify labeled navigation regions
  file_patterns:
  - glob: '**/layouts/**'
    purpose: Layout templates defining page structure
  - glob: '**/components/nav*/**'
    purpose: Navigation components
  - glob: '**/components/header*/**'
    purpose: Header components
  - glob: '**/templates/**'
    purpose: Page templates
  - glob: '**/_layout.{tsx,jsx,vue,svelte}'
    purpose: Framework layout files
knowledge_sources:
  specifications:
  - id: wcag-3.2.3
    name: 'WCAG 2.2 Success Criterion 3.2.3: Consistent Navigation'
    url: https://www.w3.org/WAI/WCAG22/Understanding/consistent-navigation.html
    offline_cache: true
    priority: required
  - id: wcag-3.2.4
    name: 'WCAG 2.2 Success Criterion 3.2.4: Consistent Identification'
    url: https://www.w3.org/WAI/WCAG22/Understanding/consistent-identification.html
    offline_cache: true
    priority: recommended
  guides:
  - id: w3c-menu-patterns
    name: 'W3C WAI: Menu and Menubar Pattern'
    url: https://www.w3.org/WAI/ARIA/apg/patterns/menu/
    offline_cache: true
  - id: nngroup-navigation
    name: 'Nielsen Norman Group: Navigation Design'
    url: https://www.nngroup.com/articles/navigation-cognitive-strain/
    offline_cache: true
tooling:
  static_analysis:
  - tool: axe-core
    purpose: Check for navigation landmark usage
    offline_capable: true
  - tool: lighthouse
    purpose: Audit page structure and landmarks
    offline_capable: false
  assessment_tools:
  - tool: Navigation pattern comparison spreadsheet
    purpose: Document navigation element order across pages
  scripts:
  - id: nav-element-finder
    language: bash
    purpose: Find all navigation elements in templates
    source: inline
    code: |
      #!/bin/bash
      echo "=== Navigation Elements ==="
      grep -rn --include="*.html" --include="*.jsx" --include="*.tsx" \
        --include="*.vue" --include="*.svelte" \
        -E "(<nav|role=['\"]navigation['\"]|aria-label=['\"][^'\"]*nav)" .

      echo ""
      echo "=== Header Elements ==="
      grep -rn --include="*.html" --include="*.jsx" --include="*.tsx" \
        --include="*.vue" --include="*.svelte" \
        -E "(<header|role=['\"]banner['\"])" .

      echo ""
      echo "=== Layout Files ==="
      find . -name "*layout*" -type f
signals:
  critical:
  - id: A11Y-NAV-CRIT-001
    signal: Navigation appears in different positions on different pages
    evidence_indicators:
    - Primary nav in header on some pages, sidebar on others
    - Navigation element order varies between templates
    - Search box moves between header and sidebar
    explanation: |
      Navigation mechanisms appear in fundamentally different positions
      across pages, requiring users to search for navigation on each page.
      This completely breaks the predictability that users rely on.
    remediation: |
      Establish a single navigation placement pattern and apply it
      consistently across all page templates. Use a shared layout component
      to ensure consistency.
  high:
  - id: A11Y-NAV-HIGH-001
    signal: Navigation item order changes between pages
    evidence_indicators:
    - Menu items appear in different order on different pages
    - Current section item moved to different position
    - Items reordered based on page context
    explanation: |
      The relative order of navigation items changes between pages. Users
      who learn the navigation order are disrupted when items appear in
      different positions.
    remediation: |
      Maintain consistent item order across all pages. If indicating current
      section, use visual styling rather than reordering. If content-specific
      navigation is needed, add it separately from the main navigation.
  - id: A11Y-NAV-HIGH-002
    signal: Multiple incompatible navigation templates
    evidence_pattern: Multiple distinct nav components without shared base
    explanation: |
      Different page types use completely different navigation templates
      rather than variations of a consistent base, leading to inconsistent
      navigation patterns.
    remediation: |
      Create a shared navigation component that all templates inherit from.
      Allow for conditional items but maintain consistent structure and
      order for the base navigation.
  medium:
  - id: A11Y-NAV-MED-001
    signal: User state changes affect navigation order
    evidence_indicators:
    - Logged-in navigation has different item order than logged-out
    - Admin users see completely restructured navigation
    explanation: |
      Navigation order changes based on user state, requiring users to
      relearn navigation when their state changes.
    remediation: |
      Add or remove items based on user state, but maintain consistent
      order for items that appear in both states. New items should be
      added at consistent positions (e.g., always at the end).
  - id: A11Y-NAV-MED-002
    signal: Breadcrumb placement varies across pages
    evidence_indicators:
    - Breadcrumbs appear above content on some pages, inline on others
    - Breadcrumb format changes between sections
    explanation: |
      Breadcrumb navigation appears in different positions or formats
      across the site, reducing its utility for orientation.
    remediation: |
      Place breadcrumbs in a consistent location on all pages where they
      appear. Use the same format and separator style throughout.
  low:
  - id: A11Y-NAV-LOW-001
    signal: Minor visual differences in navigation across pages
    evidence_indicators:
    - Navigation styling varies slightly between templates
    - Spacing or alignment inconsistencies
    explanation: |
      Navigation has minor visual inconsistencies that don't affect structure
      but may confuse users relying on visual consistency.
    remediation: |
      Use shared CSS/styles for navigation components to ensure visual
      consistency matches structural consistency.
  positive:
  - id: A11Y-NAV-POS-001
    signal: Consistent navigation implemented via shared components
    evidence_indicators:
    - Single navigation component used across all templates
    - Navigation order maintained through component design
  - id: A11Y-NAV-POS-002
    signal: Skip navigation link consistently provided
    evidence_indicators:
    - Skip to content link first focusable element on all pages
    - Skip link targets main content consistently
procedure:
  context:
    cognitive_mode: critical
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory navigation elements
    description: |
      Identify all navigation mechanisms used across the site,
      including primary nav, utility nav, breadcrumbs, and footer nav.
    duration_estimate: 30 min
    commands:
    - purpose: Find navigation elements in templates
      command: |
        grep -rn --include="*.html" --include="*.jsx" --include="*.tsx" \
          --include="*.vue" -E "(<nav|role=['\"]navigation['\"])" .
    - purpose: Find layout files
      command: |
        find . \( find . -name "*layout*" -o -name "*template*" \) | head -50
    expected_findings:
    - Complete inventory of navigation components
    - List of templates using navigation
  - id: '2'
    name: Document navigation order on each template
    description: |
      For each page template, document the order of navigation elements
      and the order of items within each navigation.
    duration_estimate: 45 min
    questions:
    - What is the order of landmark regions (header, nav, main, footer)?
    - What is the order of items in the primary navigation?
    - Where is the search functionality placed?
    - Where are breadcrumbs placed relative to main content?
    expected_findings:
    - Navigation structure documentation for each template
    - Comparison matrix of navigation across templates
  - id: '3'
    name: Compare navigation consistency across pages
    description: |
      Compare the documented navigation patterns to identify any
      inconsistencies in placement or ordering.
    duration_estimate: 30 min
    questions:
    - Are navigation elements in the same relative position on all pages?
    - Are navigation items in the same order on all pages?
    - Do user state changes affect navigation consistency?
    expected_findings:
    - List of consistency issues found
    - Assessment of compliance with WCAG 3.2.3
  - id: '4'
    name: Manual testing across page types
    description: |
      Manually navigate the site to verify navigation consistency,
      particularly testing keyboard navigation and screen reader experience.
    duration_estimate: 45 min
    questions:
    - Can I navigate the site without searching for navigation on each page?
    - Is the tab order through navigation consistent across pages?
    - Are screen reader landmarks and headings consistent?
    expected_findings:
    - User experience assessment of navigation consistency
    - Specific pages with inconsistent navigation
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Navigation Inventory
    - Consistency Analysis
    - Recommendations
  - type: navigation_matrix
    format: table
    description: Comparison of navigation elements across page templates
  confidence_guidance:
    high: All templates analyzed and manual testing confirms findings
    medium: Template analysis complete but limited manual verification
    low: Partial template analysis or inference-based assessment
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: wcag-3.2.3
      priority: required
    - source_id: wcag-3.2.4
      priority: recommended
profiles:
  membership:
    quick:
      included: false
      reason: Requires cross-page analysis and manual verification
    full:
      included: true
      priority: 1
    production:
      included: true
      priority: 1
closeout_checklist:
- id: nav-consistency-001
  item: Single shared navigation component used
  level: CRITICAL
  verification: manual
  verification_notes: Verify that navigation comes from a shared component, not duplicated code
  expected: Confirmed by reviewer
- id: nav-consistency-002
  item: Navigation order consistent across all page templates
  level: CRITICAL
  verification: manual
  verification_notes: Compare navigation element order on at least 5 different page types
  expected: Confirmed by reviewer
- id: nav-consistency-003
  item: Skip navigation link consistently placed
  level: BLOCKING
  verification: manual
  verification_notes: Verify skip link is first focusable element on all pages
  expected: Confirmed by reviewer
- id: nav-consistency-004
  item: User state changes do not disrupt navigation order
  level: BLOCKING
  verification: manual
  verification_notes: Test navigation as logged-in vs logged-out user (if applicable)
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - website
    - web-application
    - spa
    - e-commerce
    - content-site
  compliance_frameworks:
  - framework: WCAG 2.2
    controls:
    - 3.2.3
    - 3.2.4
  - framework: Section 508
    controls:
    - 1194.22(l)
  - framework: EN 301 549
    controls:
    - 9.3.2.3
    - 9.3.2.4
relationships:
  commonly_combined:
  - accessibility-inclusion.understandable-predictable.component-consistency
  - accessibility-inclusion.cognitive-accessibility.consistent-layout
  - accessibility-inclusion.robust-compatibility.aria-usage
