# ============================================================
# AUDIT: Mobile Navigation Assessment
# ============================================================
# Evaluates navigation patterns and implementation for mobile
# and touch-based interfaces.
# ============================================================

audit:
  id: "usability-interaction.mobile-touch.mobile-navigation"

  name: "Mobile Navigation Assessment"

  version: "1.0.0"
  last_updated: "2026-01-19"
  status: "active"

  category: "usability-interaction"
  category_number: 14
  subcategory: "mobile-touch"

  tier: "expert"
  estimated_duration: "2-3 hours"  # median: 2h

  completeness: "complete"
  requires_runtime: true
  destructive: false

# ============================================================
# EXECUTION CLASSIFICATION
# ============================================================

execution:
  automatable: "partial"
  severity: "high"
  scope: "codebase"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

# ============================================================
# DESCRIPTION & RATIONALE
# ============================================================

description:
  what: |
    This audit evaluates mobile navigation patterns including bottom
    navigation, hamburger menus, tab bars, and navigation drawers.
    It assesses reachability, information architecture depth, back
    navigation behavior, and adherence to platform conventions.

  why_it_matters: |
    Navigation is the foundation of mobile user experience. Poor mobile
    navigation leads to user disorientation, inability to find features,
    and app abandonment. Mobile has unique constraints (one-handed use,
    smaller screens) that require different navigation approaches than
    desktop.

  when_to_run:
    - "During mobile app design"
    - "When users report difficulty finding features"
    - "During mobile UX audits"
    - "When adapting web apps for mobile"

# ============================================================
# PREREQUISITES
# ============================================================

prerequisites:
  required_artifacts:
    - type: "source_code"
      description: "Navigation component source code"
    - type: "running_application"
      description: "Access on mobile device"

  access_requirements:
    - "Access to navigation components"
    - "Mobile device for testing"
    - "Information architecture documentation"

# ============================================================
# DISCOVERY SPECIFICATION
# ============================================================

discovery:
  code_patterns:
    - pattern: "nav|Nav|Navigation|navigation"
      type: "keyword"
      scope: "source"
      purpose: "Find navigation components"
    - pattern: "BottomNavigation|TabBar|Drawer"
      type: "keyword"
      scope: "source"
      purpose: "Find mobile navigation patterns"
    - pattern: "hamburger|menu|Menu"
      type: "keyword"
      scope: "source"
      purpose: "Find menu implementations"
    - pattern: "useNavigation|navigate|router"
      type: "keyword"
      scope: "source"
      purpose: "Find navigation logic"

  file_patterns:
    - glob: "**/*nav*"
      purpose: "Find navigation files"
    - glob: "**/*menu*"
      purpose: "Find menu files"
    - glob: "**/layout/**"
      purpose: "Find layout components with navigation"

# ============================================================
# KNOWLEDGE SOURCES
# ============================================================

knowledge_sources:
  guides:
    - id: "nngroup-mobile-nav"
      name: "Nielsen Norman Group - Mobile Navigation"
      url: "https://www.nngroup.com/articles/mobile-navigation/"
      offline_cache: true
    - id: "apple-navigation"
      name: "Apple HIG - Navigation"
      url: "https://developer.apple.com/design/human-interface-guidelines/navigation-bars"
      offline_cache: true
    - id: "material-navigation"
      name: "Material Design - Navigation"
      url: "https://m3.material.io/components/navigation-bar"
      offline_cache: true

# ============================================================
# TOOLING & AUTOMATION
# ============================================================

tooling:
  scripts:
    - id: "navigation-finder"
      language: "bash"
      purpose: "Find navigation patterns"
      source: "inline"
      code: |
        #!/bin/bash
        echo "=== Navigation Components ==="
        grep -rn "Nav\|Navigation\|TabBar\|BottomNavigation" --include="*.jsx" --include="*.tsx" | head -20

        echo "=== Menu Implementations ==="
        grep -rn "hamburger\|Drawer\|SideMenu" --include="*.jsx" --include="*.tsx" | head -15

        echo "=== Navigation Hooks ==="
        grep -rn "useNavigation\|useRouter\|useHistory" --include="*.jsx" --include="*.tsx" | head -15

# ============================================================
# SIGNALS & FINDINGS TAXONOMY
# ============================================================

signals:
  critical:
    - id: "MOBNAV-CRIT-001"
      signal: "No visible navigation on mobile views"
      evidence_pattern: "Navigation hidden or inaccessible on mobile"
      explanation: |
        Users need consistent access to navigation to move around
        the application. Hidden navigation strands users.
      remediation: "Implement visible mobile navigation (bottom nav, tabs, or accessible menu)"
    - id: "MOBNAV-CRIT-002"
      signal: "Back navigation broken or inconsistent"
      evidence_pattern: "Back button behaves unexpectedly or not at all"
      explanation: |
        Back navigation is fundamental to mobile UX. Unexpected
        behavior disorients users and causes frustration.
      remediation: "Ensure consistent, predictable back navigation throughout"

  high:
    - id: "MOBNAV-HIGH-001"
      signal: "Navigation depth exceeds 3 levels"
      evidence_pattern: ">3 tap navigation to reach features"
      explanation: |
        Deep navigation hierarchies cause users to lose orientation
        and make features hard to discover and access.
      remediation: "Flatten navigation; move common features to top-level access"
    - id: "MOBNAV-HIGH-002"
      signal: "Primary navigation requires stretch to reach"
      evidence_pattern: "Main navigation at top requiring thumb stretch"
      explanation: |
        Mobile users often use one hand. Navigation requiring
        stretch to the top of screen reduces usability.
      remediation: "Use bottom navigation or thumb-zone accessible patterns"
    - id: "MOBNAV-HIGH-003"
      signal: "Hamburger menu hides critical navigation"
      evidence_pattern: "Primary features only accessible via hamburger"
      explanation: |
        Hamburger menus have low discoverability. Critical features
        hidden in hamburgers see significantly less usage.
      remediation: "Surface top 3-5 destinations in visible bottom/tab navigation"

  medium:
    - id: "MOBNAV-MED-001"
      signal: "Navigation labels not clear"
      evidence_indicators:
        - "Icon-only navigation without labels"
        - "Ambiguous navigation item names"
      remediation: "Add text labels to navigation items; use clear terminology"
    - id: "MOBNAV-MED-002"
      signal: "Current location not indicated"
      evidence_pattern: "No visual indicator of active navigation state"
      remediation: "Highlight current location in navigation"
    - id: "MOBNAV-MED-003"
      signal: "Inconsistent navigation placement across screens"
      evidence_pattern: "Navigation appears in different positions"
      remediation: "Keep navigation in consistent position throughout"

  low:
    - id: "MOBNAV-LOW-001"
      signal: "Navigation animation could be smoother"
      remediation: "Improve navigation transition animations"
    - id: "MOBNAV-LOW-002"
      signal: "Navigation doesn't respect safe areas"
      remediation: "Account for notches and home indicators"

  positive:
    - id: "MOBNAV-POS-001"
      signal: "Primary features accessible via bottom navigation"
    - id: "MOBNAV-POS-002"
      signal: "Navigation depth 3 levels or less"
    - id: "MOBNAV-POS-003"
      signal: "Clear navigation labels with icons"
    - id: "MOBNAV-POS-004"
      signal: "Consistent back navigation behavior"

# ============================================================
# EXECUTION PROCEDURE
# ============================================================

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Map Navigation Structure"
      description: |
        Document the navigation hierarchy and patterns used
        in the mobile interface.
      duration_estimate: "25 min"
      commands:
        - purpose: "Find navigation components"
          command: "grep -rn 'Nav\\|Navigation\\|TabBar\\|BottomNav' --include='*.jsx' --include='*.tsx' src/"
        - purpose: "Find routes"
          command: "grep -rn 'Route\\|path.*:' --include='*.jsx' --include='*.tsx' --include='*.ts' src/ | head -30"
      expected_findings:
        - "Navigation component locations"
        - "Route/screen inventory"

    - id: "2"
      name: "Evaluate Navigation Placement"
      description: |
        Assess where navigation appears on screen and its
        accessibility for thumb-zone use.
      duration_estimate: "25 min"
      questions:
        - "Where is primary navigation located?"
        - "Is it in thumb-reach zone?"
        - "How many screens use bottom vs top navigation?"
        - "Is placement consistent across screens?"
      expected_findings:
        - "Placement assessment"
        - "Thumb-zone accessibility"

    - id: "3"
      name: "Test Navigation Depth"
      description: |
        Navigate to various features counting taps required
        to reach them.
      duration_estimate: "25 min"
      questions:
        - "How many taps to reach key features?"
        - "What is the deepest navigation level?"
        - "Are common features easily accessible?"
      expected_findings:
        - "Depth measurements"
        - "Feature accessibility"

    - id: "4"
      name: "Test Back Navigation"
      description: |
        Test back navigation behavior throughout the application
        including hardware back button.
      duration_estimate: "25 min"
      questions:
        - "Does back button behave predictably?"
        - "Can users retrace their steps easily?"
        - "Does browser back work correctly?"
        - "Are there any navigation dead-ends?"
      expected_findings:
        - "Back navigation behavior"
        - "Navigation issues"

# ============================================================
# OUTPUT SPECIFICATION
# ============================================================

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Navigation Structure Map"
        - "Placement Assessment"
        - "Depth Analysis"
        - "Back Navigation Review"
        - "Recommendations"

  confidence_guidance:
    high: "Issues verified through code review and device testing"
    medium: "Issues identified through code review or testing alone"
    low: "Potential issues requiring additional testing"

# ============================================================
# OFFLINE SUPPORT
# ============================================================

offline:
  capability: "full"

  cache_manifest:
    knowledge:
      - source_id: "nngroup-mobile-nav"
        priority: "recommended"
      - source_id: "material-navigation"
        priority: "recommended"

# ============================================================
# PROFILES
# ============================================================

profiles:
  membership:
    quick:
      included: false
      reason: "Requires comprehensive navigation testing"
    full:
      included: true
      priority: 1

# ============================================================
# CLOSEOUT CHECKLIST
# ============================================================

closeout_checklist:
  - id: "mobnav-001"
    item: "Primary navigation visible and accessible"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "Main navigation accessible without hidden menus"
    expected: "Confirmed by reviewer"

  - id: "mobnav-002"
    item: "Navigation depth 3 levels or less"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Key features reachable in 3 taps or less"
    expected: "Confirmed by reviewer"

  - id: "mobnav-003"
    item: "Back navigation consistent"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "Back button behaves predictably throughout"
    expected: "Confirmed by reviewer"

# ============================================================
# GOVERNANCE
# ============================================================

governance:
  applicable_to:
    archetypes: ["mobile-application", "responsive-web", "pwa"]

# ============================================================
# RELATIONSHIPS
# ============================================================

relationships:
  commonly_combined:
    - "usability-interaction.mobile-touch.thumb-zone-optimization"
    - "usability-interaction.consistency.interaction-pattern-consistency"
    - "usability-interaction.cognitive-load.visual-hierarchy"
