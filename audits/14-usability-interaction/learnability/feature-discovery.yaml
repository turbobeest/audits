# ============================================================
# AUDIT: Feature Discovery
# ============================================================
# Evaluates how effectively users can discover and learn about
# features beyond the basic/primary functionality.
# ============================================================

audit:
  id: "usability-interaction.learnability.feature-discovery"

  name: "Feature Discovery Audit"

  version: "1.0.0"
  last_updated: "2026-01-19"
  status: "active"

  category: "usability-interaction"
  category_number: 14
  subcategory: "learnability"

  tier: "expert"
  estimated_duration: "3 hours"

  completeness: "complete"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "medium"
  scope: "qualitative"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    This audit examines feature discovery - the mechanisms and patterns
    that help users find and learn about features beyond the most obvious
    primary functionality. It evaluates:

    - Feature visibility and prominence
    - Contextual feature suggestions
    - In-app announcements and highlights
    - What's new communications
    - Feature tours and spotlights
    - Search and help discoverability
    - Cross-feature linking
    - Usage-based feature recommendations

  why_it_matters: |
    Feature discovery directly impacts:
    - Product value realization (users only benefit from features they know)
    - User engagement and retention
    - Upgrade conversion (if features are gated)
    - Support costs (users finding answers themselves)
    - Competitive differentiation (known features vs hidden ones)

    Studies show users typically use only 20-30% of available features,
    often because they never discover the rest.

  when_to_run:
    - "Feature adoption analysis"
    - "Product engagement optimization"
    - "New feature launches"
    - "User research indicating low feature awareness"
    - "Quarterly product health reviews"

prerequisites:
  required_artifacts:
    - type: "application"
      description: "Running application with full feature access"
    - type: "feature_inventory"
      description: "Complete list of product features"

  access_requirements:
    - "Full feature access (admin/premium if applicable)"
    - "Feature analytics data"
    - "New user account capability"

discovery:
  code_patterns:
    - pattern: "(feature.?tour|spotlight|highlight|coachmark)"
      type: "regex"
      scope: "source"
      purpose: "Identify feature tour mechanisms"
    - pattern: "(what'?s?.?new|announcement|release.?notes)"
      type: "regex"
      scope: "source"
      purpose: "Find announcement components"
    - pattern: "(tip|hint|pro.?tip|did.?you.?know)"
      type: "regex"
      scope: "source"
      purpose: "Locate discovery hints"

  file_patterns:
    - glob: "**/components/**/*tour*"
      purpose: "Find tour components"
    - glob: "**/components/**/*spotlight*"
      purpose: "Locate spotlight features"
    - glob: "**/announcements/**"
      purpose: "Find announcement system"

  interviews:
    - role: "Active users"
      questions:
        - "What features do you use most?"
        - "What features did you discover recently?"
        - "How did you learn about features beyond the basics?"
        - "Are there features you wish you'd known about sooner?"
      purpose: "Understand real discovery patterns"
    - role: "Product managers"
      questions:
        - "Which features have low adoption?"
        - "What discovery mechanisms are in place?"
        - "How are new features announced?"
      purpose: "Understand discovery strategy and gaps"

knowledge_sources:
  guides:
    - id: "nngroup-feature-discovery"
      name: "Feature Discoverability"
      url: "https://www.nngroup.com/articles/feature-discoverability/"
      offline_cache: true
    - id: "appcues-feature-adoption"
      name: "Feature Adoption Strategies"
      url: "https://www.appcues.com/blog/feature-adoption"
      offline_cache: true
    - id: "pendo-feature-discovery"
      name: "Product Feature Discovery"
      url: "https://www.pendo.io/glossary/feature-discovery/"
      offline_cache: true

  learning_resources:
    - id: "hooked"
      title: "Hooked: How to Build Habit-Forming Products"
      type: "book"
      reference: "Nir Eyal, ISBN 978-1591847786"

tooling:
  assessment_tools:
    - tool: "Feature adoption analytics"
      purpose: "Measure feature usage rates"
    - tool: "User journey analysis"
      purpose: "Map feature discovery paths"
    - tool: "Heat mapping"
      purpose: "Identify where users look and click"

  scripts:
    - id: "feature-visibility-audit"
      language: "python"
      purpose: "Assess feature visibility scoring"
      source: "inline"
      code: |
        import json

        visibility_criteria = {
            "primary_nav": 5,    # In main navigation
            "secondary_nav": 4,  # In submenu
            "contextual": 3,     # Shown in context
            "search_only": 2,    # Only via search
            "hidden": 1          # No discovery path
        }

        print(json.dumps(visibility_criteria, indent=2))

signals:
  critical:
    - id: "DISC-CRIT-001"
      signal: "Core features have no visible entry point"
      evidence_indicators:
        - "Features only accessible via direct URL or keyboard shortcut"
        - "No menu item, button, or link to feature"
        - "Usage data shows feature at <1% adoption"
      explanation: |
        Features with no visible entry point will never be discovered
        organically, wasting development investment.
      remediation: "Add visible navigation or contextual entry points"

    - id: "DISC-CRIT-002"
      signal: "New features launched with no announcement or guidance"
      evidence_indicators:
        - "Features added silently"
        - "No in-app notification of new capabilities"
        - "Users unaware of recent additions"
      explanation: |
        Features launched without communication will be discovered
        slowly if at all, delaying value realization.
      remediation: "Implement in-app announcements for new features"

  high:
    - id: "DISC-HIGH-001"
      signal: "Feature adoption rate below 10% despite relevance"
      explanation: |
        Low adoption of relevant features indicates discovery problems
        rather than feature value problems.
      remediation: "Analyze discovery path; add contextual prompts"

    - id: "DISC-HIGH-002"
      signal: "No contextual feature suggestions based on user activity"
      explanation: |
        Missing contextual suggestions means users won't learn about
        features at the moment they'd be most useful.
      remediation: "Implement activity-based feature recommendations"

    - id: "DISC-HIGH-003"
      signal: "Help documentation not searchable from within the app"
      explanation: |
        If users can't search for help from within the app, they must
        leave to find answers, disrupting their workflow.
      remediation: "Integrate searchable help within the application"

  medium:
    - id: "DISC-MED-001"
      signal: "Feature tours are one-time only with no replay option"
      remediation: "Allow users to replay tours from help/settings"

    - id: "DISC-MED-002"
      signal: "What's new notifications are easily dismissed and lost"
      remediation: "Provide persistent access to release notes/updates"

    - id: "DISC-MED-003"
      signal: "Related features not cross-linked"
      remediation: "Add contextual links between related features"

  low:
    - id: "DISC-LOW-001"
      signal: "Pro tips/hints appear too frequently and become noise"

  positive:
    - id: "DISC-POS-001"
      signal: "Contextual feature suggestions at relevant moments"
    - id: "DISC-POS-002"
      signal: "Searchable help integrated within application"
    - id: "DISC-POS-003"
      signal: "Progressive feature revelation as users advance"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Feature Inventory and Visibility Mapping"
      description: |
        Create complete inventory of features and map their
        visibility/discovery paths.
      duration_estimate: "45 min"
      questions:
        - "What features exist in the product?"
        - "How is each feature accessed?"
        - "What is the visibility level of each?"
      expected_findings:
        - "Complete feature inventory"
        - "Visibility scores per feature"

    - id: "2"
      name: "Discovery Mechanism Audit"
      description: |
        Evaluate all feature discovery mechanisms including
        navigation, tours, announcements, and suggestions.
      duration_estimate: "30 min"
      questions:
        - "What discovery mechanisms exist?"
        - "Are they implemented consistently?"
        - "Do they cover all features?"
      expected_findings:
        - "Discovery mechanism inventory"
        - "Coverage gaps identified"

    - id: "3"
      name: "New User Discovery Path Testing"
      description: |
        Test the application as a new user to understand the
        natural feature discovery journey.
      duration_estimate: "30 min"
      questions:
        - "What features does a new user discover naturally?"
        - "What remains hidden?"
        - "How long until key features are discovered?"
      expected_findings:
        - "New user discovery path map"
        - "Hidden feature identification"

    - id: "4"
      name: "Contextual Suggestion Evaluation"
      description: |
        Assess whether features are suggested at contextually
        appropriate moments.
      duration_estimate: "25 min"
      questions:
        - "Are features suggested when relevant?"
        - "Do suggestions feel helpful or intrusive?"
        - "Is timing appropriate?"
      expected_findings:
        - "Contextual suggestion quality"
        - "Timing appropriateness"

    - id: "5"
      name: "Adoption Correlation Analysis"
      description: |
        Correlate feature adoption data with discovery mechanisms
        to identify what works.
      duration_estimate: "30 min"
      questions:
        - "Which features have highest adoption?"
        - "What discovery paths lead to adoption?"
        - "What patterns correlate with low discovery?"
      expected_findings:
        - "Discovery-adoption correlation"
        - "Effective patterns identified"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Feature Visibility Matrix"
        - "Discovery Mechanism Analysis"
        - "Adoption Analysis"
        - "Key Findings"
        - "Recommendations"

  confidence_guidance:
    high: "Analytics data confirms finding; multiple observations"
    medium: "Heuristic evaluation identifies issue"
    low: "Potential issue based on pattern analysis"

offline:
  capability: "partial"

  cache_manifest:
    knowledge:
      - source_id: "nngroup-feature-discovery"
        priority: "required"

profiles:
  membership:
    quick:
      included: false
      reason: "Requires comprehensive feature and analytics analysis"
    full:
      included: true
      priority: 1

closeout_checklist:
  - id: "disc-001"
    item: "Feature inventory with visibility scores completed"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "All features mapped with discovery paths"
    expected: "Confirmed by reviewer"

  - id: "disc-002"
    item: "Discovery mechanisms documented"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "All discovery mechanisms identified and evaluated"
    expected: "Confirmed by reviewer"

  - id: "disc-003"
    item: "Adoption correlation analyzed"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Feature adoption linked to discovery paths"
    expected: "Confirmed by reviewer"

governance:
  applicable_to:
    archetypes: ["all"]

relationships:
  commonly_combined:
    - "usability-interaction.learnability.progressive-disclosure"
    - "usability-interaction.learnability.onboarding-flow"
    - "usability-interaction.navigation.search-functionality"
