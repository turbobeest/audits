# ============================================================
# AUDIT: Search Functionality
# ============================================================
# Evaluates the search feature's usability, effectiveness,
# and user experience.
# ============================================================

audit:
  id: "usability-interaction.navigation.search-functionality"

  name: "Search Functionality Audit"

  version: "1.0.0"
  last_updated: "2026-01-19"
  status: "active"

  category: "usability-interaction"
  category_number: 14
  subcategory: "navigation"

  tier: "expert"
  estimated_duration: "3 hours"

  completeness: "complete"
  requires_runtime: true
  destructive: false

execution:
  automatable: "partial"
  severity: "high"
  scope: "qualitative"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

description:
  what: |
    This audit examines search functionality as a navigation mechanism,
    evaluating how effectively users can find content through search.
    It covers:

    - Search discoverability and accessibility
    - Query input experience
    - Search results quality and relevance
    - Results presentation and filtering
    - No-results handling
    - Search suggestions and autocomplete
    - Advanced search capabilities
    - Search performance

  why_it_matters: |
    Search is a critical navigation tool, especially for:
    - Content-rich applications
    - E-commerce platforms
    - Documentation sites
    - Data-heavy interfaces

    Studies show 30-50% of users are "search-dominant" and rely primarily
    on search for navigation. Poor search drives users away.

  when_to_run:
    - "Search feature audit"
    - "Content discoverability review"
    - "User complaints about finding content"
    - "Search analytics showing poor metrics"
    - "Search redesign planning"

prerequisites:
  required_artifacts:
    - type: "application"
      description: "Running application with search functionality"
    - type: "content_corpus"
      description: "Sufficient content for meaningful search testing"

  access_requirements:
    - "Full application access"
    - "Various search query test cases"

discovery:
  code_patterns:
    - pattern: "(search|query|find|lookup)"
      type: "regex"
      scope: "source"
      purpose: "Identify search implementations"
    - pattern: "(filter|facet|sort|refine)"
      type: "regex"
      scope: "source"
      purpose: "Find search refinement features"

  file_patterns:
    - glob: "**/search/**"
      purpose: "Find search components"
    - glob: "**/components/**/*search*"
      purpose: "Locate search-related UI"

  interviews:
    - role: "Users"
      questions:
        - "How often do you use search?"
        - "Does search usually find what you're looking for?"
        - "What frustrates you about search?"
      purpose: "Understand search experience"

knowledge_sources:
  guides:
    - id: "nngroup-search"
      name: "Search UX"
      url: "https://www.nngroup.com/articles/search-navigation/"
      offline_cache: true
    - id: "baymard-search"
      name: "E-Commerce Search UX"
      url: "https://baymard.com/blog/ecommerce-search-design"
      offline_cache: true
    - id: "algolia-search-ux"
      name: "Search UX Best Practices"
      url: "https://www.algolia.com/blog/ux/search-ux-best-practices/"
      offline_cache: true

tooling:
  assessment_tools:
    - tool: "Search query test suite"
      purpose: "Systematic search testing"
    - tool: "Relevance scoring"
      purpose: "Measure result quality"
    - tool: "Performance profiler"
      purpose: "Measure search latency"

signals:
  critical:
    - id: "SEARCH-CRIT-001"
      signal: "Search returns no results for content that exists"
      evidence_indicators:
        - "Exact matches return no results"
        - "Common terms fail to find related content"
        - "Search index appears incomplete"
      explanation: |
        If search cannot find content that exists, it fails its
        fundamental purpose and users lose trust in the feature.
      remediation: "Audit search indexing; ensure all content is searchable"

    - id: "SEARCH-CRIT-002"
      signal: "Search feature not discoverable or hidden"
      evidence_indicators:
        - "No visible search input"
        - "Search buried in menus"
        - "Search icon unlabeled and unclear"
      explanation: |
        Search must be prominent and discoverable for users who
        prefer search-based navigation.
      remediation: "Make search prominently visible; use standard search icon and patterns"

  high:
    - id: "SEARCH-HIGH-001"
      signal: "Search results poorly ranked by relevance"
      explanation: |
        When the best matches aren't at the top, users must sift
        through irrelevant results, wasting time and effort.
      remediation: "Improve relevance algorithm; weight title and key field matches"

    - id: "SEARCH-HIGH-002"
      signal: "No search suggestions or autocomplete"
      explanation: |
        Suggestions help users form effective queries and discover
        content they might not have found otherwise.
      remediation: "Implement search suggestions and autocomplete"

    - id: "SEARCH-HIGH-003"
      signal: "Search takes more than 2 seconds"
      explanation: |
        Slow search frustrates users and may cause abandonment
        before results even appear.
      remediation: "Optimize search performance; consider caching or indexing"

  medium:
    - id: "SEARCH-MED-001"
      signal: "No-results page unhelpful"
      remediation: "Provide suggestions, similar queries, or alternative actions"

    - id: "SEARCH-MED-002"
      signal: "No filtering or sorting of results"
      remediation: "Add facets, filters, and sort options for results"

    - id: "SEARCH-MED-003"
      signal: "Search doesn't handle typos or misspellings"
      remediation: "Implement fuzzy matching or 'did you mean' suggestions"

  low:
    - id: "SEARCH-LOW-001"
      signal: "Search result previews could be more informative"

  positive:
    - id: "SEARCH-POS-001"
      signal: "Highly relevant results with clear presentation"
    - id: "SEARCH-POS-002"
      signal: "Effective autocomplete and suggestions"
    - id: "SEARCH-POS-003"
      signal: "Powerful filtering and refinement options"

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Search Discoverability Assessment"
      description: |
        Evaluate how easily users can find and access the search
        feature across the application.
      duration_estimate: "20 min"
      questions:
        - "Is search visible on all pages?"
        - "Is the search input clearly labeled?"
        - "Can search be accessed via keyboard shortcut?"
      expected_findings:
        - "Discoverability score"
        - "Access issues identified"

    - id: "2"
      name: "Query Experience Testing"
      description: |
        Test the search input experience including autocomplete,
        suggestions, and query handling.
      duration_estimate: "30 min"
      questions:
        - "Does autocomplete work effectively?"
        - "Are suggestions relevant?"
        - "How are typos handled?"
      expected_findings:
        - "Query experience assessment"
        - "Input issues identified"

    - id: "3"
      name: "Result Relevance Testing"
      description: |
        Execute a variety of test queries and evaluate the
        relevance of returned results.
      duration_estimate: "45 min"
      questions:
        - "Do exact matches appear first?"
        - "Are partial matches reasonable?"
        - "Is ranking appropriate?"
      expected_findings:
        - "Relevance score by query type"
        - "Ranking issues identified"

    - id: "4"
      name: "Results Interface Evaluation"
      description: |
        Assess the search results page design, including result
        presentation, filtering, and pagination.
      duration_estimate: "30 min"
      questions:
        - "Are results clearly presented?"
        - "Is filtering available?"
        - "Is pagination appropriate?"
      expected_findings:
        - "Results UI assessment"
        - "Presentation issues"

    - id: "5"
      name: "Edge Case and Error Testing"
      description: |
        Test search behavior with edge cases including no results,
        very long queries, and special characters.
      duration_estimate: "25 min"
      questions:
        - "How are no-results handled?"
        - "Do special characters break search?"
        - "Are very long queries handled?"
      expected_findings:
        - "Edge case handling"
        - "Error behavior assessment"

    - id: "6"
      name: "Performance Testing"
      description: |
        Measure search response times across various query types
        and result set sizes.
      duration_estimate: "20 min"
      questions:
        - "What is typical search latency?"
        - "Does performance degrade with complex queries?"
        - "Are results progressively loaded?"
      expected_findings:
        - "Performance metrics"
        - "Latency issues"

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Discoverability Assessment"
        - "Relevance Analysis"
        - "Performance Evaluation"
        - "Recommendations"

  confidence_guidance:
    high: "Systematic testing across query types confirms finding"
    medium: "Sample testing indicates issue"
    low: "Potential issue based on limited testing"

offline:
  capability: "partial"

  cache_manifest:
    knowledge:
      - source_id: "nngroup-search"
        priority: "required"

profiles:
  membership:
    quick:
      included: false
      reason: "Requires comprehensive search testing"
    full:
      included: true
      priority: 1

closeout_checklist:
  - id: "search-001"
    item: "Search discoverability verified"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "Search accessible from all pages"
    expected: "Confirmed by reviewer"

  - id: "search-002"
    item: "Relevance testing completed"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "Multiple query types tested for relevance"
    expected: "Confirmed by reviewer"

  - id: "search-003"
    item: "Performance measured"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Search latency within acceptable limits"
    expected: "Confirmed by reviewer"

governance:
  applicable_to:
    archetypes: ["all"]

  compliance_frameworks:
    - framework: "WCAG"
      controls: ["2.4.5"]

relationships:
  commonly_combined:
    - "usability-interaction.navigation.navigation-structure"
    - "usability-interaction.efficiency.auto-complete-suggestion"
    - "usability-interaction.learnability.empty-state-design"
