audit:
  id: usability-interaction.navigation.back-button-behavior
  name: Back Button Behavior Audit
  version: 1.0.0
  last_updated: '2026-01-19'
  status: active
  category: usability-interaction
  category_number: 14
  subcategory: navigation
  tier: expert
  estimated_duration: 1.5 hours
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: qualitative
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit examines browser back button behavior and how the
    application manages browser history. It evaluates:

    - Back button navigates to expected previous state
    - History entries for logical navigation points
    - Modal and overlay history handling
    - Form and wizard back navigation
    - Multi-step process history management
    - Mobile back gesture behavior
    - State restoration on back navigation
  why_it_matters: |
    The back button is one of the most used browser controls:
    - Users rely on it as a "mental undo" button
    - Broken back behavior causes confusion and frustration
    - Unexpected loops or traps feel hostile
    - Mobile users especially depend on back gestures

    Applications that break back button expectations violate a
    fundamental web convention and create poor user experience.
  when_to_run:
  - Navigation behavior review
  - SPA architecture assessment
  - Modal/overlay implementation review
  - User complaints about back button
  - Multi-step flow design
prerequisites:
  required_artifacts:
  - type: application
    description: Running application for navigation testing
  access_requirements:
  - Full application access
  - Browser with history controls
  - Mobile device or emulator
discovery:
  code_patterns:
  - pattern: (history|pushState|replaceState|popstate)
    type: regex
    scope: source
    purpose: Identify history API usage
  - pattern: (back|goBack|navigate.-1)
    type: regex
    scope: source
    purpose: Find back navigation implementations
  - pattern: (beforeunload|onbeforeunload)
    type: regex
    scope: source
    purpose: Locate navigation guards
  file_patterns:
  - glob: '**/router/**'
    purpose: Find router configuration
  - glob: '**/navigation/**'
    purpose: Locate navigation handlers
knowledge_sources:
  guides:
  - id: nngroup-back-button
    name: Back Button Expectations
    url: https://www.nngroup.com/articles/back-button-expectations/
    offline_cache: true
  - id: web-dev-spa-back
    name: SPA Back Button Handling
    url: https://web.dev/articles/spa-history
    offline_cache: true
tooling:
  assessment_tools:
  - tool: Browser history inspector
    purpose: Examine history stack
  - tool: Navigation flow documentation
    purpose: Map expected back behavior
signals:
  critical:
  - id: BACK-CRIT-001
    signal: Back button creates infinite loop
    evidence_indicators:
    - Back repeatedly returns to same page
    - User trapped between two states
    - Cannot escape current view with back
    explanation: |
      Infinite loops trap users and create hostile UX. This often
      happens with redirects or improper history management.
    remediation: Use replaceState for redirects; audit history manipulation
  - id: BACK-CRIT-002
    signal: Back button navigates to completely wrong location
    evidence_indicators:
    - Back skips expected pages
    - Back goes to unrelated content
    - History order doesn't match navigation
    explanation: |
      When back goes somewhere unexpected, users lose their
      mental model of where they've been.
    remediation: Review history management; ensure logical history entries
  high:
  - id: BACK-HIGH-001
    signal: Modals/overlays don't respond to back button
    explanation: |
      Users expect back to close modals, especially on mobile.
      Ignoring back for overlays breaks expectations.
    remediation: Add history entries for modals; close on back
  - id: BACK-HIGH-002
    signal: Multi-step forms lose data on back
    explanation: |
      When users navigate back in a form, they expect their
      data to be preserved.
    remediation: Preserve form state; warn before losing data
  - id: BACK-HIGH-003
    signal: Every state change creates history entry
    explanation: |
      Creating too many history entries makes back navigation
      tedious as users must click many times.
    remediation: Only create entries for meaningful navigation; use replaceState
  medium:
  - id: BACK-MED-001
    signal: Tab changes create unexpected history entries
    remediation: Consider whether tabs should affect history
  - id: BACK-MED-002
    signal: Filter/sort changes create excessive history
    remediation: Use replaceState for transient state changes
  - id: BACK-MED-003
    signal: No warning when back would lose unsaved changes
    remediation: Add beforeunload warning for unsaved data
  low:
  - id: BACK-LOW-001
    signal: Scroll position not restored on back
  positive:
  - id: BACK-POS-001
    signal: Back behavior matches user expectations throughout
  - id: BACK-POS-002
    signal: Modals properly integrated with history
  - id: BACK-POS-003
    signal: Form state preserved during back navigation
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Basic Navigation Back Testing
    description: |
      Navigate through main application flows and test back
      button behavior at each step.
    duration_estimate: 25 min
    questions:
    - Does back go to the previous page?
    - Is state preserved when going back?
    - Are there any loops or traps?
    expected_findings:
    - Basic back behavior assessment
    - Navigation issues identified
  - id: '2'
    name: Modal and Overlay Testing
    description: |
      Test back button behavior with modals, dialogs, drawers,
      and overlay elements.
    duration_estimate: 20 min
    questions:
    - Does back close modals?
    - Are modal history entries appropriate?
    - What happens with nested modals?
    expected_findings:
    - Modal back behavior
    - Overlay handling issues
  - id: '3'
    name: Multi-Step Flow Testing
    description: |
      Test back navigation within wizards, forms, and
      multi-step processes.
    duration_estimate: 20 min
    questions:
    - Can users navigate back through steps?
    - Is form data preserved?
    - Are there appropriate warnings?
    expected_findings:
    - Multi-step back behavior
    - Data preservation issues
  - id: '4'
    name: History Stack Analysis
    description: |
      Examine the browser history stack to understand
      entry creation patterns.
    duration_estimate: 15 min
    questions:
    - How many entries are created?
    - Are entries at logical navigation points?
    - Is replaceState used appropriately?
    expected_findings:
    - History management assessment
    - Excessive entry issues
  - id: '5'
    name: Mobile Back Gesture Testing
    description: |
      Test back gesture/button behavior on mobile devices
      or emulators.
    duration_estimate: 15 min
    questions:
    - Does mobile back work correctly?
    - Are gestures handled properly?
    - Is behavior consistent with desktop?
    expected_findings:
    - Mobile back assessment
    - Mobile-specific issues
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Navigation Flow Assessment
    - Modal Handling Analysis
    - History Management Review
    - Recommendations
  confidence_guidance:
    high: Direct testing confirms finding across flows
    medium: Sample testing indicates issue
    low: Potential issue based on limited testing
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: nngroup-back-button
      priority: required
profiles:
  membership:
    quick:
      included: true
      priority: 2
    full:
      included: true
      priority: 1
closeout_checklist:
- id: back-001
  item: Basic back navigation tested
  level: CRITICAL
  verification: manual
  verification_notes: Main flows tested for back behavior
  expected: Confirmed by reviewer
- id: back-002
  item: No infinite loops identified
  level: CRITICAL
  verification: manual
  verification_notes: No navigation traps found
  expected: Confirmed by reviewer
- id: back-003
  item: Modal behavior verified
  level: BLOCKING
  verification: manual
  verification_notes: Modals respond appropriately to back
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - all
relationships:
  commonly_combined:
  - usability-interaction.navigation.deep-linking
  - usability-interaction.navigation.navigation-structure
  - usability-interaction.feedback-response.confirmation-dialog
