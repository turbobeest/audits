audit:
  id: usability-interaction.forms-input.validation-message
  name: Validation Message Assessment
  version: 1.0.0
  last_updated: '2026-01-19'
  status: active
  category: usability-interaction
  category_number: 14
  subcategory: forms-input
  tier: phd
  estimated_duration: 2-3 hours  # median: 2h
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: codebase
  default_profiles:
  - full
  - quick
  blocks_phase: false
  parallelizable: true
description:
  what: |
    This audit examines form validation messages for clarity, helpfulness,
    and accessibility. It evaluates error message content, timing (inline
    vs on-submit), visual presentation, and association with form fields.
    The goal is to ensure users can quickly understand and correct errors.
  why_it_matters: |
    Poor validation messages are a leading cause of form abandonment. Users
    who encounter vague errors like "Invalid input" have no guidance on how
    to fix the problem. Good validation messages improve completion rates,
    reduce support requests, and are essential for accessibility compliance.
  when_to_run:
  - During form design and development
  - When form completion rates are below target
  - After receiving user complaints about form errors
  - During accessibility audits
prerequisites:
  required_artifacts:
  - type: source_code
    description: Form validation logic and error display components
  - type: running_application
    description: Access to test validation behavior
  access_requirements:
  - Access to form validation source code
  - Ability to trigger validation errors in the application
  - Screen reader for accessibility testing
discovery:
  code_patterns:
  - pattern: error|Error|invalid|Invalid
    type: keyword
    scope: source
    purpose: Find error message definitions
  - pattern: setError|addError|showError
    type: regex
    scope: source
    purpose: Find error setting logic
  - pattern: aria-invalid|aria-errormessage|aria-describedby
    type: regex
    scope: source
    purpose: Find accessibility attributes for errors
  - pattern: required.*message|validation.*message
    type: regex
    scope: source
    purpose: Find validation message configurations
  file_patterns:
  - glob: '**/*validation*'
    purpose: Find validation-related files
  - glob: '**/*error*'
    purpose: Find error handling components
  - glob: '**/i18n/**/*error*'
    purpose: Find translated error messages
knowledge_sources:
  specifications:
  - id: wcag-error-identification
    name: WCAG 2.2 - Error Identification (3.3.1)
    url: https://www.w3.org/WAI/WCAG22/Understanding/error-identification
    offline_cache: true
    priority: required
  - id: wcag-error-suggestion
    name: WCAG 2.2 - Error Suggestion (3.3.3)
    url: https://www.w3.org/WAI/WCAG22/Understanding/error-suggestion
    offline_cache: true
    priority: required
  guides:
  - id: nngroup-errors
    name: Nielsen Norman Group - Error Message Guidelines
    url: https://www.nngroup.com/articles/error-message-guidelines/
    offline_cache: true
  - id: w3c-form-validation
    name: W3C - Form Validation
    url: https://www.w3.org/WAI/tutorials/forms/validation/
    offline_cache: true
tooling:
  static_analysis:
  - tool: axe-core
    purpose: Check error message accessibility
    offline_capable: true
  scripts:
  - id: validation-message-finder
    language: bash
    purpose: Find and analyze validation message patterns
    source: inline
    code: |
      #!/bin/bash
      echo "=== Validation Message Patterns ==="
      grep -rn "message.*['\"].*invalid\|error.*['\"]" --include="*.js" --include="*.ts" --include="*.jsx" --include="*.tsx" | head -20

      echo "=== Generic Error Messages ==="
      grep -rni "invalid input\|invalid value\|error occurred\|something went wrong" --include="*.js" --include="*.ts" --include="*.json" | head -10
signals:
  critical:
  - id: VALIDATION-CRIT-001
    signal: Validation errors not programmatically associated with fields
    evidence_pattern: Error messages without aria-describedby or aria-errormessage association
    explanation: |
      Screen reader users cannot determine which field has an error if
      errors are not programmatically associated. This is a WCAG failure.
    remediation: Use aria-describedby to associate error messages with their fields
  - id: VALIDATION-CRIT-002
    signal: Errors only indicated by color
    evidence_pattern: Red border or text without icon, text, or other indicator
    explanation: |
      Users with color blindness cannot perceive color-only error indicators.
      This is a WCAG Level A failure (1.4.1 Use of Color).
    remediation: Add text, icons, or other non-color indicators alongside color changes
  high:
  - id: VALIDATION-HIGH-001
    signal: Generic, unhelpful error messages
    evidence_indicators:
    - Messages like 'Invalid input' without specifics
    - Messages like 'Error' or 'Something went wrong'
    - Technical error codes shown to users
    explanation: |
      Generic messages give users no guidance on how to fix the error,
      leading to frustration and form abandonment.
    remediation: Provide specific messages explaining what's wrong and how to fix it
  - id: VALIDATION-HIGH-002
    signal: Errors only shown after full form submission
    evidence_pattern: No inline validation; all errors shown in list at top
    explanation: |
      Users must scroll to find errors and mentally map them to fields.
      Inline validation provides immediate feedback at the point of error.
    remediation: Implement inline validation that shows errors adjacent to fields
  - id: VALIDATION-HIGH-003
    signal: Error messages disappear too quickly
    evidence_pattern: Timeout-based error dismissal under 5 seconds
    explanation: |
      Users may not have time to read and understand errors before they
      disappear, especially users with cognitive disabilities.
    remediation: Keep errors visible until the user corrects the field or dismisses manually
  medium:
  - id: VALIDATION-MED-001
    signal: Error message tone is negative or blaming
    evidence_indicators:
    - Messages like 'You failed to...' or 'You must...'
    - Error messages in ALL CAPS
    - Use of exclamation points in errors
    remediation: 'Use neutral, helpful tone: ''Please enter a valid email address'''
  - id: VALIDATION-MED-002
    signal: No positive validation feedback
    evidence_pattern: Only errors shown, no success indicators
    remediation: Add checkmarks or success colors for correctly filled fields
  - id: VALIDATION-MED-003
    signal: Format requirements not shown until error
    evidence_pattern: Format hints only appear in error messages
    remediation: Show format requirements upfront in helper text
  low:
  - id: VALIDATION-LOW-001
    signal: Inconsistent error message styling
    remediation: Standardize error message appearance across all forms
  - id: VALIDATION-LOW-002
    signal: Error messages could be more concise
    remediation: Trim verbose error messages while maintaining clarity
  positive:
  - id: VALIDATION-POS-001
    signal: Clear, specific error messages that explain how to fix issues
  - id: VALIDATION-POS-002
    signal: Inline validation with immediate feedback
  - id: VALIDATION-POS-003
    signal: Errors properly associated with fields for screen readers
  - id: VALIDATION-POS-004
    signal: Positive feedback for valid inputs
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Validation Messages
    description: |
      Search the codebase to find all validation messages and
      understand the validation patterns in use.
    duration_estimate: 25 min
    commands:
    - purpose: Find error message definitions
      command: grep -rn 'message.*error\|error.*message' --include='*.js' --include='*.ts' --include='*.json'
        src/
    - purpose: Find validation libraries in use
      command: grep -rn 'yup\|zod\|joi\|formik\|react-hook-form' package.json src/
    expected_findings:
    - Validation library in use
    - Error message definition locations
  - id: '2'
    name: Evaluate Message Quality
    description: |
      Review error message content for clarity, specificity,
      and helpfulness.
    duration_estimate: 30 min
    questions:
    - Do messages explain what is wrong?
    - Do messages explain how to fix the error?
    - Is the tone neutral and helpful?
    - Are messages specific to each validation rule?
    expected_findings:
    - Quality assessment of message content
    - Generic or unhelpful messages
  - id: '3'
    name: Test Validation Timing
    description: |
      Test forms to observe when validation occurs and how
      errors are displayed.
    duration_estimate: 25 min
    questions:
    - Does validation occur on blur, on change, or on submit?
    - Are errors displayed inline next to fields?
    - How long do error messages persist?
    - Is there positive feedback for valid input?
    expected_findings:
    - Validation timing patterns
    - Display mechanisms
  - id: '4'
    name: Screen Reader Testing
    description: |
      Test error messages with a screen reader to verify
      they are properly announced.
    duration_estimate: 20 min
    questions:
    - Are errors announced when they appear?
    - Can users understand which field has an error?
    - Is the error summary announced for multiple errors?
    expected_findings:
    - Screen reader accessibility of errors
    - Missing ARIA associations
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Message Quality Analysis
    - Validation Timing Assessment
    - Accessibility Compliance
    - Recommendations
  confidence_guidance:
    high: Issues verified through code review, functional testing, and screen reader testing
    medium: Issues identified through code review and functional testing
    low: Potential issues based on pattern matching only
offline:
  capability: full
  cache_manifest:
    knowledge:
    - source_id: wcag-error-identification
      priority: required
    - source_id: wcag-error-suggestion
      priority: required
profiles:
  membership:
    quick:
      included: true
      priority: 1
    full:
      included: true
      priority: 1
closeout_checklist:
- id: validation-001
  item: All error messages are associated with fields
  level: CRITICAL
  verification: manual
  verification_notes: Verify aria-describedby or aria-errormessage links errors to fields
  expected: Confirmed by reviewer
- id: validation-002
  item: Errors use multiple indicators (not color alone)
  level: CRITICAL
  verification: manual
  verification_notes: Verify errors have text/icon in addition to color
  expected: Confirmed by reviewer
- id: validation-003
  item: Error messages are specific and actionable
  level: BLOCKING
  verification: manual
  verification_notes: Review error messages for clarity and actionability
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - web-application
    - mobile-application
    - saas
  compliance_frameworks:
  - framework: WCAG
    controls:
    - 1.4.1
    - 3.3.1
    - 3.3.3
    - 4.1.3
relationships:
  commonly_combined:
  - usability-interaction.forms-input.field-label-clarity
  - usability-interaction.error-prevention.error-message-clarity
  - usability-interaction.error-prevention.recovery-path
