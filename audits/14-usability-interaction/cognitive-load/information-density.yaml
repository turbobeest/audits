# ============================================================
# AUDIT: Information Density Assessment
# ============================================================
# Evaluates the balance of information displayed to users,
# avoiding both overload and excessive sparsity.
# ============================================================

audit:
  id: "usability-interaction.cognitive-load.information-density"

  name: "Information Density Assessment"

  version: "1.0.0"
  last_updated: "2026-01-19"
  status: "active"

  category: "usability-interaction"
  category_number: 14
  subcategory: "cognitive-load"

  tier: "expert"
  estimated_duration: "2-3 hours"  # median: 2h

  completeness: "complete"
  requires_runtime: true
  destructive: false

# ============================================================
# EXECUTION CLASSIFICATION
# ============================================================

execution:
  automatable: "partial"
  severity: "medium"
  scope: "codebase"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

# ============================================================
# DESCRIPTION & RATIONALE
# ============================================================

description:
  what: |
    This audit evaluates information density across the application
    interface. It examines whether screens present an appropriate amount
    of information - not so much that users are overwhelmed, and not so
    little that users must navigate excessively to find what they need.

  why_it_matters: |
    Information density directly impacts usability. High density leads to
    cognitive overload, slower task completion, and increased errors.
    Excessive sparsity wastes space and forces users through unnecessary
    navigation. The optimal density varies by user expertise and task
    complexity.

  when_to_run:
    - "During UI design review"
    - "When users report confusion or overwhelming interfaces"
    - "When designing for different user expertise levels"
    - "During dashboard or data display design"

# ============================================================
# PREREQUISITES
# ============================================================

prerequisites:
  required_artifacts:
    - type: "source_code"
      description: "UI component source code"
    - type: "running_application"
      description: "Access to view all screens"

  access_requirements:
    - "Access to UI components"
    - "Understanding of user expertise levels"
    - "Knowledge of task workflows"

# ============================================================
# DISCOVERY SPECIFICATION
# ============================================================

discovery:
  code_patterns:
    - pattern: "dashboard|Dashboard"
      type: "keyword"
      scope: "source"
      purpose: "Find high-density dashboard screens"
    - pattern: "grid|Grid|flex|Flex"
      type: "keyword"
      scope: "source"
      purpose: "Find layout patterns"
    - pattern: "table|Table|list|List"
      type: "keyword"
      scope: "source"
      purpose: "Find data display components"

  file_patterns:
    - glob: "**/*dashboard*"
      purpose: "Find dashboard components"
    - glob: "**/*list*"
      purpose: "Find list views"
    - glob: "**/*overview*"
      purpose: "Find overview screens"

# ============================================================
# KNOWLEDGE SOURCES
# ============================================================

knowledge_sources:
  specifications:
    - id: "miller-law"
      name: "Miller's Law (7 plus/minus 2)"
      url: "https://lawsofux.com/millers-law/"
      offline_cache: true
      priority: "required"

  guides:
    - id: "nngroup-info-density"
      name: "Nielsen Norman Group - Information Density"
      url: "https://www.nngroup.com/articles/minimize-cognitive-load/"
      offline_cache: true
    - id: "tufte-data"
      name: "Edward Tufte - Data Ink Ratio"
      url: "https://infovis-wiki.net/wiki/Data-Ink_Ratio"
      offline_cache: true

  learning_resources:
    - id: "tufte-book"
      title: "The Visual Display of Quantitative Information"
      type: "book"
      reference: "Edward Tufte, Graphics Press"

# ============================================================
# TOOLING & AUTOMATION
# ============================================================

tooling:
  scripts:
    - id: "density-finder"
      language: "bash"
      purpose: "Find high-density layouts"
      source: "inline"
      code: |
        #!/bin/bash
        echo "=== Dashboard Components ==="
        grep -rn "dashboard\|Dashboard" --include="*.jsx" --include="*.tsx" | head -15

        echo "=== Table/Grid Components ==="
        grep -rn "Table\|DataGrid\|AgGrid" --include="*.jsx" --include="*.tsx" | head -15

        echo "=== Card Layouts ==="
        grep -rn "Card\|Panel\|Widget" --include="*.jsx" --include="*.tsx" | head -15

# ============================================================
# SIGNALS & FINDINGS TAXONOMY
# ============================================================

signals:
  critical:
    - id: "DENSITY-CRIT-001"
      signal: "Screen displays so much information users cannot identify what's important"
      evidence_indicators:
        - "No visual hierarchy"
        - "Excessive elements competing for attention"
        - "Critical information lost in noise"
      explanation: |
        When everything is highlighted, nothing is. Users experiencing
        information overload will miss important content and make errors.
      remediation: "Establish clear visual hierarchy; remove or hide non-essential information"

  high:
    - id: "DENSITY-HIGH-001"
      signal: "Dashboard exceeds Miller's Law limits"
      evidence_pattern: "Dashboard with >9 primary widgets or data points"
      explanation: |
        Miller's Law suggests working memory holds 7+/-2 items.
        Dashboards exceeding this overwhelm users' ability to process.
      remediation: "Limit primary dashboard elements to 5-9; use progressive disclosure for more"
    - id: "DENSITY-HIGH-002"
      signal: "Table displays too many columns without prioritization"
      evidence_pattern: "Table with >10 columns visible by default"
      explanation: |
        Many columns forces horizontal scrolling and makes it hard
        to focus on important data.
      remediation: "Show most important columns by default; allow customization"
    - id: "DENSITY-HIGH-003"
      signal: "Form shows all fields when progressive disclosure would help"
      evidence_pattern: "Long form showing all 20+ fields at once"
      explanation: |
        Long visible forms are intimidating and increase perceived
        effort to complete.
      remediation: "Use progressive disclosure, sections, or multi-step flow"

  medium:
    - id: "DENSITY-MED-001"
      signal: "Excessive whitespace wastes screen real estate"
      evidence_pattern: "Important content requires excessive scrolling due to whitespace"
      remediation: "Balance whitespace with efficient use of space"
    - id: "DENSITY-MED-002"
      signal: "No density customization for power users"
      evidence_pattern: "Expert users cannot increase density"
      remediation: "Consider density modes (compact, comfortable, default)"
    - id: "DENSITY-MED-003"
      signal: "Mobile density same as desktop"
      evidence_pattern: "Desktop density maintained on smaller screens"
      remediation: "Reduce density appropriately for mobile context"

  low:
    - id: "DENSITY-LOW-001"
      signal: "Minor density inconsistencies between similar screens"
      remediation: "Standardize density patterns across similar views"
    - id: "DENSITY-LOW-002"
      signal: "Data display could be more efficient"
      remediation: "Consider sparklines, indicators, or summary statistics"

  positive:
    - id: "DENSITY-POS-001"
      signal: "Clear visual hierarchy guides attention"
    - id: "DENSITY-POS-002"
      signal: "Progressive disclosure reveals detail when needed"
    - id: "DENSITY-POS-003"
      signal: "Density appropriate for target user expertise"
    - id: "DENSITY-POS-004"
      signal: "Dashboard follows Miller's Law guidelines"

# ============================================================
# EXECUTION PROCEDURE
# ============================================================

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Identify High-Density Screens"
      description: |
        Locate screens with potentially high information density
        including dashboards, reports, and data tables.
      duration_estimate: "20 min"
      commands:
        - purpose: "Find dashboard components"
          command: "grep -rn 'dashboard\\|Dashboard' --include='*.jsx' --include='*.tsx' src/"
        - purpose: "Find table components"
          command: "grep -rn 'Table\\|DataGrid' --include='*.jsx' --include='*.tsx' src/"
      expected_findings:
        - "High-density screen inventory"
        - "Data display patterns"

    - id: "2"
      name: "Count Primary Elements"
      description: |
        For each high-density screen, count primary elements
        and compare against cognitive limits.
      duration_estimate: "30 min"
      questions:
        - "How many primary widgets on dashboards?"
        - "How many columns in default table views?"
        - "How many items in navigation menus?"
        - "How many actions on toolbars?"
      expected_findings:
        - "Element counts per screen"
        - "Miller's Law compliance"

    - id: "3"
      name: "Evaluate Visual Hierarchy"
      description: |
        Assess whether visual hierarchy effectively guides
        attention to important information.
      duration_estimate: "25 min"
      questions:
        - "Can users identify the most important information quickly?"
        - "Is there clear primary/secondary/tertiary hierarchy?"
        - "Do competing elements fight for attention?"
      expected_findings:
        - "Hierarchy effectiveness"
        - "Attention competition"

    - id: "4"
      name: "Assess Progressive Disclosure"
      description: |
        Evaluate use of progressive disclosure to manage
        information density.
      duration_estimate: "25 min"
      questions:
        - "Is detail hidden until needed?"
        - "Can users drill down for more information?"
        - "Are expanded views appropriately detailed?"
      expected_findings:
        - "Progressive disclosure usage"
        - "Expansion patterns"

# ============================================================
# OUTPUT SPECIFICATION
# ============================================================

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Density Analysis by Screen"
        - "Visual Hierarchy Assessment"
        - "Progressive Disclosure Review"
        - "Recommendations"

  confidence_guidance:
    high: "Issues verified through element counting and user task analysis"
    medium: "Issues identified through visual inspection"
    low: "Potential issues requiring user research"

# ============================================================
# OFFLINE SUPPORT
# ============================================================

offline:
  capability: "full"

  cache_manifest:
    knowledge:
      - source_id: "miller-law"
        priority: "required"

# ============================================================
# PROFILES
# ============================================================

profiles:
  membership:
    quick:
      included: false
      reason: "Requires detailed screen-by-screen analysis"
    full:
      included: true
      priority: 2

# ============================================================
# CLOSEOUT CHECKLIST
# ============================================================

closeout_checklist:
  - id: "density-001"
    item: "High-density screens identified"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Dashboards, tables, and data-heavy screens cataloged"
    expected: "Confirmed by reviewer"

  - id: "density-002"
    item: "Miller's Law compliance assessed"
    level: "WARNING"
    verification: "manual"
    verification_notes: "Primary elements counted against 7+/-2 guideline"
    expected: "Confirmed by reviewer"

  - id: "density-003"
    item: "Visual hierarchy evaluated"
    level: "BLOCKING"
    verification: "manual"
    verification_notes: "Clear hierarchy guides user attention"
    expected: "Confirmed by reviewer"

# ============================================================
# GOVERNANCE
# ============================================================

governance:
  applicable_to:
    archetypes: ["web-application", "data-dashboard", "saas"]

# ============================================================
# RELATIONSHIPS
# ============================================================

relationships:
  commonly_combined:
    - "usability-interaction.cognitive-load.visual-hierarchy"
    - "usability-interaction.cognitive-load.choice-overload"
    - "usability-interaction.cognitive-load.grouping-chunking"
