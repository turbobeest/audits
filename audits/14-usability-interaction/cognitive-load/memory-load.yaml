# ============================================================
# AUDIT: Memory Load Assessment
# ============================================================
# Evaluates whether the interface minimizes memory demands by
# recognizing over recalling and providing visual cues.
# ============================================================

audit:
  id: "usability-interaction.cognitive-load.memory-load"

  name: "Memory Load Assessment"

  version: "1.0.0"
  last_updated: "2026-01-19"
  status: "active"

  category: "usability-interaction"
  category_number: 14
  subcategory: "cognitive-load"

  tier: "expert"
  estimated_duration: "2-3 hours"  # median: 2h

  completeness: "complete"
  requires_runtime: true
  destructive: false

# ============================================================
# EXECUTION CLASSIFICATION
# ============================================================

execution:
  automatable: "partial"
  severity: "medium"
  scope: "codebase"

  default_profiles:
    - "full"

  blocks_phase: false
  parallelizable: true

# ============================================================
# DESCRIPTION & RATIONALE
# ============================================================

description:
  what: |
    This audit evaluates whether the interface minimizes demands on
    user memory. Based on Nielsen's "Recognition rather than recall"
    heuristic, it examines whether users can recognize options rather
    than remember them, whether context is maintained across screens,
    and whether visual cues reduce memory requirements.

  why_it_matters: |
    Human working memory is limited. Interfaces that require users to
    remember information from one screen to another, recall syntax or
    codes, or keep multiple things in mind simultaneously create friction
    and errors. Good design externalizes memory through visible cues,
    context preservation, and recognition-based interaction.

  when_to_run:
    - "During multi-step workflow design"
    - "When users report confusion across screens"
    - "During search and selection interface design"
    - "When designing code-entry or ID-based features"

# ============================================================
# PREREQUISITES
# ============================================================

prerequisites:
  required_artifacts:
    - type: "source_code"
      description: "UI component source code"
    - type: "running_application"
      description: "Access to test workflows"

  access_requirements:
    - "Access to multi-step workflows"
    - "Understanding of user tasks"

# ============================================================
# DISCOVERY SPECIFICATION
# ============================================================

discovery:
  code_patterns:
    - pattern: "autocomplete|Autocomplete|suggestions"
      type: "keyword"
      scope: "source"
      purpose: "Find recognition aids"
    - pattern: "recent|Recent|history|History"
      type: "keyword"
      scope: "source"
      purpose: "Find history features"
    - pattern: "breadcrumb|Breadcrumb|context"
      type: "keyword"
      scope: "source"
      purpose: "Find context indicators"
    - pattern: "placeholder|hint|example"
      type: "keyword"
      scope: "source"
      purpose: "Find memory aids"

  file_patterns:
    - glob: "**/*search*"
      purpose: "Find search components"
    - glob: "**/*autocomplete*"
      purpose: "Find autocomplete components"
    - glob: "**/*breadcrumb*"
      purpose: "Find breadcrumb components"

# ============================================================
# KNOWLEDGE SOURCES
# ============================================================

knowledge_sources:
  specifications:
    - id: "nielsen-recognition"
      name: "Nielsen's Recognition over Recall Heuristic"
      url: "https://www.nngroup.com/articles/recognition-and-recall/"
      offline_cache: true
      priority: "required"

  guides:
    - id: "nngroup-memory"
      name: "Nielsen Norman Group - Short-Term Memory"
      url: "https://www.nngroup.com/articles/short-term-memory-and-web-usability/"
      offline_cache: true

  learning_resources:
    - id: "don-norman"
      title: "The Design of Everyday Things"
      type: "book"
      reference: "Don Norman, Basic Books"

# ============================================================
# TOOLING & AUTOMATION
# ============================================================

tooling:
  scripts:
    - id: "memory-aid-finder"
      language: "bash"
      purpose: "Find memory aid patterns"
      source: "inline"
      code: |
        #!/bin/bash
        echo "=== Autocomplete/Suggestions ==="
        grep -rn "autocomplete\|Autocomplete\|suggestion" --include="*.jsx" --include="*.tsx" | head -15

        echo "=== Recent/History Features ==="
        grep -rn "recent\|Recent\|history\|History" --include="*.jsx" --include="*.tsx" | head -15

        echo "=== Breadcrumbs ==="
        grep -rn "breadcrumb\|Breadcrumb" --include="*.jsx" --include="*.tsx" | head -10

        echo "=== Example/Placeholder Text ==="
        grep -rn "placeholder.*example\|example\|hint" --include="*.jsx" --include="*.tsx" | head -15

# ============================================================
# SIGNALS & FINDINGS TAXONOMY
# ============================================================

signals:
  critical:
    - id: "MEMORY-CRIT-001"
      signal: "Users must remember information across screens"
      evidence_indicators:
        - "Multi-step flow loses context from previous steps"
        - "Selected item info not carried forward"
        - "User must memorize code/ID to use elsewhere"
      explanation: |
        Requiring users to hold information in memory across
        screens causes errors and frustration.
      remediation: "Display selection context throughout flow; persist relevant information"

  high:
    - id: "MEMORY-HIGH-001"
      signal: "No recent items or history for repeated selections"
      evidence_pattern: "Frequently used selections require full search each time"
      explanation: |
        Users shouldn't have to remember and re-enter information
        they've selected before.
      remediation: "Add recent/frequent items to selection interfaces"
    - id: "MEMORY-HIGH-002"
      signal: "Text input where selection would work"
      evidence_pattern: "Free text entry for values from a known set"
      explanation: |
        Free text entry requires recall; selection interfaces
        support recognition.
      remediation: "Use dropdown, autocomplete, or picker for known value sets"
    - id: "MEMORY-HIGH-003"
      signal: "Code or ID entry without lookup"
      evidence_pattern: "User must enter ID/code from memory"
      explanation: |
        Arbitrary codes cannot be recalled reliably. Users need
        lookup mechanisms to find the right code.
      remediation: "Provide search/lookup for codes; show recent codes"

  medium:
    - id: "MEMORY-MED-001"
      signal: "No breadcrumbs for deep navigation"
      evidence_pattern: "Multi-level navigation without path indicator"
      remediation: "Add breadcrumbs to show current location in hierarchy"
    - id: "MEMORY-MED-002"
      signal: "Form doesn't show previously entered values"
      evidence_pattern: "Return to form shows blank rather than saved values"
      remediation: "Pre-fill forms with previously saved or entered values"
    - id: "MEMORY-MED-003"
      signal: "No format examples for expected input"
      evidence_pattern: "Field expects specific format without showing example"
      remediation: "Show format examples in placeholder or helper text"

  low:
    - id: "MEMORY-LOW-001"
      signal: "Tooltips could reduce memory load"
      remediation: "Add tooltips to explain less common features"
    - id: "MEMORY-LOW-002"
      signal: "Icons without labels require memorization"
      remediation: "Add labels to icons or provide tooltips"

  positive:
    - id: "MEMORY-POS-001"
      signal: "Recent/frequent items available for selection"
    - id: "MEMORY-POS-002"
      signal: "Autocomplete reduces typing and recall"
    - id: "MEMORY-POS-003"
      signal: "Context maintained across multi-step flows"
    - id: "MEMORY-POS-004"
      signal: "Format examples provided for input fields"

# ============================================================
# EXECUTION PROCEDURE
# ============================================================

procedure:
  context:
    cognitive_mode: "evaluative"
    ensemble_role: "auditor"

  steps:
    - id: "1"
      name: "Identify Memory-Dependent Features"
      description: |
        Map features that potentially require users to hold
        information in memory.
      duration_estimate: "25 min"
      questions:
        - "Which features involve multi-step selection?"
        - "Where do users enter codes or IDs?"
        - "Which inputs expect specific formats?"
        - "Where is context needed from previous actions?"
      expected_findings:
        - "Memory-dependent feature list"
        - "Risk areas"

    - id: "2"
      name: "Evaluate Recognition Aids"
      description: |
        Search for and evaluate recognition aids like autocomplete,
        recent items, and suggestions.
      duration_estimate: "25 min"
      commands:
        - purpose: "Find autocomplete"
          command: "grep -rn 'autocomplete\\|Autocomplete' --include='*.jsx' --include='*.tsx' src/"
        - purpose: "Find recent/history"
          command: "grep -rn 'recent\\|Recent\\|history' --include='*.jsx' --include='*.tsx' src/"
      expected_findings:
        - "Recognition aid coverage"
        - "Missing aids"

    - id: "3"
      name: "Test Multi-Step Flows"
      description: |
        Walk through multi-step workflows to evaluate context
        preservation.
      duration_estimate: "30 min"
      questions:
        - "Is selected item info visible throughout flow?"
        - "Can users see previous step choices?"
        - "What happens if user navigates back?"
      expected_findings:
        - "Context preservation assessment"
        - "Memory-dependent steps"

    - id: "4"
      name: "Review Input Fields"
      description: |
        Check input fields for memory aids like examples,
        autocomplete, and pre-fill.
      duration_estimate: "20 min"
      questions:
        - "Do formatted fields show examples?"
        - "Is autocomplete available where appropriate?"
        - "Are forms pre-filled with known values?"
      expected_findings:
        - "Input field memory support"
        - "Missing aids"

# ============================================================
# OUTPUT SPECIFICATION
# ============================================================

output:
  deliverables:
    - type: "finding_list"
      format: "structured"

    - type: "summary"
      format: "prose"
      sections:
        - "Executive Summary"
        - "Memory-Dependent Features"
        - "Recognition Aid Assessment"
        - "Multi-Step Flow Review"
        - "Input Field Analysis"
        - "Recommendations"

  confidence_guidance:
    high: "Issues verified through workflow testing"
    medium: "Issues identified through code review"
    low: "Potential issues requiring user observation"

# ============================================================
# OFFLINE SUPPORT
# ============================================================

offline:
  capability: "full"

  cache_manifest:
    knowledge:
      - source_id: "nielsen-recognition"
        priority: "required"

# ============================================================
# PROFILES
# ============================================================

profiles:
  membership:
    quick:
      included: false
      reason: "Requires workflow analysis"
    full:
      included: true
      priority: 2

# ============================================================
# CLOSEOUT CHECKLIST
# ============================================================

closeout_checklist:
  - id: "memory-001"
    item: "Multi-step flows preserve context"
    level: "CRITICAL"
    verification: "manual"
    verification_notes: "Selection info visible throughout workflows"
    expected: "Confirmed by reviewer"

  - id: "memory-002"
    item: "Recent/frequent items available"
    level: "WARNING"
    verification: "manual"
    verification_notes: "Common selections offer recent items"
    expected: "Confirmed by reviewer"

  - id: "memory-003"
    item: "Format examples provided"
    level: "WARNING"
    verification: "manual"
    verification_notes: "Fields with formats show examples"
    expected: "Confirmed by reviewer"

# ============================================================
# GOVERNANCE
# ============================================================

governance:
  applicable_to:
    archetypes: ["web-application", "workflow-application", "saas"]

# ============================================================
# RELATIONSHIPS
# ============================================================

relationships:
  commonly_combined:
    - "usability-interaction.forms-input.field-label-clarity"
    - "usability-interaction.forms-input.multi-step-form-flow"
    - "usability-interaction.cognitive-load.choice-overload"
