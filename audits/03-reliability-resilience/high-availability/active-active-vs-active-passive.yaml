audit:
  id: reliability-resilience.high-availability.active-active-vs-active-passive
  name: Active-Active vs Active-Passive Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: reliability-resilience
  category_number: 3
  subcategory: high-availability
  tier: expert
  estimated_duration: 3 hours
  completeness: complete
  requires_runtime: true
  destructive: false
execution:
  automatable: partial
  severity: high
  scope: architecture
  default_profiles:
  - full
  - production
  blocks_phase: false
  parallelizable: true
description:
  what: |
    Evaluates the high availability architecture pattern in use, whether
    active-active (all nodes serve traffic) or active-passive (standby
    nodes await failover). Examines the appropriateness of the chosen
    pattern for the workload, data consistency requirements, failover
    mechanisms, and operational complexity.
  why_it_matters: |
    The choice between active-active and active-passive significantly
    impacts availability, capacity utilization, cost, and operational
    complexity. Active-active provides instant failover and better
    resource utilization but requires careful conflict resolution.
    Active-passive is simpler but wastes standby resources and has
    failover delays. Choosing the wrong pattern leads to unnecessary
    costs or availability gaps.
  when_to_run:
  - During architecture design decisions
  - When evaluating HA strategy effectiveness
  - After failover incidents or near-misses
  - When planning geographic expansion
prerequisites:
  required_artifacts:
  - type: architecture
    description: System architecture documentation
  - type: infrastructure
    description: Current deployment configuration
  access_requirements:
  - Architecture documentation
  - Infrastructure access for verification
  - Access to monitoring dashboards
discovery:
  documents_to_review:
  - type: Architecture diagrams
    purpose: Understand HA topology
  - type: Runbooks
    purpose: Understand failover procedures
  metrics_queries:
  - system: Any monitoring
    query: Traffic distribution across replicas/regions
    purpose: Verify active-active or confirm standby is passive
    threshold: For active-active, all nodes should serve traffic
  file_patterns:
  - glob: '**/*.md'
    purpose: Documentation files
  - glob: '**/*.yaml'
    purpose: Configuration files
  - glob: '**/*.json'
    purpose: JSON configuration
knowledge_sources:
  guides:
  - id: ha-patterns
    name: High Availability Patterns
    url: https://docs.aws.amazon.com/whitepapers/latest/real-time-communication-on-aws/high-availability-and-scalability-on-aws.html
    offline_cache: true
  - id: release-it
    name: Michael Nygard - Release It!
    url: https://pragprog.com/titles/mnee2/release-it-second-edition/
    offline_cache: true
  - id: sre-book
    name: Site Reliability Engineering
    url: https://sre.google/sre-book/table-of-contents/
    offline_cache: true
  learning_resources:
  - id: designing-data-intensive
    title: Designing Data-Intensive Applications
    type: book
    reference: O'Reilly Media, 2017 - Chapter 5
tooling:
  monitoring_queries:
  - system: Load balancer metrics
    query: Request count per target
    purpose: Verify traffic distribution
  infrastructure_tools:
  - tool: dns
    purpose: Check DNS routing configuration
    command: dig +short example.com
signals:
  critical:
  - id: HA-AA-CRIT-001
    signal: Active-active without conflict resolution strategy
    evidence_indicators:
    - Multiple writable replicas
    - No conflict resolution documented
    explanation: |
      Active-active with writes to multiple regions without conflict
      resolution leads to data corruption and inconsistency.
    remediation: Implement conflict resolution (last-writer-wins, CRDT, application-level)
  - id: HA-AA-CRIT-002
    signal: Active-passive standby never tested
    evidence_indicators:
    - No failover drills conducted
    - Standby configuration diverged from primary
    explanation: |
      Untested standbys may fail when needed, providing false confidence
      in disaster recovery capability.
    remediation: Conduct regular failover drills and verify standby readiness
  high:
  - id: HA-AA-HIGH-001
    signal: Active-passive with manual failover only
    explanation: Manual failover increases RTO and requires human availability
    remediation: Implement automated failover with proper health checking
  - id: HA-AA-HIGH-002
    signal: Standby lagging significantly behind primary
    explanation: Large replication lag means data loss during failover
    remediation: Monitor replication lag and optimize for minimal delay
  medium:
  - id: HA-AA-MED-001
    signal: Active-active capacity not sufficient for full load on single region
    remediation: Ensure each region can handle full traffic load during failover
  - id: HA-AA-MED-002
    signal: Failover criteria not clearly defined
    remediation: Document specific conditions that trigger failover
  low:
  - id: HA-AA-LOW-001
    signal: Cost comparison of patterns not evaluated
  positive:
  - id: HA-AA-POS-001
    signal: Regular failover testing with documented results
  - id: HA-AA-POS-002
    signal: Traffic routing allows gradual regional failover
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Identify Current HA Pattern
    description: |
      Determine whether the architecture uses active-active or
      active-passive patterns for various components.
    duration_estimate: 30 min
    questions:
    - Are all replicas/regions actively serving traffic?
    - Is there a designated primary and standby?
    - How is traffic routed between nodes/regions?
    expected_findings:
    - HA pattern classification
    - Traffic routing mechanism
  - id: '2'
    name: Evaluate Pattern Appropriateness
    description: |
      Assess whether the chosen pattern fits the workload characteristics.
    duration_estimate: 45 min
    questions:
    - What are the data consistency requirements?
    - What is the acceptable RTO/RPO?
    - What is the traffic pattern and geographic distribution?
    expected_findings:
    - Pattern suitability assessment
    - Trade-off analysis
  - id: '3'
    name: Review Failover Mechanism
    description: |
      Examine failover triggers, automation, and procedures.
    duration_estimate: 45 min
    questions:
    - What triggers failover?
    - Is failover automated or manual?
    - How long does failover take?
    expected_findings:
    - Failover mechanism details
    - RTO estimation
  - id: '4'
    name: Verify Operational Readiness
    description: |
      Review failover testing history and standby health monitoring.
    duration_estimate: 30 min
    questions:
    - When was the last failover drill?
    - Is standby health continuously monitored?
    - Are runbooks up to date?
    expected_findings:
    - Failover drill history
    - Standby monitoring status
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - HA Pattern Assessment
    - Failover Capability Review
    - Recommendations
  confidence_guidance:
    high: Full architecture review with failover verification
    medium: Architecture and configuration review
    low: Documentation review only
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: ha-patterns
      priority: required
profiles:
  membership:
    quick:
      included: false
      reason: Requires comprehensive architecture analysis
    full:
      included: true
      priority: 1
closeout_checklist:
- id: active-pattern-001
  item: HA pattern clearly documented and appropriate for workload
  level: CRITICAL
  verification: manual
  verification_notes: Verify architecture documentation matches implementation
  expected: Confirmed by reviewer
- id: active-pattern-002
  item: Failover mechanism tested within last quarter
  level: CRITICAL
  verification: manual
  verification_notes: Review failover drill records
  expected: Confirmed by reviewer
- id: active-pattern-003
  item: Conflict resolution strategy defined for active-active
  level: BLOCKING
  verification: manual
  verification_notes: Review conflict resolution approach if using active-active writes
  expected: Confirmed by reviewer or N/A for active-passive
governance:
  applicable_to:
    archetypes:
    - all
relationships:
  commonly_combined:
  - reliability-resilience.high-availability.multi-az-multi-region-deployment
  - reliability-resilience.disaster-recovery.failover-automation
