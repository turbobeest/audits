audit:
  id: reliability-resilience.resilience-testing.recovery-automation
  name: Recovery Automation Audit
  version: 1.0.0
  last_updated: '2026-01-18'
  status: active
  category: reliability-resilience
  category_number: 3
  subcategory: resilience-testing
  tier: phd
  estimated_duration: 4 hours
  completeness: requires_discovery
  requires_runtime: true
  destructive: true
execution:
  automatable: partial
  severity: high
  scope: infrastructure
  default_profiles:
  - full
  - production
  blocks_phase: false
  parallelizable: false
description:
  what: |
    This audit assesses the automation of recovery procedures following
    failures, including self-healing mechanisms, automated remediation,
    and recovery playbook automation. It validates that recovery is tested
    through chaos experiments and that recovery time meets objectives.
  why_it_matters: |
    Manual recovery procedures are slow and error-prone, especially during
    high-stress incidents. Automated recovery reduces MTTR, minimizes human
    error, and enables systems to recover even when operators are unavailable.
    Organizations with mature recovery automation recover from incidents
    significantly faster than those relying on manual intervention.
  when_to_run:
  - After implementing new recovery automation
  - Quarterly resilience review
  - Following incidents with slow recovery
  - When RTO requirements change
prerequisites:
  required_artifacts:
  - type: recovery-runbooks
    description: Documented recovery procedures
  - type: automation-scripts
    description: Recovery automation implementations
  - type: rto-requirements
    description: Recovery time objectives for services
  access_requirements:
  - Read access to recovery automation code
  - Access to incident management system
  - Read access to chaos experiment results
  - Access to monitoring and alerting systems
discovery:
  code_patterns:
  - pattern: self.*heal|auto.*recover|remediat
    type: regex
    scope: source
    purpose: Identify self-healing mechanisms
  - pattern: restart|rollback|failover|switchover
    type: keyword
    scope: config
    purpose: Identify recovery actions
  - pattern: recovery|restore|heal
    type: keyword
    scope: config
    purpose: Find recovery configurations
  file_patterns:
  - glob: '**/runbooks/**/*.yaml'
    purpose: Automated runbook definitions
  - glob: '**/recovery/**/*'
    purpose: Recovery automation scripts
  - glob: '**/remediation/**/*'
    purpose: Remediation automation
  - glob: '**/operators/**/*'
    purpose: Kubernetes operators with self-healing
  metrics_queries:
  - system: Prometheus
    query: histogram_quantile(0.99, rate(recovery_duration_seconds_bucket[7d]))
    purpose: Measure actual recovery times
    threshold: Below RTO for each service tier
knowledge_sources:
  specifications:
  - id: sre-book-automation
    name: Google SRE Book - Automation
    url: https://sre.google/sre-book/automation-at-google/
    offline_cache: true
    priority: required
  guides:
  - id: kubernetes-self-healing
    name: Kubernetes Self-Healing Mechanisms
    url: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/
    offline_cache: true
  - id: runbook-automation
    name: PagerDuty Runbook Automation Guide
    url: https://www.pagerduty.com/resources/learn/runbook-automation/
    offline_cache: true
  learning_resources:
  - id: sre-workbook
    title: The Site Reliability Workbook
    type: book
    reference: 'ISBN: 978-1492029502'
tooling:
  infrastructure_tools:
  - tool: Kubernetes
    purpose: Review pod restart policies and liveness probes
    command: kubectl get pods -A -o jsonpath='{.items[*].spec.restartPolicy}'
  - tool: PagerDuty
    purpose: Review automated remediation actions
    command: Check PagerDuty Runbook Automation configurations
  - tool: AWS Systems Manager
    purpose: Review automated runbooks
    command: aws ssm list-documents --document-type Automation
  - tool: Ansible
    purpose: Review recovery playbooks
    command: ansible-playbook --list-tasks recovery-playbooks/
  monitoring_queries:
  - system: Prometheus
    query: sum(increase(automated_recovery_success_total[7d])) / sum(increase(automated_recovery_attempts_total[7d]))
    purpose: Measure automated recovery success rate
    threshold: '> 95%'
  - system: Prometheus
    query: avg(recovery_duration_seconds)
    purpose: Track average recovery duration
    threshold: Below RTO
  scripts:
  - id: recovery-analyzer
    language: python
    purpose: Analyze recovery automation coverage
    source: inline
    code: |
      #!/usr/bin/env python3
      """
      Recovery Automation Coverage Analyzer
      Maps services to their recovery automation status
      """
      import yaml
      import json

      def analyze_kubernetes_healing(namespace):
          # Check liveness/readiness probes
          # Check restart policies
          # Check PodDisruptionBudgets
          pass

      def analyze_runbook_automation(runbooks_dir):
          # Parse runbook definitions
          # Identify automated vs manual steps
          # Calculate automation percentage
          pass

      def compare_with_rto(services, recovery_times):
          # Compare actual recovery to RTO
          # Identify services not meeting RTO
          pass
signals:
  critical:
  - id: RA-CRIT-001
    signal: Critical services lack recovery automation
    evidence_indicators:
    - No automated recovery procedures for Tier-1 services
    - Recovery relies entirely on manual intervention
    explanation: |
      Critical services without recovery automation will have extended
      outages during failures, especially outside business hours.
      Manual recovery is slow and error-prone under pressure.
    remediation: Implement automated recovery for all Tier-1 services
  - id: RA-CRIT-002
    signal: Recovery automation not tested
    evidence_indicators:
    - No chaos experiments exercise recovery automation
    - Recovery has not been validated end-to-end
    explanation: |
      Untested recovery automation may fail when needed most.
      Recovery procedures must be regularly exercised to ensure
      they work correctly.
    remediation: Include recovery validation in chaos experiments
  high:
  - id: RA-HIGH-001
    signal: Recovery times exceed RTO
    explanation: Services are not recovering within required timeframes
    remediation: Optimize recovery procedures or adjust RTO expectations
  - id: RA-HIGH-002
    signal: Self-healing mechanisms disabled or misconfigured
    explanation: Kubernetes liveness probes or restart policies not working
    remediation: Review and fix self-healing configurations
  medium:
  - id: RA-MED-001
    signal: Partial automation leaves manual gaps
    remediation: Identify and automate remaining manual recovery steps
  - id: RA-MED-002
    signal: Recovery automation lacks observability
    remediation: Add logging and metrics to recovery procedures
  low:
  - id: RA-LOW-001
    signal: Recovery runbooks not version controlled
  positive:
  - id: RA-POS-001
    signal: All critical services have automated recovery
  - id: RA-POS-002
    signal: Recovery automation regularly tested via chaos experiments
  - id: RA-POS-003
    signal: Recovery times consistently below RTO
procedure:
  context:
    cognitive_mode: evaluative
    ensemble_role: auditor
  steps:
  - id: '1'
    name: Inventory Recovery Requirements
    description: |
      Document RTO requirements for each service tier and identify
      what recovery automation is required to meet these objectives.
    duration_estimate: 45 min
    questions:
    - What are the RTO requirements for each service tier?
    - What failure scenarios require recovery procedures?
    - What is the current state of recovery automation?
    expected_findings:
    - RTO matrix by service tier
    - Gap analysis of recovery requirements vs automation
  - id: '2'
    name: Assess Self-Healing Mechanisms
    description: |
      Review infrastructure-level self-healing such as Kubernetes
      probes, restart policies, and auto-scaling configurations.
    duration_estimate: 45 min
    commands:
    - purpose: Check liveness probe configurations
      command: kubectl get pods -A -o jsonpath='{.items[*].spec.containers[*].livenessProbe}'
    - purpose: Check restart policies
      command: kubectl get pods -A -o jsonpath='{.items[*].spec.restartPolicy}'
    - purpose: Check HPA configurations
      command: kubectl get hpa -A
    expected_findings:
    - Self-healing configuration status for all services
    - Gaps in probe or restart configurations
  - id: '3'
    name: Review Recovery Automation
    description: |
      Examine automated runbooks, recovery scripts, and remediation
      automation for completeness and correctness.
    duration_estimate: 60 min
    commands:
    - purpose: List automated runbooks
      command: ls -la runbooks/ recovery/
    - purpose: Check for manual steps in runbooks
      command: grep -r 'manual\|human\|operator' runbooks/
    expected_findings:
    - Inventory of automated recovery procedures
    - Identification of manual steps remaining
  - id: '4'
    name: Validate Recovery Testing
    description: |
      Verify that recovery automation is exercised through chaos
      experiments and that recovery times are measured.
    duration_estimate: 45 min
    questions:
    - Are chaos experiments configured to test recovery?
    - Are recovery times measured and tracked?
    - When was recovery last tested for each critical service?
    expected_findings:
    - Recovery testing frequency for each service
    - Historical recovery time data
  - id: '5'
    name: Measure Recovery Performance
    description: |
      Analyze historical recovery data to determine if recovery
      times meet RTO requirements.
    duration_estimate: 45 min
    commands:
    - purpose: Query recovery time metrics
      command: curl -s 'prometheus:9090/api/v1/query?query=histogram_quantile(0.99,recovery_duration_seconds_bucket)'
    expected_findings:
    - P99 recovery times by service
    - RTO compliance assessment
output:
  deliverables:
  - type: finding_list
    format: structured
  - type: recovery_assessment
    format: table
    sections:
    - Service
    - RTO Requirement
    - Automation Status
    - Measured Recovery Time
    - Compliance
  - type: summary
    format: prose
    sections:
    - Executive Summary
    - Recovery Automation Coverage
    - RTO Compliance Analysis
    - Recommendations
  confidence_guidance:
    high: Recovery tested via chaos experiments with measured times
    medium: Automation exists but not recently tested
    low: Based on configuration review without execution data
offline:
  capability: partial
  cache_manifest:
    knowledge:
    - source_id: sre-book-automation
      priority: required
    - source_id: kubernetes-self-healing
      priority: recommended
profiles:
  membership:
    quick:
      included: false
      reason: Requires comprehensive recovery testing validation
    full:
      included: true
      priority: 1
    production:
      included: true
      priority: 1
closeout_checklist:
- id: ra-001
  item: RTO requirements documented for all services
  level: CRITICAL
  verification: manual
  verification_notes: Confirm RTO matrix exists and is current
  expected: Confirmed by reviewer
- id: ra-002
  item: Critical services have automated recovery
  level: CRITICAL
  verification: manual
  verification_notes: Verify recovery automation exists for Tier-1 services
  expected: Confirmed by reviewer
- id: ra-003
  item: Recovery automation tested via chaos experiments
  level: BLOCKING
  verification: manual
  verification_notes: Confirm chaos experiments exercise recovery paths
  expected: Confirmed by reviewer
- id: ra-004
  item: Recovery times meet RTO requirements
  level: BLOCKING
  verification: manual
  verification_notes: Review recovery time metrics vs RTO
  expected: Confirmed by reviewer
governance:
  applicable_to:
    archetypes:
    - distributed-system
    - microservices
    - cloud-native
  compliance_frameworks:
  - framework: SOC 2
    controls:
    - CC7.4
    - CC7.5
  - framework: ISO 27001
    controls:
    - A.17.1
    - A.17.2
relationships:
  commonly_combined:
  - reliability-resilience.resilience-testing.failure-mode-coverage
  - reliability-resilience.disaster-recovery.rto-rpo-validation
  - reliability-resilience.high-availability.failover-mechanisms
